<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>Shared Storage API</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <link href="https://www.w3.org/StyleSheets/TR/2021/cg-draft" rel="stylesheet">
  <meta content="Bikeshed version c67c745b1, updated Fri Jan 17 14:27:28 2025 -0800" name="generator">
  <link href="https://github.com/WICG/shared-storage" rel="canonical">
  <meta content="d0d2cb43bb3482257a4066cf8f8f5d602be6bda3" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>
/* adapted from .XXX at https://resources.whatwg.org/standard.css */
.todo {
  color: #D50606;
  background: white;
  border: solid #D50606;
}

span.todo {
  padding-top: 0;
  padding-bottom: 0;
}

.todo::before { content: 'TODO: '; }

span.todo::before {
  left: 0;
  top: -0.25em;
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-idl-highlighting */
pre.idl.highlight {
    background: var(--borderedblock-bg, var(--def-bg));
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
<style>/* Boilerplate: style-var-click-highlighting */
/*
Colors were chosen in Lab using https://nixsensor.com/free-color-converter/
D50 2deg illuminant, L in [0,100], a and b in [-128, 128]
0 = lab(85,0,85)
1 = lab(85,80,30)
2 = lab(85,-40,40)
3 = lab(85,-50,0)
4 = lab(85,5,15)
5 = lab(85,-10,-50)
6 = lab(85,35,-15)

For darkmode:
0 = oklab(50%   0%  108%)
1 = oklab(50% -51%   51%)
2 = oklab(50% -64%  -20%)
3 = oklab(50%   6%   19%)
4 = oklab(50% -12%  -64%)
5 = oklab(50%  44%  -19%)  
6 = oklab(50% 102%   38%)
*/

[data-algorithm] var { cursor: pointer; }
var[data-var-color] { background-color: var(--var-bg); box-shadow: 0 0 0 2px var(--var-bg); }

var[data-var-color] { --var-bg: #F4D200; }
var[data-var-color="1"] { --var-bg: #FF87A2; }
var[data-var-color="2"] { --var-bg: #96E885; }
var[data-var-color="3"] { --var-bg: #3EEED2; }
var[data-var-color="4"] { --var-bg: #EACFB6; }
var[data-var-color="5"] { --var-bg: #82DDFF; }
var[data-var-color="6"] { --var-vg: #FFBCF2; }

@media (prefers-color-scheme: dark) {
	var[data-var-color] { --var-bg: #bc1a00; }
	var[data-var-color="1"] { --var-bg: #007f00; }
	var[data-var-color="2"] { --var-bg: #008698; }
	var[data-var-color="3"] { --var-bg: #7f5b2b; }
	var[data-var-color="4"] { --var-bg: #004df3; }
	var[data-var-color="5"] { --var-bg: #a1248a; }
	var[data-var-color="6"] { --var-vg: #ff0000; }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Shared Storage API</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#CG-DRAFT">Draft Community Group Report</a>, <time class="dt-updated" datetime="2025-01-28">28 January 2025</time></p>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://github.com/WICG/shared-storage">https://github.com/WICG/shared-storage</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/WICG/shared-storage/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:cammie@chromium.org">Camillia Smith Barnes</a> (<a class="p-org org" href="https://google.com">Google</a>)
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 the Contributors to the Shared Storage API Specification, published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a> under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a>.
A human-readable <a href="http://www.w3.org/community/about/agreements/cla-deed/">summary</a> is available. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>Shared Storage is a storage API that is intentionally not partitioned by top-level traversable site (though still partitioned by context origin of course!). To limit cross-site reidentification of users, data in Shared Storage may only be read in a restricted environment that has carefully constructed output gates.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This specification was published by the <a href="https://www.w3.org/community/wicg/">Web Platform Incubator Community Group</a>.
  It is not a W3C Standard nor is it on the W3C Standards Track.

  Please note that under the <a href="https://www.w3.org/community/about/agreements/cla/">W3C Community Contributor License Agreement (CLA)</a> there is a limited opt-out and other conditions apply.

  Learn more about <a href="http://www.w3.org/community/">W3C Community and Business Groups</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li>
     <a href="#worklet"><span class="secno">2</span> <span class="content">The <code class="idl"><span>SharedStorageWorklet</span></code> Interface</span></a>
     <ol class="toc">
      <li><a href="#run-op-shared-storage-worklet"><span class="secno">2.1</span> <span class="content">Run Operation Methods on <code class="idl"><span>SharedStorageWorklet</span></code></span></a>
      <li>
       <a href="#worklet-monkey-patch"><span class="secno">2.2</span> <span class="content">Monkey Patch for <span>Worklets</span></span></a>
       <ol class="toc">
        <li><a href="#set-up-a-worklet-environment-settings-object-monkey-patch"><span class="secno">2.2.1</span> <span class="content">Monkey Patch for <span>set up a worklet environment settings object</span></span></a>
        <li><a href="#create-a-worklet-global-scope-monkey-patch"><span class="secno">2.2.2</span> <span class="content">Monkey Patch for <span>create a worklet global scope</span></span></a>
        <li><a href="#fetch-a-worklet-script-graph-monkey-patch"><span class="secno">2.2.3</span> <span class="content">Monkey Patch for <span>fetch a worklet script graph</span></span></a>
        <li><a href="#worklet-allowed-header"><span class="secno">2.2.4</span> <span class="content">The `<code><span>Shared-Storage-Cross-Origin-Worklet-Allowed</span></code>` HTTP response header</span></a>
        <li><a href="#http-fetch-monkey-patch"><span class="secno">2.2.5</span> <span class="content">Monkey Patch for <span>HTTP fetch</span></span></a>
        <li><a href="#add-module-monkey-patch"><span class="secno">2.2.6</span> <span class="content">Monkey Patch for <code class="idl"><span>addModule()</span></code></span></a>
       </ol>
      <li>
       <a href="#global-scope"><span class="secno">2.3</span> <span class="content">The <code class="idl"><span>SharedStorageWorkletGlobalScope</span></code></span></a>
       <ol class="toc">
        <li><a href="#request-destination-monkey-patch"><span class="secno">2.3.1</span> <span class="content">Monkey Patch for request <span>destination</span></span></a>
        <li><a href="#scope-algo"><span class="secno">2.3.2</span> <span class="content"><code class="idl"><span>SharedStorageWorkletGlobalScope</span></code> algorithms</span></a>
       </ol>
      <li><a href="#reporting"><span class="secno">2.4</span> <span class="content"><code class="idl"><span>SharedStorageUrlWithMetadata</span></code> and Reporting</span></a>
      <li>
       <a href="#budgets"><span class="secno">2.5</span> <span class="content">Entropy Budgets</span></a>
       <ol class="toc">
        <li><a href="#nav-budget"><span class="secno">2.5.1</span> <span class="content">Navigation Entropy Budget</span></a>
        <li>
         <a href="#top-budgets"><span class="secno">2.5.2</span> <span class="content"><span>Top-Level Traversable</span> Entropy Budgets</span></a>
         <ol class="toc">
          <li><a href="#patch-trav-nav"><span class="secno">2.5.2.1</span> <span class="content">Monkey patch for <span>Traversable Navigables</span></span></a>
          <li><a href="#patch-navigables"><span class="secno">2.5.2.2</span> <span class="content">Monkey patch for <span>Navigables</span></span></a>
          <li><a href="#saved-queries"><span class="secno">2.5.2.3</span> <span class="content">Saved queries</span></a>
          <li><a href="#charge-top-trav-budgets"><span class="secno">2.5.2.4</span> <span class="content">Charging the <span>Top-Level Traversable</span> Entropy Budgets</span></a>
         </ol>
       </ol>
     </ol>
    <li>
     <a href="#backend"><span class="secno">3</span> <span class="content">Shared Storage’s Backend</span></a>
     <ol class="toc">
      <li><a href="#storage-monkey-patch"><span class="secno">3.1</span> <span class="content">Monkey Patch for the <span>Storage Model</span></span></a>
      <li><a href="#database"><span class="secno">3.2</span> <span class="content">The <span>Shared Storage Database</span></span></a>
      <li><a href="#database-algorithms"><span class="secno">3.3</span> <span class="content">The <span>Database</span> Algorithms</span></a>
     </ol>
    <li><a href="#window-extension"><span class="secno">4</span> <span class="content">Extension to the <code class="idl"><span>Window</span></code> interface</span></a>
    <li><a href="#shared-storage-modifier-method-interface-group"><span class="secno">5</span> <span class="content">The <code class="idl"><span>SharedStorageModifierMethod</span></code> Interface Group</span></a>
    <li>
     <a href="#shared-storage-interface"><span class="secno">6</span> <span class="content">The <code class="idl"><span>SharedStorage</span></code> Interface</span></a>
     <ol class="toc">
      <li><a href="#run-op-shared-storage"><span class="secno">6.1</span> <span class="content">Run Operation Methods on <code class="idl"><span>SharedStorage</span></code></span></a>
      <li><a href="#create-a-new-worklet-via-shared-storage"><span class="secno">6.2</span> <span class="content">Create a new worklet via <code class="idl"><span>SharedStorage</span></code></span></a>
      <li><a href="#batch-update"><span class="secno">6.3</span> <span class="content">BatchUpdate Method</span></a>
      <li><a href="#setter"><span class="secno">6.4</span> <span class="content">Setter/Deleter Methods</span></a>
      <li><a href="#getter"><span class="secno">6.5</span> <span class="content">Getter Methods</span></a>
      <li><a href="#iteration"><span class="secno">6.6</span> <span class="content">Iteration</span></a>
     </ol>
    <li><a href="#http"><span class="secno">7</span> <span class="content">Triggering Operations Via HTTP Response Header</span></a>
    <li>
     <a href="#html-monkeypatches"><span class="secno">8</span> <span class="content">HTML Monkey Patches</span></a>
     <ol class="toc">
      <li><a href="#html-attr"><span class="secno">8.1</span> <span class="content"><code class="idl"><span>sharedStorageWritable</span></code> &amp; <code><span>sharedstoragewritable</span></code> Attributes</span></a>
      <li>
       <a href="#html-algo"><span class="secno">8.2</span> <span class="content">HTML Algorithm Modifications</span></a>
       <ol class="toc">
        <li><a href="#mod-update-img"><span class="secno">8.2.1</span> <span class="content">Modification to <span>Update the image data</span> Algorithm</span></a>
        <li><a href="#mod-create-nav"><span class="secno">8.2.2</span> <span class="content">Modification to <span>Create navigation params by fetching</span> Algorithm</span></a>
       </ol>
     </ol>
    <li>
     <a href="#fetch-monkeypatches"><span class="secno">9</span> <span class="content">Fetch Monkey Patches</span></a>
     <ol class="toc">
      <li><a href="#fetch-attr"><span class="secno">9.1</span> <span class="content"><code class="idl"><span>sharedStorageWritable</span></code> Key</span></a>
      <li>
       <a href="#mod-fetch-algo"><span class="secno">9.2</span> <span class="content">Fetch Algorithm Modifications</span></a>
       <ol class="toc">
        <li><a href="#mod-request-con"><span class="secno">9.2.1</span> <span class="content">Modification to the <span>Request Constructor</span> Algorithm</span></a>
        <li><a href="#mod-http-net-fetch"><span class="secno">9.2.2</span> <span class="content">Modification to <span>HTTP network or cache fetch</span> Algorithm</span></a>
        <li><a href="#mod-http-fetch"><span class="secno">9.2.3</span> <span class="content">Modification to <span>HTTP fetch</span> Algorithm</span></a>
       </ol>
      <li>
       <a href="#headers"><span class="secno">9.3</span> <span class="content">Shared Storage HTTP Headers</span></a>
       <ol class="toc">
        <li><a href="#data-origin-request-header"><span class="secno">9.3.1</span> <span class="content">`<code><span>Sec-Shared-Storage-Data-Origin</span></code>` Request Header</span></a>
        <li><a href="#cross-origin-response-header"><span class="secno">9.3.2</span> <span class="content">`<code><span>Shared-Storage-Cross-Origin-Worklet-Allowed</span></code>` Response Header</span></a>
        <li><a href="#writable-request-header"><span class="secno">9.3.3</span> <span class="content">`<code><span>Sec-Shared-Storage-Writable</span></code>` Request Header</span></a>
        <li><a href="#write-response-header"><span class="secno">9.3.4</span> <span class="content">`<code><span>Shared-Storage-Write</span></code>` Response Header</span></a>
       </ol>
      <li><a href="#ss-fetch-algo"><span class="secno">9.4</span> <span class="content">Shared Storage Fetch-Related Algorithms</span></a>
     </ol>
    <li>
     <a href="#web-locks-integration"><span class="secno">10</span> <span class="content">Web Locks Integration</span></a>
     <ol class="toc">
      <li><a href="#user-agent-associated-state"><span class="secno">10.1</span> <span class="content">User Agent Associated State</span></a>
      <li><a href="#shared-storage-worklet-navigator-interface"><span class="secno">10.2</span> <span class="content"><code class="idl"><span>SharedStorageWorkletNavigator</span></code> interface</span></a>
      <li><a href="#web-locks-api-monkey-patches"><span class="secno">10.3</span> <span class="content">Web Locks IDLs Monkey Patches</span></a>
      <li><a href="#monkey-patch-for-lock-manager-description"><span class="secno">10.4</span> <span class="content">Monkey Patch for lock manager’s description</span></a>
      <li><a href="#monkey-patch-for-the-obtain-a-lock-manager-algorithm"><span class="secno">10.5</span> <span class="content">Monkey Patch for the "obtain a lock manager" algorithm</span></a>
      <li><a href="#handle-callback-within-a-shared-storage-lock-algorithm"><span class="secno">10.6</span> <span class="content">"Handle callback within a shared storage lock" algorithm</span></a>
     </ol>
    <li><a href="#permission"><span class="secno">11</span> <span class="content">Permissions Policy Integration</span></a>
    <li><a href="#clear"><span class="secno">12</span> <span class="content">Clear Site Data Integration</span></a>
    <li><a href="#privacy"><span class="secno">13</span> <span class="content">Privacy Considerations</span></a>
    <li>
     <a href="#w3c-conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#w3c-conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
    <em>This section is not normative.</em> 
   <p>In order to prevent cross-site user tracking, browsers are partitioning all forms of storage by <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top">top-level traversable</a> site; see <a data-link-type="dfn" href="https://privacycg.github.io/storage-partitioning/#client-side-storage-partitioning" id="ref-for-client-side-storage-partitioning">Client-Side Storage Partitioning</a>. But, there are many <a data-link-type="dfn" href="https://github.com/WICG/shared-storage#example-scenarios" id="ref-for-example-scenarios">legitimate use cases</a> currently relying on unpartitioned storage.</p>
   <p>This document introduces a new storage API that is intentionally not partitioned by <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top①">top-level traversable</a> site (though still partitioned by context origin), in order to serve a number of the use cases needing unpartitioned storage. To limit cross-site reidentification of users, data in Shared Storage may only be read in a restricted environment, called a worklet, and any output from the worklet is in the form of a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element">fenced frame</a> or a <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#" id="ref-for-something">Private Aggregation</a> report. Over time, there may be additional output gates included in the standard.</p>
   <div class="example" id="example-baea556b">
    <a class="self-link" href="#example-baea556b"></a> <code>a.example</code> randomly assigns users to groups in a way that is consistent cross-site. 
    <p>Inside an <code>a.example</code> iframe:</p>
<pre class="lang-js highlight"><c- a>function</c-> generateSeed<c- p>()</c-> <c- p>{</c-> … <c- p>}</c->
<c- k>await</c-> window<c- p>.</c->sharedStorage<c- p>.</c->worklet<c- p>.</c->addModule<c- p>(</c-><c- t>'experiment.js'</c-><c- p>);</c->

<c- c1>// Only write a cross-site seed to a.example’s storage if there isn’t one yet.</c->
window<c- p>.</c->sharedStorage<c- p>.</c->set<c- p>(</c-><c- t>'seed'</c-><c- p>,</c-> generateSeed<c- p>(),</c-> <c- p>{</c-> ignoreIfPresent<c- o>:</c-> <c- kc>true</c-> <c- p>});</c->

<c- a>let</c-> fencedFrameConfig <c- o>=</c-> <c- k>await</c-> window<c- p>.</c->sharedStorage<c- p>.</c->selectURL<c- p>(</c->
  <c- t>'select-url-for-experiment'</c-><c- p>,</c->
  <c- p>[</c->
    <c- p>{</c->url<c- o>:</c-> <c- u>"blob:https://a.example/123…"</c-><c- p>,</c-> reportingMetadata<c- o>:</c-> <c- p>{</c-><c- u>"click"</c-><c- o>:</c-> <c- u>"https://report.example/1..."</c-><c- p>}},</c->
    <c- p>{</c->url<c- o>:</c-> <c- u>"blob:https://b.example/abc…"</c-><c- p>,</c-> reportingMetadata<c- o>:</c-> <c- p>{</c-><c- u>"click"</c-><c- o>:</c-> <c- u>"https://report.example/a..."</c-><c- p>}},</c->
    <c- p>{</c->url<c- o>:</c-> <c- u>"blob:https://c.example/789…"</c-><c- p>}</c->
  <c- p>],</c->
  <c- p>{</c-> data<c- o>:</c-> <c- p>{</c-> name<c- o>:</c-> <c- t>'experimentA'</c-> <c- p>}</c-> <c- p>}</c->
<c- p>);</c->

<c- c1>// Assumes that the fenced frame 'my-fenced-frame' has already been attached.</c->
document<c- p>.</c->getElementById<c- p>(</c-><c- t>'my-fenced-frame'</c-><c- p>).</c->config <c- o>=</c-> fencedFrameConfig<c- p>;</c->
</pre>
    <p>inside the <code>experiment.js</code> worklet script:</p>
<pre class="lang-js highlight"><c- a>class</c-> SelectURLOperation <c- p>{</c->
  hash<c- p>(</c->experimentName<c- p>,</c-> seed<c- p>)</c-> <c- p>{</c-> … <c- p>}</c->

  <c- k>async</c-> run<c- p>(</c->urls<c- p>,</c-> data<c- p>)</c-> <c- p>{</c->
    <c- a>const</c-> seed <c- o>=</c-> <c- k>await</c-> <c- k>this</c-><c- p>.</c->sharedStorage<c- p>.</c->get<c- p>(</c-><c- t>'seed'</c-><c- p>);</c->
    <c- k>return</c-> hash<c- p>(</c->data<c- p>.</c->name<c- p>,</c-> seed<c- p>)</c-> <c- o>%</c-> urls<c- p>.</c->length<c- p>;</c->
  <c- p>}</c->
<c- p>}</c->
register<c- p>(</c-><c- t>'select-url-for-experiment'</c-><c- p>,</c-> SelectURLOperation<c- p>);</c->
</pre>
   </div>
   <h2 class="heading settled" data-level="2" id="worklet"><span class="secno">2. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet">SharedStorageWorklet</a></code> Interface</span><a class="self-link" href="#worklet"></a></h2>
    The <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①">SharedStorageWorklet</a></code> object allows developers to supply <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#module-script" id="ref-for-module-script">module scripts</a> to process <a data-link-type="dfn" href="#shared-storage" id="ref-for-shared-storage">Shared Storage</a> data and then output the result through one or more of the output gates. Currently there are two output gates, the <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#" id="ref-for-something①">Private Aggregation</a> output gate and the <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl">URL-selection</a></code> output gate. 
<pre class="idl highlight def"><c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://wicg.github.io/fenced-frame/#fencedframeconfig" id="ref-for-fencedframeconfig"><c- n>FencedFrameConfig</c-></a>) <dfn class="dfn-paneled idl-code" data-dfn-type="typedef" data-export id="typedefdef-sharedstorageresponse"><code><c- g>SharedStorageResponse</c-></code></dfn>;
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstorageworklet"><code><c- g>SharedStorageWorklet</c-></code></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet"><c- n>Worklet</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sharedstorageresponse" id="ref-for-typedefdef-sharedstorageresponse"><c- n>SharedStorageResponse</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①"><c- g>selectURL</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorklet/selectURL(name, urls, options), SharedStorageWorklet/selectURL(name, urls)" data-dfn-type="argument" data-export id="dom-sharedstorageworklet-selecturl-name-urls-options-name"><code><c- g>name</c-></code></dfn>,
                               <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-sharedstorageurlwithmetadata" id="ref-for-dictdef-sharedstorageurlwithmetadata"><c- n>SharedStorageUrlWithMetadata</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorklet/selectURL(name, urls, options), SharedStorageWorklet/selectURL(name, urls)" data-dfn-type="argument" data-export id="dom-sharedstorageworklet-selecturl-name-urls-options-urls"><code><c- g>urls</c-></code></dfn>,
                               <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorklet/selectURL(name, urls, options), SharedStorageWorklet/selectURL(name, urls)" data-dfn-type="argument" data-export id="dom-sharedstorageworklet-selecturl-name-urls-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run"><c- g>run</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorklet/run(name, options), SharedStorageWorklet/run(name)" data-dfn-type="argument" data-export id="dom-sharedstorageworklet-run-name-options-name"><code><c- g>name</c-></code></dfn>,
                   <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions①"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorklet/run(name, options), SharedStorageWorklet/run(name)" data-dfn-type="argument" data-export id="dom-sharedstorageworklet-run-name-options-options"><code><c- g>options</c-></code></dfn> = {});
};
</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②">SharedStorageWorklet</a></code> has an associated boolean <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorklet" data-dfn-type="dfn" data-noexport id="sharedstorageworklet-addmodule-initiated">addModule initiated</dfn>, initialized to false.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet③">SharedStorageWorklet</a></code> has an associated <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString①">USVString</a></code> <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorklet" data-dfn-type="dfn" data-noexport id="sharedstorageworklet-data-origin">data origin</dfn>, initialized to <code>"context-origin"</code>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet④">SharedStorageWorklet</a></code> has an associated boolean <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorklet" data-dfn-type="dfn" data-noexport id="sharedstorageworklet-has-cross-origin-data-origin">has cross-origin data origin</dfn>, initialized to false.</p>
   <p>Because adding multiple <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#module-script" id="ref-for-module-script①">module scripts</a> via <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule">addModule()</a></code> for the same <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet⑤">SharedStorageWorklet</a></code> would give the caller the ability to store data from <a data-link-type="dfn" href="#shared-storage" id="ref-for-shared-storage①">Shared Storage</a> in global variables defined in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#module-script" id="ref-for-module-script②">module scripts</a> and then exfiltrate the data through later call(s) to <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule①">addModule()</a></code>, each <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet⑥">SharedStorageWorklet</a></code> can only call <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule②">addModule()</a></code> once. The <a data-link-type="dfn" href="#sharedstorageworklet-addmodule-initiated" id="ref-for-sharedstorageworklet-addmodule-initiated">addModule initiated</a> boolean makes it possible to enforce this restriction.</p>
   <p>When <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule③">addModule()</a></code> is called for a worklet, it will run <a data-link-type="dfn" href="#check-if-addmodule-is-allowed-and-update-state" id="ref-for-check-if-addmodule-is-allowed-and-update-state">check if addModule is allowed and update state</a>, and if the result is "DisallowedDueToNonPreferenceError", or if the result is "DisallowedDueToPreferenceError" and the worklet’s <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin">has cross-origin data origin</a> is false, it will cause <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule④">addModule()</a></code> to fail, as detailed in the <a href="#add-module-monkey-patch">§ 2.2.6 Monkey Patch for addModule()</a>.</p>
   <div class="algorithm" data-algorithm="check if user preference setting allows access to shared storage">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-if-user-preference-setting-allows-access-to-shared-storage">check if user preference setting allows access to shared storage</dfn> given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object">environment settings object</a> <var>environment</var> and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin">origin</a> <var>origin</var>, run the following step: 
    <ol>
     <li data-md>
      <p>Using values available in <var>environment</var> and <var>origin</var> as needed, perform an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined">implementation-defined</a> algorithm to return either true or false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="determine whether shared storage is allowed by context">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="determine-whether-shared-storage-is-allowed-by-context">determine whether shared storage is allowed by context</dfn>, given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①">environment settings object</a> <var>environment</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①">origin</a> <var>origin</var>, and a boolean <var>allowedInOpaqueOriginContext</var>, run these steps: 
    <ol>
     <li data-md>
      <p>If <var>environment</var> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#secure-context" id="ref-for-secure-context">secure context</a>, then return false.</p>
     <li data-md>
      <p>If <var>allowedInOpaqueOriginContext</var> is false and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin">origin</a> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque">opaque origin</a>, then return false.</p>
     <li data-md>
      <p>If <var>origin</var> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque①">opaque origin</a>, then return false.</p>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global">global object</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert">Assert</a>: <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window">Window</a></code> or a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope">SharedStorageWorkletGlobalScope</a></code>.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①">Window</a></code>, and if the result of running <a data-link-type="dfn" href="https://www.w3.org/TR/permissions-policy/#algo-is-feature-enabled" id="ref-for-algo-is-feature-enabled">Is feature enabled in document for origin?</a> on "<a data-link-type="dfn" href="#permissionspolicy-shared-storage" id="ref-for-permissionspolicy-shared-storage">shared-storage</a>", <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window">associated document</a>, and <var>origin</var> returns false, then return false.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site" id="ref-for-obtain-a-site">obtain a site</a> with <var>origin</var> is not <a data-link-type="dfn" href="https://github.com/privacysandbox/attestation#enrolled" id="ref-for-enrolled">enrolled</a>, then return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="note" role="note">
     Here are the scenarios where the algorithms <a data-link-type="dfn" href="#determine-whether-shared-storage-is-allowed-by-context" id="ref-for-determine-whether-shared-storage-is-allowed-by-context">determine whether shared storage is allowed by context</a> and <a data-link-type="dfn" href="#check-if-user-preference-setting-allows-access-to-shared-storage" id="ref-for-check-if-user-preference-setting-allows-access-to-shared-storage">check if user preference setting allows access to shared storage</a> are used: 
    <ul>
     <li data-md>
      <p>For creating a worklet, <var>environment</var> is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object②">environment settings object</a> associated with the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②">Window</a></code> that created the worklet, and <var>origin</var> is the module script url’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin">origin</a>.</p>
     <li data-md>
      <p>For running operations on a worklet (from a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③">Window</a></code>), <var>environment</var> is the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object③">environment settings object</a> associated with the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window④">Window</a></code> that created the worklet, and <var>origin</var> is the worklet’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes">global scopes</a>[0]'s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm" id="ref-for-concept-global-object-realm">realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①">origin</a>.</p>
     <li data-md>
      <p>For <a href="#setter">§ 6.4 Setter/Deleter Methods</a>, <var>environment</var> is either the current context (when called from a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑤">Window</a></code>) or the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object④">environment settings object</a> associated with the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑥">Window</a></code> that created the worklet (when called from a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①">SharedStorageWorkletGlobalScope</a></code>), and <var>origin</var> is <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②">origin</a>.</p>
     <li data-md>
      <p>For <a href="#ss-fetch-algo">§ 9.4 Shared Storage Fetch-Related Algorithms</a>, <var>environment</var> is the request’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-window" id="ref-for-concept-request-window">window</a>, and <var>origin</var> is the request’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-current-url" id="ref-for-concept-request-current-url">current URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①">origin</a>.</p>
     <li data-md>
      <p>For <a href="#ss-fetch-algo">§ 9.4 Shared Storage Fetch-Related Algorithms</a>, for <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-createworklet" id="ref-for-dom-sharedstorage-createworklet">createWorklet()</a></code> called with a cross-origin worklet script using the <var>dataOrigin</var> option with value <code>"script-origin"</code> (which would result in a worklet where <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin①">has cross-origin data origin</a> is true), and for <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl②">selectURL()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run①">run()</a></code> that operate on a worklet where <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin②">has cross-origin data origin</a> is true, <var>allowedInOpaqueOriginContext</var> is true. For other methods, <var>allowedInOpaqueOriginContext</var> is false.</p>
    </ul>
   </div>
   <div class="algorithm" data-algorithm="check if addModule is allowed and update state">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-if-addmodule-is-allowed-and-update-state">check if addModule is allowed and update state</dfn> given a <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet⑦">SharedStorageWorklet</a></code> <var>worklet</var> and a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url">URL</a> <var>moduleURLRecord</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>If <var>worklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-addmodule-initiated" id="ref-for-sharedstorageworklet-addmodule-initiated①">addModule initiated</a> is true, return "DisallowedDueToNonPreferenceError".</p>
     <li data-md>
      <p>Set <var>worklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-addmodule-initiated" id="ref-for-sharedstorageworklet-addmodule-initiated②">addModule initiated</a> to true.</p>
     <li data-md>
      <p>Let <var>workletDataOrigin</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object">current settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③">origin</a>.</p>
     <li data-md>
      <p>If <var>worklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin">data origin</a> is <code>"script-origin"</code>, set <var>workletDataOrigin</var> to <var>moduleURLRecord</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②">origin</a>.</p>
     <li data-md>
      <p>Otherwise, if <var>worklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin①">data origin</a> is not <code>"context-origin"</code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>customOriginUrl</var> be the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser">URL parser</a> on <var>worklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin②">data origin</a>.</p>
       <li data-md>
        <p>If <var>customOriginUrl</var> is not a valid <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①">URL</a>, return "DisallowedDueToNonPreferenceError".</p>
       <li data-md>
        <p>Set <var>workletDataOrigin</var> to <var>customOriginUrl</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin③">origin</a>.</p>
      </ol>
     <li data-md>
      <p>Let <var>hasCrossOriginDataOrigin</var> be false.</p>
     <li data-md>
      <p>If <var>workletDataOrigin</var> and the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object①">current settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin④">origin</a> are not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin">same origin</a>, then set <var>hasCrossOriginDataOrigin</var> to true.</p>
     <li data-md>
      <p>Let <var>allowedInOpaqueOriginContext</var> be <var>hasCrossOriginDataOrigin</var>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#determine-whether-shared-storage-is-allowed-by-context" id="ref-for-determine-whether-shared-storage-is-allowed-by-context①">determine whether shared storage is allowed by context</a> given the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object②">current settings object</a>, <var>workletDataOrigin</var>, and <var>allowedInOpaqueOriginContext</var> is false, return "DisallowedDueToNonPreferenceError".</p>
     <li data-md>
      <p>Set <var>worklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin③">has cross-origin data origin</a> to <var>hasCrossOriginDataOrigin</var>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-if-user-preference-setting-allows-access-to-shared-storage" id="ref-for-check-if-user-preference-setting-allows-access-to-shared-storage①">check if user preference setting allows access to shared storage</a> given the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object" id="ref-for-current-settings-object③">current settings object</a> and <var>workletDataOrigin</var> is false, return "DisallowedDueToPreferenceError".</p>
     <li data-md>
      <p>Return "Allowed".</p>
    </ol>
   </div>
   <p>Moreover, each <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet⑧">SharedStorageWorklet</a></code>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes①">list of global scopes</a>, initially empty, can contain at most one instance of its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type" id="ref-for-worklet-global-scope-type">worklet global scope type</a>, the <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②">SharedStorageWorkletGlobalScope</a></code>.</p>
   <h3 class="heading settled" data-level="2.1" id="run-op-shared-storage-worklet"><span class="secno">2.1. </span><span class="content">Run Operation Methods on <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet⑨">SharedStorageWorklet</a></code></span><a class="self-link" href="#run-op-shared-storage-worklet"></a></h3>
   <div class="algorithm" data-algorithm="get the select-url result index">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-select-url-result-index">get the select-url result index</dfn>, given <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①⓪">SharedStorageWorklet</a></code> <var>worklet</var>, <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②">DOMString</a></code> <var>operationName</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list">list</a> of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string">strings</a> <var>urlList</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin②">origin</a> <var>workletDataOrigin</var>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable">navigable</a> <var>navigable</var>, <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions②">SharedStorageRunOperationMethodOptions</a></code> <var>options</var>, a <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#pre-specified-report-parameters" id="ref-for-pre-specified-report-parameters">pre-specified report parameters</a> or null <var>preSpecifiedParams</var> and an <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#aggregation-coordinator" id="ref-for-aggregation-coordinator">aggregation coordinator</a> or null <var>aggregationCoordinator</var>, run the following steps. This algorithm will return a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple">tuple</a> consisting of a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②">promise</a> that resolves into an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long">unsigned long</a></code> whose value is the index of the URL selected from <var>urlList</var> and a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean">boolean</a> indicating whether the <a href="#charge-top-trav-budgets">top-level traversable’s budgets</a> should be <a data-link-type="dfn" href="#charge-shared-storage-top-level-traversable-budgets" id="ref-for-charge-shared-storage-top-level-traversable-budgets">charged</a>. 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise③">promise</a>.</p>
     <li data-md>
      <p>Let <var>window</var> be <var>worklet</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object">relevant settings object</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①">Assert</a>: <var>window</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑦">Window</a></code>.</p>
     <li data-md>
      <p>If <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc">browsing context</a> is null, then return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple①">tuple</a> of a (<a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror">TypeError</a></code>, true).</p>
     <li data-md>
      <p>If <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active">fully active</a>, return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple②">tuple</a> of a (<a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①">TypeError</a></code>, true).</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②">Assert</a>: <var>worklet</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes②">global scopes</a>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size">size</a> is 1.</p>
     <li data-md>
      <p>Let <var>globalScope</var> be <var>worklet</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes③">global scopes</a>[0].</p>
     <li data-md>
      <p>Let <var>moduleMapKeyTuples</var> be the result of running <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys">get the keys</a> on <var>globalScope</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①">relevant settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#concept-workerglobalscope-module-map" id="ref-for-concept-workerglobalscope-module-map">module map</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③">Assert</a>: <var>moduleMapKeyTuples</var> has <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-size" id="ref-for-map-size">size</a> 1.</p>
     <li data-md>
      <p>Let <var>moduleURLRecord</var> be <var>moduleMapKeyTuples</var>[0][0].</p>
     <li data-md>
      <p>Let <var>savedQueryName</var> be <var>options</var>["<code>savedQuery</code>"].</p>
     <li data-md>
      <p>If <var>savedQueryName</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①">string</a> that is not the empty string, then:</p>
      <ol>
       <li data-md>
        <p>Let <var>callbackTask</var> be the result of running <a data-link-type="dfn" href="#obtain-a-callback-to-process-the-saved-index-result" id="ref-for-obtain-a-callback-to-process-the-saved-index-result">obtain a callback to process the saved index result</a>, given <var>window</var>, <var>urlList</var>, and <var>promise</var>.</p>
       <li data-md>
        <p>Let <var>savedIndex</var> be the result of running <a data-link-type="dfn" href="#get-the-index-for-a-saved-query" id="ref-for-get-the-index-for-a-saved-query">get the index for a saved query</a> on <var>navigable</var>, <var>workletDataOrigin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>, and <var>callbackTask</var>.</p>
       <li data-md>
        <p>If <var>savedIndex</var> is "pending callback", then return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple③">tuple</a> (<var>promise</var>, false).</p>
        <p class="note" role="note"><span class="marker">Note:</span> <var>callbackTask</var> is now stored to be run when a previously obtained worklet agent completes its operation to select the index for this query. When the steps of <var>callbackTask</var> are run, <var>promise</var> will be resolved.</p>
       <li data-md>
        <p>If <var>savedIndex</var> is an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long①">unsigned long</a></code>, then:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source">DOM manipulation task source</a>, given <var>window</var>, to run the steps of <var>callbackTask</var>, given <var>savedIndex</var>.</p>
          <p class="note" role="note"><span class="marker">Note:</span> Running the steps of <var>callbackTask</var> will resolve <var>promise</var>.</p>
         <li data-md>
          <p>Return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple④">tuple</a> (<var>promise</var>, false).</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert④">Assert</a> that <var>savedIndex</var> is "pending current operation".</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task">Queue a task</a> on <var>globalScope</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#worklet-event-loop" id="ref-for-worklet-event-loop">worklet event loop</a> to perform the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>operationMap</var> be <var>globalScope</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-operation-map" id="ref-for-sharedstorageworkletglobalscope-operation-map">operation map</a>.</p>
       <li data-md>
        <p>If <var>operationMap</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists">contain</a> <var>operationName</var>, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①">DOM manipulation task source</a>, given <var>window</var>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②">TypeError</a></code>, and abort these steps.</p>
        <p class="note" role="note"><span class="marker">Note:</span> This could happen if <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworkletglobalscope-register" id="ref-for-dom-sharedstorageworkletglobalscope-register">register()</a></code> was never called with <var>operationName</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑤">Assert</a>: <var>operationMap</var>[<var>operationName</var>]'s <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-associated-realm" id="ref-for-dfn-associated-realm">associated realm</a> is <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm">relevant realm</a>.</p>
       <li data-md>
        <p>Let <var>operation</var> be <var>operationMap</var>[<var>operationName</var>], <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value" id="ref-for-dfn-convert-ecmascript-to-idl-value">converted</a> to <code class="idl"><a data-link-type="idl" href="#callbackdef-runfunctionforsharedstorageselecturloperation" id="ref-for-callbackdef-runfunctionforsharedstorageselecturloperation">RunFunctionForSharedStorageSelectURLOperation</a></code>.</p>
       <li data-md>
        <p>Let <var>privateAggregationCompletionTask</var> be the result of <a data-link-type="dfn" href="#set-up-the-private-aggregation-scopes" id="ref-for-set-up-the-private-aggregation-scopes">setting up the Private Aggregation scopes</a> given <var>workletDataOrigin</var>, <var>preSpecifiedParams</var> and <var>aggregationCoordinator</var>.</p>
       <li data-md>
        <p>Let <var>argumentsList</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①">list</a> « <var>urlList</var> ».</p>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragerunoperationmethodoptions-data" id="ref-for-dom-sharedstoragerunoperationmethodoptions-data">data</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①">exists</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append">append</a> it to <var>argumentsList</var>.</p>
       <li data-md>
        <p>Let <var>indexPromise</var> be the result of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function">invoking</a> <var>operation</var> with <var>argumentsList</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled" id="ref-for-dfn-perform-steps-once-promise-is-settled">React</a> to <var>indexPromise</var>:</p>
        <dl class="switch">
         <dt data-md>If it was fulfilled with value <var>index</var>:
         <dd data-md>
          <ol>
           <li data-md>
            <p>If <var>index</var> is greater than <var>urlList</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①">size</a>, then:</p>
            <ol>
             <li data-md>
              <p>If <var>savedQueryName</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②">string</a> that is not the empty string, then run <a data-link-type="dfn" href="#store-the-index-for-a-saved-query" id="ref-for-store-the-index-for-a-saved-query">store the index for a saved query</a> with <var>window</var>, <var>navigable</var>, <var>workletDataOrigin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>, and the <a data-link-type="dfn" href="#default-selecturl-index" id="ref-for-default-selecturl-index">default selectURL index</a>.</p>
             <li data-md>
              <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②">DOM manipulation task source</a>, given <var>window</var>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③">TypeError</a></code>, and abort these steps.</p>
            </ol>
            <p class="note" role="note"><span class="marker">Note:</span> The result index is beyond the input urls' size. This violates the selectURL() protocol, and we don’t know which url should be selected.</p>
            <p>Otherwise:</p>
            <ol>
             <li data-md>
              <p>If <var>savedQueryName</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string③">string</a> that is not the empty string, then run <a data-link-type="dfn" href="#store-the-index-for-a-saved-query" id="ref-for-store-the-index-for-a-saved-query①">store the index for a saved query</a> with <var>window</var>, <var>navigable</var>, <var>workletDataOrigin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>, and <var>index</var>.</p>
             <li data-md>
              <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task③">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source③">DOM manipulation task source</a>, given <var>window</var>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve">resolve</a> <var>promise</var> with <var>index</var>.</p>
             <li data-md>
              <p>Run <var>privateAggregationCompletionTask</var>.</p>
            </ol>
          </ol>
         <dt data-md>If it was rejected:
         <dd data-md>
          <ol>
           <li data-md>
            <p>If <var>savedQueryName</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string④">string</a> that is not the empty string, then run <a data-link-type="dfn" href="#store-the-index-for-a-saved-query" id="ref-for-store-the-index-for-a-saved-query②">store the index for a saved query</a> with <var>window</var>, <var>navigable</var>, <var>workletDataOrigin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>, and the <a data-link-type="dfn" href="#default-selecturl-index" id="ref-for-default-selecturl-index①">default selectURL index</a>.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task④">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source④">DOM manipulation task source</a>, given <var>window</var>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④">TypeError</a></code>.</p>
            <p class="note" role="note"><span class="marker">Note:</span> This indicates that either <var>operationCtor</var>’s run() method encounters an error (where <var>operationCtor</var> is the parameter in <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworkletglobalscope-register" id="ref-for-dom-sharedstorageworkletglobalscope-register①">register()</a></code>), or the result <var>index</var> is a non-integer value, which violates the selectURL() protocol, and we don’t know which url should be selected.</p>
           <li data-md>
            <p>Run <var>privateAggregationCompletionTask</var>.</p>
          </ol>
        </dl>
      </ol>
     <li data-md>
      <p>Return the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple⑤">tuple</a> (<var>promise</var>, true).</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="handle the result of selecting an index">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-the-result-of-selecting-an-index">handle the result of selecting an index</dfn>, given a <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①①">SharedStorageWorklet</a></code> <var>worklet</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑤">environment settings object</a> <var>environment</var>, a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> <var>document</var>, a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/media-source/#dom-appendmode-sequence" id="ref-for-dom-appendmode-sequence">sequence</a></code> of <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstorageurlwithmetadata" id="ref-for-dictdef-sharedstorageurlwithmetadata①">SharedStorageUrlWithMetadata</a></code> <var>urls</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list②">list</a> of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑤">strings</a> <var>urlList</var>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable①">navigable</a> <var>navigable</var>, a <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions③">SharedStorageRunOperationMethodOptions</a></code> <var>options</var>, a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#traversable-navigable-fenced-frame-config-mapping" id="ref-for-traversable-navigable-fenced-frame-config-mapping">fenced frame config mapping</a> <var>fencedFrameConfigMapping</var>, a <a data-link-type="dfn" href="https://www.ietf.org/rfc/rfc4122.txt#urn-uuid" id="ref-for-urn-uuid">urn uuid</a> <var>urn</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean①">boolean</a> <var>shouldChargeTopLevelBudgets</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean②">boolean</a> <var>shouldUseDefaultIndex</var>, and an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long②">unsigned long</a></code> <var>resultIndex</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>site</var> be the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site" id="ref-for-obtain-a-site①">obtain a site</a> with <var>document</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin">origin</a>.</p>
     <li data-md>
      <p>Let <var>remainingBudget</var> be the result of running <a data-link-type="dfn" href="#determine-remaining-navigation-budget" id="ref-for-determine-remaining-navigation-budget">determine remaining navigation budget</a> with <var>environment</var> and <var>site</var>.</p>
     <li data-md>
      <p>Let <var>pendingBits</var> be the logarithm base 2 of <var>urlList</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size②">size</a>.</p>
     <li data-md>
      <p>If <var>shouldChargeTopLevelBudgets</var> is true:</p>
      <ol>
       <li data-md>
        <p>Let <var>pageBudgetResult</var> be the result of running <a data-link-type="dfn" href="#charge-shared-storage-top-level-traversable-budgets" id="ref-for-charge-shared-storage-top-level-traversable-budgets①">charge shared storage top-level traversable budgets</a> with <var>navigable</var>, <var>site</var>, and <var>pendingBits</var>.</p>
       <li data-md>
        <p>If <var>pageBudgetResult</var> is false, set <var>shouldUseDefaultIndex</var> to true.</p>
      </ol>
     <li data-md>
      <p>If <var>pendingBits</var> is greater than <var>remainingBudget</var>, set <var>shouldUseDefaultIndex</var> to true.</p>
     <li data-md>
      <p>If <var>shouldUseDefaultIndex</var> is true, set <var>resultIndex</var> to the <a data-link-type="dfn" href="#default-selecturl-index" id="ref-for-default-selecturl-index②">default selectURL index</a>.</p>
     <li data-md>
      <p>Let <var>finalConfig</var> be a new <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fenced-frame-config" id="ref-for-fenced-frame-config">fenced frame config</a>.</p>
     <li data-md>
      <p>Set <var>finalConfig</var>’s <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fenced-frame-config-mapped-url" id="ref-for-fenced-frame-config-mapped-url">mapped url</a> to <var>urlList</var>[<var>resultIndex</var>].</p>
     <li data-md>
      <p>Set <var>finalConfig</var>’s <span class="todo">a "pending shared storage budget debit" field</span> to <var>pendingBits</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-finalize-a-pending-config" id="ref-for-fenced-frame-config-mapping-finalize-a-pending-config">Finalize a pending config</a> on <var>fencedFrameConfigMapping</var> with <var>urn</var> and <var>finalConfig</var>.</p>
     <li data-md>
      <p>Let <var>resultURLWithMetadata</var> be <var>urls</var>[<var>resultIndex</var>].</p>
     <li data-md>
      <p>If <var>resultURLWithMetadata</var> has field "<code>reportingMetadata</code>", run <a data-link-type="dfn" href="#register-reporting-metadata" id="ref-for-register-reporting-metadata">register reporting metadata</a> with <var>resultURLWithMetadata</var>["<code>reportingMetadata</code>"].</p>
     <li data-md>
      <p>If <var>options</var>["<code>keepAlive</code>"] is false, run <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#terminate-a-worklet-global-scope" id="ref-for-terminate-a-worklet-global-scope">terminate a worklet global scope</a> with <var>worklet</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="selectURL(name, urls, options)" data-algorithm-for="SharedStorageWorklet">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorklet" data-dfn-type="method" data-export data-lt="selectURL(name, urls, options)|selectURL(name, urls)" id="dom-sharedstorageworklet-selecturl"><code>selectURL(<var>name</var>, <var>urls</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>resultPromise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise④">promise</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①">this</a>’s <a data-link-type="dfn" href="#sharedstorageworklet-addmodule-initiated" id="ref-for-sharedstorageworklet-addmodule-initiated③">addModule initiated</a> is false, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>window</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object②">relevant settings object</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑥">Assert</a>: <var>window</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑧">Window</a></code>.</p>
     <li data-md>
      <p>Let <var>context</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①">browsing context</a>.</p>
     <li data-md>
      <p>If <var>context</var> is null, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>preSpecifiedParams</var> be the result of <a data-link-type="dfn" href="#obtain-the-pre-specified-report-parameters" id="ref-for-obtain-the-pre-specified-report-parameters">obtaining the pre-specified report parameters</a> given <var>options</var> and <var>context</var>.</p>
     <li data-md>
      <p>If <var>preSpecifiedParams</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException">DOMException</a></code>, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④">a promise rejected with</a> <var>preSpecifiedParams</var>.</p>
     <li data-md>
      <p>Let <var>aggregationCoordinator</var> be the result of <a data-link-type="dfn" href="#obtain-the-aggregation-coordinator" id="ref-for-obtain-the-aggregation-coordinator">obtaining the aggregation coordinator</a> given <var>options</var>.</p>
     <li data-md>
      <p>If <var>aggregationCoordinator</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException①">DOMException</a></code>, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤">a promise rejected with</a> <var>aggregationCoordinator</var>.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document">active document</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes④">global scopes</a> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty">empty</a>, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦">TypeError</a></code>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This can happen if <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl③">selectURL()</a></code> is called before <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule⑤">addModule()</a></code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑦">Assert</a>: <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes⑤">global scopes</a>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size③">size</a> is 1.</p>
     <li data-md>
      <p>Let <var>globalScope</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑤">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes⑥">global scopes</a>[0].</p>
     <li data-md>
      <p>Let <var>workletDataOrigin</var> be <var>globalScope</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm" id="ref-for-concept-global-object-realm①">realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object①">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin⑤">origin</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="https://www.w3.org/TR/permissions-policy/#algo-is-feature-enabled" id="ref-for-algo-is-feature-enabled①">Is feature enabled in document for origin?</a> on "<a data-link-type="dfn" href="#permissionspolicy-shared-storage-select-url" id="ref-for-permissionspolicy-shared-storage-select-url">shared-storage-select-url</a>", <var>document</var>, and <var>workletDataOrigin</var> returns false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑦">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished">check whether addModule is finished</a> for <var>globalScope</var> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑧">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>urls</var> is empty or if <var>urls</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size④">size</a> is greater than 8, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑨">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪">TypeError</a></code>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> 8 is chosen here so that each call of <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl④">selectURL()</a></code> can leak at most log2(8) = 3 bits of information when the result fenced frame is clicked. It’s not a lot of information per-call.</p>
     <li data-md>
      <p>Let <var>urlList</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list③">list</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate">For each</a> <var>urlWithMetadata</var> in <var>urls</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>urlWithMetadata</var> has no field "<code>url</code>", return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①⓪">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①">TypeError</a></code>.</p>
       <li data-md>
        <p>Otherwise, let <var>urlString</var> be <var>urlWithMetadata</var>["<code>url</code>"].</p>
       <li data-md>
        <p>Let <var>serializedUrl</var> be the result of running <a data-link-type="dfn" href="#get-the-canonical-url-string-if-valid" id="ref-for-get-the-canonical-url-string-if-valid">get the canonical URL string if valid</a> with <var>urlString</var>.</p>
       <li data-md>
        <p>If <var>serializedUrl</var> is undefined, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①①">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①②">TypeError</a></code>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append①">append</a> <var>serializedUrl</var> to <var>urlList</var>.</p>
       <li data-md>
        <p>If <var>urlWithMetadata</var> has field "<code>reportingMetadata</code>":</p>
        <ol>
         <li data-md>
          <p>Let <var>reportingMetadata</var> be <var>urlWithMetadata</var>["<code>reportingMetadata</code>"].</p>
         <li data-md>
          <p>If the result of running <a data-link-type="dfn" href="#validate-reporting-metadata" id="ref-for-validate-reporting-metadata">validate reporting metadata</a> with <var>reportingMetadata</var> is false, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject③">reject</a> <var>resultPromise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①③">TypeError</a></code> and abort these steps.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Let <var>navigable</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window②">associated document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable">node navigable</a>.</p>
     <li data-md>
      <p>Let <var>fencedFrameConfigMapping</var> be <var>navigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-traversable" id="ref-for-nav-traversable">traversable navigable</a>’s <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#traversable-navigable-fenced-frame-config-mapping" id="ref-for-traversable-navigable-fenced-frame-config-mapping①">fenced frame config mapping</a>.</p>
     <li data-md>
      <p>Let <var>pendingConfig</var> be a new <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fenced-frame-config" id="ref-for-fenced-frame-config①">fenced frame config</a>.</p>
     <li data-md>
      <p>Let <var>urn</var> be the result of running <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-store-a-pending-config" id="ref-for-fenced-frame-config-mapping-store-a-pending-config">store a pending config</a> on <var>fencedFrameConfigMapping</var> with <var>pendingConfig</var>.</p>
     <li data-md>
      <p>If <var>urn</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①②">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①④">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object③">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>allowedInOpaqueOriginContext</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑥">this</a>’s <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin④">has cross-origin data origin</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#determine-whether-shared-storage-is-allowed-by-context" id="ref-for-determine-whether-shared-storage-is-allowed-by-context②">determine whether shared storage is allowed by context</a> given <var>environment</var>, <var>workletDataOrigin</var>, and <var>allowedInOpaqueOriginContext</var> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-if-user-preference-setting-allows-access-to-shared-storage" id="ref-for-check-if-user-preference-setting-allows-access-to-shared-storage②">check if user preference setting allows access to shared storage</a> given <var>environment</var> and <var>workletDataOrigin</var> is false:</p>
      <ol>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑦">this</a>’s <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin⑤">has cross-origin data origin</a> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①④">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑥">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>options</var>["<code>resolveToConfig</code>"] is true, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①">resolve</a> <var>resultPromise</var> with <var>pendingConfig</var>.</p>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②">resolve</a> <var>resultPromise</var> with <var>urn</var>.</p>
     <li data-md>
      <p>Let (<var>indexPromise</var>, <var>shouldChargeTopLevelBudgets</var>) be the result of running <a data-link-type="dfn" href="#get-the-select-url-result-index" id="ref-for-get-the-select-url-result-index">get the select-url result index</a>, given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑧">this</a>, <var>name</var>, <var>urlList</var>, <var>workletDataOrigin</var>, <var>navigable</var>, <var>options</var>, <var>preSpecifiedParams</var> and <var>aggregationCoordinator</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment" id="ref-for-upon-fulfillment">Upon fulfillment</a> of <var>indexPromise</var> with <var>resultIndex</var>, run <a data-link-type="dfn" href="#handle-the-result-of-selecting-an-index" id="ref-for-handle-the-result-of-selecting-an-index">handle the result of selecting an index</a> given <var>worklet</var>, <var>environment</var>, <var>document</var>, <var>urls</var>, <var>urlList</var>, <var>navigable</var>, <var>options</var>, <var>fencedFrameConfigMapping</var>, <var>urn</var>, <var>shouldChargeTopLevelBudgets</var>, false, and <var>resultIndex</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection" id="ref-for-upon-rejection">Upon rejection</a> of <var>indexPromise</var>, run <a data-link-type="dfn" href="#handle-the-result-of-selecting-an-index" id="ref-for-handle-the-result-of-selecting-an-index①">handle the result of selecting an index</a> given <var>worklet</var>, <var>environment</var>, <var>document</var>, <var>urls</var>, <var>urlList</var>, <var>navigable</var>, <var>options</var>, <var>fencedFrameConfigMapping</var>, <var>urn</var>, <var>shouldChargeTopLevelBudgets</var>, true, and the <a data-link-type="dfn" href="#default-selecturl-index" id="ref-for-default-selecturl-index③">default selectURL index</a>.</p>
     <li data-md>
      <p>Return <var>resultPromise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="run(name, options)" data-algorithm-for="SharedStorageWorklet">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorklet" data-dfn-type="method" data-export data-lt="run(name, options)|run(name)" id="dom-sharedstorageworklet-run"><code>run(<var>name</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise⑤">promise</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this⑨">this</a>’s <a data-link-type="dfn" href="#sharedstorageworklet-addmodule-initiated" id="ref-for-sharedstorageworklet-addmodule-initiated④">addModule initiated</a> is false, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①⑤">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>window</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⓪">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object④">relevant settings object</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑧">Assert</a>: <var>window</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window⑨">Window</a></code>.</p>
     <li data-md>
      <p>Let <var>context</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc②">browsing context</a>.</p>
     <li data-md>
      <p>If <var>context</var> is null, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①⑥">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>preSpecifiedParams</var> be the result of <a data-link-type="dfn" href="#obtain-the-pre-specified-report-parameters" id="ref-for-obtain-the-pre-specified-report-parameters①">obtaining the pre-specified report parameters</a> given <var>options</var> and <var>context</var>.</p>
     <li data-md>
      <p>If <var>preSpecifiedParams</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException②">DOMException</a></code>, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①⑦">a promise rejected with</a> <var>preSpecifiedParams</var>.</p>
     <li data-md>
      <p>Let <var>aggregationCoordinator</var> be the result of <a data-link-type="dfn" href="#obtain-the-aggregation-coordinator" id="ref-for-obtain-the-aggregation-coordinator①">obtaining the aggregation coordinator</a> given <var>options</var>.</p>
     <li data-md>
      <p>If <var>aggregationCoordinator</var> is a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException③">DOMException</a></code>, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①⑧">a promise rejected with</a> <var>aggregationCoordinator</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①①">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes⑦">global scopes</a> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty①">empty</a>, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with①⑨">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⑨">TypeError</a></code>.</p>
      <p class="note" role="note"><span class="marker">Note:</span> This can happen if <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run②">run()</a></code> is called before <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule⑥">addModule()</a></code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert⑨">Assert</a>: <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①②">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes⑧">global scopes</a>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size⑤">size</a> is 1.</p>
     <li data-md>
      <p>Let <var>globalScope</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①③">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes⑨">global scopes</a>[0].</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished①">check whether addModule is finished</a> for <var>globalScope</var> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②⓪">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>workletDataOrigin</var> be <var>globalScope</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm" id="ref-for-concept-global-object-realm②">realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object②">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin⑥">origin</a>.</p>
     <li data-md>
      <p>Let <var>allowedInOpaqueOriginContext</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①④">this</a>’s <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin⑥">has cross-origin data origin</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#determine-whether-shared-storage-is-allowed-by-context" id="ref-for-determine-whether-shared-storage-is-allowed-by-context③">determine whether shared storage is allowed by context</a> given <var>window</var>, <var>workletDataOrigin</var>, and <var>allowedInOpaqueOriginContext</var> is false, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject④">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②①">TypeError</a></code>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-if-user-preference-setting-allows-access-to-shared-storage" id="ref-for-check-if-user-preference-setting-allows-access-to-shared-storage③">check if user preference setting allows access to shared storage</a> given <var>window</var> and <var>workletDataOrigin</var> is false:</p>
      <ol>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑤">this</a>’s <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin⑦">has cross-origin data origin</a> is false, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑤">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②②">TypeError</a></code>.</p>
       <li data-md>
        <p>Else, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve③">resolve</a> <var>promise</var> with undefined.</p>
       <li data-md>
        <p>Return <var>promise</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>, and immediately <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#obtain-a-worklet-agent" id="ref-for-obtain-a-worklet-agent">obtaining a worklet agent</a> given <var>window</var> and run the rest of these steps in that agent:</p>
      <p class="note" role="note"><span class="marker">Note:</span> The <var>promise</var>’s resolution should be before and not depend on the execution inside <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③">SharedStorageWorkletGlobalScope</a></code>. This is because shared storage is a type of unpartitioned storage, and a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope④">SharedStorageWorkletGlobalScope</a></code> can have access to cross-site data, which shouldn’t be leaked via <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run③">run()</a></code> (via its success/error result).</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task⑤">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source⑤">DOM manipulation task source</a>, given <var>window</var>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve④">resolve</a> <var>promise</var> with undefined.</p>
       <li data-md>
        <p>If <var>globalScope</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑤">relevant settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/workers.html#concept-workerglobalscope-module-map" id="ref-for-concept-workerglobalscope-module-map①">module map</a> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org#map-is-empty" id="ref-for-map-is-empty">empty</a>:</p>
        <ol>
         <li data-md>
          <p>Let <var>operationMap</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑥">this</a>’s <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope⑤">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-operation-map" id="ref-for-sharedstorageworkletglobalscope-operation-map①">operation map</a>.</p>
         <li data-md>
          <p>If <var>operationMap</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②">contains</a> <var>name</var>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⓪">Assert</a>: <var>operationMap</var>[<var>name</var>]'s <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-associated-realm" id="ref-for-dfn-associated-realm①">associated realm</a> is <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑦">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm" id="ref-for-concept-relevant-realm①">relevant realm</a>.</p>
           <li data-md>
            <p>Let <var>operation</var> be <var>operationMap</var>[<var>name</var>], <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value" id="ref-for-dfn-convert-ecmascript-to-idl-value①">converted</a> to <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#Function" id="ref-for-Function">Function</a></code>.</p>
           <li data-md>
            <p>Let <var>privateAggregationCompletionTask</var> be the result of <a data-link-type="dfn" href="#set-up-the-private-aggregation-scopes" id="ref-for-set-up-the-private-aggregation-scopes①">setting up the Private Aggregation scopes</a> given <var>workletDataOrigin</var>, <var>preSpecifiedParams</var> and <var>aggregationCoordinator</var>.</p>
           <li data-md>
            <p>Let <var>argumentsList</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list④">list</a>.</p>
           <li data-md>
            <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragerunoperationmethodoptions-data" id="ref-for-dom-sharedstoragerunoperationmethodoptions-data①">data</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists③">exists</a>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append②">append</a> it to <var>argumentsList</var>.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#invoke-a-callback-function" id="ref-for-invoke-a-callback-function①">Invoke</a> <var>operation</var> with <var>argumentsList</var> and "<code>report</code>".</p>
           <li data-md>
            <p>Wait for <var>operation</var> to finish running, if applicable.</p>
           <li data-md>
            <p>Run <var>privateAggregationCompletionTask</var>.</p>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>options</var>["<code>keepAlive</code>"] is false:</p>
        <ol>
         <li data-md>
          <p>Wait for <var>operation</var> to finish running, if applicable.</p>
         <li data-md>
          <p>Run <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#terminate-a-worklet-global-scope" id="ref-for-terminate-a-worklet-global-scope①">terminate a worklet global scope</a> with <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑧">this</a>.</p>
        </ol>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="obtain the aggregation coordinator">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-the-aggregation-coordinator">obtain the aggregation coordinator</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions④">SharedStorageRunOperationMethodOptions</a></code> <var>options</var>, perform the following
    steps. They return an <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#aggregation-coordinator" id="ref-for-aggregation-coordinator①">aggregation coordinator</a>, null or a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException④">DOMException</a></code>: 
    <ol>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig" id="ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig">privateAggregationConfig</a></code>"]
does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists④">exist</a>, return null.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig" id="ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig①">privateAggregationConfig</a></code>"]["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin" id="ref-for-dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin">aggregationCoordinatorOrigin</a></code>"]
does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑤">exist</a>, return null.</p>
     <li data-md>
      <p>Return the result of <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#obtain-the-private-aggregation-coordinator" id="ref-for-obtain-the-private-aggregation-coordinator">obtaining the Private Aggregation coordinator</a> given <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig" id="ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig②">privateAggregationConfig</a></code>"]["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin" id="ref-for-dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin①">aggregationCoordinatorOrigin</a></code>"].</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="obtain the pre-specified report parameters">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-the-pre-specified-report-parameters">obtain the pre-specified report parameters</dfn> given a <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions⑤">SharedStorageRunOperationMethodOptions</a></code> <var>options</var> and a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context">browsing context</a> <var>context</var>, perform the following steps. They return a <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#pre-specified-report-parameters" id="ref-for-pre-specified-report-parameters①">pre-specified report parameters</a>, null, or a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑤">DOMException</a></code>: 
    <ol>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig" id="ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig③">privateAggregationConfig</a></code>"]
does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑥">exist</a>, return null.</p>
     <li data-md>
      <p>Let <var>privateAggregationConfig</var> be <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig" id="ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig④">privateAggregationConfig</a></code>"].</p>
     <li data-md>
      <p>Let <var>contextId</var> be null.</p>
     <li data-md>
      <p>If <var>privateAggregationConfig</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-contextid" id="ref-for-dom-sharedstorageprivateaggregationconfig-contextid">contextId</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑦">exists</a>, set <var>contextId</var> to <var>privateAggregationConfig</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-contextid" id="ref-for-dom-sharedstorageprivateaggregationconfig-contextid①">contextId</a></code>"].</p>
     <li data-md>
      <p>If <var>contextId</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length">length</a> is greater than 64, return a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑥">DOMException</a></code> with name "<code>DataError</code>".</p>
     <li data-md>
      <p>Let <var>filteringIdMaxBytes</var> be the <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#default-filtering-id-max-bytes" id="ref-for-default-filtering-id-max-bytes">default filtering ID max bytes</a>.</p>
     <li data-md>
      <p>If <var>privateAggregationConfig</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes" id="ref-for-dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes">filteringIdMaxBytes</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑧">exists</a>, set <var>filteringIdMaxBytes</var> to <var>privateAggregationConfig</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes" id="ref-for-dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes①">filteringIdMaxBytes</a></code>"].</p>
     <li data-md>
      <p>If <var>filteringIdMaxBytes</var> is not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain">contained</a> in the <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#valid-filtering-id-max-bytes-range" id="ref-for-valid-filtering-id-max-bytes-range">valid filtering ID max bytes range</a>, return a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑦">DOMException</a></code> with name "<code>DataError</code>".</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance" id="ref-for-browsing-context-fenced-frame-config-instance">fenced frame config instance</a> is not null:</p>
      <ol>
       <li data-md>
        <p>If <var>filteringIdMaxBytes</var> is not the <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#default-filtering-id-max-bytes" id="ref-for-default-filtering-id-max-bytes①">default filtering ID max bytes</a> or <var>contextId</var> is not null, return a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑧">DOMException</a></code> with name
"<code>DataError</code>".</p>
      </ol>
     <li data-md>
      <p>Let <var>maxContributions</var> be null.</p>
     <li data-md>
      <p>If <var>privateAggregationConfig</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-maxcontributions" id="ref-for-dom-sharedstorageprivateaggregationconfig-maxcontributions">maxContributions</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists⑨">exists</a>, set <var>maxContributions</var> to <var>privateAggregationConfig</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageprivateaggregationconfig-maxcontributions" id="ref-for-dom-sharedstorageprivateaggregationconfig-maxcontributions①">maxContributions</a></code>"].</p>
     <li data-md>
      <p>If <var>maxContributions</var> is zero, return a new <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-DOMException" id="ref-for-idl-DOMException⑨">DOMException</a></code> with name
"<code>DataError</code>".</p>
     <li data-md>
      <p>Return a new <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#pre-specified-report-parameters" id="ref-for-pre-specified-report-parameters②">pre-specified report parameters</a> with the items:</p>
      <dl>
       <dt data-md><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#context-id" id="ref-for-context-id">context ID</a>
       <dd data-md>
        <p><var>contextId</var></p>
       <dt data-md><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#filtering-id-max-bytes" id="ref-for-filtering-id-max-bytes">filtering ID max bytes</a>
       <dd data-md>
        <p><var>filteringIdMaxBytes</var></p>
       <dt data-md><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#max-contributions" id="ref-for-max-contributions">max contributions</a>
       <dd data-md>
        <p><var>maxContributions</var></p>
      </dl>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="set up the Private Aggregation scopes">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="set-up-the-private-aggregation-scopes">set up the Private Aggregation scopes</dfn> given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin③">origin</a> <var>workletDataOrigin</var>, a <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#pre-specified-report-parameters" id="ref-for-pre-specified-report-parameters③">pre-specified report parameters</a> or null <var>preSpecifiedParams</var> and an <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#aggregation-coordinator" id="ref-for-aggregation-coordinator②">aggregation coordinator</a> or null <var>aggregationCoordinator</var>, perform the following steps. They return an
    algorithm. 
    <p class="note" role="note"><span class="marker">Note:</span> The returned algorithm should be run when the associated operation is
        complete.</p>
    <ol>
     <li data-md>
      <p>Let <var>batchingScope</var> be a new <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#batching-scope" id="ref-for-batching-scope">batching scope</a>.</p>
     <li data-md>
      <p>Let <var>debugScope</var> be a new <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#debug-scope" id="ref-for-debug-scope">debug scope</a>.</p>
     <li data-md>
      <p>Let <var>privateAggregationTimeout</var> be null.</p>
     <li data-md>
      <p>Let <var>hasRunPrivateAggregationCompletionTask</var> be false.</p>
     <li data-md>
      <p>Let <var>privateAggregationCompletionTask</var> be an algorithm to perform the
following steps:</p>
      <ol>
       <li data-md>
        <p>If <var>hasRunPrivateAggregationCompletionTask</var>, return.</p>
       <li data-md>
        <p>Set <var>hasRunPrivateAggregationCompletionTask</var> to true.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#mark-a-debug-scope-complete" id="ref-for-mark-a-debug-scope-complete">Mark a debug scope complete</a> given <var>debugScope</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#process-contributions-for-a-batching-scope" id="ref-for-process-contributions-for-a-batching-scope">Process contributions for a batching scope</a> given <var>batchingScope</var>, <var>workletDataOrigin</var>, "<code>shared-storage</code>"
and <var>privateAggregationTimeout</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>aggregationCoordinator</var> is not null, <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-aggregation-coordinator-for-a-batching-scope" id="ref-for-set-the-aggregation-coordinator-for-a-batching-scope">set the aggregation coordinator for a batching scope</a> given <var>aggregationCoordinator</var> and <var>batchingScope</var>.</p>
     <li data-md>
      <p>If <var>preSpecifiedParams</var> is not null:</p>
      <ol>
       <li data-md>
        <p>Let <var>isDeterministicReport</var> be the result of <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#determine-if-a-report-should-be-sent-deterministically" id="ref-for-determine-if-a-report-should-be-sent-deterministically">determining if a report should be sent deterministically</a> given <var>preSpecifiedParams</var>.</p>
       <li data-md>
        <p>If <var>isDeterministicReport</var>:</p>
        <ol>
         <li data-md>
          <p>Set <var>privateAggregationTimeout</var> to the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-current-wall-time" id="ref-for-dfn-current-wall-time">current wall time</a> plus
the <a data-link-type="dfn" href="#deterministic-operation-timeout-duration" id="ref-for-deterministic-operation-timeout-duration">deterministic operation timeout duration</a>.</p>
        </ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-pre-specified-report-parameters-for-a-batching-scope" id="ref-for-set-the-pre-specified-report-parameters-for-a-batching-scope">Set the pre-specified report parameters for a batching scope</a> given <var>preSpecifiedParams</var> and <var>batchingScope</var>.</p>
       <li data-md>
        <p>If <var>isDeterministicReport</var>, run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel">in parallel</a>:</p>
        <ol>
         <li data-md>
          <p>Wait until <var>privateAggregationTimeout</var>.</p>
         <li data-md>
          <p>Run <var>privateAggregationCompletionTask</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>privateAggregationCompletionTask</var>.</p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="deterministic-operation-timeout-duration">deterministic operation timeout duration</dfn> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#implementation-defined" id="ref-for-implementation-defined①">implementation-defined</a> non-negative <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration">duration</a> that controls how long a
  Shared Storage operation may make Private Aggregation contributions if it is
  triggering a deterministic report and, equivalently, when that report should
  be sent after the operation begins.</p>
   <h3 class="heading settled" data-level="2.2" id="worklet-monkey-patch"><span class="secno">2.2. </span><span class="content">Monkey Patch for <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#worklets" id="ref-for-worklets">Worklets</a></span><a class="self-link" href="#worklet-monkey-patch"></a></h3>
   <p>This specification will make some modifications to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#worklets" id="ref-for-worklets①">Worklet</a> standard to accommodate the needs of Shared Storage.</p>
   <h4 class="heading settled" data-level="2.2.1" id="set-up-a-worklet-environment-settings-object-monkey-patch"><span class="secno">2.2.1. </span><span class="content">Monkey Patch for <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object" id="ref-for-set-up-a-worklet-environment-settings-object">set up a worklet environment settings object</a></span><a class="self-link" href="#set-up-a-worklet-environment-settings-object-monkey-patch"></a></h4>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object" id="ref-for-set-up-a-worklet-environment-settings-object①">set up a worklet environment settings object</a> algorithm will need to include an additional parameter: <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet①">Worklet</a></code> <var>worklet</var>. The step that defines the <var>settingsObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin⑦">origin</a> should be modified as follows:</p>
   <ol start="6">
    <li data-md>
     <p>Let <var>settingsObject</var> be a new <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑥">environment settings object</a> whose algorithms are defined as follows:</p>
     <p>......</p>
     <p><b>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin⑧">origin</a></b></p>
     <ol>
      <li data-md>
       <p>Let <var>workletGlobalScope</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①">global object</a> of <var>realmExecutionContext</var>’s Realm component.</p>
      <li data-md>
       <p>If <var>workletGlobalScope</var> is not <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope⑥">SharedStorageWorkletGlobalScope</a></code>, return <var>origin</var>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①①">Assert</a> that <var>worklet</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①②">SharedStorageWorklet</a></code>.</p>
      <li data-md>
       <p>If <var>worklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin③">data origin</a> is <code>"context-origin"</code>, return <var>outsideSettings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin⑨">origin</a>.</p>
      <li data-md>
       <p>Otherwise, if <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin④">data origin</a> is <code>"script-origin"</code>:</p>
       <ol>
        <li data-md>
         <p>Let <var>pendingAddedModules</var> be a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-clone" id="ref-for-list-clone">clone</a> of <var>worklet</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-added-modules-list" id="ref-for-concept-worklet-added-modules-list">added modules list</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①②">Assert</a>: <var>pendingAddedModules</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size⑥">size</a> is 1.</p>
        <li data-md>
         <p>Let <var>moduleURL</var> be <var>pendingAddedModules</var>[0].</p>
        <li data-md>
         <p>Return <var>moduleURL</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin④">origin</a>.</p>
       </ol>
      <li data-md>
       <p>Otherwise, let <var>customOriginUrl</var> be the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser①">URL parser</a> on <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin⑤">data origin</a>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①③">Assert</a> <var>customOriginUrl</var> is a valid <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url②">URL</a>.</p>
      <li data-md>
       <p>Return <var>customOriginUrl</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑤">origin</a>.</p>
     </ol>
     <p>......</p>
   </ol>
   <h4 class="heading settled" data-level="2.2.2" id="create-a-worklet-global-scope-monkey-patch"><span class="secno">2.2.2. </span><span class="content">Monkey Patch for <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope" id="ref-for-create-a-worklet-global-scope">create a worklet global scope</a></span><a class="self-link" href="#create-a-worklet-global-scope-monkey-patch"></a></h4>
   <p>The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope" id="ref-for-create-a-worklet-global-scope①">create a worklet global scope</a> algorithm will need to be modified to pass in the <var>worklet</var> parameter:</p>
   <ol start="5">
    <li data-md>
     <p>Let <var>insideSettings</var> be the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object" id="ref-for-set-up-a-worklet-environment-settings-object②">setting up a worklet environment settings object</a> given <var>realmExecutionContext</var>, <var>outsideSettings</var>, and <var>worklet</var>.</p>
   </ol>
   <h4 class="heading settled" data-level="2.2.3" id="fetch-a-worklet-script-graph-monkey-patch"><span class="secno">2.2.3. </span><span class="content">Monkey Patch for <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#fetch-a-worklet-script-graph" id="ref-for-fetch-a-worklet-script-graph">fetch a worklet script graph</a></span><a class="self-link" href="#fetch-a-worklet-script-graph-monkey-patch"></a></h4>
   <p>The algorithm <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#fetch-a-worklet-script-graph" id="ref-for-fetch-a-worklet-script-graph①">fetch a worklet script graph</a> calls into the <a href="https://html.spec.whatwg.org/multipage/webappapis.html#fetch-a-worklet/module-worker-script-graph">fetch a worklet/module worker script graph</a> algorithm, which takes in an algorithm parameter <var>processCustomFetchResponse</var>. The definition of that <var>processCustomFetchResponse</var> parameter will need to include the following step before the step "5. <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch">Fetch</a> <var>request</var>, ...":</p>
   <ol start="5">
    <li data-md>
     <p>If <var>fetchClient</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global" id="ref-for-concept-settings-object-global">global object</a> is <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope⑦">SharedStorageWorkletGlobalScope</a></code>:</p>
     <ol>
      <li data-md>
       <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-mode" id="ref-for-concept-request-redirect-mode">redirect mode</a> to "<code>error</code>".</p>
       <p class="note" role="note"><span class="marker">Note:</span> For shared storage, redirects are disallowed for the module script request. With this restriction, it’s possible to define and to use the algorithm that gets the <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object③">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①⓪">origin</a> (as described in <a href="#set-up-a-worklet-environment-settings-object-monkey-patch">§ 2.2.1 Monkey Patch for set up a worklet environment settings object</a>) as soon as the <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope⑧">SharedStorageWorkletGlobalScope</a></code> is created, as the origin won’t change. This restriction may be removed in a future iteration of the design. If redirects become allowed, presumably, the algorithm that gets the <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object④">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①①">origin</a> should be updated to return the final request’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url">URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑥">origin</a> after receiving the final request’s response, and the user preference checkings shall only be done after that point.</p>
      <li data-md>
       <p>If <var>fetchClient</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①②">origin</a> and <var>settingsObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①③">origin</a> are not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin①">same origin</a>:</p>
       <ol>
        <li data-md>
         <p>Let <var>dataOriginValue</var> be the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin" id="ref-for-ascii-serialisation-of-an-origin">serialization</a> of <var>settingsObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①④">origin</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①④">Assert</a> that <var>dataOriginValue</var> is not null.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-append" id="ref-for-concept-header-list-append">Append</a> the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header">header</a> (`<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-data-origin" id="ref-for-http-headerdef-sec-shared-storage-data-origin">Sec-Shared-Storage-Data-Origin</a></code>`, <var>dataOriginValue</var>) to <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list">header list</a>.</p>
       </ol>
     </ol>
   </ol>
   <h4 class="heading settled" data-level="2.2.4" id="worklet-allowed-header"><span class="secno">2.2.4. </span><span class="content">The `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>` HTTP response header</span><a class="self-link" href="#worklet-allowed-header"></a></h4>
   <p>The `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed①">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>` HTTP response header, along with the traditional CORS headers, can be used to grant a cross-origin site the permission to create a worklet from the module script’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url③">URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑦">origin</a>, and to run subsequent operations on the worklet using the module script’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url④">URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑧">origin</a> as the <dfn class="dfn-paneled" data-dfn-for="SharedStorage" data-dfn-type="dfn" data-noexport id="sharedstorage-data-partition-origin">data partition origin</dfn> for accessing shared storage data, i.e. the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①⑤">origin</a> set in <a href="#set-up-a-worklet-environment-settings-object-monkey-patch">§ 2.2.1 Monkey Patch for set up a worklet environment settings object</a>, which becomes the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin⑨">origin</a> used in all <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage">SharedStorage</a></code> calls to <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map">obtain a shared storage bottle map</a>.</p>
   <p>Worklets that load cross-origin scripts rely on CORS as a baseline permission mechanism to indicate trusted external origins. However, CORS alone is insufficient for creation of a worklet with cross-origin script whose <a data-link-type="dfn" href="#sharedstorage-data-partition-origin" id="ref-for-sharedstorage-data-partition-origin">data partition origin</a> is the script origin. Unlike simple resource sharing, worklets allow the creator site to execute JavaScript within the context of the target origin. To ensure security, an additional response header, `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed②">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>`, is required from the script origin.</p>
   <h4 class="heading settled" data-level="2.2.5" id="http-fetch-monkey-patch"><span class="secno">2.2.5. </span><span class="content">Monkey Patch for <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-http-fetch" id="ref-for-concept-http-fetch">HTTP fetch</a></span><a class="self-link" href="#http-fetch-monkey-patch"></a></h4>
    <a href="#mod-http-fetch">Steps</a> will need to be added to the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-http-fetch" id="ref-for-concept-http-fetch①">HTTP fetch</a> algorithm. 
   <p class="note" role="note"><span class="marker">Note:</span> It is the responsibility of the site serving the module script to carefully consider the security implications: when the module script’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url⑤">URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⓪">origin</a> and the worklet’s creator <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①⓪">Window</a></code> origin are not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin②">same origin</a>, by sending permissive CORS headers the `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed③">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>` header on the module script response, the server will be granting the worklet’s creation and subsequent operations on the worklet, while allowing the worklet to use the worklet’s script’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①①">origin</a> as the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①②">origin</a> for accessing the shared storage data, i.e. the <a data-link-type="dfn" href="#sharedstorage-data-partition-origin" id="ref-for-sharedstorage-data-partition-origin①">data partition origin</a>. For example, the worklet’s creator <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①①">Window</a></code> could poison and use up the worklet origin’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site">site</a>’s <a data-link-type="dfn" href="#site-remaining-navigation-budget" id="ref-for-site-remaining-navigation-budget">remaining navigation budget</a> by calling <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl⑤">selectURL()</a></code> or <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run④">run()</a></code>, where the worklet origin is the global scope’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm" id="ref-for-concept-global-object-realm③">realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object⑤">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①⑥">origin</a>.</p>
   <h4 class="heading settled" data-level="2.2.6" id="add-module-monkey-patch"><span class="secno">2.2.6. </span><span class="content">Monkey Patch for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule⑦">addModule()</a></code></span><a class="self-link" href="#add-module-monkey-patch"></a></h4>
   <p>The <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule⑧">addModule()</a></code> method steps for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet" id="ref-for-worklet②">Worklet</a></code> will need to include the following step before the step "Let <var>promise</var> be a new promise":</p>
   <ol start="4">
    <li data-md>
     <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this①⑨">this</a> is of type <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①③">SharedStorageWorklet</a></code>:</p>
     <ol>
      <li data-md>
       <p>Let <var>addModuleAllowedResult</var> be the result of running <a data-link-type="dfn" href="#check-if-addmodule-is-allowed-and-update-state" id="ref-for-check-if-addmodule-is-allowed-and-update-state①">check if addModule is allowed and update state</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⓪">this</a> and <var>moduleURLRecord</var>.</p>
      <li data-md>
       <p>If <var>addModuleAllowedResult</var> is "DisallowedDueToNonPreferenceError":</p>
       <ol>
        <li data-md>
         <p>Return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②①">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②③">TypeError</a></code>.</p>
       </ol>
      <li data-md>
       <p>Else if <var>addModuleAllowedResult</var> is "DisallowedDueToPreferenceError":</p>
       <ol>
        <li data-md>
         <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②①">this</a>’s <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin⑧">has cross-origin data origin</a> is false, then return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②②">a promise rejected with</a> a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②④">TypeError</a></code>.</p>
       </ol>
      <li data-md>
       <p>Else:</p>
       <ol>
        <li data-md>
         <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑤">Assert</a>: <var>addModuleAllowedResult</var> is "Allowed".</p>
       </ol>
     </ol>
   </ol>
   <div class="note" role="note">
     On user preferences error, <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule⑨">addModule()</a></code> will be aborted at an early stage. However, the error will only be exposed to the caller for a same-origin worklet (i.e. where the initiator document’s origin is same-origin with the module script’s origin). For a cross-origin worklet, the error will be hidden. This is to prevent a caller from knowing which origins the user has disabled shared storage for via preferences (if a per-origin preference exists for that browser vendor). 
    <p>A caller may still use timing attacks to know this information, but this is a minor security/privacy issue, as in reality very few users would set such preferences, and doing a wide search would incur a significant performance cost spinning up the worklets.</p>
    <p>This rationale also applies to the handling for user preferences error for <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl⑥">selectURL()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run⑤">run()</a></code>.</p>
   </div>
   <p>After the step "Let <var>addedSuccessfully</var> be false", we need to include the following step:</p>
   <ol start="4">
    <li data-md>
     <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②②">this</a> is of type <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①④">SharedStorageWorklet</a></code>, <a data-link-type="dfn" href="#sharedstorageworklet-has-cross-origin-data-origin" id="ref-for-sharedstorageworklet-has-cross-origin-data-origin⑨">has cross-origin data origin</a> is true, and <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin⑥">data origin</a> is not <code>"script-origin"</code>:</p>
     <ol>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑥">Assert</a> <var>pendingTasks</var> is 1.</p>
      <li data-md>
       <p>Set <var>pendingTasks</var> to 2.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task⑥">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source" id="ref-for-networking-task-source">networking task source</a> given <var>workletGlobalScope</var> to perform the following steps:</p>
       <ol>
        <li data-md>
         <p>Let <var>customOriginUrl</var> be the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser②">URL parser</a> on <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin⑦">data origin</a>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑦">Assert</a> <var>customOriginUrl</var> is a valid <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url⑥">URL</a>.</p>
        <li data-md>
         <p>Set <var>customOriginUrl</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-path" id="ref-for-concept-url-path">path</a> to ≪".well-known", "shared-storage", "trusted-origins"≫.</p>
        <li data-md>
         <p>Let <var>request</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request">request</a> whose <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url①">URL</a> is <var>customOriginUrl</var>, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-mode" id="ref-for-concept-request-mode">mode</a> is <code>"cors"</code>, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-referrer" id="ref-for-concept-request-referrer">referrer</a> is <code>"client"</code>, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination" id="ref-for-concept-request-destination">destination</a> is <code>"json"</code>, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-initiator-type" id="ref-for-request-initiator-type">initiator type</a> is <code>"script"</code>, and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client" id="ref-for-concept-request-client">client</a> is <var>outsideSettings</var>.</p>
        <li data-md>
         <p><a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-fetch" id="ref-for-concept-fetch①">Fetch</a> <var>request</var> with <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#process-response-end-of-body" id="ref-for-process-response-end-of-body">processResponseConsumeBody</a> set to the following algorithm, given <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response">response</a> <var>response</var> and null, failure or a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#byte-sequence" id="ref-for-byte-sequence">byte sequence</a> <var>bodyBytes</var>:</p>
         <ol>
          <li data-md>
           <p>If any of the following are true:</p>
           <ul>
            <li data-md>
             <p><var>bodyBytes</var> is null or failure; or</p>
            <li data-md>
             <p><var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status">status</a> is not an <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#ok-status" id="ref-for-ok-status">ok status</a>,</p>
           </ul>
           <p>then:</p>
           <ol>
            <li data-md>
             <p>Set <var>pendingTasks</var> to −1.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑥">Reject</a> <var>promise</var> with an "TypeError" DOMException.</p>
            <li data-md>
             <p>Abort these steps.</p>
           </ol>
          <li data-md>
           <p>Let <var>mimeType</var> be the result of <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-extract-mime-type" id="ref-for-concept-header-extract-mime-type">extracting a MIME type</a> from <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list">header list</a>.</p>
          <li data-md>
           <p>If <var>mimeType</var> is not a <a data-link-type="dfn" href="https://mimesniff.spec.whatwg.org/#json-mime-type" id="ref-for-json-mime-type">JSON MIME type</a>, then:</p>
           <ol>
            <li data-md>
             <p>Set <var>pendingTasks</var> to −1.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑦">Reject</a> <var>promise</var> with an "TypeError" DOMException.</p>
            <li data-md>
             <p>Abort these steps.</p>
           </ol>
          <li data-md>
           <p>Let <var>sourceText</var> be the result of <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode" id="ref-for-utf-8-decode">UTF-8 decoding</a> <var>bodyBytes</var>.</p>
          <li data-md>
           <p>Let <var>parsed</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value" id="ref-for-parse-a-json-string-to-an-infra-value">parsing a JSON string to an Infra value</a> given <var>sourceText</var>.</p>
          <li data-md>
           <p>If <var>parsed</var> is not a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑤">list</a> or if <var>parsed</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty②">empty</a>, then:</p>
           <ol>
            <li data-md>
             <p>Set <var>pendingTasks</var> to −1.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑧">Reject</a> <var>promise</var> with an "TypeError" DOMException.</p>
            <li data-md>
             <p>Abort these steps.</p>
           </ol>
          <li data-md>
           <p>Let <var>doesMatch</var> be false.</p>
          <li data-md>
           <p>For each <var>item</var> of <var>parsed</var>:</p>
           <ol>
            <li data-md>
             <p>If <var>item</var> is not an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map">ordered map</a>, or if <var>item</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⓪">contain</a> <code>scriptOrigin</code>, or if <var>item</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①①">contain</a> <code>contextOrigin</code>:</p>
             <ol>
              <li data-md>
               <p>Set <var>pendingTasks</var> to −1.</p>
              <li data-md>
               <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject⑨">Reject</a> <var>promise</var> with an "TypeError" DOMException.</p>
              <li data-md>
               <p>Abort these steps.</p>
             </ol>
            <li data-md>
             <p>Let <var>doesMatch</var> be the result of running <a data-link-type="dfn" href="#check-for-script-and-context-origin-match" id="ref-for-check-for-script-and-context-origin-match">check for script and context origin match</a> on <var>item</var>[<code>scriptOrigin</code>], <var>moduleURLRecord</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①③">origin</a>, <var>item</var>[<code>contextOrigin</code>], and <var>outsideSettings</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①⑦">origin</a>.</p>
            <li data-md>
             <p>If <var>doesMatch</var> is true:</p>
             <ol>
              <li data-md>
               <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task⑦">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source" id="ref-for-networking-task-source①">networking task source</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②③">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global">relevant global object</a> to perform the following steps:</p>
               <ol>
                <li data-md>
                 <p>If <var>pendingTasks</var> is not −1, then:</p>
                 <ol>
                  <li data-md>
                   <p>Set <var>pendingTasks</var> to <var>pendingTasks</var> − 1.</p>
                  <li data-md>
                   <p>If <var>pendingTasks</var> is 0, perform the following steps:</p>
                   <ol>
                    <li data-md>
                     <p>If <var>workletGlobalScope</var> has an associated boolean <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-addmodule-success" id="ref-for-sharedstorageworkletglobalscope-addmodule-success">addModule success</a>, set <var>workletGlobalScope</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-addmodule-success" id="ref-for-sharedstorageworkletglobalscope-addmodule-success①">addModule success</a> to true.</p>
                    <li data-md>
                     <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑤">Resolve</a> <var>promise</var>.</p>
                   </ol>
                 </ol>
               </ol>
              <li data-md>
               <p>Break.</p>
             </ol>
           </ol>
          <li data-md>
           <p>If <var>doesMatch</var> is false, then:</p>
           <ol>
            <li data-md>
             <p>Set <var>pendingTasks</var> to −1.</p>
            <li data-md>
             <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⓪">Reject</a> <var>promise</var> with an "TypeError" DOMException.</p>
           </ol>
         </ol>
       </ol>
     </ol>
   </ol>
   <p class="note" role="note"><span class="marker">Note:</span> If the worklet data origin is different from the current context and the script origin, an additional check is performed. This involves fetching a configuration file from the worklet data origin to verify that the current context is allowed to load the worklet with the script and perform operations.</p>
   <p>The penultimate step (i.e. the final indented step), currently "If <var>pendingTasks</var> is 0, then <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑥">resolve</a> <var>promise</var>.", should be updated to:</p>
   <ol start="2">
    <li data-md>
     <p>If <var>pendingTasks</var> is 0, perform the following steps:</p>
     <ol>
      <li data-md>
       <p>If <var>workletGlobalScope</var> has an associated boolean <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-addmodule-success" id="ref-for-sharedstorageworkletglobalscope-addmodule-success②">addModule success</a>, set <var>workletGlobalScope</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-addmodule-success" id="ref-for-sharedstorageworkletglobalscope-addmodule-success③">addModule success</a> to true.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑦">Resolve</a> <var>promise</var>.</p>
     </ol>
   </ol>
   <p>Just before the final step, currently "Return <var>promise</var>.", add the following step:</p>
   <ol start="7">
    <li data-md>
     <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②④">this</a> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①⑤">SharedStorageWorklet</a></code>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment" id="ref-for-upon-fulfillment①">upon fulfillment</a> of <var>promise</var> or <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection" id="ref-for-upon-rejection①">upon rejection</a> of <var>promise</var>, run the following steps:</p>
     <ol>
      <li data-md>
       <p>Let <var>globalScopes</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑤">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes" id="ref-for-concept-worklet-global-scopes①⓪">global scopes</a>.</p>
      <li data-md>
       <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑧">Assert</a>: <var>globalScopes</var>’ <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size⑦">size</a> equals 1.</p>
      <li data-md>
       <p>Let <var>privateAggregationObj</var> be <var>globalScopes</var>[0]'s <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworkletglobalscope-privateaggregation" id="ref-for-dom-sharedstorageworkletglobalscope-privateaggregation">privateAggregation</a></code>.</p>
      <li data-md>
       <p>Set <var>privateAggregationObj</var>’s <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#allowed-to-use" id="ref-for-allowed-to-use">allowed to use</a> to
the result of determining whether <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑥">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global" id="ref-for-concept-relevant-global①">relevant global object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window③">associated document</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use" id="ref-for-allowed-to-use①">allowed to use</a> the
"<code><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#private-aggregation" id="ref-for-private-aggregation">private-aggregation</a></code>" <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature">policy-controlled feature</a>.</p>
       <p class="issue" id="issue-f3323737"><a class="self-link" href="#issue-f3323737"></a> Consider adding an early return here if the permissions
    policy check is made first.</p>
      <li data-md>
       <p>Set <var>privateAggregationObj</var>’s <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation-scoping-details" id="ref-for-privateaggregation-scoping-details">scoping details</a> to a
    new <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#scoping-details" id="ref-for-scoping-details">scoping details</a> with the items:</p>
       <dl>
        <dt data-md><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#get-batching-scope-steps" id="ref-for-get-batching-scope-steps">get batching scope steps</a>
        <dd data-md>
         <p>An algorithm that returns the <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#batching-scope" id="ref-for-batching-scope①">batching scope</a> that is scheduled to
be passed to <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#process-contributions-for-a-batching-scope" id="ref-for-process-contributions-for-a-batching-scope①">process contributions for a batching scope</a> when the
call currently executing in <var>scope</var> returns.</p>
        <dt data-md><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#get-debug-scope-steps" id="ref-for-get-debug-scope-steps">get debug scope steps</a>
        <dd data-md>
         <p>An algorithm that returns the <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#debug-scope" id="ref-for-debug-scope①">debug scope</a> that is scheduled to be
passed to <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#mark-a-debug-scope-complete" id="ref-for-mark-a-debug-scope-complete①">mark a debug scope complete</a> when the call currently
executing in <var>scope</var> returns.</p>
       </dl>
       <p class="note" role="note"><span class="marker">Note:</span> Multiple operation invocations can be in-progress at the same
time, each with a different batching scope and debug scope. However,
only one can be currently executing.</p>
     </ol>
   </ol>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="trusted-origin-type">trusted origin type</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑥">string</a> or <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑥">list</a> of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑦">strings</a>.</p>
   <div class="algorithm" data-algorithm="check for script and context origin match">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-for-script-and-context-origin-match">check for script and context origin match</dfn>, given <a data-link-type="dfn" href="#trusted-origin-type" id="ref-for-trusted-origin-type">trusted origin type</a> <var>itemScriptOrigin</var>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①④">origin</a> <var>actualScriptOrigin</var>, <a data-link-type="dfn" href="#trusted-origin-type" id="ref-for-trusted-origin-type①">trusted origin type</a> <var>itemContextOrigin</var>, and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①⑧">origin</a> <var>actualContextOrigin</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-for-trusted-origin-match" id="ref-for-check-for-trusted-origin-match">check for trusted origin match</a>, given <var>itemScriptOrigin</var> and <var>actualScriptOrigin</var> is false, return false.</p>
     <li data-md>
      <p>Return the result of running <a data-link-type="dfn" href="#check-for-trusted-origin-match" id="ref-for-check-for-trusted-origin-match①">check for trusted origin match</a>, given <var>itemContextOrigin</var> and <var>actualContextOrigin</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="check for trusted origin match">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-for-trusted-origin-match">check for trusted origin match</dfn>, given <a data-link-type="dfn" href="#trusted-origin-type" id="ref-for-trusted-origin-type②">trusted origin type</a> <var>itemOrigin</var> and <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⑤">origin</a> <var>actualOrigin</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>If <var>itemOrigin</var> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑧">string</a>, return the result of running <a data-link-type="dfn" href="#check-for-trusted-origin-match-on-a-string" id="ref-for-check-for-trusted-origin-match-on-a-string">check for trusted origin match on a string</a>, given <var>itemOrigin</var> and <var>actualOrigin</var>.</p>
     <li data-md>
      <p>Otherwise, for each <var>originString</var> in <var>itemOrigin</var>:</p>
      <ol>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#check-for-trusted-origin-match-on-a-string" id="ref-for-check-for-trusted-origin-match-on-a-string①">check for trusted origin match on a string</a> given <var>originString</var> and <var>actualOrigin</var> is true, return true.</p>
      </ol>
     <li data-md>
      <p>Return false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="check for trusted origin match on a string">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-for-trusted-origin-match-on-a-string">check for trusted origin match on a string</dfn>, given <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string⑨">string</a> <var>itemOrigin</var> and <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⑥">origin</a> <var>actualOrigin</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>If <var>itemOrigin</var> is <code>"*"</code>, return true.</p>
     <li data-md>
      <p>Let <var>itemOriginUrl</var> be the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser③">URL parser</a> on <var>itemOrigin</var>.</p>
     <li data-md>
      <p>If <var>itemOriginUrl</var> is not a valid <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url⑦">URL</a>, then return false.</p>
     <li data-md>
      <p>If <var>itemOriginUrl</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⑦">origin</a> and <var>actualOrigin</var> are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin③">same origin</a>, return true.</p>
     <li data-md>
      <p>Otherwise, return false.</p>
    </ol>
   </div>
   <p><span class="todo">Add additional monkey patch pieces for out-of-process worklets.</span></p>
   <h3 class="heading settled" data-level="2.3" id="global-scope"><span class="secno">2.3. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope⑨">SharedStorageWorkletGlobalScope</a></code></span><a class="self-link" href="#global-scope"></a></h3>
   <p>The <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①⑥">SharedStorageWorklet</a></code>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type" id="ref-for-worklet-global-scope-type①">worklet global scope type</a> is <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①⓪">SharedStorageWorkletGlobalScope</a></code>.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①⑦">SharedStorageWorklet</a></code>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type" id="ref-for-worklet-destination-type">worklet destination type</a> is "sharedstorageworklet".</p>
   <h4 class="heading settled" data-level="2.3.1" id="request-destination-monkey-patch"><span class="secno">2.3.1. </span><span class="content">Monkey Patch for request <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination" id="ref-for-concept-request-destination①">destination</a></span><a class="self-link" href="#request-destination-monkey-patch"></a></h4>
   <p>The fetch request’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination" id="ref-for-concept-request-destination②">destination</a> field should additionally include "sharedstorageworklet" as a valid value.</p>
<pre class="idl highlight def"><c- b>callback</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="callback" data-export id="callbackdef-runfunctionforsharedstorageselecturloperation"><code><c- g>RunFunctionForSharedStorageSelectURLOperation</c-></code></dfn> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑥"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long③"><c- b>unsigned</c-> <c- b>long</c-></a>>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence①"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString②"><c- b>USVString</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="RunFunctionForSharedStorageSelectURLOperation" data-dfn-type="argument" data-export id="dom-runfunctionforsharedstorageselecturloperation-urls"><code><c- g>urls</c-></code></dfn>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any①"><c- b>any</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="RunFunctionForSharedStorageSelectURLOperation" data-dfn-type="argument" data-export id="dom-runfunctionforsharedstorageselecturloperation-data"><code><c- g>data</c-></code></dfn>);
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global" id="ref-for-Global"><c- g>Global</c-></a>=<a data-link-type="idl-name" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①⑧"><c- n>SharedStorageWorklet</c-></a>]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstorageworkletglobalscope"><code><c- g>SharedStorageWorkletGlobalScope</c-></code></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope" id="ref-for-workletglobalscope"><c- n>WorkletGlobalScope</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined" id="ref-for-idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworkletglobalscope-register" id="ref-for-dom-sharedstorageworkletglobalscope-register②"><c- g>register</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorkletGlobalScope/register(name, operationCtor)" data-dfn-type="argument" data-export id="dom-sharedstorageworkletglobalscope-register-name-operationctor-name"><code><c- g>name</c-></code></dfn>,
                     <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#Function" id="ref-for-Function①"><c- n>Function</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorkletGlobalScope/register(name, operationCtor)" data-dfn-type="argument" data-export id="dom-sharedstorageworkletglobalscope-register-name-operationctor-operationctor"><code><c- g>operationCtor</c-></code></dfn>);

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorage" id="ref-for-sharedstorage①"><c- n>SharedStorage</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="SharedStorage" href="#dom-sharedstorageworkletglobalscope-sharedstorage" id="ref-for-dom-sharedstorageworkletglobalscope-sharedstorage"><c- g>sharedStorage</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation" id="ref-for-privateaggregation"><c- n>PrivateAggregation</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="attribute" data-export data-readonly data-type="PrivateAggregation" id="dom-sharedstorageworkletglobalscope-privateaggregation"><code><c- g>privateAggregation</c-></code></dfn>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise⑦"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence②"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://wicg.github.io/turtledove/#dictdef-storageinterestgroup" id="ref-for-dictdef-storageinterestgroup"><c- n>StorageInterestGroup</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworkletglobalscope-interestgroups" id="ref-for-dom-sharedstorageworkletglobalscope-interestgroups"><c- g>interestGroups</c-></a>();

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorageworkletnavigator" id="ref-for-sharedstorageworkletnavigator"><c- n>SharedStorageWorkletNavigator</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="SharedStorageWorkletNavigator" href="#dom-sharedstorageworkletglobalscope-navigator" id="ref-for-dom-sharedstorageworkletglobalscope-navigator"><c- g>navigator</c-></a>;
};
</pre>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①①">SharedStorageWorkletGlobalScope</a></code> has an associated <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑦">environment settings object</a> <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="dfn" data-noexport id="sharedstorageworkletglobalscope-outside-settings">outside settings</dfn>, which is the associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet①⑨">SharedStorageWorklet</a></code>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑥">relevant settings object</a>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①②">SharedStorageWorkletGlobalScope</a></code> has an associated <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean③">boolean</a> <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="dfn" data-noexport id="sharedstorageworkletglobalscope-addmodule-success">addModule success</dfn>, which is initialized to false.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①③">SharedStorageWorkletGlobalScope</a></code> also has an associated <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="dfn" data-noexport id="sharedstorageworkletglobalscope-operation-map">operation map</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map①">map</a>, initially empty, of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①⓪">strings</a> (denoting operation names) to <a data-link-type="dfn" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#function-object" id="ref-for-function-object">function objects</a>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①④">SharedStorageWorkletGlobalScope</a></code> has an associated <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②">SharedStorage</a></code> instance <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="dfn" data-noexport id="sharedstorageworkletglobalscope-shared-storage-instance">shared storage instance</dfn>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①⑤">SharedStorageWorkletGlobalScope</a></code> has an associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletnavigator" id="ref-for-sharedstorageworkletnavigator①">SharedStorageWorkletNavigator</a></code> instance <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="dfn" data-noexport id="sharedstorageworkletglobalscope-navigator-instance">navigator instance</dfn>.</p>
   <h4 class="heading settled" data-level="2.3.2" id="scope-algo"><span class="secno">2.3.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①⑥">SharedStorageWorkletGlobalScope</a></code> algorithms</span><a class="self-link" href="#scope-algo"></a></h4>
   <div class="algorithm" data-algorithm="register(name, operationCtor)" data-algorithm-for="SharedStorageWorkletGlobalScope">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="method" data-export id="dom-sharedstorageworkletglobalscope-register"><code>register(<var>name</var>, <var>operationCtor</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>If <var>name</var> is missing or empty, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>operationMap</var> be this <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①⑦">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-operation-map" id="ref-for-sharedstorageworkletglobalscope-operation-map②">operation map</a>.</p>
     <li data-md>
      <p>If <var>operationMap</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①②">contains</a> an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-entry" id="ref-for-map-entry">entry</a> with <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-key" id="ref-for-map-key">key</a> <var>name</var>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>operationCtor</var> is missing, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>operationClassInstance</var> be the result of <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#construct-a-callback-function" id="ref-for-construct-a-callback-function">constructing</a> <var>operationCtor</var>, with no arguments.</p>
     <li data-md>
      <p>Let <var>runFunction</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#sec-get-o-p" id="ref-for-sec-get-o-p">Get</a>(<var>operationClassInstance</var>, "<code>run</code>"). Rethrow any exceptions.</p>
     <li data-md>
      <p>If <a data-link-type="abstract-op" href="https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iscallable" id="ref-for-sec-iscallable">IsCallable</a>(<var>runFunction</var>) is false, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⑧">TypeError</a></code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set">Set</a> the value of <var>operationMap</var>[<var>name</var>] to <var>runFunction</var>.</p>
    </ol>
   </div>
   <p class="issue" id="issue-ec8d9fc9"><a class="self-link" href="#issue-ec8d9fc9"></a> The "name" and "operationCtor" cannot be missing here given WebIDL. Should just check for default/empty values. <a href="https://github.com/WICG/shared-storage/issues/151">[Issue #151]</a></p>
   <div class="algorithm" data-algorithm="interestGroups()" data-algorithm-for="SharedStorageWorkletGlobalScope">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="method" data-export id="dom-sharedstorageworkletglobalscope-interestgroups"><code>interestGroups()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise⑧">promise</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished②">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage③">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①⑧">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror②⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc③">browsing context</a>.</p>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②④">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>document</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window④">associated document</a>.</p>
     <li data-md>
      <p>If <var>document</var> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②⑤">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③①">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>workletDataOrigin</var> be <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm②">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object⑥">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin①⑨">origin</a>.</p>
     <li data-md>
      <p>Run the following steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel" id="ref-for-in-parallel①">in parallel</a>:</p>
      <ol>
       <li data-md>
        <p>Let <var>interestGroups</var> be the result of running <a data-link-type="dfn" href="https://wicg.github.io/turtledove/#get-storage-interest-groups-for-owner" id="ref-for-get-storage-interest-groups-for-owner">get storage interest groups for owner</a> given <var>workletDataOrigin</var>.</p>
       <li data-md>
        <p>If <var>interestGroups</var> is failure:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task⑧">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source⑥">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①①">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③②">TypeError</a></code>.</p>
        </ol>
       <li data-md>
        <p>Otherwise:</p>
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task⑨">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source⑦">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global④">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑧">resolve</a> <var>promise</var> with <var>interestGroups</var>.</p>
        </ol>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="sharedStorage" data-algorithm-for="SharedStorageWorkletGlobalScope">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="attribute" data-export id="dom-sharedstorageworkletglobalscope-sharedstorage"><code>sharedStorage</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps" id="ref-for-getter-steps">getter steps</a> are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑦">this</a>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-addmodule-success" id="ref-for-sharedstorageworkletglobalscope-addmodule-success④">addModule success</a> is true, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑧">this</a>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-shared-storage-instance" id="ref-for-sharedstorageworkletglobalscope-shared-storage-instance">shared storage instance</a>.</p>
     <li data-md>
      <p>Otherwise, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③③">TypeError</a></code>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="navigator" data-algorithm-for="SharedStorageWorkletGlobalScope">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="attribute" data-export id="dom-sharedstorageworkletglobalscope-navigator"><code>navigator</code></dfn> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps" id="ref-for-getter-steps①">getter steps</a> are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this②⑨">this</a>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-addmodule-success" id="ref-for-sharedstorageworkletglobalscope-addmodule-success⑤">addModule success</a> is true, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⓪">this</a>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-navigator-instance" id="ref-for-sharedstorageworkletglobalscope-navigator-instance">navigator instance</a>.</p>
     <li data-md>
      <p>Otherwise, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③④">TypeError</a></code>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="privateAggregation getter">
     The <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworkletglobalscope-privateaggregation" id="ref-for-dom-sharedstorageworkletglobalscope-privateaggregation①">privateAggregation</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#getter-steps" id="ref-for-getter-steps②">getter steps</a> are to: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#get-the-privateaggregation" id="ref-for-get-the-privateaggregation">Get the privateAggregation</a> given <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③①">this</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="check whether addModule is finished" data-algorithm-for="SharedStorageWorkletGlobalScope">
     To <dfn class="dfn-paneled" data-dfn-for="SharedStorageWorkletGlobalScope" data-dfn-type="dfn" data-noexport id="sharedstorageworkletglobalscope-check-whether-addmodule-is-finished">check whether addModule is finished</dfn>, the step is: 
    <ol>
     <li data-md>
      <p>Return the value of <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-addmodule-success" id="ref-for-sharedstorageworkletglobalscope-addmodule-success⑥">addModule success</a>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="2.4" id="reporting"><span class="secno">2.4. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dictdef-sharedstorageurlwithmetadata" id="ref-for-dictdef-sharedstorageurlwithmetadata②">SharedStorageUrlWithMetadata</a></code> and Reporting</span><a class="self-link" href="#reporting"></a></h3>
<pre class="idl highlight def"><c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sharedstorageurlwithmetadata"><code><c- g>SharedStorageUrlWithMetadata</c-></code></dfn> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString③"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageUrlWithMetadata" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-sharedstorageurlwithmetadata-url"><code><c- g>url</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object"><c- b>object</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageUrlWithMetadata" data-dfn-type="dict-member" data-export data-type="object" id="dom-sharedstorageurlwithmetadata-reportingmetadata"><code><c- g>reportingMetadata</c-></code></dfn>;
};
</pre>
   <p>If a <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstorageurlwithmetadata" id="ref-for-dictdef-sharedstorageurlwithmetadata③">SharedStorageUrlWithMetadata</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary">dictionary</a> contains a non-<a data-link-type="dfn" href="https://infra.spec.whatwg.org#map-is-empty" id="ref-for-map-is-empty①">empty</a> <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageurlwithmetadata-reportingmetadata" id="ref-for-dom-sharedstorageurlwithmetadata-reportingmetadata">reportingMetadata</a></code> <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object①">object</a></code> in the form of a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary①">dictionary</a> whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-keys" id="ref-for-map-getting-the-keys①">keys</a> are <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dictdef-fenceevent" id="ref-for-dictdef-fenceevent">FenceEvent</a></code>’s <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype" id="ref-for-dom-fenceevent-eventtype">eventType</a></code>s and whose <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values" id="ref-for-map-getting-the-values">values</a> are <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①①">strings</a> that parse to valid <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url⑧">URLs</a>, then these <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype" id="ref-for-dom-fenceevent-eventtype①">eventType</a></code>-<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url⑨">URL</a> pairs will be <a data-link-type="dfn" href="#register-reporting-metadata" id="ref-for-register-reporting-metadata①">registered</a> for later access within any <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element①">fenced frame</a> that loads the <code class="idl"><a data-link-type="idl" href="#typedefdef-sharedstorageresponse" id="ref-for-typedefdef-sharedstorageresponse①">SharedStorageResponse</a></code> resulting from this <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl⑦">selectURL()</a></code> call.</p>
   <p class="issue" id="issue-3af1d5c1"><a class="self-link" href="#issue-3af1d5c1"></a> <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageurlwithmetadata-reportingmetadata" id="ref-for-dom-sharedstorageurlwithmetadata-reportingmetadata①">reportingMetadata</a></code> should be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary②">dictionary</a>. <a href="https://github.com/WICG/shared-storage/issues/141">[Issue #141]</a></p>
   <p>Inside a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element②">fenced frame</a> with <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype" id="ref-for-dom-fenceevent-eventtype②">eventType</a></code>-<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①⓪">URL</a> pairs that have been <a data-link-type="dfn" href="#register-reporting-metadata" id="ref-for-register-reporting-metadata②">registered</a> through <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl⑧">selectURL()</a></code> with <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageurlwithmetadata-reportingmetadata" id="ref-for-dom-sharedstorageurlwithmetadata-reportingmetadata②">reportingMetadata</a></code> <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object②">object</a></code>s, if <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fence-reportevent" id="ref-for-dom-fence-reportevent">reportEvent()</a></code> is called on a <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dictdef-fenceevent" id="ref-for-dictdef-fenceevent①">FenceEvent</a></code> with a <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fenceevent-destination" id="ref-for-dom-fenceevent-destination">destination</a></code> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-contain" id="ref-for-list-contain①">containing</a> "<code>shared-storage-select-url</code>" and that <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dictdef-fenceevent" id="ref-for-dictdef-fenceevent②">FenceEvent</a></code>’s corresponding <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype" id="ref-for-dom-fenceevent-eventtype③">eventType</a></code> is triggered, then the <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dictdef-fenceevent" id="ref-for-dictdef-fenceevent③">FenceEvent</a></code>’s <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fenceevent-eventdata" id="ref-for-dom-fenceevent-eventdata">eventData</a></code> will be sent as a <a data-link-type="dfn" href="https://w3c.github.io/beacon/#beacon" id="ref-for-beacon">beacon</a> to the registered <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①①">URL</a> for that <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype" id="ref-for-dom-fenceevent-eventtype④">eventType</a></code>.</p>
   <div class="algorithm" data-algorithm="validate reporting metadata">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="validate-reporting-metadata">validate reporting metadata</dfn>, given an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object③">object</a></code> <var>reportingMetadata</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>If <var>reportingMetadata</var> is not a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary③">dictionary</a>, return false.</p>
     <li data-md>
      <p>If <var>reportingMetadata</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org#map-is-empty" id="ref-for-map-is-empty②">empty</a>, return true.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate①">For each</a> <var>eventType</var> → <var>urlString</var> of <var>reportingMetadata</var>, if the result of running <a data-link-type="dfn" href="#get-the-canonical-url-string-if-valid" id="ref-for-get-the-canonical-url-string-if-valid①">get the canonical URL string if valid</a> with <var>urlString</var> is undefined, return false.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the canonical URL string if valid">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-canonical-url-string-if-valid">get the canonical URL string if valid</dfn>, given a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①②">string</a> <var>urlString</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>url</var> be the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser④">URL parser</a> on <var>urlString</var>.</p>
     <li data-md>
      <p>If <var>url</var> is not a valid <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①②">URL</a>, return undefined.</p>
     <li data-md>
      <p>Otherwise, return the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-serializer" id="ref-for-concept-url-serializer">URL serializer</a> on <var>url</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="register reporting metadata">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="register-reporting-metadata">register reporting metadata</dfn>, given an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object④">object</a></code> <var>reportingMetadata</var> and a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fenced-frame-config" id="ref-for-fenced-frame-config②">fenced frame config</a> <var>fencedFrameConfigStruct</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>If <var>reportingMetadata</var> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org#map-is-empty" id="ref-for-map-is-empty③">empty</a>, return.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert①⑨">Assert</a>: <var>reportingMetadata</var> is a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary" id="ref-for-dfn-dictionary④">dictionary</a>.</p>
     <li data-md>
      <p>Let <var>reportingUrlMap</var> be an <a data-link-type="dfn" href="https://infra.spec.whatwg.org#map-is-empty" id="ref-for-map-is-empty④">empty</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map②">map</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate②">For each</a> <var>eventType</var> → <var>urlString</var> of <var>reportingMetadata</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>url</var> be the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser⑤">URL parser</a> on <var>urlString</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②⓪">Assert</a>: <var>url</var> is a valid <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①③">URL</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set①">Set</a> <var>reportingUrlMap</var>[<var>eventType</var>] to <var>url</var>.</p>
      </ol>
    </ol>
    <p class="issue" id="issue-451ee8b5"><a class="self-link" href="#issue-451ee8b5"></a> Store <var>reportingUrlMap</var> inside a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fencedframetype-fenced-frame-reporter" id="ref-for-fencedframetype-fenced-frame-reporter">fenced frame reporter</a> class associated with <var>fencedFrameConfigStruct</var>. Both of these still need to be added to the draft <a data-link-type="biblio" href="#biblio-fenced-frame" title="Fenced Frame">[Fenced-Frame]</a>. <a href="https://github.com/WICG/shared-storage/issues/144">[Issue #144]</a></p>
   </div>
   <h3 class="heading settled" data-level="2.5" id="budgets"><span class="secno">2.5. </span><span class="content">Entropy Budgets</span><a class="self-link" href="#budgets"></a></h3>
   <p>Because <a data-link-type="dfn" href="https://en.wikipedia.org/wiki/Entropy_(information_theory)#bits-of-entropy" id="ref-for-bits-of-entropy">bits of entropy</a> can leak via <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl⑨">selectURL()</a></code>, the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent">user agent</a> will need to maintain budgets to limit these leaks.</p>
   <p>On a call to <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①⓪">selectURL()</a></code>, when any of these budgets are exhausted, the <a data-link-type="dfn" href="#default-selecturl-index" id="ref-for-default-selecturl-index④">default selectURL index</a> will be used to determine which URL to select.</p>
   <div class="algorithm" data-algorithm="get the default selectURL index">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-default-selecturl-index">get the default selectURL index</dfn>, given <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/media-source/#dom-appendmode-sequence" id="ref-for-dom-appendmode-sequence①">sequence</a></code>&lt;<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString④">USVString</a></code>> <var>urls</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Return 0.</p>
      <p class="note" role="note"><span class="marker">Note:</span> We could have chosen to return any <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long④">unsigned long</a></code> from the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#the-exclusive-range" id="ref-for-the-exclusive-range">range</a> from 0 to <var>urls</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size⑧">size</a>, exclusive, as long as the returned index was independent from the registered operation class’s "<code>run</code>" method.</p>
    </ol>
   </div>
   <p>The <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="default-selecturl-index">default selectURL index</dfn> is the index obtained by running <a data-link-type="dfn" href="#get-the-default-selecturl-index" id="ref-for-get-the-default-selecturl-index">get the default selectURL index</a>, given <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/media-source/#dom-appendmode-sequence" id="ref-for-dom-appendmode-sequence②">sequence</a></code>&lt;<code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑤">USVString</a></code>> <var>urls</var>.</p>
   <h4 class="heading settled" data-level="2.5.1" id="nav-budget"><span class="secno">2.5.1. </span><span class="content">Navigation Entropy Budget</span><a class="self-link" href="#nav-budget"></a></h4>
   <p>If a user <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#tracking-user-activation" id="ref-for-tracking-user-activation">activates</a> a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element③">fenced frame</a> whose <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document">node document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc">browsing context</a>’s <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance" id="ref-for-browsing-context-fenced-frame-config-instance①">fenced frame config instance</a> was generated by <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①①">selectURL()</a></code> and thereby initiates a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top②">top-level traversable</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate">navigation</a>, this will reveal to the landing page that its <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①④">URL</a> was selected, which is a leak in <a data-link-type="dfn" href="https://en.wikipedia.org/wiki/Entropy_(information_theory)#entropy-bits" id="ref-for-entropy-bits">entropy bits</a> of up to logarithm base 2 of the number of input <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①⑤">URLs</a> for the call to <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①②">selectURL()</a></code>. To mitigate this, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①">user agent</a> will set a per-<a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site①">site</a> <a data-link-type="dfn" href="#navigation-entropy-allowance" id="ref-for-navigation-entropy-allowance">navigation entropy allowance</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="navigation-entropy-allowance">navigation entropy allowance</dfn> is a maximum allowance of <a data-link-type="dfn" href="https://en.wikipedia.org/wiki/Entropy_(information_theory)#entropy-bits" id="ref-for-entropy-bits①">entropy bits</a> that are permitted to leak via <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element④">fenced frames</a> initiating <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top③">top-level traversable</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate①">navigations</a> during a given <a data-link-type="dfn" href="#navigation-budget-epoch" id="ref-for-navigation-budget-epoch">navigation budget epoch</a> for a given calling <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site②">site</a>. This <a data-link-type="dfn" href="#navigation-entropy-allowance" id="ref-for-navigation-entropy-allowance①">allowance</a> is defined by the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent②">user agent</a> and is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site③">site</a>-agnostic.</p>
   <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent③">user agent</a> will define a fixed predetermined <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration①">duration</a> <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="navigation-budget-lifetime">navigation budget lifetime</dfn>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="navigation-budget-epoch">navigation budget epoch</dfn> is any interval of time whose <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration②">duration</a> is the <a data-link-type="dfn" href="#navigation-budget-lifetime" id="ref-for-navigation-budget-lifetime">navigation budget lifetime</a>.</p>
   <p>To keep track of how this <a data-link-type="dfn" href="#navigation-entropy-allowance" id="ref-for-navigation-entropy-allowance②">navigation entropy allowance</a> is used, the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent④">user agent</a> uses a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shared-storage-navigation-budget-table">shared storage navigation budget table</dfn>, which is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map③">map</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site④">sites</a> to <a data-link-type="dfn" href="#navigation-entropy-ledger" id="ref-for-navigation-entropy-ledger">navigation entropy ledgers</a>.</p>
   <p>An <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="navigation-entropy-ledger">navigation entropy ledger</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑦">list</a> of <a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit">bit debits</a>.</p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="bit-debit">bit debit</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item">items</a>:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="bit debit" data-dfn-type="dfn" data-noexport id="bit-debit-bits">bits</dfn>
    <dd data-md>
     <p>a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double">double</a></code></p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="bit debit" data-dfn-type="dfn" data-noexport id="bit-debit-timestamp">timestamp</dfn>
    <dd data-md>
     <p>a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp">DOMHighResTimeStamp</a></code> (from the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unix-epoch" id="ref-for-dfn-unix-epoch">Unix Epoch</a>)</p>
   </dl>
   <p><a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit①">Bit debits</a> whose <a data-link-type="dfn" href="#bit-debit-timestamp" id="ref-for-bit-debit-timestamp">timestamps</a> precede the start of the current <a data-link-type="dfn" href="#navigation-budget-epoch" id="ref-for-navigation-budget-epoch①">navigation budget epoch</a> are said to be <dfn class="dfn-paneled" data-dfn-for="bit debit" data-dfn-type="dfn" data-noexport id="bit-debit-expired">expired</dfn>.</p>
   <p>When a leak occurs, its value in <a data-link-type="dfn" href="https://en.wikipedia.org/wiki/Entropy_(information_theory)#entropy-bits" id="ref-for-entropy-bits②">entropy bits</a> is calculated and stored for that <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site⑤">site</a>, along with the current time as a <a data-link-type="dfn" href="#bit-debit-timestamp" id="ref-for-bit-debit-timestamp①">timestamp</a>, together as a <a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit②">bit debit</a> in the <a data-link-type="dfn" href="#shared-storage-navigation-budget-table" id="ref-for-shared-storage-navigation-budget-table">shared storage navigation budget table</a>.</p>
   <p>Each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site⑥">site</a> has an associated double <dfn class="dfn-paneled" data-dfn-for="site" data-dfn-type="dfn" data-noexport id="site-remaining-navigation-budget">remaining navigation budget</dfn>, whose value is the <a data-link-type="dfn" href="#navigation-entropy-allowance" id="ref-for-navigation-entropy-allowance③">navigation entropy allowance</a> minus any <a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit③">bit debits</a> whose <a data-link-type="dfn" href="#bit-debit-timestamp" id="ref-for-bit-debit-timestamp②">timestamps</a> are within the current <a data-link-type="dfn" href="#navigation-budget-epoch" id="ref-for-navigation-budget-epoch②">navigation budget epoch</a>.</p>
   <p>When a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site⑦">site</a> has insufficient <a data-link-type="dfn" href="#site-remaining-navigation-budget" id="ref-for-site-remaining-navigation-budget①">remaining navigation budget</a>, <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①③">selectURL()</a></code> will return a <code class="idl"><a data-link-type="idl" href="#typedefdef-sharedstorageresponse" id="ref-for-typedefdef-sharedstorageresponse②">SharedStorageResponse</a></code> (i.e. either a <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#fencedframeconfig" id="ref-for-fencedframeconfig①">FencedFrameConfig</a></code> or a <a data-link-type="dfn" href="https://www.ietf.org/rfc/rfc4122.txt#urn-uuid" id="ref-for-urn-uuid①">urn uuid</a>) for the <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageurlwithmetadata-url" id="ref-for-dom-sharedstorageurlwithmetadata-url">url</a></code> in the <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstorageurlwithmetadata" id="ref-for-dictdef-sharedstorageurlwithmetadata④">SharedStorageUrlWithMetadata</a></code> at the <a data-link-type="dfn" href="#default-selecturl-index" id="ref-for-default-selecturl-index⑤">default selectURL index</a>.</p>
   <div class="algorithm" data-algorithm="determine remaining navigation budget">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="determine-remaining-navigation-budget">determine remaining navigation budget</dfn>, given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑧">environment settings object</a> <var>environment</var> and a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site⑧">site</a> <var>site</var>, run the following steps: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②①">Assert</a>: <var>site</var> is not an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque②">opaque origin</a>.</p>
     <li data-md>
      <p>Let <var>maxBits</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent⑤">user agent</a>’s <a data-link-type="dfn" href="#navigation-entropy-allowance" id="ref-for-navigation-entropy-allowance④">navigation entropy allowance</a>.</p>
     <li data-md>
      <p>If the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent⑥">user agent</a>’s <a data-link-type="dfn" href="#shared-storage-navigation-budget-table" id="ref-for-shared-storage-navigation-budget-table①">shared storage navigation budget table</a> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①③">contain</a> <var>site</var>, then return <var>maxBits</var>.</p>
     <li data-md>
      <p>Otherwise, let <var>ledger</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent⑦">user agent</a>’s <a data-link-type="dfn" href="#shared-storage-navigation-budget-table" id="ref-for-shared-storage-navigation-budget-table②">shared storage navigation budget table</a>[<var>site</var>].</p>
     <li data-md>
      <p>Let <var>debitSum</var> be 0.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate③">For each</a> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-item" id="ref-for-list-item">item</a> <var>bitDebit</var> in <var>ledger</var>, do the following steps:</p>
      <ol>
       <li data-md>
        <p>Let <var>debit</var> be <var>bitDebit</var>’s <a data-link-type="dfn" href="#bit-debit-bits" id="ref-for-bit-debit-bits">bits</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#check-whether-a-bit-debit-is-expired" id="ref-for-check-whether-a-bit-debit-is-expired">check whether a bit debit is expired</a> with <var>environment</var> and <var>bitDebit</var> is false, then increment <var>debitSum</var> by <var>debit</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>maxBits</var> − <var>debitSum</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="check whether a bit debit is expired">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-whether-a-bit-debit-is-expired">check whether a bit debit is expired</dfn>, given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object⑨">environment settings object</a> <var>environment</var> and a <a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit④">bit debit</a> <var>bitDebit</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>epochLength</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent⑧">user agent</a>’s <a data-link-type="dfn" href="#navigation-budget-lifetime" id="ref-for-navigation-budget-lifetime①">navigation budget lifetime</a>.</p>
     <li data-md>
      <p>Let <var>currentTime</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-eso-current-wall-time" id="ref-for-dfn-eso-current-wall-time">current wall time</a>.</p>
     <li data-md>
      <p>Let <var>threshold</var> be <var>currentTime</var> − <var>epochLength</var>.</p>
     <li data-md>
      <p>If <var>bitDebit</var>’s <a data-link-type="dfn" href="#bit-debit-timestamp" id="ref-for-bit-debit-timestamp③">timestamp</a> is less than <var>threshold</var>, return true.</p>
     <li data-md>
      <p>Otherwise, return false.</p>
    </ol>
   </div>
   <p>A <a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit⑤">bit debit</a> will need to be <a data-link-type="dfn" href="#charge-shared-storage-navigation-budget" id="ref-for-charge-shared-storage-navigation-budget">charged</a> to the <a data-link-type="dfn" href="#shared-storage-navigation-budget-table" id="ref-for-shared-storage-navigation-budget-table③">shared storage navigation budget table</a> for each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top④">top-level traversable</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate②">navigation</a> initiated by a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element⑤">fenced frame</a> whose <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document①">node document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc①">browsing context</a>’s <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance" id="ref-for-browsing-context-fenced-frame-config-instance②">fenced frame config instance</a> was generated via <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①④">selectURL()</a></code>, as this can leak cross-site data. Since the <a data-link-type="dfn" href="#bit-debit-bits" id="ref-for-bit-debit-bits①">bits</a> to charge is calculated during the call to <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①⑤">selectURL()</a></code> but only actually recorded in the <a data-link-type="dfn" href="#shared-storage-navigation-budget-table" id="ref-for-shared-storage-navigation-budget-table④">shared storage navigation budget table</a> if and when the resulting fenced frame initiates a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top⑤">top-level traversable</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#beginning-navigation" id="ref-for-beginning-navigation">navigation</a>, the <a data-link-type="dfn" href="#bit-debit-bits" id="ref-for-bit-debit-bits②">bits</a> must be stored as a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="pending-shared-storage-budget-debit">pending shared storage budget debit</dfn> in the corresponding fenced frame’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document②">node document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc②">browsing context</a>’s <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance" id="ref-for-browsing-context-fenced-frame-config-instance③">fenced frame config instance</a> until this time.</p>
   <p class="issue" id="issue-e3244203"><a class="self-link" href="#issue-e3244203"></a> Move the definition of <a data-link-type="dfn" href="#pending-shared-storage-budget-debit" id="ref-for-pending-shared-storage-budget-debit">pending shared storage budget debit</a> to <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance" id="ref-for-browsing-context-fenced-frame-config-instance④">fenced frame config instance</a> in the draft <a data-link-type="biblio" href="#biblio-fenced-frame" title="Fenced Frame">[Fenced-Frame]</a> specification. <a href="https://github.com/WICG/shared-storage/issues/148">[Issue #148]</a></p>
   <p>Between <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#beginning-navigation" id="ref-for-beginning-navigation①">beginning navigation</a> and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#ending-navigation" id="ref-for-ending-navigation">ending navigation</a>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent⑨">user agent</a> will perform the <a data-link-type="dfn" href="#charge-shared-storage-navigation-budget" id="ref-for-charge-shared-storage-navigation-budget①">charge shared storage navigation budget</a> algorithm.</p>
   <p class="issue" id="issue-2c9003c1"><a class="self-link" href="#issue-2c9003c1"></a> Need to find a better way to specify timing of the navigation budget charging. <a href="https://github.com/WICG/shared-storage/issues/138">[Issue #138]</a></p>
   <div class="algorithm" data-algorithm="charge shared storage navigation budget">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="charge-shared-storage-navigation-budget">charge shared storage navigation budget</dfn> during a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#beginning-navigation" id="ref-for-beginning-navigation②">navigation</a> with <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable②">navigable</a> <var>navigable</var> and <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> <var>sourceDocument</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>If <var>navigable</var> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top⑥">top-level traversable</a>, return.</p>
     <li data-md>
      <p>Let <var>currentNavigable</var> be <var>sourceDocument</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable" id="ref-for-node-navigable①">node navigable</a>.</p>
     <li data-md>
      <p>While <var>currentNavigable</var> is not null:</p>
      <ol>
       <li data-md>
        <p>Let <var>site</var> be the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site" id="ref-for-obtain-a-site②">obtain a site</a> with <var>currentNavigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document" id="ref-for-nav-document①">active document</a>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document-origin" id="ref-for-concept-document-origin①">origin</a>.</p>
       <li data-md>
        <p>Let <var>instance</var> be <var>currentNavigable</var>’s <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-node-document" id="ref-for-concept-node-document③">node document</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc" id="ref-for-concept-document-bc③">browsing context</a>’s <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance" id="ref-for-browsing-context-fenced-frame-config-instance⑤">fenced frame config instance</a>.</p>
       <li data-md>
        <p>Set <var>currentNavigable</var> to <var>currentNavigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent" id="ref-for-nav-parent">parent</a>.</p>
       <li data-md>
        <p>If <var>instance</var> is null or <var>site</var> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque③">opaque origin</a>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue">continue</a>.</p>
       <li data-md>
        <p>Let <var>pendingBits</var> be <var>instance</var>’s <a data-link-type="dfn" href="#pending-shared-storage-budget-debit" id="ref-for-pending-shared-storage-budget-debit①">pending shared storage budget debit</a>.</p>
       <li data-md>
        <p>If <var>pendingBits</var> is not greater than 0, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-continue" id="ref-for-iteration-continue①">continue</a>.</p>
       <li data-md>
        <p>Let <var>ledger</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①⓪">user agent</a>’s <a data-link-type="dfn" href="#shared-storage-navigation-budget-table" id="ref-for-shared-storage-navigation-budget-table⑤">shared storage navigation budget table</a>[<var>site</var>].</p>
       <li data-md>
        <p>Let <var>bitDebit</var> be a new <a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit⑥">bit debit</a>.</p>
       <li data-md>
        <p>Set <var>bitDebit</var>’s <a data-link-type="dfn" href="#bit-debit-bits" id="ref-for-bit-debit-bits③">bits</a> to <var>pendingBits</var>.</p>
       <li data-md>
        <p>Let <var>currentTime</var> be the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-current-wall-time" id="ref-for-dfn-current-wall-time①">current wall time</a>.</p>
       <li data-md>
        <p>Set <var>bitDebit</var>’s <a data-link-type="dfn" href="#bit-debit-timestamp" id="ref-for-bit-debit-timestamp④">timestamp</a> to <var>currentTime</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append③">Append</a> <var>bitDebit</var> to <var>ledger</var>.</p>
       <li data-md>
        <p>Set <var>pendingBits</var> to 0.</p>
      </ol>
    </ol>
   </div>
   <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①①">user agent</a> may wish to set a timer to periodically <a data-link-type="dfn" href="#purge-expired-bit-debits-from-all-navigation-entropy-ledgers" id="ref-for-purge-expired-bit-debits-from-all-navigation-entropy-ledgers">purge expired bit debits from all navigation entropy ledgers</a>, as the <a data-link-type="dfn" href="#bit-debit-expired" id="ref-for-bit-debit-expired">expired</a> <a data-link-type="dfn" href="#bit-debit" id="ref-for-bit-debit⑦">bit debits</a> will no longer be needed.</p>
   <div class="algorithm" data-algorithm="purge expired bit debits from all navigation entropy ledgers">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="purge-expired-bit-debits-from-all-navigation-entropy-ledgers">purge expired bit debits from all navigation entropy ledgers</dfn>, run the following steps: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate④">For each</a> <var>origin</var> → <var>ledger</var> of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①②">user agent</a>’s <a data-link-type="dfn" href="#shared-storage-navigation-budget-table" id="ref-for-shared-storage-navigation-budget-table⑥">shared storage navigation budget table</a>:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate⑤">For each</a> <var>bitDebit</var> in <var>ledger</var>, if the result of running <a data-link-type="dfn" href="#check-whether-a-bit-debit-is-expired" id="ref-for-check-whether-a-bit-debit-is-expired①">check whether a bit debit is expired</a> with <var>bitDebit</var> is true, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-remove" id="ref-for-list-remove">remove</a> <var>bitDebit</var> from <var>ledger</var>.</p>
      </ol>
    </ol>
   </div>
   <h4 class="heading settled" data-level="2.5.2" id="top-budgets"><span class="secno">2.5.2. </span><span class="content"><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top⑦">Top-Level Traversable</a> Entropy Budgets</span><a class="self-link" href="#top-budgets"></a></h4>
   <p>In the short term, while we have less-restrictive <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element⑥">fenced frames</a>, it is necessary to impose additional limits as follows.</p>
   <p>Each <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①③">user agent</a> will specify a maximum <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="overall-page-entropy-allowance">overall page entropy allowance</dfn> and a maximum <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="site-page-entropy-allowance">site page entropy allowance</dfn>, where the former is the total number of bits allowed to leak for <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①⑥">selectURL()</a></code> per <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top⑧">top-level traversable</a>, where the latter is the total number of bits allowed to leak for <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①⑦">selectURL()</a></code> per <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site⑨">site</a> per <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top⑨">top-level traversable</a></p>
   <p>The <dfn class="dfn-paneled" data-dfn-for="traversable navigable" data-dfn-type="dfn" data-noexport id="traversable-navigable-shared-storage-page-budget">shared storage page budget</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct①">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item①">items</a>:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="shared storage page budget" data-dfn-type="dfn" data-noexport id="shared-storage-page-budget-overall-budget">overall budget</dfn>
    <dd data-md>
     <p>a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double①">double</a></code></p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="shared storage page budget" data-dfn-type="dfn" data-noexport id="shared-storage-page-budget-site-budget-map">site budget map</dfn>
    <dd data-md>
     <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map④">map</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site①⓪">site</a> to <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double②">double</a></code></p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="shared storage page budget" data-dfn-type="dfn" data-noexport id="shared-storage-page-budget-saved-query-map">saved query map</dfn>
    <dd data-md>
     <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑤">map</a> of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#tuple" id="ref-for-tuple⑥">tuples</a> (<a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⑧">origin</a> <dfn class="dfn-paneled" data-dfn-for="saved query map" data-dfn-type="dfn" data-export id="saved-query-map-data-origin">data origin</dfn>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①⑥">URL</a> <dfn class="dfn-paneled" data-dfn-for="saved query map" data-dfn-type="dfn" data-export id="saved-query-map-worklet-script-url">worklet script URL</dfn>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①③">string</a> <dfn class="dfn-paneled" data-dfn-for="saved query map" data-dfn-type="dfn" data-export id="saved-query-map-operation-name">operation name</dfn>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①④">string</a> <dfn class="dfn-paneled" data-dfn-for="saved query map" data-dfn-type="dfn" data-export id="saved-query-map-query-name">query name</dfn>) to <a data-link-type="dfn" href="#shared-storage-page-budget-saved-query-data" id="ref-for-shared-storage-page-budget-saved-query-data">saved query data</a></p>
   </dl>
   <p>The <dfn class="dfn-paneled" data-dfn-for="shared storage page budget" data-dfn-type="dfn" data-noexport id="shared-storage-page-budget-saved-query-data">saved query data</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct②">struct</a> with the following <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct-item" id="ref-for-struct-item②">items</a>:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="saved query data" data-dfn-type="dfn" data-noexport id="saved-query-data-index">index</dfn>
    <dd data-md>
     <p>a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-long" id="ref-for-idl-long">long</a></code></p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="saved query data" data-dfn-type="dfn" data-noexport id="saved-query-data-callbacks">callbacks</dfn>
    <dd data-md>
     <p>a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#queue" id="ref-for-queue">queue</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task">tasks</a></p>
   </dl>
   <h5 class="heading settled" data-level="2.5.2.1" id="patch-trav-nav"><span class="secno">2.5.2.1. </span><span class="content">Monkey patch for <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-traversable" id="ref-for-nav-traversable①">Traversable Navigables</a></span><a class="self-link" href="#patch-trav-nav"></a></h5>
   <p>In <a data-link-type="biblio" href="#biblio-html" title="HTML Standard">[HTML]</a>’s <a href="https://html.spec.whatwg.org/multipage/document-sequences.html#traversable-navigable">Traversable
navigables</a> section, add the following:</p>
   <p>In addition to the properties of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable③">navigable</a>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-traversable" id="ref-for-nav-traversable②">traversable navigable</a> has:</p>
   <ul>
    <li data-md>
     <p>An <dfn class="dfn-paneled" data-dfn-for="traversable navigable" data-dfn-type="dfn" data-noexport id="traversable-navigable-page-budget">page budget</dfn>, a <a data-link-type="dfn" href="#traversable-navigable-shared-storage-page-budget" id="ref-for-traversable-navigable-shared-storage-page-budget">shared storage page budget</a> or null, initially null.</p>
   </ul>
   <h5 class="heading settled" data-level="2.5.2.2" id="patch-navigables"><span class="secno">2.5.2.2. </span><span class="content">Monkey patch for <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable④">Navigables</a></span><a class="self-link" href="#patch-navigables"></a></h5>
   <p>Modify the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#initialize-the-navigable" id="ref-for-initialize-the-navigable">initialize the navigable</a> algorithm by adding the following steps at the end:</p>
   <ol>
    <li data-md>
     <p>If <var>parent</var> is null and <var>navigable</var> is a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-traversable" id="ref-for-nav-traversable③">traversable navigable</a>, then:</p>
     <ol>
      <li data-md>
       <p>Let <var>newPageBudget</var> be a <a data-link-type="dfn" href="#traversable-navigable-shared-storage-page-budget" id="ref-for-traversable-navigable-shared-storage-page-budget①">shared storage page budget</a> with an empty <a data-link-type="dfn" href="#shared-storage-page-budget-site-budget-map" id="ref-for-shared-storage-page-budget-site-budget-map">site budget map</a>.</p>
      <li data-md>
       <p>Set <var>newPageBudget</var>’s <a data-link-type="dfn" href="#shared-storage-page-budget-overall-budget" id="ref-for-shared-storage-page-budget-overall-budget">overall budget</a> to <a data-link-type="dfn" href="#overall-page-entropy-allowance" id="ref-for-overall-page-entropy-allowance">overall page entropy allowance</a>.</p>
      <li data-md>
       <p>Set <var>navigable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget">page budget</a> to <var>newPageBudget</var>.</p>
     </ol>
   </ol>
   <h5 class="heading settled" data-level="2.5.2.3" id="saved-queries"><span class="secno">2.5.2.3. </span><span class="content">Saved queries</span><a class="self-link" href="#saved-queries"></a></h5>
   <div class="algorithm" data-algorithm="get the index for a saved query">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-index-for-a-saved-query">get the index for a saved query</dfn>, given <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable⑤">navigable</a> <var>navigable</var>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin①⑨">origin</a> <var>origin</var>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①⑦">URL</a> <var>moduleURLRecord</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①⑤">string</a> <var>operationName</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①⑥">string</a> <var>savedQueryName</var>, and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task①">task</a> <var>callbackTask</var>: 
    <ol>
     <li data-md>
      <p>Let <var>topLevelTraversable</var> be the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#nav-top" id="ref-for-nav-top①⓪">get the top-level traversable</a> for <var>navigable</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②②">Assert</a> that <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget①">page budget</a> is not null.</p>
     <li data-md>
      <p>If <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget②">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-saved-query-map" id="ref-for-shared-storage-page-budget-saved-query-map">saved query map</a> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①④">contain</a> (<var>origin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>), then:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set②">Set</a> <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget③">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-saved-query-map" id="ref-for-shared-storage-page-budget-saved-query-map①">saved query map</a>[(<var>origin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>)] to a new <a data-link-type="dfn" href="#shared-storage-page-budget-saved-query-data" id="ref-for-shared-storage-page-budget-saved-query-data①">saved query data</a> struct <var>queryData</var>.</p>
       <li data-md>
        <p>Set <var>queryData</var>’s <a data-link-type="dfn" href="#saved-query-data-index" id="ref-for-saved-query-data-index">index</a> value to -1.</p>
       <li data-md>
        <p>Return "pending current operation".</p>
      </ol>
     <li data-md>
      <p>Let <var>savedIndex</var> be <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget④">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-saved-query-map" id="ref-for-shared-storage-page-budget-saved-query-map②">saved query map</a>[(<var>origin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>)]'s <a data-link-type="dfn" href="#saved-query-data-index" id="ref-for-saved-query-data-index①">index</a>.</p>
     <li data-md>
      <p>If <var>savedIndex</var> is -1:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#queue-enqueue" id="ref-for-queue-enqueue">Enqueue</a> <var>callbackTask</var> to <var>queryData</var>’s <a data-link-type="dfn" href="#saved-query-data-callbacks" id="ref-for-saved-query-data-callbacks">callbacks</a>.</p>
       <li data-md>
        <p>Return "pending callback".</p>
      </ol>
     <li data-md>
      <p>Return <var>savedIndex</var>.</p>
    </ol>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> The <a data-link-type="dfn" href="#get-the-index-for-a-saved-query" id="ref-for-get-the-index-for-a-saved-query①">get the index for a saved query</a> algorithm returns "pending current operation" to indicate that the index value is pending the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task①">queueing a task</a> on the <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope①⑨">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#worklet-event-loop" id="ref-for-worklet-event-loop①">worklet event loop</a> to perform the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#registered-storage-endpoints" id="ref-for-registered-storage-endpoints">registered</a> operation.</p>
   <p class="note" role="note"><span class="marker">Note:</span> The <a data-link-type="dfn" href="#get-the-index-for-a-saved-query" id="ref-for-get-the-index-for-a-saved-query②">get the index for a saved query</a> algorithm returns "pending callback" to indicate that a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task②">task</a> to determine the result of the index was previously <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task" id="ref-for-queue-a-task②">queued</a> on the <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②⓪">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#worklet-event-loop" id="ref-for-worklet-event-loop②">worklet event loop</a>, and that we are now queueing an additional <var>callbackTask</var> to be run when the original <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task③">task</a> has completed.</p>
   <div class="algorithm" data-algorithm="store the index for a saved query">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="store-the-index-for-a-saved-query">store the index for a saved query</dfn>, given <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①②">Window</a></code> <var>window</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable⑥">navigable</a> <var>navigable</var>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②⓪">origin</a> <var>origin</var>, <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①⑧">URL</a> <var>moduleURLRecord</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①⑦">string</a> <var>operationName</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①⑧">string</a> <var>savedQueryName</var>, and <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑤">unsigned long</a></code> <var>index</var>: 
    <ol>
     <li data-md>
      <p>Let <var>topLevelTraversable</var> be the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#nav-top" id="ref-for-nav-top①①">get the top-level traversable</a> for <var>navigable</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②③">Assert</a> that <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget⑤">page budget</a> is not null.</p>
     <li data-md>
      <p>Let <var>queryData</var> be <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget⑥">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-saved-query-map" id="ref-for-shared-storage-page-budget-saved-query-map③">saved query map</a>[(<var>origin</var>, <var>moduleURLRecord</var>, <var>operationName</var>, <var>savedQueryName</var>)].</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set③">Set</a> <var>queryData</var>’s <a data-link-type="dfn" href="#saved-query-data-index" id="ref-for-saved-query-data-index②">index</a> to <var>index</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#iteration-while" id="ref-for-iteration-while">While</a> <var>queryData</var>’s <a data-link-type="dfn" href="#saved-query-data-callbacks" id="ref-for-saved-query-data-callbacks①">callbacks</a> is not empty:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#queue-dequeue" id="ref-for-queue-dequeue">Dequeue</a> the next <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task④">task</a> <var>callbackTask</var> from <var>queryData</var>’s <a data-link-type="dfn" href="#saved-query-data-callbacks" id="ref-for-saved-query-data-callbacks②">callbacks</a>, and <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①⓪">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source⑧">DOM manipulation task source</a>, given <var>window</var>, to run the steps of <var>callbackTask</var>, given <var>index</var>.</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="obtain a callback to process the saved index result">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-a-callback-to-process-the-saved-index-result">obtain a callback to process the saved index result</dfn>, given <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①③">Window</a></code> <var>window</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑧">list</a> of <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstorageurlwithmetadata" id="ref-for-dictdef-sharedstorageurlwithmetadata⑤">SharedStorageUrlWithMetadata</a></code>s <var>urlList</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise⑨">promise</a> <var>promise</var>, perform the following steps. They return an algorithm. 
    <ol>
     <li data-md>
      <p>Let <var>processIndexTask</var> be an algorithm to perform the following steps, given an <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑥">unsigned long</a></code> <var>index</var>:</p>
      <ol>
       <li data-md>
        <p>If <var>index</var> is greater than <var>urlList</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size⑨">size</a>, then <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①①">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source⑨">DOM manipulation task source</a>, given <var>window</var>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①②">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③⑤">TypeError</a></code>.</p>
        <p class="note" role="note"><span class="marker">Note:</span> The result index is beyond the input urls' size. This violates the selectURL() protocol, and we don’t know which url should be selected.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①②">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①⓪">DOM manipulation task source</a>, given <var>window</var>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve⑨">resolve</a> <var>promise</var> with <var>index</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>processIndexTask</var>.</p>
    </ol>
   </div>
   <h5 class="heading settled" data-level="2.5.2.4" id="charge-top-trav-budgets"><span class="secno">2.5.2.4. </span><span class="content">Charging the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top①②">Top-Level Traversable</a> Entropy Budgets</span><a class="self-link" href="#charge-top-trav-budgets"></a></h5>
   <div class="algorithm" data-algorithm="charge shared storage top-level traversable budgets">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="charge-shared-storage-top-level-traversable-budgets">charge shared storage top-level traversable budgets</dfn> given a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#navigable" id="ref-for-navigable⑦">navigable</a> <var>navigable</var>, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#site" id="ref-for-site①①">site</a> <var>site</var>, and double <var>pendingBits</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>topLevelTraversable</var> be the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#nav-top" id="ref-for-nav-top①③">get the top-level traversable</a> for <var>navigable</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②④">Assert</a> that <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget⑦">page budget</a> is not null.</p>
     <li data-md>
      <p>If <var>pendingBits</var> is greater than <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget⑧">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-overall-budget" id="ref-for-shared-storage-page-budget-overall-budget①">overall budget</a>, then return false and abort these steps.</p>
     <li data-md>
      <p>If <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget⑨">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-site-budget-map" id="ref-for-shared-storage-page-budget-site-budget-map①">site budget map</a> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑤">contain</a> <var>site</var>, then <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set④">set</a> <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget①⓪">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-site-budget-map" id="ref-for-shared-storage-page-budget-site-budget-map②">site budget map</a> [<var>site</var>] to <a data-link-type="dfn" href="#site-page-entropy-allowance" id="ref-for-site-page-entropy-allowance">site page entropy allowance</a>.</p>
     <li data-md>
      <p>If <var>pendingBits</var> is greater than <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget①①">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-site-budget-map" id="ref-for-shared-storage-page-budget-site-budget-map③">site budget map</a> [<var>site</var>], then return false and abort these steps.</p>
     <li data-md>
      <p>Decrement <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget①②">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-site-budget-map" id="ref-for-shared-storage-page-budget-site-budget-map④">site budget map</a> [<var>site</var>] by <var>pendingBits</var>.</p>
     <li data-md>
      <p>Decrement <var>topLevelTraversable</var>’s <a data-link-type="dfn" href="#traversable-navigable-page-budget" id="ref-for-traversable-navigable-page-budget①③">page budget</a>’s <a data-link-type="dfn" href="#shared-storage-page-budget-overall-budget" id="ref-for-shared-storage-page-budget-overall-budget②">overall budget</a> by <var>pendingBits</var>.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="3" id="backend"><span class="secno">3. </span><span class="content">Shared Storage’s Backend</span><a class="self-link" href="#backend"></a></h2>
    The Shared Storage API will integrate into the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#model" id="ref-for-model">Storage API</a> as below, via <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#registered-storage-endpoints" id="ref-for-registered-storage-endpoints①">registering</a> a new <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint">storage endpoint</a>. 
   <h3 class="heading settled" data-level="3.1" id="storage-monkey-patch"><span class="secno">3.1. </span><span class="content">Monkey Patch for the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#model" id="ref-for-model①">Storage Model</a></span><a class="self-link" href="#storage-monkey-patch"></a></h3>
   <p>This standard will add a new <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-type" id="ref-for-storage-type">storage type</a> "<code>shared</code>" to the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#model" id="ref-for-model②">Storage Model</a>.</p>
   <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①④">user agent</a> holds a <a data-link-type="dfn" href="#shared-storage-shed" id="ref-for-shared-storage-shed">shared storage shed</a> for <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint①">storage endpoints</a> of <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-type" id="ref-for-storage-type①">type</a> "<code>shared</code>".</p>
   <p>This standard will also <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#registered-storage-endpoints" id="ref-for-registered-storage-endpoints②">register</a> a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint②">storage endpoint</a> of <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-type" id="ref-for-storage-type②">type</a> "<code>shared</code>" with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-identifier" id="ref-for-storage-identifier">storage identifier</a> "<code>sharedStorage</code>" and <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-quota" id="ref-for-storage-endpoint-quota">quota</a> <code>5</code><sup><code>4</code></sup> <code>*</code> <code>2</code><sup><code>16</code></sup> bytes (i.e. 39.0625 mebibytes).</p>
   <p><span class="todo">This <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-quota" id="ref-for-storage-endpoint-quota①">quota</a> is calculated from the current implementation. Consider bringing the current implementation in line with the spec for <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint③">storage endpoints</a> "<code>localStorage</code>" and "<code>sessionStorage</code>", i.e. <code>5 * 2</code><sup><code>20</code></sup> bytes. For example, decreasing the per-origin entry limit from 10,000 to 1,280 would achieve this.</span></p>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shared-storage-shed">shared storage shed</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑥">map</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin④">origins</a> to <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-shelf" id="ref-for-storage-shelf">storage shelves</a>. It is initially empty.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Unlike <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-shed" id="ref-for-storage-shed">storage sheds</a>, whose keys are <a data-link-type="dfn" href="https://w3c.github.io/ServiceWorker/#service-worker-registration-storage-key" id="ref-for-service-worker-registration-storage-key">storage keys</a>, <a data-link-type="dfn" href="#shared-storage-shed" id="ref-for-shared-storage-shed①">shared storage sheds</a> use <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin⑤">origins</a> as keys directly. <a data-link-type="dfn" href="#shared-storage" id="ref-for-shared-storage②">Shared storage</a> will be intentionally excluded from <a data-link-type="dfn" href="https://privacycg.github.io/storage-partitioning/#client-side-storage-partitioning" id="ref-for-client-side-storage-partitioning①">client-side storage partitioning</a>.</p>
   <p>For each <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-shelf" id="ref-for-storage-shelf①">storage shelf</a> in a <a data-link-type="dfn" href="#shared-storage-shed" id="ref-for-shared-storage-shed②">shared storage shed</a>, the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-shelf" id="ref-for-storage-shelf②">storage shelf</a>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map">bucket map</a> currently has only a single key of "<code>default</code>".</p>
   <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①⑤">user agent</a>’s <a data-link-type="dfn" href="#shared-storage-shed" id="ref-for-shared-storage-shed③">shared storage shed</a> holds all <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shared-storage">shared storage</dfn> data.</p>
   <div class="algorithm" data-algorithm="obtain a shared storage shelf">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-a-shared-storage-shelf">obtain a shared storage shelf</dfn>, given a <a data-link-type="dfn" href="#shared-storage-shed" id="ref-for-shared-storage-shed④">shared storage shed</a> <var>shed</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①⓪">environment settings object</a> <var>environment</var>, and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin⑥">origin</a> <var>origin</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>allowedInOpaqueOriginContext</var> be false.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#determine-whether-shared-storage-is-allowed-by-context" id="ref-for-determine-whether-shared-storage-is-allowed-by-context④">determine whether shared storage is allowed by context</a> given <var>environment</var>, <var>origin</var>, and <var>allowedInOpaqueOriginContext</var> is false, then return failure.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-if-user-preference-setting-allows-access-to-shared-storage" id="ref-for-check-if-user-preference-setting-allows-access-to-shared-storage④">check if user preference setting allows access to shared storage</a> given <var>environment</var> and <var>origin</var> is false, then return failure.</p>
     <li data-md>
      <p>If <var>shed</var>[origin] does not exist, then set <var>shed</var>[origin] to the result of running <a data-link-type="dfn" href="#create-a-shared-storage-shelf" id="ref-for-create-a-shared-storage-shelf">create a shared storage shelf</a> with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-type" id="ref-for-storage-type③">type</a> "<code>shared</code>".</p>
     <li data-md>
      <p>Return <var>shed</var>[<var>origin</var>].</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="create a shared storage shelf">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-shared-storage-shelf">create a shared storage shelf</dfn>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>shelf</var> be a new <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-shelf" id="ref-for-storage-shelf③">storage shelf</a>.</p>
     <li data-md>
      <p>Set <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map①">bucket map</a>["<code>default</code>"] to the result of running <a data-link-type="dfn" href="#create-a-shared-storage-bucket" id="ref-for-create-a-shared-storage-bucket">create a shared storage bucket</a>.</p>
     <li data-md>
      <p>Return <var>shelf</var>.</p>
    </ol>
   </div>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shared-storage-bucket">shared storage bucket</dfn> is a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bucket" id="ref-for-storage-bucket">storage bucket</a> in one of a <a data-link-type="dfn" href="#shared-storage-shed" id="ref-for-shared-storage-shed⑤">shared storage shed</a>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-shelf" id="ref-for-storage-shelf④">shelves</a>.</p>
   <div class="algorithm" data-algorithm="create a shared storage bucket">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="create-a-shared-storage-bucket">create a shared storage bucket</dfn>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>endpoint</var> be the <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint④">storage endpoint</a> with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-identifier" id="ref-for-storage-identifier①">storage identifier</a> "<code>sharedStorage</code>".</p>
     <li data-md>
      <p>Let <var>bucket</var> be a new <a data-link-type="dfn" href="#shared-storage-bucket" id="ref-for-shared-storage-bucket">shared storage bucket</a>.</p>
     <li data-md>
      <p>Set <var>bucket</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bottle-map" id="ref-for-bottle-map">bottle map</a>["<code>sharedStorage</code>"] to a new <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bottle" id="ref-for-storage-bottle">storage bottle</a> whose <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bottle-quota" id="ref-for-storage-bottle-quota">quota</a> is <var>endpoint</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint-quota" id="ref-for-storage-endpoint-quota②">quota</a>.</p>
     <li data-md>
      <p>Return <var>bucket</var>.</p>
    </ol>
   </div>
   <p class="note" role="note"><span class="marker">Note:</span> Currently, a <a data-link-type="dfn" href="#shared-storage-bucket" id="ref-for-shared-storage-bucket①">shared storage bucket</a>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bottle-map" id="ref-for-bottle-map①">bottle map</a> has <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-size" id="ref-for-map-size①">size</a> <code>1</code>, since there is only one <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-endpoint" id="ref-for-storage-endpoint⑤">storage endpoint</a> <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#registered-storage-endpoints" id="ref-for-registered-storage-endpoints③">registered</a> with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-type" id="ref-for-storage-type④">type</a> "<code>shared</code>".</p>
   <div class="algorithm" data-algorithm="obtain a shared storage bottle map">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-a-shared-storage-bottle-map">obtain a shared storage bottle map</dfn>, given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①①">environment settings object</a> <var>environment</var> and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin⑦">origin</a> <var>origin</var>, run these steps: 
    <ol>
     <li data-md>
      <p>Let <var>shed</var> be the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①⑥">user agent</a>’s <a data-link-type="dfn" href="#shared-storage-shed" id="ref-for-shared-storage-shed⑥">shared storage shed</a>.</p>
     <li data-md>
      <p>Let <var>shelf</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-shelf" id="ref-for-obtain-a-shared-storage-shelf">obtain a shared storage shelf</a> with <var>shed</var>, <var>environment</var>, and <var>origin</var>.</p>
     <li data-md>
      <p>If <var>shelf</var> is failure, then return failure.</p>
     <li data-md>
      <p>Let <var>bucket</var> be <var>shelf</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bucket-map" id="ref-for-bucket-map②">bucket map</a>["<code>default</code>"].</p>
     <li data-md>
      <p>Let <var>bottle</var> be <var>bucket</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#bottle-map" id="ref-for-bottle-map②">bottle map</a>["<code>sharedStorage</code>"].</p>
     <li data-md>
      <p>Let <var>proxyMap</var> be a new <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map">storage proxy map</a> whose <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map-backing-map" id="ref-for-storage-proxy-map-backing-map">backing map</a> is <var>bottle</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑦">map</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#set-append" id="ref-for-set-append">Append</a> <var>proxyMap</var> to <var>bottle</var>’s <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-bottle-proxy-map-reference-set" id="ref-for-storage-bottle-proxy-map-reference-set">proxy map reference set</a>.</p>
     <li data-md>
      <p>Return <var>proxyMap</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="3.2" id="database"><span class="secno">3.2. </span><span class="content">The <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database">Shared Storage Database</a></span><a class="self-link" href="#database"></a></h3>
   <p>A <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context①">browsing context</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shared-storage-database">shared storage database</dfn>, which provides methods to <a data-link-type="dfn" href="#shared-storage-database-store-an-entry-in-the-database" id="ref-for-shared-storage-database-store-an-entry-in-the-database">store</a>, <a data-link-type="dfn" href="#shared-storage-database-retrieve-an-entry-from-the-database" id="ref-for-shared-storage-database-retrieve-an-entry-from-the-database">retrieve</a>, <a data-link-type="dfn" href="#shared-storage-database-delete-an-entry-from-the-database" id="ref-for-shared-storage-database-delete-an-entry-from-the-database">delete</a>, <a data-link-type="dfn" href="#shared-storage-database-clear-all-entries-in-the-database" id="ref-for-shared-storage-database-clear-all-entries-in-the-database">clear</a>, and <a data-link-type="dfn" href="#shared-storage-database-purge-expired-entries-from-the-database" id="ref-for-shared-storage-database-purge-expired-entries-from-the-database">purge expired</a> data, and additional methods as below. The data in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①">database</a> take the form of <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry">entries</a>.</p>
   <p>Each <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database②">shared storage database</a> has a <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-shared-storage-database-queue">shared storage database queue</dfn>, which is the result of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue" id="ref-for-starting-a-new-parallel-queue">starting a new parallel queue</a>. This <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue">queue</a> is used to run each of the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database③">shared storage database</a>’s methods when calls to them are initiated from that <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context" id="ref-for-browsing-context②">browsing context</a>.</p>
   <p>Each <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-entry">entry</dfn> consists of a <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key">key</a> and a <a data-link-type="dfn" href="#entry-value-struct" id="ref-for-entry-value-struct">value struct</a>.</p>
   <p>An <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry①">entry</a>’s <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-key">key</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string①⑨">string</a>.</p>
   <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①⑦">User agents</a> may specify the <dfn class="dfn-paneled" data-dfn-for="key" data-dfn-type="dfn" data-noexport id="key-maximum-length">maximum length</dfn> of a <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key①">key</a>.</p>
   <p>Since <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key②">keys</a> are used to organize and efficiently retrieve <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry②">entries</a>, <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key③">keys</a> must appear at most once in any given <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database④">shared storage database</a>.</p>
   <p>An <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry③">entry</a>’s <dfn class="dfn-paneled" data-dfn-for="entry" data-dfn-type="dfn" data-noexport id="entry-value-struct">value struct</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#struct" id="ref-for-struct③">struct</a> composed of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②⓪">string</a> <dfn class="dfn-paneled" data-dfn-for="value struct" data-dfn-type="dfn" data-noexport id="value-struct-value">value</dfn> and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/hr-time/#dom-domhighrestimestamp" id="ref-for-dom-domhighrestimestamp①">DOMHighResTimeStamp</a></code> <dfn class="dfn-paneled" data-dfn-for="value struct" data-dfn-type="dfn" data-noexport id="value-struct-last-updated">last updated</dfn> (from the <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-unix-epoch" id="ref-for-dfn-unix-epoch①">Unix Epoch</a>).</p>
   <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①⑧">User agents</a> may specify the <dfn class="dfn-paneled" data-dfn-for="value" data-dfn-type="dfn" data-noexport id="value-maximum-length">maximum length</dfn> of a <a data-link-type="dfn" href="#value-struct-value" id="ref-for-value-struct-value">value</a>.</p>
   <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent①⑨">User agents</a> may specify a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="default-entry-lifetime">default entry lifetime</dfn>, the default <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-duration" id="ref-for-dfn-duration③">duration</a> between when an <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry④">entry</a> is <a data-link-type="dfn" href="#shared-storage-database-store-an-entry-in-the-database" id="ref-for-shared-storage-database-store-an-entry-in-the-database①">stored</a> and when it expires. If the <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent②⓪">user agent</a> specifies a <a data-link-type="dfn" href="#default-entry-lifetime" id="ref-for-default-entry-lifetime">default entry lifetime</a>, then it should have a timer periodically <a data-link-type="dfn" href="#shared-storage-database-purge-expired-entries-from-the-database" id="ref-for-shared-storage-database-purge-expired-entries-from-the-database①">purge expired entries from the database</a>.</p>
   <h3 class="heading settled" data-level="3.3" id="database-algorithms"><span class="secno">3.3. </span><span class="content">The <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database⑤">Database</a> Algorithms</span><a class="self-link" href="#database-algorithms"></a></h3>
   <div class="algorithm" data-algorithm="store an entry in the database" data-algorithm-for="shared storage database">
     To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-store-an-entry-in-the-database">store an entry in the database</dfn>, given a <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue①">shared storage database queue</a> <var>queue</var>, a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map①">storage proxy map</a> <var>databaseMap</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①②">environment settings object</a> <var>environment</var>, a <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key④">key</a> <var>key</var>, and a <a data-link-type="dfn" href="#value-struct-value" id="ref-for-value-struct-value①">value</a> <var>value</var>, run the following steps on <var>queue</var>: 
    <ol>
     <li data-md>
      <p>Let <var>valueStruct</var> be a new <a data-link-type="dfn" href="#entry-value-struct" id="ref-for-entry-value-struct①">value struct</a>.</p>
     <li data-md>
      <p>Set <var>valueStruct</var>’s <a data-link-type="dfn" href="#value-struct-value" id="ref-for-value-struct-value②">value</a> to <var>value</var>.</p>
     <li data-md>
      <p>Let <var>currentTime</var> be the <var>environment</var>’s <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-eso-current-wall-time" id="ref-for-dfn-eso-current-wall-time①">current wall time</a>.</p>
     <li data-md>
      <p>Set <var>valueStruct</var>’s <a data-link-type="dfn" href="#value-struct-last-updated" id="ref-for-value-struct-last-updated">last updated</a> to <var>currentTime</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set⑤">Set</a> <var>databaseMap</var>[<var>key</var>] to <var>valueStruct</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown">an exception was thrown</a>, then return false.</p>
      <p class="note" role="note"><span class="marker">Note:</span> Errors with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map②">storage proxy map</a> <var>databaseMap</var>’s methods are possible depending on its implementation.</p>
     <li data-md>
      <p>Otherwise, return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="retrieve an entry from the database" data-algorithm-for="shared storage database">
     To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-retrieve-an-entry-from-the-database">retrieve an entry from the database</dfn>, given a <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue②">shared storage database queue</a> <var>queue</var>, a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map③">storage proxy map</a> <var>databaseMap</var>, an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①③">environment settings object</a> <var>environment</var>, and a <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key⑤">key</a> <var>key</var>, run the following steps on <var>queue</var>: 
    <ol>
     <li data-md>
      <p>If <var>databaseMap</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑥">contain</a> <var>key</var>, return undefined.</p>
     <li data-md>
      <p>Let <var>valueStruct</var> be the result of running <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-get" id="ref-for-map-get">Get</a> on <var>databaseMap</var> with <var>key</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①">an exception was thrown</a>, then return failure.</p>
      <p class="note" role="note"><span class="marker">Note:</span> Errors with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map④">storage proxy map</a> <var>databaseMap</var>’s methods are possible depending on its implementation.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#shared-storage-database-determine-whether-an-entry-is-expired" id="ref-for-shared-storage-database-determine-whether-an-entry-is-expired">determine whether an entry is expired</a> with <var>environment</var> and <var>valueStruct</var> is true, return undefined.</p>
     <li data-md>
      <p>Return <var>valueStruct</var>’s <a data-link-type="dfn" href="#value-struct-value" id="ref-for-value-struct-value③">value</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="delete an entry from the database" data-algorithm-for="shared storage database">
     To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-delete-an-entry-from-the-database">delete an entry from the database</dfn>, given a <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue③">shared storage database queue</a> <var>queue</var>, a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map⑤">storage proxy map</a> <var>databaseMap</var>, and a <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key⑥">key</a> <var>key</var>, run the following steps on <var>queue</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-remove" id="ref-for-map-remove">Remove</a> <var>databaseMap</var>[<var>key</var>].</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown②">an exception was thrown</a>, then return false.</p>
      <p class="note" role="note"><span class="marker">Note:</span> Errors with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map⑥">storage proxy map</a> <var>databaseMap</var>’s methods are possible depending on its implementation.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="clear all entries in the database" data-algorithm-for="shared storage database">
     To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-clear-all-entries-in-the-database">clear all entries in the database</dfn>, given a <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue④">shared storage database queue</a> <var>queue</var> and a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map⑦">storage proxy map</a> <var>databaseMap</var>, run the following steps on <var>queue</var>: 
    <ol>
     <li data-md>
      <p>Run <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-clear" id="ref-for-map-clear">Clear</a> on <var>databaseMap</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown③">an exception was thrown</a>, then return false.</p>
      <p class="note" role="note"><span class="marker">Note:</span> Errors with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map⑧">storage proxy map</a> <var>databaseMap</var>’s methods are possible depending on its implementation.</p>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="retrieve all entries from the database" data-algorithm-for="shared storage database">
     To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-retrieve-all-entries-from-the-database">retrieve all entries from the database</dfn>, given a <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue⑤">shared storage database queue</a> <var>queue</var> and a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map⑨">storage proxy map</a> <var>databaseMap</var>, run the following steps on <var>queue</var>: 
    <ol>
     <li data-md>
      <p>Let <var>values</var> be the result of running <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-getting-the-values" id="ref-for-map-getting-the-values①">getting the values</a> on <var>databaseMap</var>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown④">an exception was thrown</a>, then return failure.</p>
      <p class="note" role="note"><span class="marker">Note:</span> Errors with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map①⓪">storage proxy map</a> <var>databaseMap</var>’s methods are possible depending on its implementation.</p>
     <li data-md>
      <p>Return <var>values</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="count entries in the database" data-algorithm-for="shared storage database">
     To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-count-entries-in-the-database">count entries in the database</dfn>, given a <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue⑥">shared storage database queue</a> <var>queue</var> and a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map①①">storage proxy map</a> <var>databaseMap</var>, run the following steps on <var>queue</var>: 
    <ol>
     <li data-md>
      <p>Let <var>size</var> be <var>databaseMap</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-size" id="ref-for-map-size②">size</a>.</p>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑤">an exception was thrown</a>, then return failure.</p>
      <p class="note" role="note"><span class="marker">Note:</span> Errors with <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map①②">storage proxy map</a> <var>databaseMap</var>’s members are possible depending on its implementation.</p>
     <li data-md>
      <p>Return <var>size</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="purge expired entries from the database" data-algorithm-for="shared storage database">
     To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-purge-expired-entries-from-the-database">purge expired entries from the database</dfn>, given a <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue⑦">shared storage database queue</a> <var>queue</var>, a <a data-link-type="dfn" href="https://storage.spec.whatwg.org/#storage-proxy-map" id="ref-for-storage-proxy-map①③">storage proxy map</a> <var>databaseMap</var>, and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①④">environment settings object</a> <var>environment</var>, run the following steps on <var>queue</var>: 
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate⑥">For each</a> <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key⑦">key</a> <var>key</var> in <var>databaseMap</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>valueStruct</var> be the result of running <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-get" id="ref-for-map-get①">Get</a> on <var>databaseMap</var> with <var>key</var>.</p>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑥">an exception was thrown</a>, then return false.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#shared-storage-database-determine-whether-an-entry-is-expired" id="ref-for-shared-storage-database-determine-whether-an-entry-is-expired①">determine whether an entry is expired</a> with <var>environment</var> and <var>valueStruct</var> is true, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-remove" id="ref-for-map-remove①">Remove</a> <var>databaseMap</var>[<var>key</var>].</p>
       <li data-md>
        <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑦">an exception was thrown</a>, then return false.</p>
      </ol>
     <li data-md>
      <p>Return true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="determine whether an entry is expired" data-algorithm-for="shared storage database">
    <p>To <dfn class="dfn-paneled" data-dfn-for="shared storage database" data-dfn-type="dfn" data-noexport id="shared-storage-database-determine-whether-an-entry-is-expired">determine whether an entry is expired</dfn>, given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①⑤">environment settings object</a> <var>environment</var> and a <a data-link-type="dfn" href="#entry-value-struct" id="ref-for-entry-value-struct②">value struct</a> <var>valueStruct</var>, run the following steps:</p>
    <ol>
     <li data-md>
      <p>Let <var>lastUpdated</var> be <var>valueStruct</var>’s <a data-link-type="dfn" href="#value-struct-last-updated" id="ref-for-value-struct-last-updated①">last updated</a>.</p>
     <li data-md>
      <p>Let <var>lifetime</var> be <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent②①">user agent</a>’s <a data-link-type="dfn" href="#default-entry-lifetime" id="ref-for-default-entry-lifetime①">default entry lifetime</a>.</p>
     <li data-md>
      <p>Let <var>expiration</var> be the sum of <var>lastUpdated</var> and <var>lifetime</var>.</p>
     <li data-md>
      <p>Let <var>currentTime</var> be the <var>environment</var>’s <a data-link-type="dfn" href="https://w3c.github.io/hr-time/#dfn-eso-current-wall-time" id="ref-for-dfn-eso-current-wall-time②">current wall time</a>.</p>
     <li data-md>
      <p>If <var>expiration</var> is less than or equal to <var>currentTime</var>, return true.</p>
     <li data-md>
      <p>Otherwise, return false.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="4" id="window-extension"><span class="secno">4. </span><span class="content">Extension to the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①④">Window</a></code> interface</span><a class="self-link" href="#window-extension"></a></h2>
    Each <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①⑤">Window</a></code> object has an associated <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage④">SharedStorage</a></code> instance <code class="idl"><a data-link-type="idl" href="#dom-window-sharedstorage" id="ref-for-dom-window-sharedstorage">sharedStorage</a></code>, which is created alongside the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①⑥">Window</a></code> if <a data-link-type="dfn" href="#shared-storage" id="ref-for-shared-storage③">Shared Storage</a> is enabled, with the <a data-link-type="dfn" href="#window-sharedstorage-getter" id="ref-for-window-sharedstorage-getter">getter</a> below. 
<pre class="idl highlight def"><c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①⑦"><c- g>Window</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext"><c- g>SecureContext</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorage" id="ref-for-sharedstorage⑤"><c- n>SharedStorage</c-></a>? <dfn class="dfn-paneled idl-code" data-dfn-for="Window" data-dfn-type="attribute" data-export data-readonly data-type="SharedStorage?" id="dom-window-sharedstorage"><code><c- g>sharedStorage</c-></code></dfn>;
};
</pre>
   <div class="algorithm" data-algorithm="sharedStorage getter" data-algorithm-for="Window">
     The <dfn class="dfn-paneled" data-dfn-for="Window" data-dfn-type="dfn" data-noexport id="window-sharedstorage-getter"><code class="idl"><a data-link-type="idl" href="#dom-window-sharedstorage" id="ref-for-dom-window-sharedstorage①">sharedStorage</a></code> getter</dfn> steps are: 
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③②">this</a> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active②">fully active</a>, return <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③③">this</a>’s <code class="idl"><a data-link-type="idl" href="#dom-window-sharedstorage" id="ref-for-dom-window-sharedstorage②">sharedStorage</a></code>.</p>
     <li data-md>
      <p>Otherwise, return null.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="5" id="shared-storage-modifier-method-interface-group"><span class="secno">5. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod">SharedStorageModifierMethod</a></code> Interface Group</span><a class="self-link" href="#shared-storage-modifier-method-interface-group"></a></h2>
    The <code class="idl"><a data-link-type="idl" href="#sharedstoragesetmethod" id="ref-for-sharedstoragesetmethod">SharedStorageSetMethod</a></code>, <code class="idl"><a data-link-type="idl" href="#sharedstorageappendmethod" id="ref-for-sharedstorageappendmethod">SharedStorageAppendMethod</a></code>, <code class="idl"><a data-link-type="idl" href="#sharedstoragedeletemethod" id="ref-for-sharedstoragedeletemethod">SharedStorageDeleteMethod</a></code>, <code class="idl"><a data-link-type="idl" href="#sharedstorageclearmethod" id="ref-for-sharedstorageclearmethod">SharedStorageClearMethod</a></code> interfaces correspond to the <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-set" id="ref-for-dom-sharedstorage-set">set()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-append" id="ref-for-dom-sharedstorage-append">append()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-delete" id="ref-for-dom-sharedstorage-delete">delete()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-clear" id="ref-for-dom-sharedstorage-clear">clear()</a></code> modifier methods. They all inherit the base <code class="idl"><a data-link-type="idl" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod①">SharedStorageModifierMethod</a></code> interface. 
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed②"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstoragemodifiermethod"><code><c- g>SharedStorageModifierMethod</c-></code></dfn> {};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed③"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstoragesetmethod"><code><c- g>SharedStorageSetMethod</c-></code></dfn> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod②"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstoragesetmethod-sharedstoragesetmethod" id="ref-for-dom-sharedstoragesetmethod-sharedstoragesetmethod"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageSetMethod/SharedStorageSetMethod(key, value, options), SharedStorageSetMethod/constructor(key, value, options), SharedStorageSetMethod/SharedStorageSetMethod(key, value), SharedStorageSetMethod/constructor(key, value)" data-dfn-type="argument" data-export id="dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-key"><code><c- g>key</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageSetMethod/SharedStorageSetMethod(key, value, options), SharedStorageSetMethod/constructor(key, value, options), SharedStorageSetMethod/SharedStorageSetMethod(key, value), SharedStorageSetMethod/constructor(key, value)" data-dfn-type="argument" data-export id="dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-value"><code><c- g>value</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragesetmethodoptions" id="ref-for-dictdef-sharedstoragesetmethodoptions"><c- n>SharedStorageSetMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageSetMethod/SharedStorageSetMethod(key, value, options), SharedStorageSetMethod/constructor(key, value, options), SharedStorageSetMethod/SharedStorageSetMethod(key, value), SharedStorageSetMethod/constructor(key, value)" data-dfn-type="argument" data-export id="dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-options"><code><c- g>options</c-></code></dfn> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed④"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstorageappendmethod"><code><c- g>SharedStorageAppendMethod</c-></code></dfn> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod③"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstorageappendmethod-sharedstorageappendmethod" id="ref-for-dom-sharedstorageappendmethod-sharedstorageappendmethod"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑥"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageAppendMethod/SharedStorageAppendMethod(key, value, options), SharedStorageAppendMethod/constructor(key, value, options), SharedStorageAppendMethod/SharedStorageAppendMethod(key, value), SharedStorageAppendMethod/constructor(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-key"><code><c- g>key</c-></code></dfn>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑦"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageAppendMethod/SharedStorageAppendMethod(key, value, options), SharedStorageAppendMethod/constructor(key, value, options), SharedStorageAppendMethod/SharedStorageAppendMethod(key, value), SharedStorageAppendMethod/constructor(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-value"><code><c- g>value</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageAppendMethod/SharedStorageAppendMethod(key, value, options), SharedStorageAppendMethod/constructor(key, value, options), SharedStorageAppendMethod/SharedStorageAppendMethod(key, value), SharedStorageAppendMethod/constructor(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-options"><code><c- g>options</c-></code></dfn> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑤"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstoragedeletemethod"><code><c- g>SharedStorageDeleteMethod</c-></code></dfn> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod④"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod" id="ref-for-dom-sharedstoragedeletemethod-sharedstoragedeletemethod"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑧"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageDeleteMethod/SharedStorageDeleteMethod(key, options), SharedStorageDeleteMethod/constructor(key, options), SharedStorageDeleteMethod/SharedStorageDeleteMethod(key), SharedStorageDeleteMethod/constructor(key)" data-dfn-type="argument" data-export id="dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-key"><code><c- g>key</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions①"><c- n>SharedStorageModifierMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageDeleteMethod/SharedStorageDeleteMethod(key, options), SharedStorageDeleteMethod/constructor(key, options), SharedStorageDeleteMethod/SharedStorageDeleteMethod(key), SharedStorageDeleteMethod/constructor(key)" data-dfn-type="argument" data-export id="dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-options"><code><c- g>options</c-></code></dfn> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑥"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstorageclearmethod"><code><c- g>SharedStorageClearMethod</c-></code></dfn> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod⑤"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstorageclearmethod-sharedstorageclearmethod" id="ref-for-dom-sharedstorageclearmethod-sharedstorageclearmethod"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions②"><c- n>SharedStorageModifierMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageClearMethod/SharedStorageClearMethod(options), SharedStorageClearMethod/constructor(options), SharedStorageClearMethod/SharedStorageClearMethod(), SharedStorageClearMethod/constructor()" data-dfn-type="argument" data-export id="dom-sharedstorageclearmethod-sharedstorageclearmethod-options-options"><code><c- g>options</c-></code></dfn> = {});
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sharedstoragemodifiermethodoptions"><code><c- g>SharedStorageModifierMethodOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString⑨"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageModifierMethodOptions" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-sharedstoragemodifiermethodoptions-withlock"><code><c- g>withLock</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sharedstoragesetmethodoptions"><code><c- g>SharedStorageSetMethodOptions</c-></code></dfn> : <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions③"><c- n>SharedStorageModifierMethodOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageSetMethodOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-sharedstoragesetmethodoptions-ignoreifpresent"><code><c- g>ignoreIfPresent</c-></code></dfn>;
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod⑥">SharedStorageModifierMethod</a></code> has the following associated fields:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="SharedStorageModifierMethod" data-dfn-type="dfn" data-noexport id="sharedstoragemodifiermethod-with-lock">with lock</dfn>
    <dd data-md>
     <p>Null or a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②①">string</a>. Initially null.</p>
   </dl>
   <p>A <code class="idl"><a data-link-type="idl" href="#sharedstoragesetmethod" id="ref-for-sharedstoragesetmethod①">SharedStorageSetMethod</a></code> has the following associated fields:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="SharedStorageSetMethod" data-dfn-type="dfn" data-noexport id="sharedstoragesetmethod-key">key</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②②">string</a>. Initially empty.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="SharedStorageSetMethod" data-dfn-type="dfn" data-noexport id="sharedstoragesetmethod-value">value</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②③">string</a>. Initially empty.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="SharedStorageSetMethod" data-dfn-type="dfn" data-noexport id="sharedstoragesetmethod-ignore-if-present">ignore if present</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean④">boolean</a>. Initially false.</p>
   </dl>
   <p>A <code class="idl"><a data-link-type="idl" href="#sharedstorageappendmethod" id="ref-for-sharedstorageappendmethod①">SharedStorageAppendMethod</a></code> has the following associated fields:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="SharedStorageAppendMethod" data-dfn-type="dfn" data-noexport id="sharedstorageappendmethod-key">key</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②④">string</a>. Initially empty.</p>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="SharedStorageAppendMethod" data-dfn-type="dfn" data-noexport id="sharedstorageappendmethod-value">value</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②⑤">string</a>. Initially empty.</p>
   </dl>
   <p>A <code class="idl"><a data-link-type="idl" href="#sharedstoragedeletemethod" id="ref-for-sharedstoragedeletemethod①">SharedStorageDeleteMethod</a></code> has the following associated fields:</p>
   <dl>
    <dt data-md><dfn class="dfn-paneled" data-dfn-for="SharedStorageDeleteMethod" data-dfn-type="dfn" data-noexport id="sharedstoragedeletemethod-key">key</dfn>
    <dd data-md>
     <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②⑥">string</a>. Initially empty.</p>
   </dl>
   <div class="algorithm" data-algorithm="SharedStorageSetMethod">
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageSetMethod" data-dfn-type="constructor" data-export data-lt="SharedStorageSetMethod(key, value, options)|constructor(key, value, options)|SharedStorageSetMethod(key, value)|constructor(key, value)" id="dom-sharedstoragesetmethod-sharedstoragesetmethod"><code>new SharedStorageSetMethod(<var>key</var>, <var>value</var>, <var>options</var>)</code></dfn> constructor steps are:</p>
    <ol>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm③">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global⑤">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①⑧">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc④">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished③">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage⑥">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②①">SharedStorageWorkletGlobalScope</a></code> is false, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③⑥">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑤">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active③">fully active</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>key</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length①">length</a> exceeds the <a data-link-type="dfn" href="#key-maximum-length" id="ref-for-key-maximum-length">maximum length</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror③⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>value</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length②">length</a> exceeds the <a data-link-type="dfn" href="#value-maximum-length" id="ref-for-value-maximum-length">maximum length</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑦">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map①">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②⓪">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④①">TypeError</a></code>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③④">this</a>’s <a data-link-type="dfn" href="#sharedstoragesetmethod-key" id="ref-for-sharedstoragesetmethod-key">key</a> to <var>key</var>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑤">this</a>’s <a data-link-type="dfn" href="#sharedstoragesetmethod-value" id="ref-for-sharedstoragesetmethod-value">value</a> to <var>value</var>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑥">this</a>’s <a data-link-type="dfn" href="#sharedstoragesetmethod-ignore-if-present" id="ref-for-sharedstoragesetmethod-ignore-if-present">ignore if present</a> to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragesetmethodoptions-ignoreifpresent" id="ref-for-dom-sharedstoragesetmethodoptions-ignoreifpresent">ignoreIfPresent</a></code>"].</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑦">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④②">TypeError</a></code>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑦">this</a>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock">with lock</a> to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②">withLock</a></code>"].</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="SharedStorageAppendMethod(key, value)" data-algorithm-for="SharedStorageAppendMethod">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageAppendMethod" data-dfn-type="constructor" data-export data-lt="SharedStorageAppendMethod(key, value, options)|constructor(key, value, options)|SharedStorageAppendMethod(key, value)|constructor(key, value)" id="dom-sharedstorageappendmethod-sharedstorageappendmethod"><code>new SharedStorageAppendMethod(<var>key</var>, <var>value</var>, <var>options</var>)</code></dfn> constructor steps are: 
    <ol>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm④">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global⑥">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window①⑨">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc⑤">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings①">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context①">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished④">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage⑦">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②②">SharedStorageWorkletGlobalScope</a></code> is false, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④③">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④④">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window③">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑥">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active④">fully active</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>key</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length③">length</a> exceeds the <a data-link-type="dfn" href="#key-maximum-length" id="ref-for-key-maximum-length①">maximum length</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>value</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length④">length</a> exceeds the <a data-link-type="dfn" href="#value-maximum-length" id="ref-for-value-maximum-length①">maximum length</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window④">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑧">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map②">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②①">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑧">this</a>’s <a data-link-type="dfn" href="#sharedstorageappendmethod-key" id="ref-for-sharedstorageappendmethod-key">key</a> to <var>key</var>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this③⑨">this</a>’s <a data-link-type="dfn" href="#sharedstorageappendmethod-value" id="ref-for-sharedstorageappendmethod-value">value</a> to <var>value</var>.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock③">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑧">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock④">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror④⑨">TypeError</a></code>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⓪">this</a>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock①">with lock</a> to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock⑤">withLock</a></code>"].</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="SharedStorageDeleteMethod(key)" data-algorithm-for="SharedStorageDeleteMethod">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageDeleteMethod" data-dfn-type="constructor" data-export data-lt="SharedStorageDeleteMethod(key, options)|constructor(key, options)|SharedStorageDeleteMethod(key)|constructor(key)" id="dom-sharedstoragedeletemethod-sharedstoragedeletemethod"><code>new SharedStorageAppendMethod(<var>key</var>, <var>options</var>)</code></dfn> constructor steps are: 
    <ol>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑤">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global⑦">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②⓪">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc⑥">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings②">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context②">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished⑤">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage⑧">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②③">SharedStorageWorkletGlobalScope</a></code> is false, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤⓪">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤①">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window⑤">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑦">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑤">fully active</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤②">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>key</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length⑤">length</a> exceeds the <a data-link-type="dfn" href="#key-maximum-length" id="ref-for-key-maximum-length②">maximum length</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤③">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window⑥">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object⑨">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map③">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②②">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤④">TypeError</a></code>.</p>
     <li data-md>
      <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④①">this</a>’s <a data-link-type="dfn" href="#sharedstoragedeletemethod-key" id="ref-for-sharedstoragedeletemethod-key">key</a> to <var>key</var>.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock⑥">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists①⑨">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock⑦">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤⑤">TypeError</a></code>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④②">this</a>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock②">with lock</a> to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock⑧">withLock</a></code>"].</p>
      </ol>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="SharedStorageClearMethod()" data-algorithm-for="SharedStorageClearMethod">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageClearMethod" data-dfn-type="constructor" data-export data-lt="SharedStorageClearMethod(options)|constructor(options)|SharedStorageClearMethod()|constructor()" id="dom-sharedstorageclearmethod-sharedstorageclearmethod"><code>new SharedStorageClearMethod(<var>options</var>)</code></dfn> constructor steps are: 
    <ol>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑥">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global⑧">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②①">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc⑦">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings③">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context③">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished⑥">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage⑨">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②④">SharedStorageWorkletGlobalScope</a></code> is false, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤⑥">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window⑦">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑧">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑥">fully active</a>, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window⑧">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①⓪">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map④">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②③">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑤⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock⑨">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⓪">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①⓪">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), throw a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥⓪">TypeError</a></code>.</p>
       <li data-md>
        <p>Set <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④③">this</a>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock③">with lock</a> to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①①">withLock</a></code>"].</p>
      </ol>
    </ol>
   </div>
   <h2 class="heading settled" data-level="6" id="shared-storage-interface"><span class="secno">6. </span><span class="content">The <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①⓪">SharedStorage</a></code> Interface</span><a class="self-link" href="#shared-storage-interface"></a></h2>
    The <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①①">SharedStorage</a></code> interface is exposed to <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②②">Window</a></code> and <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②⓪">SharedStorageWorklet</a></code>. 
   <p>Methods that allow the setting and/or deleting of data are exposed to both the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②③">Window</a></code> and the <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②①">SharedStorageWorklet</a></code>, although their implementations may vary depending on their <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment" id="ref-for-environment">environment</a>. This makes it possible to modify the data in Shared Storage from multiple contexts.</p>
   <p>Meanwhile, methods for posting operations to run inside <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②⑤">SharedStorageWorkletGlobalScope</a></code> (i.e. <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①⑧">selectURL()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run⑥">run()</a></code>), along with the <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-worklet" id="ref-for-dom-sharedstorage-worklet">worklet</a></code> attribute which is used to call <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule①⓪">addModule()</a></code>, are exposed to the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②④">Window</a></code> only, as these are the means by which the <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②⑤">Window</a></code> interacts with the <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②②">SharedStorageWorklet</a></code>.</p>
   <p>On the other hand, methods for getting data from the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database⑥">shared storage database</a> are exposed to the <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②③">SharedStorageWorklet</a></code> only, in order to carefully control the flow of data read from the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database⑦">database</a>.</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑦"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstorage"><code><c- g>SharedStorage</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⓪"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any②"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-set" id="ref-for-dom-sharedstorage-set①"><c- g>set</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⓪"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/set(key, value, options), SharedStorage/set(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorage-set-key-value-options-key"><code><c- g>key</c-></code></dfn>,
                   <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/set(key, value, options), SharedStorage/set(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorage-set-key-value-options-value"><code><c- g>value</c-></code></dfn>,
                   <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragesetmethodoptions" id="ref-for-dictdef-sharedstoragesetmethodoptions①"><c- n>SharedStorageSetMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/set(key, value, options), SharedStorage/set(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorage-set-key-value-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①①"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any③"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-append" id="ref-for-dom-sharedstorage-append①"><c- g>append</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①②"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/append(key, value, options), SharedStorage/append(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorage-append-key-value-options-key"><code><c- g>key</c-></code></dfn>,
                      <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①③"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/append(key, value, options), SharedStorage/append(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorage-append-key-value-options-value"><code><c- g>value</c-></code></dfn>,
                      <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions④"><c- n>SharedStorageModifierMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/append(key, value, options), SharedStorage/append(key, value)" data-dfn-type="argument" data-export id="dom-sharedstorage-append-key-value-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①②"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any④"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-delete" id="ref-for-dom-sharedstorage-delete①"><c- g>delete</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①④"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/delete(key, options), SharedStorage/delete(key)" data-dfn-type="argument" data-export id="dom-sharedstorage-delete-key-options-key"><code><c- g>key</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions⑤"><c- n>SharedStorageModifierMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/delete(key, options), SharedStorage/delete(key)" data-dfn-type="argument" data-export id="dom-sharedstorage-delete-key-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①③"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑤"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-clear" id="ref-for-dom-sharedstorage-clear①"><c- g>clear</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions⑥"><c- n>SharedStorageModifierMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/clear(options), SharedStorage/clear()" data-dfn-type="argument" data-export id="dom-sharedstorage-clear-options-options"><code><c- g>options</c-></code></dfn> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①④"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑥"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-batchupdate" id="ref-for-dom-sharedstorage-batchupdate"><c- g>batchUpdate</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence③"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#sharedstoragemodifiermethod" id="ref-for-sharedstoragemodifiermethod⑦"><c- n>SharedStorageModifierMethod</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/batchUpdate(methods, options), SharedStorage/batchUpdate(methods)" data-dfn-type="argument" data-export id="dom-sharedstorage-batchupdate-methods-options-methods"><code><c- g>methods</c-></code></dfn>,
                           <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions⑦"><c- n>SharedStorageModifierMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/batchUpdate(methods, options), SharedStorage/batchUpdate(methods)" data-dfn-type="argument" data-export id="dom-sharedstorage-batchupdate-methods-options-options"><code><c- g>options</c-></code></dfn> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑧"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⑤"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sharedstorageresponse" id="ref-for-typedefdef-sharedstorageresponse③"><c- n>SharedStorageResponse</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-selecturl" id="ref-for-dom-sharedstorage-selecturl"><c- g>selectURL</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑤"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/selectURL(name, urls, options), SharedStorage/selectURL(name, urls)" data-dfn-type="argument" data-export id="dom-sharedstorage-selecturl-name-urls-options-name"><code><c- g>name</c-></code></dfn>,
                               <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence" id="ref-for-idl-sequence④"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-sharedstorageurlwithmetadata" id="ref-for-dictdef-sharedstorageurlwithmetadata⑥"><c- n>SharedStorageUrlWithMetadata</c-></a>> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/selectURL(name, urls, options), SharedStorage/selectURL(name, urls)" data-dfn-type="argument" data-export id="dom-sharedstorage-selecturl-name-urls-options-urls"><code><c- g>urls</c-></code></dfn>,
                               <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions⑥"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/selectURL(name, urls, options), SharedStorage/selectURL(name, urls)" data-dfn-type="argument" data-export id="dom-sharedstorage-selecturl-name-urls-options-options"><code><c- g>options</c-></code></dfn> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed⑨"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⑥"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any" id="ref-for-idl-any⑦"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-run" id="ref-for-dom-sharedstorage-run"><c- g>run</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑥"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/run(name, options), SharedStorage/run(name)" data-dfn-type="argument" data-export id="dom-sharedstorage-run-name-options-name"><code><c- g>name</c-></code></dfn>,
                   <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions" id="ref-for-dictdef-sharedstoragerunoperationmethodoptions⑦"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/run(name, options), SharedStorage/run(name)" data-dfn-type="argument" data-export id="dom-sharedstorage-run-name-options-options"><code><c- g>options</c-></code></dfn> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①⓪"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⑦"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②④"><c- n>SharedStorageWorklet</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-createworklet" id="ref-for-dom-sharedstorage-createworklet①"><c- g>createWorklet</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑥"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/createWorklet(moduleURL, options), SharedStorage/createWorklet(moduleURL)" data-dfn-type="argument" data-export id="dom-sharedstorage-createworklet-moduleurl-options-moduleurl"><code><c- g>moduleURL</c-></code></dfn>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstorageworkletoptions" id="ref-for-dictdef-sharedstorageworkletoptions"><c- n>SharedStorageWorkletOptions</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/createWorklet(moduleURL, options), SharedStorage/createWorklet(moduleURL)" data-dfn-type="argument" data-export id="dom-sharedstorage-createworklet-moduleurl-options-options"><code><c- g>options</c-></code></dfn> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①①"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②⑤"><c- n>SharedStorageWorklet</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="attribute" data-export data-readonly data-type="SharedStorageWorklet" id="dom-sharedstorage-worklet"><code><c- g>worklet</c-></code></dfn>;

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①②"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⑧"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑦"><c- b>DOMString</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-get" id="ref-for-dom-sharedstorage-get"><c- g>get</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑧"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage/get(key)" data-dfn-type="argument" data-export id="dom-sharedstorage-get-key-key"><code><c- g>key</c-></code></dfn>);

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①③"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise①⑨"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long" id="ref-for-idl-unsigned-long⑦"><c- b>unsigned</c-> <c- b>long</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-length" id="ref-for-dom-sharedstorage-length"><c- g>length</c-></a>();

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①④"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise" id="ref-for-idl-promise②⓪"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double" id="ref-for-idl-double③"><c- b>double</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-remainingbudget" id="ref-for-dom-sharedstorage-remainingbudget"><c- g>remainingBudget</c-></a>();

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①⑤"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <c- b>async</c-> <c- b>iterable</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString①⑨"><c- b>DOMString</c-></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②⓪"><c- b>DOMString</c-></a>>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sharedstorageprivateaggregationconfig"><code><c- g>SharedStoragePrivateAggregationConfig</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑦"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStoragePrivateAggregationConfig" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin"><code><c- g>aggregationCoordinatorOrigin</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑧"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStoragePrivateAggregationConfig" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-sharedstorageprivateaggregationconfig-contextid"><code><c- g>contextId</c-></code></dfn>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStoragePrivateAggregationConfig" data-dfn-type="dict-member" data-export data-type="unsigned long long" id="dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes"><code><c- g>filteringIdMaxBytes</c-></code></dfn>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#EnforceRange" id="ref-for-EnforceRange①"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long" id="ref-for-idl-unsigned-long-long①"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStoragePrivateAggregationConfig" data-dfn-type="dict-member" data-export data-type="unsigned long long" id="dom-sharedstorageprivateaggregationconfig-maxcontributions"><code><c- g>maxContributions</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sharedstoragerunoperationmethodoptions"><code><c- g>SharedStorageRunOperationMethodOptions</c-></code></dfn> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object" id="ref-for-idl-object⑤"><c- b>object</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageRunOperationMethodOptions" data-dfn-type="dict-member" data-export data-type="object" id="dom-sharedstoragerunoperationmethodoptions-data"><code><c- g>data</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean①"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="SharedStorageRunOperationMethodOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-sharedstoragerunoperationmethodoptions-resolvetoconfig"><code><c- g>resolveToConfig</c-></code></dfn> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean②"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-default="false" data-dfn-for="SharedStorageRunOperationMethodOptions" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-sharedstoragerunoperationmethodoptions-keepalive"><code><c- g>keepAlive</c-></code></dfn> = <c- b>false</c->;
  <a data-link-type="idl-name" href="#dictdef-sharedstorageprivateaggregationconfig" id="ref-for-dictdef-sharedstorageprivateaggregationconfig"><c- n>SharedStoragePrivateAggregationConfig</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageRunOperationMethodOptions" data-dfn-type="dict-member" data-export data-type="SharedStoragePrivateAggregationConfig" id="dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig"><code><c- g>privateAggregationConfig</c-></code></dfn>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString" id="ref-for-idl-DOMString②①"><c- b>DOMString</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorageRunOperationMethodOptions" data-dfn-type="dict-member" data-export data-type="DOMString" id="dom-sharedstoragerunoperationmethodoptions-savedquery"><code><c- g>savedQuery</c-></code></dfn>;
};

<c- b>dictionary</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="dictionary" data-export id="dictdef-sharedstorageworkletoptions"><code><c- g>SharedStorageWorkletOptions</c-></code></dfn> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletoptions" id="ref-for-workletoptions"><c- n>WorkletOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString" id="ref-for-idl-USVString⑨"><c- b>USVString</c-></a> <dfn class="dfn-paneled idl-code" data-default="&quot;context-origin&quot;" data-dfn-for="SharedStorageWorkletOptions" data-dfn-type="dict-member" data-export data-type="USVString" id="dom-sharedstorageworkletoptions-dataorigin"><code><c- g>dataOrigin</c-></code></dfn> = "context-origin";
};
</pre>
   <h3 class="heading settled" data-level="6.1" id="run-op-shared-storage"><span class="secno">6.1. </span><span class="content">Run Operation Methods on <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①②">SharedStorage</a></code></span><a class="self-link" href="#run-op-shared-storage"></a></h3>
   <div class="algorithm" data-algorithm="selectURL(name, urls, options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="selectURL(name, urls, options)|selectURL(name, urls)" id="dom-sharedstorage-selecturl"><code>selectURL(<var>name</var>, <var>urls</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sharedStorage</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④④">this</a>.</p>
     <li data-md>
      <p>Return <var>sharedStorage</var>.<code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-worklet" id="ref-for-dom-sharedstorage-worklet①">worklet</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl①⑨">selectURL</a></code>(<var>name</var>, <var>urls</var>, <var>options</var>).</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="run(name, options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="run(name, options)|run(name)" id="dom-sharedstorage-run"><code>run(<var>name</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sharedStorage</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⑤">this</a>.</p>
     <li data-md>
      <p>Return <var>sharedStorage</var>.<code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-worklet" id="ref-for-dom-sharedstorage-worklet②">worklet</a></code>.<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-run" id="ref-for-dom-sharedstorageworklet-run⑦">run</a></code>(<var>name</var>, <var>options</var>).</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.2" id="create-a-new-worklet-via-shared-storage"><span class="secno">6.2. </span><span class="content">Create a new worklet via <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①③">SharedStorage</a></code></span><a class="self-link" href="#create-a-new-worklet-via-shared-storage"></a></h3>
   <div class="algorithm" data-algorithm="createWorklet(moduleURL, options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="createWorklet(moduleURL, options)|createWorklet(moduleURL)" id="dom-sharedstorage-createworklet"><code>createWorklet(<var>moduleURL</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>sharedStorageWorklet</var> be a new <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②⑥">SharedStorageWorklet</a></code>.</p>
     <li data-md>
      <p>If <var>options</var> <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②①">contains</a> "<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworkletoptions-dataorigin" id="ref-for-dom-sharedstorageworkletoptions-dataorigin">dataOrigin</a></code>", set <var>sharedStorageWorklet</var>’s <a data-link-type="dfn" href="#sharedstorageworklet-data-origin" id="ref-for-sharedstorageworklet-data-origin⑧">data origin</a> to <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworkletoptions-dataorigin" id="ref-for-dom-sharedstorageworkletoptions-dataorigin①">dataOrigin</a></code>"].</p>
     <li data-md>
      <p>Let <var>addModulePromise</var> be the result of invoking sharedStorageWorklet.<code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule" id="ref-for-dom-worklet-addmodule①①">addModule</a></code>(<var>moduleURL</var>, <var>options</var>).</p>
     <li data-md>
      <p>Let <var>resultPromise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②①">promise</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment" id="ref-for-upon-fulfillment②">Upon fulfillment</a> of <var>addModulePromise</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⓪">resolve</a> <var>resultPromise</var> to <var>sharedStorageWorklet</var>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection" id="ref-for-upon-rejection②">Upon rejection</a> of <var>addModulePromise</var>, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①③">reject</a> <var>resultPromise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥①">TypeError</a></code>.</p>
     <li data-md>
      <p>Return <var>resultPromise</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.3" id="batch-update"><span class="secno">6.3. </span><span class="content">BatchUpdate Method</span><a class="self-link" href="#batch-update"></a></h3>
   <div class="algorithm" data-algorithm="batchUpdate(methods, options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="batchUpdate(methods, options)|batchUpdate(methods)" id="dom-sharedstorage-batchupdate"><code>batchUpdate(<var>methods</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②②">promise</a>.</p>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑦">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global⑨">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②⑥">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc⑧">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings④">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context④">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished⑦">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①④">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②⑥">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②⑥">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥②">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②⑦">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥③">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window⑨">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window⑨">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑦">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②⑧">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥④">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①⓪">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①①">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map⑤">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②④">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with②⑨">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>unfinishedUpdatesCount</var> be <var>methods</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-size" id="ref-for-list-size①⓪">size</a>.</p>
     <li data-md>
      <p>Let <var>hasFailure</var> be false.</p>
     <li data-md>
      <p>Let <var>onLockGrantedCallback</var> be an algorithm to perform the following steps:</p>
      <ol>
       <li data-md>
        <p>For each <var>method</var> in <var>methods</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>methodResultPromise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②③">promise</a>.</p>
         <li data-md>
          <p>If <var>method</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstoragesetmethod" id="ref-for-sharedstoragesetmethod②">SharedStorageSetMethod</a></code>:</p>
          <ol>
           <li data-md>
            <p>Let <var>key</var> be <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragesetmethod-key" id="ref-for-sharedstoragesetmethod-key①">key</a>.</p>
           <li data-md>
            <p>Let <var>value</var> be <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragesetmethod-value" id="ref-for-sharedstoragesetmethod-value①">value</a>.</p>
           <li data-md>
            <p>Let <var>methodOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragesetmethodoptions" id="ref-for-dictdef-sharedstoragesetmethodoptions②">SharedStorageSetMethodOptions</a></code>.</p>
           <li data-md>
            <p>Set <var>methodOptions</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragesetmethodoptions-ignoreifpresent" id="ref-for-dom-sharedstoragesetmethodoptions-ignoreifpresent①">ignoreIfPresent</a></code>"] to <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragesetmethod-ignore-if-present" id="ref-for-sharedstoragesetmethod-ignore-if-present①">ignore if present</a>.</p>
           <li data-md>
            <p>If <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock④">with lock</a> is not null, set <var>methodOptions</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①②">withLock</a></code>"] to <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock⑤">with lock</a>.</p>
           <li data-md>
            <p>Set <var>methodResultPromise</var> to the result of invoking <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-set" id="ref-for-dom-sharedstorage-set②">set</a></code>(<var>key</var>, <var>value</var>, <var>methodOptions</var>).</p>
          </ol>
         <li data-md>
          <p>Else if <var>method</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageappendmethod" id="ref-for-sharedstorageappendmethod②">SharedStorageAppendMethod</a></code>:</p>
          <ol>
           <li data-md>
            <p>Let <var>key</var> be <var>method</var>’s <a data-link-type="dfn" href="#sharedstorageappendmethod-key" id="ref-for-sharedstorageappendmethod-key①">key</a>.</p>
           <li data-md>
            <p>Let <var>value</var> be <var>method</var>’s <a data-link-type="dfn" href="#sharedstorageappendmethod-value" id="ref-for-sharedstorageappendmethod-value①">value</a>.</p>
           <li data-md>
            <p>Let <var>methodOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions⑧">SharedStorageModifierMethodOptions</a></code>.</p>
           <li data-md>
            <p>If <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock⑥">with lock</a> is not null, set <var>methodOptions</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①③">withLock</a></code>"] to <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock⑦">with lock</a>.</p>
           <li data-md>
            <p>Set <var>methodResultPromise</var> to the result of invoking <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-append" id="ref-for-dom-sharedstorage-append②">append</a></code>(<var>key</var>, <var>value</var>, <var>methodOptions</var>).</p>
          </ol>
         <li data-md>
          <p>Else if <var>method</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstoragedeletemethod" id="ref-for-sharedstoragedeletemethod②">SharedStorageDeleteMethod</a></code>:</p>
          <ol>
           <li data-md>
            <p>Let <var>key</var> be <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragedeletemethod-key" id="ref-for-sharedstoragedeletemethod-key①">key</a>.</p>
           <li data-md>
            <p>Let <var>methodOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions⑨">SharedStorageModifierMethodOptions</a></code>.</p>
           <li data-md>
            <p>If <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock⑧">with lock</a> is not null, set <var>methodOptions</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①④">withLock</a></code>"] to <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock⑨">with lock</a>.</p>
           <li data-md>
            <p>Set <var>methodResultPromise</var> to the result of invoking <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-delete" id="ref-for-dom-sharedstorage-delete②">delete</a></code>(<var>key</var>, <var>methodOptions</var>).</p>
          </ol>
         <li data-md>
          <p>Else:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②⑤">Assert</a>: <var>method</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageclearmethod" id="ref-for-sharedstorageclearmethod①">SharedStorageClearMethod</a></code>.</p>
           <li data-md>
            <p>Let <var>methodOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions①⓪">SharedStorageModifierMethodOptions</a></code>.</p>
           <li data-md>
            <p>If <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock①⓪">with lock</a> is not null, set <var>methodOptions</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①⑤">withLock</a></code>"] to <var>method</var>’s <a data-link-type="dfn" href="#sharedstoragemodifiermethod-with-lock" id="ref-for-sharedstoragemodifiermethod-with-lock①①">with lock</a>.</p>
           <li data-md>
            <p>Set <var>methodResultPromise</var> to the result of invoking <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-clear" id="ref-for-dom-sharedstorage-clear②">clear</a></code>(<var>methodOptions</var>).</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment" id="ref-for-upon-fulfillment③">Upon fulfillment</a> of <var>methodResultPromise</var>:</p>
          <ol>
           <li data-md>
            <p>Decrement <var>unfinishedUpdatesCount</var> by 1.</p>
           <li data-md>
            <p>If <var>unfinishedUpdatesCount</var> is 0, run <a data-link-type="dfn" href="#finish-a-batch-update" id="ref-for-finish-a-batch-update">finish a batch update</a> given <var>promise</var> and <var>hasFailure</var>.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection" id="ref-for-upon-rejection③">Upon rejection</a> of <var>methodResultPromise</var>:</p>
          <ol>
           <li data-md>
            <p>Decrement <var>unfinishedUpdatesCount</var> by 1.</p>
           <li data-md>
            <p>Set <var>hasFailure</var> to true.</p>
           <li data-md>
            <p>If <var>unfinishedUpdatesCount</var> is 0, run <a data-link-type="dfn" href="#finish-a-batch-update" id="ref-for-finish-a-batch-update①">finish a batch update</a> given <var>promise</var> and <var>hasFailure</var>.</p>
          </ol>
        </ol>
       <li data-md>
        <p>If <var>unfinishedUpdatesCount</var> is 0, run <a data-link-type="dfn" href="#finish-a-batch-update" id="ref-for-finish-a-batch-update②">finish a batch update</a> given <var>promise</var> and <var>hasFailure</var>.</p>
      </ol>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①⑥">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②②">exists</a>, run <a data-link-type="dfn" href="#handle-callback-within-a-shared-storage-lock" id="ref-for-handle-callback-within-a-shared-storage-lock">handle callback within a shared storage lock</a> given <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②⑤">origin</a>, <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①⑦">withLock</a></code>"], <var>onLockGrantedCallback</var>.</p>
     <li data-md>
      <p>Else, run <var>onLockGrantedCallback</var>.</p>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="finish a batch update">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="finish-a-batch-update">finish a batch update</dfn>, given a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②④">promise</a> <var>promise</var> and a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean⑤">boolean</a> <var>hasFailure</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>If <var>hasFailure</var> is true, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①④">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>Else, <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①①">resolve</a> <var>promise</var> with undefined.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.4" id="setter"><span class="secno">6.4. </span><span class="content">Setter/Deleter Methods</span><a class="self-link" href="#setter"></a></h3>
   <div class="algorithm" data-algorithm="set(key, value, options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="set(key, value, options)|set(key, value)" id="dom-sharedstorage-set"><code>set(<var>key</var>, <var>value</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②⑤">promise</a>.</p>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑧">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①⓪">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②⑦">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc⑨">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings⑤">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context⑤">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished⑧">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①⑤">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②⑦">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③⓪">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥⑦">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③①">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①①">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①⓪">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑧">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③②">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑥⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>key</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length⑥">length</a> exceeds the <a data-link-type="dfn" href="#key-maximum-length" id="ref-for-key-maximum-length③">maximum length</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>value</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length⑦">length</a> exceeds the <a data-link-type="dfn" href="#value-maximum-length" id="ref-for-value-maximum-length②">maximum length</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③④">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦①">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①②">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①②">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map⑥">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②⑥">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③⑤">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦②">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database⑧">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue⑧">shared storage database queue</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm⑨">current realm</a>.</p>
     <li data-md>
      <p>Let <var>onLockGrantedCallback</var> be an algorithm to perform the following steps:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps">Enqueue the following steps</a> on <var>queue</var>:</p>
        <ol>
         <li data-md>
          <p>If <var>options</var>["<code>ignoreIfPresent</code>"] is true:</p>
          <ol>
           <li data-md>
            <p>Let <var>currentValue</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-retrieve-an-entry-from-the-database" id="ref-for-shared-storage-database-retrieve-an-entry-from-the-database①">retrieve an entry from the database</a> with <var>queue</var>, <var>databaseMap</var>, <var>environment</var>, and <var>key</var>.</p>
           <li data-md>
            <p>If <var>currentValue</var> is failure and if <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②⑧">SharedStorageWorkletGlobalScope</a></code>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①③">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①①">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①①">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑤">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦③">TypeError</a></code>.</p>
             <li data-md>
              <p>Abort these steps.</p>
            </ol>
           <li data-md>
            <p>If <var>currentValue</var> is not undefined:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①④">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①②">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①②">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①②">resolve</a> <var>promise</var> with undefined.</p>
             <li data-md>
              <p>Abort these steps.</p>
            </ol>
          </ol>
         <li data-md>
          <p>Let <var>result</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-store-an-entry-in-the-database" id="ref-for-shared-storage-database-store-an-entry-in-the-database②">store an entry in the database</a> with <var>queue</var>, <var>databaseMap</var>, <var>environment</var>, <var>key</var>, and <var>value</var>.</p>
         <li data-md>
          <p>If <var>result</var> is false and if <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope②⑨">SharedStorageWorkletGlobalScope</a></code>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①⑤">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①③">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①③">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑥">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦④">TypeError</a></code>.</p>
           <li data-md>
            <p>Abort these steps.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①⑥">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①④">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①④">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①③">resolve</a> <var>promise</var> with undefined.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①⑧">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②③">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock①⑨">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③⑥">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦⑤">TypeError</a></code>.</p>
       <li data-md>
        <p>Run <a data-link-type="dfn" href="#handle-callback-within-a-shared-storage-lock" id="ref-for-handle-callback-within-a-shared-storage-lock①">handle callback within a shared storage lock</a> given <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②⑦">origin</a>, <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②⓪">withLock</a></code>"], <var>onLockGrantedCallback</var>.</p>
      </ol>
     <li data-md>
      <p>Else, run <var>onLockGrantedCallback</var>.</p>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="append(key, value, options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="append(key, value, options)|append(key, value)" id="dom-sharedstorage-append"><code>append(<var>key</var>, <var>value</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②⑥">promise</a>.</p>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①⓪">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①⑤">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②⑧">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①⓪">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings⑥">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context⑥">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished⑨">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①⑥">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③⓪">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③⑦">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦⑥">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③⑧">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①③">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①①">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active⑨">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with③⑨">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>key</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length⑧">length</a> exceeds the <a data-link-type="dfn" href="#key-maximum-length" id="ref-for-key-maximum-length④">maximum length</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④⓪">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑦⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>value</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length⑨">length</a> exceeds the <a data-link-type="dfn" href="#value-maximum-length" id="ref-for-value-maximum-length③">maximum length</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④①">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①④">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①③">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map⑦">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②⑧">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④②">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧①">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database⑨">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue⑨">shared storage database queue</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①①">current realm</a>.</p>
     <li data-md>
      <p>Let <var>onLockGrantedCallback</var> be an algorithm to perform the following steps:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps①">Enqueue the following steps</a> on <var>queue</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>currentValue</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-retrieve-an-entry-from-the-database" id="ref-for-shared-storage-database-retrieve-an-entry-from-the-database②">retrieve an entry from the database</a> with <var>queue</var>, <var>databaseMap</var>, <var>environment</var>, and <var>key</var>.</p>
         <li data-md>
          <p>If <var>currentValue</var> is failure:</p>
          <ol>
           <li data-md>
            <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window②⑨">Window</a></code>:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①⑦">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①⑤">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①⑥">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①④">resolve</a> <var>promise</var> with undefined.</p>
            </ol>
           <li data-md>
            <p>Else:</p>
            <ol>
             <li data-md>
              <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①⑧">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①⑥">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①⑦">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑦">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧②">TypeError</a></code>.</p>
            </ol>
           <li data-md>
            <p>Abort these steps.</p>
          </ol>
         <li data-md>
          <p>If <var>currentValue</var> is not undefined:</p>
          <ol>
           <li data-md>
            <p>Let <var>list</var> be a new <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list⑨">list</a>.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append④">Append</a> <var>currentValue</var> to <var>list</var>.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑤">Append</a> <var>value</var> to <var>list</var>.</p>
           <li data-md>
            <p>Set <var>value</var> to the result of running <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-concatenate" id="ref-for-string-concatenate">concatenate</a> on <var>list</var>.</p>
          </ol>
         <li data-md>
          <p>Let <var>result</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-store-an-entry-in-the-database" id="ref-for-shared-storage-database-store-an-entry-in-the-database③">store an entry in the database</a> with <var>queue</var>, <var>databaseMap</var>, <var>environment</var>, <var>key</var>, and <var>value</var>.</p>
         <li data-md>
          <p>If <var>result</var> is false and if <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③①">SharedStorageWorkletGlobalScope</a></code>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task①⑨">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①⑦">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①⑧">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑧">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧③">TypeError</a></code>.</p>
           <li data-md>
            <p>Abort these steps.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②⓪">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①⑧">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global①⑨">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑤">resolve</a> <var>promise</var> with undefined.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②①">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②④">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②②">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧④">TypeError</a></code>.</p>
       <li data-md>
        <p>Run <a data-link-type="dfn" href="#handle-callback-within-a-shared-storage-lock" id="ref-for-handle-callback-within-a-shared-storage-lock②">handle callback within a shared storage lock</a> given <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin②⑨">origin</a>, <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②③">withLock</a></code>"], <var>onLockGrantedCallback</var>.</p>
      </ol>
     <li data-md>
      <p>Else, run <var>onLockGrantedCallback</var>.</p>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="delete(key, options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="delete(key, options)|delete(key)" id="dom-sharedstorage-delete"><code>delete(<var>key</var>, <var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②⑦">promise</a>.</p>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①②">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②⓪">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③⓪">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①①">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings⑦">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context⑦">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished①⓪">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①⑦">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③②">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④④">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧⑤">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④⑤">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①⑤">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①②">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①⓪">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④⑥">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>key</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length①⓪">length</a> exceeds the <a data-link-type="dfn" href="#key-maximum-length" id="ref-for-key-maximum-length⑤">maximum length</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④⑦">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①⑥">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①④">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map⑧">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③⓪">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④⑧">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑧⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①⓪">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue①⓪">shared storage database queue</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①③">current realm</a>.</p>
     <li data-md>
      <p>Let <var>onLockGrantedCallback</var> be an algorithm to perform the following steps:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps②">Enqueue the following steps</a> on <var>queue</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-delete-an-entry-from-the-database" id="ref-for-shared-storage-database-delete-an-entry-from-the-database①">delete an entry from the database</a> with <var>queue</var>, <var>databaseMap</var>, and <var>key</var>.</p>
         <li data-md>
          <p>If <var>result</var> is false and if <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③③">SharedStorageWorkletGlobalScope</a></code>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②①">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source①⑨">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②①">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject①⑨">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨⓪">TypeError</a></code>.</p>
           <li data-md>
            <p>Abort these steps.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②②">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②⓪">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②②">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑥">resolve</a> <var>promise</var> with undefined.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②④">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑤">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②⑤">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with④⑨">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨①">TypeError</a></code>.</p>
       <li data-md>
        <p>Run <a data-link-type="dfn" href="#handle-callback-within-a-shared-storage-lock" id="ref-for-handle-callback-within-a-shared-storage-lock③">handle callback within a shared storage lock</a> given <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③①">origin</a>, <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②⑥">withLock</a></code>"], <var>onLockGrantedCallback</var>.</p>
      </ol>
     <li data-md>
      <p>Else, run <var>onLockGrantedCallback</var>.</p>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="clear(options)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export data-lt="clear(options)|clear()" id="dom-sharedstorage-clear"><code>clear(<var>options</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②⑧">promise</a>.</p>
     <li data-md>
      <p>Let <var>globalObject</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①④">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②③">global object</a>.</p>
     <li data-md>
      <p>Let <var>context</var> be null.</p>
     <li data-md>
      <p>If <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③①">Window</a></code>:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc" id="ref-for-window-bc①②">browsing context</a>.</p>
      </ol>
     <li data-md>
      <p>Else:</p>
      <ol>
       <li data-md>
        <p>Set <var>context</var> to <var>globalObject</var>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings⑧">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context⑧">target browsing context</a>.</p>
       <li data-md>
        <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished①①">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①⑧">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③④">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤⓪">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨②">TypeError</a></code>.</p>
      </ol>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤①">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨③">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①⑦">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①③">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①①">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤②">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨④">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①⑧">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①⑤">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map⑨">obtain a shared storage bottle map</a> given <var>environment</var> and <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③②">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①①">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue①①">shared storage database queue</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①⑤">current realm</a>.</p>
     <li data-md>
      <p>Let <var>onLockGrantedCallback</var> be an algorithm to perform the following steps:</p>
      <ol>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps③">Enqueue the following steps</a> on <var>queue</var>:</p>
        <ol>
         <li data-md>
          <p>Let <var>result</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-clear-all-entries-in-the-database" id="ref-for-shared-storage-database-clear-all-entries-in-the-database①">clear all entries in the database</a> with <var>queue</var> and <var>databaseMap</var>.</p>
         <li data-md>
          <p>If <var>result</var> is false and if <var>globalObject</var> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③⑤">SharedStorageWorkletGlobalScope</a></code>:</p>
          <ol>
           <li data-md>
            <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②③">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②①">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②④">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②⓪">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨⑥">TypeError</a></code>.</p>
           <li data-md>
            <p>Abort these steps.</p>
          </ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②④">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②②">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②⑤">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑦">resolve</a> <var>promise</var> with undefined.</p>
        </ol>
      </ol>
     <li data-md>
      <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②⑦">withLock</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑥">exists</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②⑧">withLock</a></code>"] starts with U+002D HYPHEN-MINUS (-), return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤④">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨⑦">TypeError</a></code>.</p>
       <li data-md>
        <p>Run <a data-link-type="dfn" href="#handle-callback-within-a-shared-storage-lock" id="ref-for-handle-callback-within-a-shared-storage-lock④">handle callback within a shared storage lock</a> given <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③③">origin</a>, <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock②⑨">withLock</a></code>"], <var>onLockGrantedCallback</var>.</p>
      </ol>
     <li data-md>
      <p>Else, run <var>onLockGrantedCallback</var>.</p>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.5" id="getter"><span class="secno">6.5. </span><span class="content">Getter Methods</span><a class="self-link" href="#getter"></a></h3>
   <div class="algorithm" data-algorithm="get(key)" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export id="dom-sharedstorage-get"><code>get(<var>key</var>)</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise②⑨">promise</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished①②">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage①⑨">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③⑥">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤⑤">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨⑧">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>key</var>’s <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string-length" id="ref-for-string-length①①">length</a> exceeds the <a data-link-type="dfn" href="#key-maximum-length" id="ref-for-key-maximum-length⑥">maximum length</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤⑥">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror⑨⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>context</var> be <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②⓪">SharedStorage</a></code>’s <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③⑦">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings⑨">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context⑨">target browsing context</a>.</p>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤⑦">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window①⑨">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①④">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①②">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤⑧">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪①">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②⓪">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①⑥">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①⑥">current realm</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map①⓪">obtain a shared storage bottle map</a> given <var>environment</var> and <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object⑦">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③④">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑤⑨">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪②">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①②">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue①②">shared storage database queue</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps④">Enqueue the following steps</a> on <var>queue</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>value</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-retrieve-an-entry-from-the-database" id="ref-for-shared-storage-database-retrieve-an-entry-from-the-database③">retrieve an entry from the database</a> with <var>queue</var>, <var>databaseMap</var>, <var>environment</var>, and <var>key</var>.</p>
       <li data-md>
        <p>If <var>value</var> is failure, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②⑤">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②③">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②⑥">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②①">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪③">TypeError</a></code>.</p>
       <li data-md>
        <p>Otherwise, if <var>value</var> is undefined, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②⑥">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②④">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②⑦">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑧">resolve</a> <var>promise</var> with undefined.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②⑦">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②⑤">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②⑧">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve①⑨">resolve</a> <var>promise</var> with <var>value</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="length()" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export id="dom-sharedstorage-length"><code>length()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise③⓪">promise</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished①③">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②①">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③⑧">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥⓪">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪④">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>context</var> be <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②②">SharedStorage</a></code>’s <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope③⑨">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings①⓪">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context①⓪">target browsing context</a>.</p>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥①">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②①">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①⑤">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①③">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥②">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②②">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①⑦">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①⑦">current realm</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map①①">obtain a shared storage bottle map</a> given <var>environment</var> and <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object⑧">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③⑤">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①③">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue①③">shared storage database queue</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps⑤">Enqueue the following steps</a> on <var>queue</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>numEntries</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-count-entries-in-the-database" id="ref-for-shared-storage-database-count-entries-in-the-database">count entries in the database</a> with <var>queue</var> and <var>environment</var>.</p>
       <li data-md>
        <p>If <var>numEntries</var> is failure, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②⑧">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②⑥">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global②⑨">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②②">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪⑧">TypeError</a></code>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task②⑨">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②⑦">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③⓪">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②⓪">resolve</a> <var>promise</var> with <var>numEntries</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="remainingBudget()" data-algorithm-for="SharedStorage">
     The <dfn class="dfn-paneled idl-code" data-dfn-for="SharedStorage" data-dfn-type="method" data-export id="dom-sharedstorage-remainingbudget"><code>remainingBudget()</code></dfn> method steps are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise③①">promise</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished①④">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②③">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope④⓪">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥④">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①⓪⑨">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>context</var> be <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②④">SharedStorage</a></code>’s <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope④①">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings①①">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context①①">target browsing context</a>.</p>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥⑤">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①⓪">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②③">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①⑥">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①④">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥⑥">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①①">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②④">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①⑧">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①⑧">current realm</a>.</p>
     <li data-md>
      <p>Let <var>allowedInOpaqueOriginContext</var> be false.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#determine-whether-shared-storage-is-allowed-by-context" id="ref-for-determine-whether-shared-storage-is-allowed-by-context⑤">determine whether shared storage is allowed by context</a> given <var>environment</var>, <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object⑨">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③⑥">origin</a>, and <var>allowedInOpaqueOriginContext</var> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥⑦">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①②">TypeError</a></code>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-if-user-preference-setting-allows-access-to-shared-storage" id="ref-for-check-if-user-preference-setting-allows-access-to-shared-storage⑤">check if user preference setting allows access to shared storage</a> given <var>environment</var> and <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object①⓪">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③⑦">origin</a> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥⑧">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①③">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>site</var> be the result of running <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site" id="ref-for-obtain-a-site③">obtain a site</a> with <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object①①">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③⑧">origin</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②⑥">Assert</a>: <var>site</var> is not an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque" id="ref-for-concept-origin-opaque④">opaque origin</a>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①④">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue①④">shared storage database queue</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps⑥">Enqueue the following steps</a> on <var>queue</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>remainingBudget</var> be the result of running <a data-link-type="dfn" href="#determine-remaining-navigation-budget" id="ref-for-determine-remaining-navigation-budget①">determine remaining navigation budget</a> with <var>site</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②①">Resolve</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task③⓪">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②⑧">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③①">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②②">resolve</a> <var>promise</var> with <var>remainingBudget</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="6.6" id="iteration"><span class="secno">6.6. </span><span class="content">Iteration</span><a class="self-link" href="#iteration"></a></h3>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②⑤">SharedStorage</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-async-iterable" id="ref-for-idl-async-iterable">async iterator</a> instance has a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#queue" id="ref-for-queue①">queue</a> <dfn class="dfn-paneled" data-dfn-for="SharedStorageIterator" data-dfn-type="dfn" data-noexport id="sharedstorageiterator-pending-entries">pending entries</dfn> of <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry⑤">entries</a>, initially <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty③">empty</a>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②⑥">SharedStorage</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-async-iterable" id="ref-for-idl-async-iterable①">async iterator</a> instance also has a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean③">boolean</a></code> <dfn class="dfn-paneled" data-dfn-for="SharedStorageIterator" data-dfn-type="dfn" data-noexport id="sharedstorageiterator-error">error</dfn>, initially false.</p>
   <p>The <a data-link-type="dfn" href="#sharedstorageiterator-asynchronous-iterator-initialization-steps" id="ref-for-sharedstorageiterator-asynchronous-iterator-initialization-steps">asynchronous iterator initialization steps</a> and <a data-link-type="dfn" href="#sharedstorageiterator-get-the-next-iteration-result" id="ref-for-sharedstorageiterator-get-the-next-iteration-result">get the next iteration result</a> algorithms defined below correspond to those referred to as the <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps" id="ref-for-asynchronous-iterator-initialization-steps">asynchronous iterator initialization steps</a> and <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result" id="ref-for-dfn-get-the-next-iteration-result">get the next iteration result</a> algorithms in the <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#introduction" id="ref-for-introduction">Web IDL Standard</a>.</p>
   <div class="algorithm" data-algorithm="asynchronous iterator initialization steps" data-algorithm-for="SharedStorageIterator">
     The <dfn class="dfn-paneled" data-dfn-for="SharedStorageIterator" data-dfn-type="dfn" data-noexport id="sharedstorageiterator-asynchronous-iterator-initialization-steps">asynchronous iterator initialization steps</dfn> for a <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②⑦">SharedStorage</a></code> <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-async-iterable" id="ref-for-idl-async-iterable②">async iterator</a> <var>iterator</var> are: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise③②">promise</a>.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished" id="ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished①⑤">check whether addModule is finished</a> for <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②⑧">SharedStorage</a></code>’s associated <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope④②">SharedStorageWorkletGlobalScope</a></code> is false, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑥⑨">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①④">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>context</var> be <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage②⑨">SharedStorage</a></code>’s <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope④③">SharedStorageWorkletGlobalScope</a></code>’s <a data-link-type="dfn" href="#sharedstorageworkletglobalscope-outside-settings" id="ref-for-sharedstorageworkletglobalscope-outside-settings①②">outside settings</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context" id="ref-for-concept-environment-target-browsing-context①②">target browsing context</a>.</p>
     <li data-md>
      <p>If <var>context</var> is null, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑦⓪">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①⑤">TypeError</a></code>.</p>
     <li data-md>
      <p>If <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②⑤">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window" id="ref-for-concept-document-window①⑦">associated document</a> is not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active" id="ref-for-fully-active①⑤">fully active</a>, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑦①">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①⑥">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>environment</var> be <var>context</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window" id="ref-for-nav-window②⑥">active window</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object①⑨">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>realm</var> be the <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm①⑨">current realm</a>.</p>
     <li data-md>
      <p>Let <var>databaseMap</var> be the result of running <a data-link-type="dfn" href="#obtain-a-shared-storage-bottle-map" id="ref-for-obtain-a-shared-storage-bottle-map①②">obtain a shared storage bottle map</a> given <var>environment</var> and <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object" id="ref-for-concept-realm-settings-object①②">settings object</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin③⑨">origin</a>.</p>
     <li data-md>
      <p>If <var>databaseMap</var> is failure, then return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑦②">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①⑦">TypeError</a></code>.</p>
     <li data-md>
      <p>Let <var>queue</var> be <var>context</var>’s associated <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①⑤">database</a>’s <a data-link-type="dfn" href="#shared-storage-database-shared-storage-database-queue" id="ref-for-shared-storage-database-shared-storage-database-queue①⑤">shared storage database queue</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps⑦">Enqueue the following steps</a> on <var>queue</var>:</p>
      <ol>
       <li data-md>
        <p>Let <var>entries</var> be the result of running <a data-link-type="dfn" href="#shared-storage-database-retrieve-all-entries-from-the-database" id="ref-for-shared-storage-database-retrieve-all-entries-from-the-database">retrieve all entries from the database</a> with <var>queue</var> and <var>environment</var>.</p>
       <li data-md>
        <p>If <var>entries</var> is failure, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task③①">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source②⑨">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③②">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#reject" id="ref-for-reject②③">reject</a> <var>promise</var> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①⑧">TypeError</a></code>.</p>
       <li data-md>
        <p>Otherwise, <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task③②">queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source③⓪">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③③">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②③">resolve</a> <var>promise</var> with <var>entries</var>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-fulfillment" id="ref-for-upon-fulfillment④">Upon fulfillment</a> of <var>promise</var>, run the following:</p>
      <ol>
       <li data-md>
        <p>Let <var>promiseEntries</var> be the value of <var>promise</var>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-iterate" id="ref-for-map-iterate⑦">For each</a> <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry⑥">entry</a> <var>entry</var> in <var>promiseEntries</var>, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#queue-enqueue" id="ref-for-queue-enqueue①">enqueue</a> <var>entry</var> in <var>iterator</var>’s <a data-link-type="dfn" href="#sharedstorageiterator-pending-entries" id="ref-for-sharedstorageiterator-pending-entries">pending entries</a>.</p>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#upon-rejection" id="ref-for-upon-rejection④">Upon rejection</a> of <var>promise</var>, set <var>iterator</var>’s <a data-link-type="dfn" href="#sharedstorageiterator-error" id="ref-for-sharedstorageiterator-error">error</a> to true.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the next iteration result" data-algorithm-for="SharedStorageIterator">
     To<dfn class="dfn-paneled" data-dfn-for="SharedStorageIterator" data-dfn-type="dfn" data-noexport id="sharedstorageiterator-get-the-next-iteration-result">get the next iteration result</dfn>, given a <code class="idl"><a data-link-type="idl" href="#sharedstorage" id="ref-for-sharedstorage③⓪">SharedStorage</a></code>’s <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-async-iterable" id="ref-for-idl-async-iterable③">async iterator</a> <var>iterator</var>, run the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>promise</var> be a new <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#idl-promise" id="ref-for-idl-promise③③">promise</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps" id="ref-for-enqueue-the-following-steps⑧">Enqueue the following steps</a>:</p>
      <ol>
       <li data-md>
        <p>If <var>iterator</var>’s <a data-link-type="dfn" href="#sharedstorageiterator-error" id="ref-for-sharedstorageiterator-error①">error</a> is true, return a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org#a-promise-rejected-with" id="ref-for-a-promise-rejected-with⑦③">promise rejected</a> with a <code class="idl"><a data-link-type="idl" href="https://webidl.spec.whatwg.org/#exceptiondef-typeerror" id="ref-for-exceptiondef-typeerror①①⑨">TypeError</a></code>.</p>
       <li data-md>
        <p>If <var>iterator</var>’s <a data-link-type="dfn" href="#sharedstorageiterator-pending-entries" id="ref-for-sharedstorageiterator-pending-entries①">pending entries</a> is <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty④">empty</a>:</p>
        <ol>
         <li data-md>
          <p>Create an object <var>doneObject</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task③③">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source③①">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③④">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②④">resolve</a> <var>promise</var> with <var>doneObject</var>.</p>
         <li data-md>
          <p>Abort these steps.</p>
        </ol>
       <li data-md>
        <p>Otherwise, let <var>entry</var> be the result of <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#queue-dequeue" id="ref-for-queue-dequeue①">dequeuing</a> from <var>iterator</var>’s <a data-link-type="dfn" href="#sharedstorageiterator-pending-entries" id="ref-for-sharedstorageiterator-pending-entries②">pending entries</a>.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task" id="ref-for-queue-a-global-task③④">Queue a global task</a> on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source" id="ref-for-dom-manipulation-task-source③②">DOM manipulation task source</a>, given <var>realm</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③⑤">global object</a>, to <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#resolve" id="ref-for-resolve②⑤">resolve</a> <var>promise</var> with <var>entry</var>.</p>
      </ol>
     <li data-md>
      <p>Return <var>promise</var>.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="7" id="http"><span class="secno">7. </span><span class="content">Triggering Operations Via HTTP Response Header</span><a class="self-link" href="#http"></a></h2>
   <p>While setter and deleter operations (e.g.. <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-set" id="ref-for-dom-sharedstorage-set③">set()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-append" id="ref-for-dom-sharedstorage-append③">append()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-delete" id="ref-for-dom-sharedstorage-delete③">delete()</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-clear" id="ref-for-dom-sharedstorage-clear③">clear()</a></code>) can be initiated via the above APIs for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③②">Window</a></code> or <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope④④">SharedStorageWorkletGlobalScope</a></code>, setter/deleter operations can alternatively be triggered via HTTP <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response①">response</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header①">header</a>.</p>
   <p>This will require monkey patches to the HTML and Fetch specifications.</p>
   <h2 class="heading settled" data-level="8" id="html-monkeypatches"><span class="secno">8. </span><span class="content">HTML Monkey Patches</span><a class="self-link" href="#html-monkeypatches"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="html-attr"><span class="secno">8.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-htmlsharedstoragewritableelementutils-sharedstoragewritable" id="ref-for-dom-htmlsharedstoragewritableelementutils-sharedstoragewritable">sharedStorageWritable</a></code> &amp; <code><a data-link-type="element-sub" href="#element-attrdef-iframe-sharedstoragewritable" id="ref-for-element-attrdef-iframe-sharedstoragewritable">sharedstoragewritable</a></code> Attributes</span><a class="self-link" href="#html-attr"></a></h3>
   <p>Define the following <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#interface-mixin" id="ref-for-interface-mixin">interface mixin</a> and include it in the IDL <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-interface" id="ref-for-dfn-interface">interfaces</a> for <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement" id="ref-for-htmliframeelement">HTMLIFrameElement</a></code> and <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" id="ref-for-htmlimageelement">HTMLImageElement</a></code>:</p>
<pre class="idl highlight def"><c- b>interface</c-> <c- b>mixin</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="htmlsharedstoragewritableelementutils"><code><c- g>HTMLSharedStorageWritableElementUtils</c-></code></dfn> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions" id="ref-for-cereactions"><c- g>CEReactions</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext①"><c- g>SecureContext</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean④"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="HTMLSharedStorageWritableElementUtils" data-dfn-type="attribute" data-export data-type="boolean" id="dom-htmlsharedstoragewritableelementutils-sharedstoragewritable"><code><c- g>sharedStorageWritable</c-></code></dfn>;
};

<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement" id="ref-for-htmliframeelement①"><c- n>HTMLIFrameElement</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#htmlsharedstoragewritableelementutils" id="ref-for-htmlsharedstoragewritableelementutils"><c- n>HTMLSharedStorageWritableElementUtils</c-></a>;
<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement" id="ref-for-htmlimageelement①"><c- n>HTMLImageElement</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#htmlsharedstoragewritableelementutils" id="ref-for-htmlsharedstoragewritableelementutils①"><c- n>HTMLSharedStorageWritableElementUtils</c-></a>;
</pre>
   <p>Add the following <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes" id="ref-for-boolean-attributes">boolean content attributes</a>:</p>
   <dl>
    <dt data-md><code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element">iframe</a></code>
    <dd data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="iframe" data-dfn-type="element-attr" data-export id="element-attrdef-iframe-sharedstoragewritable"><code>sharedstoragewritable</code></dfn></p>
    <dt data-md><code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element" id="ref-for-the-img-element">img</a></code>
    <dd data-md>
     <p><dfn class="dfn-paneled" data-dfn-for="img" data-dfn-type="element-attr" data-export id="element-attrdef-img-sharedstoragewritable"><code>sharedstoragewritable</code></dfn></p>
   </dl>
   <p>The IDL attribute <code class="idl"><a data-link-type="idl" href="#dom-htmlsharedstoragewritableelementutils-sharedstoragewritable" id="ref-for-dom-htmlsharedstoragewritableelementutils-sharedstoragewritable①">sharedStorageWritable</a></code> must <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect" id="ref-for-reflect">reflect</a> the respective <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-element-attributes" id="ref-for-concept-element-attributes">content attribute</a> of the same name.</p>
   <h3 class="heading settled" data-level="8.2" id="html-algo"><span class="secno">8.2. </span><span class="content">HTML Algorithm Modifications</span><a class="self-link" href="#html-algo"></a></h3>
   <h4 class="heading settled" data-level="8.2.1" id="mod-update-img"><span class="secno">8.2.1. </span><span class="content">Modification to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/images.html#update-the-image-data" id="ref-for-update-the-image-data">Update the image data</a> Algorithm</span><a class="self-link" href="#mod-update-img"></a></h4>
   <div class="algorithm" data-algorithm="modification-to-update-the-image-data">
     Modify <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/images.html#update-the-image-data" id="ref-for-update-the-image-data①">update the image data</a> as follows: 
    <p>After the step</p>
    <blockquote>
     <p>Set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#request-priority" id="ref-for-request-priority">priority</a> to the current state...</p>
    </blockquote>
    <p>add the step</p>
    <ol>
     <li data-md>
      <p>If the element has the <code><a data-link-type="element-sub" href="#element-attrdef-img-sharedstoragewritable" id="ref-for-element-attrdef-img-sharedstoragewritable">sharedstoragewritable</a></code> attribute present, set <var>request</var>’s <a data-link-type="dfn" href="#request-shared-storage-writable" id="ref-for-request-shared-storage-writable">shared storage writable</a> to true.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="8.2.2" id="mod-create-nav"><span class="secno">8.2.2. </span><span class="content">Modification to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#create-navigation-params-by-fetching" id="ref-for-create-navigation-params-by-fetching">Create navigation params by fetching</a> Algorithm</span><a class="self-link" href="#mod-create-nav"></a></h4>
   <div class="algorithm" data-algorithm="modification-to-create-navigation-params-by-fetching">
     Modify <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#create-navigation-params-by-fetching" id="ref-for-create-navigation-params-by-fetching①">create navigation params by fetching</a> as follows: 
    <p>After the step</p>
    <blockquote>
     <p>Let <var>request</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-request" id="ref-for-concept-request-request">request</a>, with ...</p>
    </blockquote>
    <p>add the step</p>
    <ol>
     <li data-md>
      <p>If <var>navigable</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container" id="ref-for-nav-container">container</a> is an <code><a data-link-type="element" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element" id="ref-for-the-iframe-element①">iframe</a></code> element, and if it has a <code><a data-link-type="element-sub" href="#element-attrdef-iframe-sharedstoragewritable" id="ref-for-element-attrdef-iframe-sharedstoragewritable①">sharedstoragewritable</a></code> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/dom.html#concept-element-attributes" id="ref-for-concept-element-attributes①">content attribute</a>, then set <var>request</var>’s <a data-link-type="dfn" href="#request-shared-storage-writable" id="ref-for-request-shared-storage-writable①">shared storage writable</a> to true.</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="9" id="fetch-monkeypatches"><span class="secno">9. </span><span class="content">Fetch Monkey Patches</span><a class="self-link" href="#fetch-monkeypatches"></a></h2>
   <h3 class="heading settled" data-level="9.1" id="fetch-attr"><span class="secno">9.1. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#dom-requestinit-sharedstoragewritable" id="ref-for-dom-requestinit-sharedstoragewritable">sharedStorageWritable</a></code> Key</span><a class="self-link" href="#fetch-attr"></a></h3>
   <p>A <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request①">request</a> has an associated <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#boolean" id="ref-for-boolean⑥">boolean</a> <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-noexport id="request-shared-storage-writable">shared storage writable</dfn>. Unless stated otherwise it is false.</p>
   <p>The <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#requestinit" id="ref-for-requestinit">RequestInit</a></code> dictionary contains a <code class="idl"><a data-link-type="idl" href="#dom-requestinit-sharedstoragewritable" id="ref-for-dom-requestinit-sharedstoragewritable①">sharedStorageWritable</a></code> key:</p>
<pre class="idl highlight def"><c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://fetch.spec.whatwg.org/#requestinit" id="ref-for-requestinit①"><c- g>RequestInit</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean" id="ref-for-idl-boolean⑤"><c- b>boolean</c-></a> <dfn class="dfn-paneled idl-code" data-dfn-for="RequestInit" data-dfn-type="dict-member" data-export data-type="boolean" id="dom-requestinit-sharedstoragewritable"><code><c- g>sharedStorageWritable</c-></code></dfn>;
};
</pre>
   <h3 class="heading settled" data-level="9.2" id="mod-fetch-algo"><span class="secno">9.2. </span><span class="content">Fetch Algorithm Modifications</span><a class="self-link" href="#mod-fetch-algo"></a></h3>
   <h4 class="heading settled" data-level="9.2.1" id="mod-request-con"><span class="secno">9.2.1. </span><span class="content">Modification to the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#dom-request" id="ref-for-dom-request">Request Constructor</a> Algorithm</span><a class="self-link" href="#mod-request-con"></a></h4>
   <div class="algorithm" data-algorithm="modification-to-request-constructor">
     Modify the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#dom-request" id="ref-for-dom-request①">new Request(input, init) constructor</a> as follows: 
    <p>Before the step</p>
    <blockquote>
     <p>Set this’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-request" id="ref-for-concept-request-request①">request</a> to <var>request</var>.</p>
    </blockquote>
    <p>add the step</p>
    <ol>
     <li data-md>
      <p>If <var>init</var>["<code class="idl"><a data-link-type="idl" href="#dom-requestinit-sharedstoragewritable" id="ref-for-dom-requestinit-sharedstoragewritable②">sharedStorageWritable</a></code>"] <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑦">exists</a>, then set <var>request</var>’s <a data-link-type="dfn" href="#request-shared-storage-writable" id="ref-for-request-shared-storage-writable②">shared storage writable</a> to it.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="9.2.2" id="mod-http-net-fetch"><span class="secno">9.2.2. </span><span class="content">Modification to <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch" id="ref-for-concept-http-network-or-cache-fetch">HTTP network or cache fetch</a> Algorithm</span><a class="self-link" href="#mod-http-net-fetch"></a></h4>
   <div class="algorithm" data-algorithm="modification-to-http-network-or-cache-fetch">
     Modify the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch" id="ref-for-concept-http-network-or-cache-fetch①">HTTP network or cache fetch</a> algorithm as follows: 
    <p>Before the step</p>
    <blockquote>
     <p>Modify <var>httpRequest</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list①">header list</a> per HTTP. ...</p>
    </blockquote>
    <p>add the step</p>
    <ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#append-or-modify-a-sec-shared-storage-writable-request-header" id="ref-for-append-or-modify-a-sec-shared-storage-writable-request-header">Append or modify a Sec-Shared-Storage-Writable request header</a> for <var>httpRequest</var>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="9.2.3" id="mod-http-fetch"><span class="secno">9.2.3. </span><span class="content">Modification to <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-http-fetch" id="ref-for-concept-http-fetch②">HTTP fetch</a> Algorithm</span><a class="self-link" href="#mod-http-fetch"></a></h4>
   <div class="algorithm" data-algorithm="modification-to-http-fetch">
     Modify the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-http-fetch" id="ref-for-concept-http-fetch③">HTTP fetch</a> algorithm as follows: 
    <p>Before the step</p>
    <blockquote>
     <p>If <var>internalResponse</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-status" id="ref-for-concept-response-status①">status</a> is a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#redirect-status" id="ref-for-redirect-status">redirect status</a>: ...</p>
    </blockquote>
    <p>add the steps</p>
    <ol>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-destination" id="ref-for-concept-request-destination③">destination</a> is "sharedstorageworklet":</p>
      <ol>
       <li data-md>
        <p>Let <var>dataOriginValue</var> be the result of <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get" id="ref-for-concept-header-list-get">getting</a> `<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-data-origin" id="ref-for-http-headerdef-sec-shared-storage-data-origin①">Sec-Shared-Storage-Data-Origin</a></code>` from <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list②">header list</a>.</p>
       <li data-md>
        <p>If <var>dataOriginValue</var> is not null, then:</p>
        <ol>
         <li data-md>
          <p>Let <var>dataOriginUrl</var> be the result of running a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-parser" id="ref-for-concept-url-parser⑥">URL parser</a> on <var>dataOriginValue</var>.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②⑦">Assert</a> that <var>dataOriginUrl</var> is not failure.</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②⑧">Assert</a> that <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-origin" id="ref-for-concept-request-origin">origin</a> is not "<code>client</code>".</p>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert②⑨">Assert</a> that <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-origin" id="ref-for-concept-request-origin①">origin</a> and <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url②">URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②①">origin</a> are not <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin④">same origin</a>.</p>
         <li data-md>
          <p>Let <var>allowed</var> be true.</p>
         <li data-md>
          <p>If <var>dataOriginUrl</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②②">origin</a> and <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url" id="ref-for-concept-request-url③">URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②③">origin</a> are <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#same-origin" id="ref-for-same-origin⑤">same origin</a>:</p>
          <ol>
           <li data-md>
            <p>Let <var>responseHeaders</var> be <var>internalResponse</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list①">header list</a>.</p>
           <li data-md>
            <p>Let <var>allowed</var> be the result of running <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="ref-for-concept-header-list-get-structured-header">get a structured field value</a> algorithm given `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed④">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>`, "item", and <var>responseHeaders</var> as input.</p>
          </ol>
         <li data-md>
          <p>If <var>allowed</var> is false, then return a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error" id="ref-for-concept-network-error">network error</a>.</p>
        </ol>
      </ol>
     <li data-md>
      <p><a data-link-type="dfn" href="#handle-a-shared-storage-write-response" id="ref-for-handle-a-shared-storage-write-response">Handle a Shared-Storage-Write response</a>, given <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response②">response</a> <var>internalResponse</var> and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request②">request</a> <var>request</var> as input.</p>
    </ol>
   </div>
   <h3 class="heading settled" data-level="9.3" id="headers"><span class="secno">9.3. </span><span class="content">Shared Storage HTTP Headers</span><a class="self-link" href="#headers"></a></h3>
   <h4 class="heading settled" data-level="9.3.1" id="data-origin-request-header"><span class="secno">9.3.1. </span><span class="content">`<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-data-origin" id="ref-for-http-headerdef-sec-shared-storage-data-origin②">Sec-Shared-Storage-Data-Origin</a></code>` Request Header</span><a class="self-link" href="#data-origin-request-header"></a></h4>
   <p>This specification defines a <dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="http-headerdef-sec-shared-storage-data-origin">Sec-Shared-Storage-Data-Origin</dfn> HTTP <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request③">request</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header②">header</a>.</p>
   <p>The `<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-data-origin" id="ref-for-http-headerdef-sec-shared-storage-data-origin③">Sec-Shared-Storage-Data-Origin</a></code>` <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request④">request</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header③">header</a> whose <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-value" id="ref-for-concept-header-value">value</a> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string②⑦">string</a>.</p>
   <p>When the `<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-data-origin" id="ref-for-http-headerdef-sec-shared-storage-data-origin④">Sec-Shared-Storage-Data-Origin</a></code>` is sent during the <a href="#fetch-a-worklet-script-graph-monkey-patch">fetch a worklet/module worker script graph</a> algorithm, its <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-value" id="ref-for-concept-header-value①">value</a> is set to the serialized <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②④">origin</a> that owns the worklet’s shared storage data.</p>
   <h4 class="heading settled" data-level="9.3.2" id="cross-origin-response-header"><span class="secno">9.3.2. </span><span class="content">`<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed⑤">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>` Response Header</span><a class="self-link" href="#cross-origin-response-header"></a></h4>
   <p>This specification defines a <dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="http-headerdef-shared-storage-cross-origin-worklet-allowed">Shared-Storage-Cross-Origin-Worklet-Allowed</dfn> HTTP <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response③">response</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header④">header</a>.</p>
   <p>The `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed⑥">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>` <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response④">response</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header⑤">header</a> is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#specify" id="ref-for-specify">Structured Header</a> whose value must be a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#boolean" id="ref-for-boolean⑦">Boolean</a>.</p>
   <p>When a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response⑤">response</a> has `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-cross-origin-worklet-allowed" id="ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed⑦">Shared-Storage-Cross-Origin-Worklet-Allowed</a></code>` with value true, the worklet script’s server has given permission for a cross-origin site to create a worklet using shared storage data from the worklet script’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②⑤">origin</a>.</p>
   <h4 class="heading settled" data-level="9.3.3" id="writable-request-header"><span class="secno">9.3.3. </span><span class="content">`<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-writable" id="ref-for-http-headerdef-sec-shared-storage-writable">Sec-Shared-Storage-Writable</a></code>` Request Header</span><a class="self-link" href="#writable-request-header"></a></h4>
   <p>This specification defines a <dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="http-headerdef-sec-shared-storage-writable">Sec-Shared-Storage-Writable</dfn> HTTP <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request⑤">request</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header⑥">header</a>.</p>
   <p>The `<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-writable" id="ref-for-http-headerdef-sec-shared-storage-writable①">Sec-Shared-Storage-Writable</a></code>` <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request⑥">request</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header⑦">header</a> is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#specify" id="ref-for-specify①">Structured Header</a> whose value must be a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#boolean" id="ref-for-boolean⑧">Boolean</a>.</p>
   <p>When a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request⑦">request</a> sets `<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-writable" id="ref-for-http-headerdef-sec-shared-storage-writable②">Sec-Shared-Storage-Writable</a></code>` to true its <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response⑥">response</a> will be able to write to <a data-link-type="dfn" href="#shared-storage" id="ref-for-shared-storage④">shared storage</a>.</p>
   <h4 class="heading settled" data-level="9.3.4" id="write-response-header"><span class="secno">9.3.4. </span><span class="content">`<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-write" id="ref-for-http-headerdef-shared-storage-write">Shared-Storage-Write</a></code>` Response Header</span><a class="self-link" href="#write-response-header"></a></h4>
   <p>This specification defines a <dfn class="dfn-paneled" data-dfn-type="http-header" data-export id="http-headerdef-shared-storage-write">Shared-Storage-Write</dfn> HTTP <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response⑦">response</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header⑧">header</a>.</p>
   <p>The `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-write" id="ref-for-http-headerdef-shared-storage-write①">Shared-Storage-Write</a></code>` <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response⑧">response</a> <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header" id="ref-for-concept-header⑨">header</a> is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#specify" id="ref-for-specify②">Structured Header</a> whose value must be a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#list" id="ref-for-list①⓪">List</a>. The following list members are defined. <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token">Tokens</a> and <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string②⑧">Strings</a> holding the same sequence of characters are considered equivalent. <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary">Byte Sequences</a> representing <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode">UTF-8 encoded</a> bytes are also allowed, in order to provide functionality for writing and deleting non-<a data-link-type="dfn" href="https://infra.spec.whatwg.org#ascii-code-point" id="ref-for-ascii-code-point">ASCII</a> <a data-link-type="dfn" href="https://w3c.github.io/i18n-glossary/#dfn-unicode" id="ref-for-dfn-unicode">Unicode</a> keys and values via HTTP headers.</p>
   <p>Unknown list members, including types that are neither strings nor <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary①">Byte Sequences</a>, are skipped, and the rest of the list is processed as if they weren’t present. Members are also skipped if they’re missing required <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param">parameters</a> or those parameters have unexpected types.</p>
   <ul>
    <li data-md>
     <p><code>set</code></p>
     <ul>
      <li data-md>
       <p>Required <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①">parameters</a>:</p>
       <ul>
        <li data-md>
         <p><code>key</code> (<a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token①">Token</a>, <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string②⑨">String</a>, or <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary②">Byte Sequence</a>)</p>
        <li data-md>
         <p><code>value</code> (<a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token②">Token</a>, <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string③⓪">String</a>, or <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary③">Byte Sequence</a>)</p>
       </ul>
      <li data-md>
       <p>Optional <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param②">parameter</a>:</p>
       <ul>
        <li data-md>
         <p><code>ignore_if_present</code> (<a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#boolean" id="ref-for-boolean⑨">Boolean</a>)</p>
       </ul>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param③">parameter</a> value of <code>ignore_if_present</code> is null or false, or if the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param④">parameter</a> value of <code>key</code> does not already exist in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①⑥">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin⑧">origin</a>, <code>set</code> writes the <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry⑦">entry</a> consisting of the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param⑤">parameter</a> values for <code>key</code> and <code>value</code>, as the <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry⑧">entry</a>’s <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key⑧">key</a> and <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry⑨">entry</a>’s <a data-link-type="dfn" href="#entry-value-struct" id="ref-for-entry-value-struct③">value struct</a>’s <a data-link-type="dfn" href="#value-struct-value" id="ref-for-value-struct-value④">value</a> respectively, in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①⑦">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin⑨">origin</a>.</p>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param⑥">parameter</a> value of <code>ignore_if_present</code> is true and the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param⑦">parameter</a> value of <code>key</code> already exists in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①⑧">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①⓪">origin</a>, then <code>set</code> is a no-op.</p>
     </ul>
    <li data-md>
     <p><code>append</code></p>
     <ul>
      <li data-md>
       <p>Required <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param⑧">parameters</a>:</p>
       <ul>
        <li data-md>
         <p><code>key</code> (<a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token③">Token</a>, <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string③①">String</a>, or <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary④">Byte Sequence</a>)</p>
        <li data-md>
         <p><code>value</code> (<a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token④">Token</a>, <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string③②">String</a>, or <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary⑤">Byte Sequence</a>)</p>
       </ul>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param⑨">parameter</a> value of <code>key</code> already exists in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database①⑨">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①①">origin</a>, then <code>append</code> updates the <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key⑨">key</a>’s <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry①⓪">entry</a>’s <a data-link-type="dfn" href="#entry-value-struct" id="ref-for-entry-value-struct④">value struct</a>’s <a data-link-type="dfn" href="#value-struct-value" id="ref-for-value-struct-value⑤">value</a> by appending the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①⓪">parameter</a> value for <code>value</code> to it.</p>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①①">parameter</a> value of <code>key</code> does not already exist in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database②⓪">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①②">origin</a>, <code>append</code> is equivalent to <code>set</code> with <code>ignore_if_present</code> false, i.e. <code>append</code> writes the <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry①①">entry</a> consisting of the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①②">parameter</a> values for <code>key</code> and <code>value</code>, as the <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry①②">entry</a>’s <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key①⓪">key</a> and <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry①③">entry</a>’s <a data-link-type="dfn" href="#entry-value-struct" id="ref-for-entry-value-struct⑤">value struct</a>’s <a data-link-type="dfn" href="#value-struct-value" id="ref-for-value-struct-value⑥">value</a> respectively, in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database②①">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①③">origin</a>.</p>
     </ul>
    <li data-md>
     <p><code>delete</code></p>
     <ul>
      <li data-md>
       <p>Required <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①③">parameter</a>:</p>
       <ul>
        <li data-md>
         <p><code>key</code> (<a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token⑤">Token</a>, <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string③③">String</a>, or <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary⑥">Byte Sequence</a>)</p>
       </ul>
      <li data-md>
       <p><code>delete</code> erases any <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry①④">entry</a> in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database②②">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①④">origin</a> for which the <a data-link-type="dfn" href="#entry-key" id="ref-for-entry-key①①">key</a> is equal to the <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①④">parameter</a> value of <code>key</code>.</p>
     </ul>
    <li data-md>
     <p><code>clear</code></p>
     <ul>
      <li data-md>
       <p><code>clear</code> erases all <a data-link-type="dfn" href="#shared-storage-database-entry" id="ref-for-shared-storage-database-entry①⑤">entries</a> in the <a data-link-type="dfn" href="#shared-storage-database" id="ref-for-shared-storage-database②③">shared storage database</a> for the responding server’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①⑤">origin</a>.</p>
     </ul>
   </ul>
   <p class="note" role="note"><span class="marker">Note:</span> We allow <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary⑦">Byte Sequences</a> in order to accommodate Unicode keys and values. Any <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary⑧">Byte Sequence</a> will be assumed to be <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-encode" id="ref-for-utf-8-encode①">UTF-8 encoded</a> and will fail to parse otherwise.</p>
   <p><span class="todo">Add examples.</span></p>
   <h3 class="heading settled" data-level="9.4" id="ss-fetch-algo"><span class="secno">9.4. </span><span class="content">Shared Storage Fetch-Related Algorithms</span><a class="self-link" href="#ss-fetch-algo"></a></h3>
   <div class="algorithm" data-algorithm="determine whether a request can currently use shared storage">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="determine-whether-a-request-can-currently-use-shared-storage">determine whether a request can currently use shared storage</dfn>, given a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request⑧">request</a> <var>request</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>window</var> to <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-window" id="ref-for-concept-request-window①">window</a>.</p>
     <li data-md>
      <p>If <var>window</var> is not an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①⑥">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③⑥">global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③③">Window</a></code>, return false.</p>
     <li data-md>
      <p>Let <var>allowedInOpaqueOriginContext</var> be true.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#determine-whether-shared-storage-is-allowed-by-context" id="ref-for-determine-whether-shared-storage-is-allowed-by-context⑥">determine whether shared storage is allowed by context</a> given <var>window</var>, <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-current-url" id="ref-for-concept-request-current-url①">current URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②⑥">origin</a>, and <var>allowedInOpaqueOriginContext</var> is false, return false.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-if-user-preference-setting-allows-access-to-shared-storage" id="ref-for-check-if-user-preference-setting-allows-access-to-shared-storage⑥">check if user preference setting allows access to shared storage</a> given <var>window</var> and <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-current-url" id="ref-for-concept-request-current-url②">current URL</a>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url-origin" id="ref-for-concept-url-origin②⑦">origin</a> is false, return false.</p>
    </ol>
    <p class="issue" id="issue-9d2a534a"><a class="self-link" href="#issue-9d2a534a"></a> The <a data-link-type="dfn" href="#determine-whether-a-request-can-currently-use-shared-storage" id="ref-for-determine-whether-a-request-can-currently-use-shared-storage">determine whether a request can currently use shared storage</a> algorithm needs to take into account "opt-in features", as articulated in <a href="https://github.com/w3c/webappsec-permissions-policy/pull/499">https://github.com/w3c/webappsec-permissions-policy/pull/499</a>.</p>
   </div>
   <div class="algorithm" data-algorithm="append or modify a Sec-Shared-Storage-Writable request header">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="append-or-modify-a-sec-shared-storage-writable-request-header">append or modify a Sec-Shared-Storage-Writable request header</dfn>, given a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request⑨">request</a> <var>request</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>If <var>request</var>’s <a data-link-type="dfn" href="#request-shared-storage-writable" id="ref-for-request-shared-storage-writable③">shared storage writable</a> is not true, then return.</p>
      <p class="note" role="note"><span class="marker">Note:</span> On a redirect, it is possible for <var>request</var>’s <a data-link-type="dfn" href="#request-shared-storage-writable" id="ref-for-request-shared-storage-writable④">shared storage writable</a> to be true, but for the redirect not to have permission to use shared storage, making the result of running <a data-link-type="dfn" href="#determine-whether-a-request-can-currently-use-shared-storage" id="ref-for-determine-whether-a-request-can-currently-use-shared-storage①">determine whether a request can currently use shared storage</a> on <var>request</var> false.</p>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#determine-whether-a-request-can-currently-use-shared-storage" id="ref-for-determine-whether-a-request-can-currently-use-shared-storage②">determine whether a request can currently use shared storage</a> on <var>request</var> is false, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-delete" id="ref-for-concept-header-list-delete">delete</a> `<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-writable" id="ref-for-http-headerdef-sec-shared-storage-writable③">Sec-Shared-Storage-Writable</a></code>` from <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list③">header list</a>.</p>
     <li data-md>
      <p>Otherwise, <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-set-structured-header" id="ref-for-concept-header-list-set-structured-header">set a structured field value</a> (`<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-writable" id="ref-for-http-headerdef-sec-shared-storage-writable④">Sec-Shared-Storage-Writable</a></code>`, true) in <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list④">header list</a>.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="handle a Shared-Storage-Write response">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-a-shared-storage-write-response">handle a Shared-Storage-Write response</dfn>, given a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response" id="ref-for-concept-response⑨">response</a> <var>response</var> and a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request" id="ref-for-concept-request①⓪">request</a> <var>request</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>sharedStorageWritable</var> the result of running <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="ref-for-concept-header-list-get-structured-header①">get a structured field value</a> algorithm given `<code><a data-link-type="http-header" href="#http-headerdef-sec-shared-storage-writable" id="ref-for-http-headerdef-sec-shared-storage-writable⑤">Sec-Shared-Storage-Writable</a></code>`, "<code>item</code>", and <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-header-list" id="ref-for-concept-request-header-list⑤">header list</a> as input.</p>
     <li data-md>
      <p>If <var>sharedStorageWritable</var> is null, or <var>sharedStorageWritable</var> is not a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#boolean" id="ref-for-boolean①⓪">Boolean</a>, or the value of <var>sharedStorageWritable</var> is false, return.</p>
     <li data-md>
      <p>Let <var>window</var> to <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-window" id="ref-for-concept-request-window②">window</a>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③⓪">Assert</a>: <var>window</var> is an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object" id="ref-for-environment-settings-object①⑦">environment settings object</a> whose <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③⑦">global object</a> is a <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window" id="ref-for-window③④">Window</a></code>.</p>
     <li data-md>
      <p>Let <var>sharedStorage</var> be <var>window</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③⑧">global object</a>’s <code class="idl"><a data-link-type="idl" href="#dom-window-sharedstorage" id="ref-for-dom-window-sharedstorage③">sharedStorage</a></code>.</p>
     <li data-md>
      <p>If <var>sharedStorage</var> is null, then return.</p>
     <li data-md>
      <p>Let <var>list</var> be <var>response</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-response-header-list" id="ref-for-concept-response-header-list②">header list</a>.</p>
     <li data-md>
      <p>Let <var>operationsToParse</var> be the result of running <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header" id="ref-for-concept-header-list-get-structured-header②">get a structured field value</a> algorithm given `<code><a data-link-type="http-header" href="#http-headerdef-shared-storage-write" id="ref-for-http-headerdef-shared-storage-write②">Shared-Storage-Write</a></code>`, "<code>list</code>", and <var>list</var> as input.</p>
     <li data-md>
      <p>If <var>operationsToParse</var> is null or <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-empty" id="ref-for-list-empty⑤">empty</a>, then return.</p>
     <li data-md>
      <p>Let <var>methods</var> be an empty <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list" id="ref-for-list①①">list</a>.</p>
     <li data-md>
      <p>Let <var>batchWithLock</var> be null.</p>
     <li data-md>
      <p>For each tuple (<var>item</var>, <var>parameters</var>) in <var>operationsToParse</var>, perform the following steps:</p>
      <ol>
       <li data-md>
        <p>If <var>item</var> is an <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#inner-list" id="ref-for-inner-list">Inner List</a>, continue.</p>
       <li data-md>
        <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③①">Assert</a>: <var>item</var> is an <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#item" id="ref-for-item">Bare Item</a>.</p>
       <li data-md>
        <p>Let <var>methodOrOptionsString</var> be the result of running <a data-link-type="dfn" href="#get-the-string-value" id="ref-for-get-the-string-value">get the string value</a> for <var>item</var>.</p>
       <li data-md>
        <p>If <var>methodOrOptionsString</var> is failure, continue.</p>
       <li data-md>
        <p>Switch on <var>methodOrOptionsString</var>:</p>
        <dl class="switch">
         <dt> If <var>methodOrOptionsString</var> is "<code>clear</code>": 
         <dd>
           Perform the following steps: 
          <ol>
           <li data-md>
            <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions①①">SharedStorageModifierMethodOptions</a></code>.</p>
           <li data-md>
            <p>Let <var>withLock</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>with_lock</code>".</p>
           <li data-md>
            <p>If <var>withLock</var> is not null and <var>withLock</var> does not start with U+002D HYPHEN-MINUS (-), <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set⑥">set</a> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock③⓪">withLock</a></code>"] to <var>withLock</var>.</p>
           <li data-md>
            <p>Let <var>method</var> be new <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageclearmethod-sharedstorageclearmethod" id="ref-for-dom-sharedstorageclearmethod-sharedstorageclearmethod①">SharedStorageClearMethod</a></code>(<var>options</var>).</p>
           <li data-md>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑧">an exception was thrown</a>, continue.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑥">Append</a> <var>method</var> to <var>methods</var>.</p>
           <li data-md>
            <p>Continue.</p>
          </ol>
         <dt> If <var>methodOrOptionsString</var> is "<code>delete</code>": 
         <dd>
           Perform the following steps: 
          <ol>
           <li data-md>
            <p>Let <var>key</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value①">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>key</code>".</p>
           <li data-md>
            <p>If <var>key</var> is null, continue.</p>
           <li data-md>
            <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions①②">SharedStorageModifierMethodOptions</a></code>.</p>
           <li data-md>
            <p>Let <var>withLock</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value②">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>with_lock</code>".</p>
           <li data-md>
            <p>If <var>withLock</var> is not null and <var>withLock</var> does not start with U+002D HYPHEN-MINUS (-), <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set⑦">set</a> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock③①">withLock</a></code>"] to <var>withLock</var>.</p>
           <li data-md>
            <p>Let <var>method</var> be new <code class="idl"><a data-link-type="idl" href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod" id="ref-for-dom-sharedstoragedeletemethod-sharedstoragedeletemethod①">SharedStorageDeleteMethod</a></code>(<var>key</var>, <var>options</var>).</p>
           <li data-md>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown⑨">an exception was thrown</a>, continue.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑦">Append</a> <var>method</var> to <var>methods</var>.</p>
           <li data-md>
            <p>Continue.</p>
          </ol>
         <dt> If <var>methodOrOptionsString</var> is "<code>append</code>": 
         <dd>
           Perform the following steps: 
          <ol>
           <li data-md>
            <p>Let <var>key</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value③">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>key</code>".</p>
           <li data-md>
            <p>If <var>key</var> is null, continue.</p>
           <li data-md>
            <p>Let <var>value</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value④">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>value</code>".</p>
           <li data-md>
            <p>If <var>value</var> is null, continue.</p>
           <li data-md>
            <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions①③">SharedStorageModifierMethodOptions</a></code>.</p>
           <li data-md>
            <p>Let <var>withLock</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value⑤">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>with_lock</code>".</p>
           <li data-md>
            <p>If <var>withLock</var> is not null and <var>withLock</var> does not start with U+002D HYPHEN-MINUS (-), <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set⑧">set</a> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock③②">withLock</a></code>"] to <var>withLock</var>.</p>
           <li data-md>
            <p>Let <var>method</var> be new <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageappendmethod-sharedstorageappendmethod" id="ref-for-dom-sharedstorageappendmethod-sharedstorageappendmethod①">SharedStorageAppendMethod</a></code>(<var>key</var>, <var>value</var>, <var>options</var>).</p>
           <li data-md>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①⓪">an exception was thrown</a>, continue.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑧">Append</a> <var>method</var> to <var>methods</var>.</p>
           <li data-md>
            <p>Continue.</p>
          </ol>
         <dt> If <var>methodOrOptionsString</var> is "<code>set</code>": 
         <dd>
           Perform the following steps: 
          <ol>
           <li data-md>
            <p>Let <var>key</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value⑥">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>key</code>".</p>
           <li data-md>
            <p>If <var>key</var> is null, continue.</p>
           <li data-md>
            <p>Let <var>value</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value⑦">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>value</code>".</p>
           <li data-md>
            <p>If <var>value</var> is null, continue.</p>
           <li data-md>
            <p>Let <var>options</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragesetmethodoptions" id="ref-for-dictdef-sharedstoragesetmethodoptions③">SharedStorageSetMethodOptions</a></code>.</p>
           <li data-md>
            <p>If the result of running <a data-link-type="dfn" href="#obtain-a-boolean-parameter-value" id="ref-for-obtain-a-boolean-parameter-value">obtain a boolean parameter value</a> with <var>parameters</var> and "<code>ignore_if_present</code>" is true, <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set⑨">set</a> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragesetmethodoptions-ignoreifpresent" id="ref-for-dom-sharedstoragesetmethodoptions-ignoreifpresent②">ignoreIfPresent</a></code>"] to true.</p>
           <li data-md>
            <p>Let <var>withLock</var> be the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value⑧">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>with_lock</code>".</p>
           <li data-md>
            <p>If <var>withLock</var> is not null and <var>withLock</var> does not start with U+002D HYPHEN-MINUS (-), <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-set" id="ref-for-map-set①⓪">set</a> <var>options</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock③③">withLock</a></code>"] to <var>withLock</var>.</p>
           <li data-md>
            <p>Let <var>method</var> be new <code class="idl"><a data-link-type="idl" href="#dom-sharedstoragesetmethod-sharedstoragesetmethod" id="ref-for-dom-sharedstoragesetmethod-sharedstoragesetmethod①">SharedStorageSetMethod</a></code>(<var>key</var>, <var>value</var>, <var>options</var>).</p>
           <li data-md>
            <p>If <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#an-exception-was-thrown" id="ref-for-an-exception-was-thrown①①">an exception was thrown</a>, continue.</p>
           <li data-md>
            <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#list-append" id="ref-for-list-append⑨">Append</a> <var>method</var> to <var>methods</var>.</p>
           <li data-md>
            <p>Continue.</p>
          </ol>
         <dt> If <var>methodOrOptionsString</var> is "<code>options</code>": 
         <dd>
           Perform the following steps: 
          <ol>
           <li data-md>
            <p>Set <var>batchWithLock</var> to the result of running <a data-link-type="dfn" href="#obtain-a-string-like-parameter-value" id="ref-for-obtain-a-string-like-parameter-value⑨">obtain a string-like parameter value</a> with <var>parameters</var> and "<code>with_lock</code>".</p>
           <li data-md>
            <p>Continue.</p>
          </ol>
         <dt> If <var>methodOrOptionsString</var> is anything else: 
         <dd> Continue. 
        </dl>
      </ol>
     <li data-md>
      <p>Let <var>batchOptions</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-sharedstoragemodifiermethodoptions" id="ref-for-dictdef-sharedstoragemodifiermethodoptions①④">SharedStorageModifierMethodOptions</a></code>.</p>
     <li data-md>
      <p>If <var>batchWithLock</var> is not null and <var>batchWithLock</var> does not start with U+002D HYPHEN-MINUS (-), set <var>batchOptions</var>["<code class="idl"><a data-link-type="idl" href="#dom-sharedstoragemodifiermethodoptions-withlock" id="ref-for-dom-sharedstoragemodifiermethodoptions-withlock③④">withLock</a></code>"] to <var>batchWithLock</var>.</p>
     <li data-md>
      <p>Run <var>sharedStorage</var>.<code class="idl"><a data-link-type="idl" href="#dom-sharedstorage-batchupdate" id="ref-for-dom-sharedstorage-batchupdate①">batchUpdate</a></code>(<var>methods</var>, <var>batchOptions</var>).</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="check if string-like">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="check-if-string-like">check if string-like</dfn> for a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#item" id="ref-for-item①">Bare Item</a> <var>item</var>, do the following: 
    <ol>
     <li data-md>
      <p>If the <var>item</var> is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string③④">String</a>, <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token⑥">Token</a>, or <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary⑨">Byte Sequence</a>, return true.</p>
     <li data-md>
      <p>Otherwise, return false.</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="get the string value">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="get-the-string-value">get the string value</dfn> for a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#item" id="ref-for-item②">Bare Item</a> <var>item</var>, do the following: 
    <ol>
     <li data-md>
      <p>If the result of running <a data-link-type="dfn" href="#check-if-string-like" id="ref-for-check-if-string-like">check if string-like</a> on <var>item</var> is false, return failure.</p>
     <li data-md>
      <p>Switch on the type of <var>item</var>:</p>
      <dl class="switch">
       <dt> If <var>item</var> is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token⑦">Token</a>: 
       <dt> If <var>item</var> is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#string" id="ref-for-string③⑤">String</a>: 
       <dd>
         Perform the following steps: 
        <ol>
         <li data-md>
          <p><a data-link-type="dfn" href="https://infra.spec.whatwg.org/#assert" id="ref-for-assert③②">Assert</a>: <var>item</var> is an <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ascii-string" id="ref-for-ascii-string">ASCII string</a>.</p>
         <li data-md>
          <p>Return <var>item</var>.</p>
        </ol>
       <dt> If <var>item</var> is a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#binary" id="ref-for-binary①⓪">Byte Sequence</a>: 
       <dd>
         Perform the following steps: 
        <ol>
         <li data-md>
          <p>Let <var>fromUTF8</var> be the result of running <a data-link-type="dfn" href="https://encoding.spec.whatwg.org/#utf-8-decode" id="ref-for-utf-8-decode①">UTF-8 decode</a> on <var>item</var>.</p>
         <li data-md>
          <p>If <var>fromUTF8</var> is an error, return null.</p>
         <li data-md>
          <p>Return <var>fromUTF8</var>.</p>
        </ol>
      </dl>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="obtain a string-like parameter value">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-a-string-like-parameter-value">obtain a string-like parameter value</dfn>, given a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①⑤">parameters map</a> <var>parameters</var> and a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token⑧">Token</a> <var>paramKey</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>If <var>parameters</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑧">contain</a> <var>paramKey</var>, return null.</p>
     <li data-md>
      <p>If the result of <a data-link-type="dfn" href="#check-if-string-like" id="ref-for-check-if-string-like①">check if string-like</a> for <var>parameters</var>[<var>paramKey</var>] is false, return null.</p>
     <li data-md>
      <p>Return the result of running <a data-link-type="dfn" href="#get-the-string-value" id="ref-for-get-the-string-value①">get the string value</a> for <var>parameters</var>[<var>paramKey</var>].</p>
    </ol>
   </div>
   <div class="algorithm" data-algorithm="obtain a boolean parameter value">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="obtain-a-boolean-parameter-value">obtain a boolean parameter value</dfn>, given a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#param" id="ref-for-param①⑥">parameters map</a> <var>parameters</var> and a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#token" id="ref-for-token⑨">Token</a> <var>paramKey</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>If <var>parameters</var> does not <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#map-exists" id="ref-for-map-exists②⑨">contain</a> <var>paramKey</var>, return null.</p>
     <li data-md>
      <p>If <var>parameters</var>[<var>paramKey</var>] is not a <a data-link-type="dfn" href="https://httpwg.org/specs/rfc8941.html#boolean" id="ref-for-boolean①①">Boolean</a>, return null.</p>
     <li data-md>
      <p>Return <var>parameters</var>[<var>paramKey</var>].</p>
    </ol>
   </div>
   <h2 class="heading settled" data-level="10" id="web-locks-integration"><span class="secno">10. </span><span class="content">Web Locks Integration</span><a class="self-link" href="#web-locks-integration"></a></h2>
   <h3 class="heading settled" data-level="10.1" id="user-agent-associated-state"><span class="secno">10.1. </span><span class="content">User Agent Associated State</span><a class="self-link" href="#user-agent-associated-state"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="shared-storage-lock-managers-map">shared storage lock managers map</dfn> is a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#ordered-map" id="ref-for-ordered-map⑧">map</a> of <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①⑥">origins</a> to <a data-link-type="dfn" href="https://w3c.github.io/web-locks/#lock-manager" id="ref-for-lock-manager">lock managers</a>. It is initially empty.</p>
   <p>A <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#user-agent" id="ref-for-user-agent②②">user agent</a> has an associated <a data-link-type="dfn" href="#shared-storage-lock-managers-map" id="ref-for-shared-storage-lock-managers-map">shared storage lock managers map</a>.</p>
   <p class="note" role="note"><span class="marker">Note:</span> Similar to its data partitioning, the shared storage has its own lock management scope, independent of the Storage Buckets API. These web locks will not interact with web locks created from Window or Worker via the existing, legacy Web Locks API.</p>
   <h3 class="heading settled" data-level="10.2" id="shared-storage-worklet-navigator-interface"><span class="secno">10.2. </span><span class="content"><code class="idl"><a data-link-type="idl" href="#sharedstorageworkletnavigator" id="ref-for-sharedstorageworkletnavigator②">SharedStorageWorkletNavigator</a></code> interface</span><a class="self-link" href="#shared-storage-worklet-navigator-interface"></a></h3>
<pre class="idl highlight def">[
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①⑥"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->
] <c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-export id="sharedstorageworkletnavigator"><code><c- g>SharedStorageWorkletNavigator</c-></code></dfn> {};
</pre>
   <h3 class="heading settled" data-level="10.3" id="web-locks-api-monkey-patches"><span class="secno">10.3. </span><span class="content">Web Locks IDLs Monkey Patches</span><a class="self-link" href="#web-locks-api-monkey-patches"></a></h3>
   <p>Include the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#navigatorlocks" id="ref-for-navigatorlocks">NavigatorLocks</a></code> mixin in <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletnavigator" id="ref-for-sharedstorageworkletnavigator③">SharedStorageWorkletNavigator</a></code> (i.e., let <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletnavigator" id="ref-for-sharedstorageworkletnavigator④">SharedStorageWorkletNavigator</a></code> contain a <code class="idl"><a data-link-type="idl" href="#lockmanager" id="ref-for-lockmanager">LockManager</a></code> instance):</p>
<pre class="idl highlight def"><a data-link-type="idl-name" href="#sharedstorageworkletnavigator" id="ref-for-sharedstorageworkletnavigator⑤"><c- n>SharedStorageWorkletNavigator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://w3c.github.io/web-locks/#navigatorlocks" id="ref-for-navigatorlocks①"><c- n>NavigatorLocks</c-></a>;
</pre>
   <p>The <code class="idl"><a data-link-type="idl" href="#lockmanager" id="ref-for-lockmanager①">LockManager</a></code> and <code class="idl"><a data-link-type="idl" href="#lock" id="ref-for-lock">Lock</a></code> are additionally exposed to SharedStorageWorklet:</p>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext②"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①⑦"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-noexport id="lockmanager"><code><c- g>LockManager</c-></code></dfn> {};
</pre>
<pre class="idl highlight def">[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext" id="ref-for-SecureContext③"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed" id="ref-for-Exposed①⑧"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <dfn class="dfn-paneled idl-code" data-dfn-type="interface" data-noexport id="lock"><code><c- g>Lock</c-></code></dfn> {};
</pre>
   <h3 class="heading settled" data-level="10.4" id="monkey-patch-for-lock-manager-description"><span class="secno">10.4. </span><span class="content">Monkey Patch for lock manager’s description</span><a class="self-link" href="#monkey-patch-for-lock-manager-description"></a></h3>
   <p>Add the following sentence at the end of the paragraph that defines <a data-link-type="dfn" href="https://w3c.github.io/web-locks/#lock-manager" id="ref-for-lock-manager①">lock manager</a>: "Additionally, each user agent includes one <a data-link-type="dfn" href="#shared-storage-lock-managers-map" id="ref-for-shared-storage-lock-managers-map①">shared storage lock managers map</a> for Web Locks API’s integration with the Shared Storage API."</p>
   <h3 class="heading settled" data-level="10.5" id="monkey-patch-for-the-obtain-a-lock-manager-algorithm"><span class="secno">10.5. </span><span class="content">Monkey Patch for the "obtain a lock manager" algorithm</span><a class="self-link" href="#monkey-patch-for-the-obtain-a-lock-manager-algorithm"></a></h3>
   <p>The <a data-link-type="dfn" href="https://w3c.github.io/web-locks/#obtain-a-lock-manager" id="ref-for-obtain-a-lock-manager">obtain a lock manager</a> algorithm should be prepended with the following steps:</p>
   <div class="algorithm" data-algorithm="monkey-patch-obtain-a-lock-manager">
    <ol>
     <li data-md>
      <p>If <a data-link-type="dfn" href="https://tc39.es/ecma262/#current-realm" id="ref-for-current-realm②⓪">current realm</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global" id="ref-for-concept-realm-global③⑨">global object</a> is a <code class="idl"><a data-link-type="idl" href="#sharedstorageworkletglobalscope" id="ref-for-sharedstorageworkletglobalscope④⑤">SharedStorageWorkletGlobalScope</a></code>:</p>
      <ol>
       <li data-md>
        <p>Let <var>workletDataOrigin</var> be <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin" id="ref-for-concept-settings-object-origin④⓪">origin</a>.</p>
       <li data-md>
        <p>Return <a data-link-type="dfn" href="#shared-storage-lock-managers-map" id="ref-for-shared-storage-lock-managers-map②">shared storage lock managers map</a>[<var>workletDataOrigin</var>].</p>
      </ol>
    </ol>
   </div>
   <h3 class="heading settled" data-level="10.6" id="handle-callback-within-a-shared-storage-lock-algorithm"><span class="secno">10.6. </span><span class="content">"Handle callback within a shared storage lock" algorithm</span><a class="self-link" href="#handle-callback-within-a-shared-storage-lock-algorithm"></a></h3>
   <div class="algorithm" data-algorithm="handle-callback-within-a-shared-storage-lock-algorithm">
     To <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="handle-callback-within-a-shared-storage-lock">handle callback within a shared storage lock</dfn> given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#concept-origin" id="ref-for-concept-origin①⑦">origin</a> <var>workletDataOrigin</var>, a <a data-link-type="dfn" href="https://infra.spec.whatwg.org/#string" id="ref-for-string③⑥">string</a> <var>name</var>, a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task" id="ref-for-concept-task⑤">task</a> <var>callback</var>, perform the following steps: 
    <ol>
     <li data-md>
      <p>Let <var>environment</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#this" id="ref-for-this④⑥">this</a>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object" id="ref-for-relevant-settings-object②⓪">relevant settings object</a>.</p>
     <li data-md>
      <p>Let <var>lockManager</var> be <a data-link-type="dfn" href="#shared-storage-lock-managers-map" id="ref-for-shared-storage-lock-managers-map③">shared storage lock managers map</a>[<var>workletDataOrigin</var>].</p>
     <li data-md>
      <p>Let <var>promise</var> be <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#a-new-promise" id="ref-for-a-new-promise">a new promise</a>.</p>
     <li data-md>
      <p>Let <var>defaultOptions</var> be a new <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dictdef-lockoptions" id="ref-for-dictdef-lockoptions">LockOptions</a></code>.</p>
     <li data-md>
      <p><a data-link-type="dfn" href="https://w3c.github.io/web-locks/#request-a-lock" id="ref-for-request-a-lock">Request a lock</a> with <var>promise</var>, the current <a data-link-type="dfn" href="https://tc39.github.io/ecma262/#agent" id="ref-for-agent">agent</a>, <var>environment</var>’s <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-id" id="ref-for-concept-environment-id">id</a>, <var>lockManager</var>, <var>callback</var>, <var>name</var>, <var>defaultOptions</var>["<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dom-lockoptions-mode" id="ref-for-dom-lockoptions-mode">mode</a></code>"], <var>defaultOptions</var>["<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dom-lockoptions-ifavailable" id="ref-for-dom-lockoptions-ifavailable">ifAvailable</a></code>"], <var>defaultOptions</var>["<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dom-lockoptions-steal" id="ref-for-dom-lockoptions-steal">steal</a></code>"], <var>defaultOptions</var>["<code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dom-lockoptions-signal" id="ref-for-dom-lockoptions-signal">signal</a></code>"].</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> With the default <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/web-locks/#dictdef-lockoptions" id="ref-for-dictdef-lockoptions①">LockOptions</a></code>, <var>callback</var> will eventually be called when the lock is granted (i.e., the lock request won’t fail).</p>
   </div>
   <h2 class="heading settled" data-level="11" id="permission"><span class="secno">11. </span><span class="content">Permissions Policy Integration</span><a class="self-link" href="#permission"></a></h2>
   <p>This specification defines a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature①">policy-controlled feature</a> identified by the string "<dfn class="dfn-paneled" data-dfn-for="PermissionsPolicy" data-dfn-type="dfn" data-noexport id="permissionspolicy-shared-storage">shared-storage</dfn>," along with a second <a data-link-type="dfn" href="https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature" id="ref-for-policy-controlled-feature②">policy-controlled feature</a> identified by "<dfn class="dfn-paneled" data-dfn-for="PermissionsPolicy" data-dfn-type="dfn" data-noexport id="permissionspolicy-shared-storage-select-url">shared-storage-select-url</dfn>".</p>
   <p>"<a data-link-type="dfn" href="#permissionspolicy-shared-storage" id="ref-for-permissionspolicy-shared-storage①">shared-storage</a>" gates access to Shared Storage in general, whereas "<a data-link-type="dfn" href="#permissionspolicy-shared-storage-select-url" id="ref-for-permissionspolicy-shared-storage-select-url①">shared-storage-select-url</a>" adds an extra permission layer to <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageworklet-selecturl" id="ref-for-dom-sharedstorageworklet-selecturl②⓪">selectURL()</a></code>. For each of these, the default allowlist is *.</p>
   <h2 class="heading settled" data-level="12" id="clear"><span class="secno">12. </span><span class="content">Clear Site Data Integration</span><a class="self-link" href="#clear"></a></h2>
    <span class="todo">Add details for Clear Site Data integration.</span> 
   <h2 class="heading settled" data-level="13" id="privacy"><span class="secno">13. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy"></a></h2>
   <p>The Shared Storage API attempts to provide the ability to use cross-site data for a range of use cases in a way that better protects user privacy than the use of third-party cookies. Shared Storage’s main privacy safeguard is that read access of the data stored in its storage may only occur within an embedder’s <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②⑦">SharedStorageWorklet</a></code>. Well-defined limits restrict output of data from the <code class="idl"><a data-link-type="idl" href="#sharedstorageworklet" id="ref-for-sharedstorageworklet②⑧">SharedStorageWorklet</a></code> to a minimum.</p>
   <p>In particular, an embedder can select a <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url①⑨">URL</a> from a short list of <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url②⓪">URL</a>s based on data in their shared storage and then display the result in a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element⑦">fenced frame</a>. The embedder will not be able to know which <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-url" id="ref-for-concept-url②①">URL</a> was chosen except through specific mechanisms that will be better-mitigated in the longer term. Currently, a few bits of entropy can leak each time that the user clicks on the <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element⑧">fenced frame</a> to initiate a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top" id="ref-for-nav-top①④">top-level traversable</a> <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate" id="ref-for-navigate③">navigation</a> and/or the <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#the-fencedframe-element" id="ref-for-the-fencedframe-element⑨">fenced frame</a> calls the <code class="idl"><a data-link-type="idl" href="https://wicg.github.io/fenced-frame/#dom-fence-reportevent" id="ref-for-dom-fence-reportevent①">reportEvent()</a></code> API.</p>
   <p>An embedder is also able to send aggregatable reports via the <a data-link-type="dfn" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#" id="ref-for-something②">Private Aggregation</a> API, which adds noise in order to achieve differential privacy, uses a time delay to send reports, imposes limits on the number of reports sent, and processes the reports into aggregate data so that individual privacy is protected.</p>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="w3c-conformance"><span class="content">Conformance</span><a class="self-link" href="#w3c-conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="w3c-conventions"><span class="content">Document conventions</span><a class="self-link" href="#w3c-conventions"></a></h3>
   <p>Conformance requirements are expressed
    with a combination of descriptive assertions
    and RFC 2119 terminology.
    The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
    in the normative parts of this document
    are to be interpreted as described in RFC 2119.
    However, for readability,
    these words do not appear in all uppercase letters in this specification. </p>
   <p>All of the text of this specification is normative
    except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text
    with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="w3c-example">
    <a class="self-link" href="#w3c-example"></a> 
    <p>This is an example of an informative example. </p>
   </div>
   <p>Informative notes begin with the word “Note”
    and are set apart from the normative text
    with <code>class="note"</code>,
    like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
  </div>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#sharedstorageworklet-addmodule-initiated">addModule initiated</a><span>, in § 2</span>
   <li><a href="#sharedstorageworkletglobalscope-addmodule-success">addModule success</a><span>, in § 2.3.1</span>
   <li><a href="#dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin">aggregationCoordinatorOrigin</a><span>, in § 6</span>
   <li><a href="#dom-sharedstorage-append">append(key, value)</a><span>, in § 6.4</span>
   <li><a href="#dom-sharedstorage-append">append(key, value, options)</a><span>, in § 6.4</span>
   <li><a href="#append-or-modify-a-sec-shared-storage-writable-request-header">append or modify a Sec-Shared-Storage-Writable request header</a><span>, in § 9.4</span>
   <li><a href="#sharedstorageiterator-asynchronous-iterator-initialization-steps">asynchronous iterator initialization steps</a><span>, in § 6.6</span>
   <li><a href="#dom-sharedstorage-batchupdate">batchUpdate(methods)</a><span>, in § 6.3</span>
   <li><a href="#dom-sharedstorage-batchupdate">batchUpdate(methods, options)</a><span>, in § 6.3</span>
   <li><a href="#bit-debit">bit debit</a><span>, in § 2.5.1</span>
   <li><a href="#bit-debit-bits">bits</a><span>, in § 2.5.1</span>
   <li><a href="#saved-query-data-callbacks">callbacks</a><span>, in § 2.5.2</span>
   <li><a href="#charge-shared-storage-navigation-budget">charge shared storage navigation budget</a><span>, in § 2.5.1</span>
   <li><a href="#charge-shared-storage-top-level-traversable-budgets">charge shared storage top-level traversable budgets</a><span>, in § 2.5.2.4</span>
   <li><a href="#check-for-script-and-context-origin-match">check for script and context origin match</a><span>, in § 2.2.6</span>
   <li><a href="#check-for-trusted-origin-match">check for trusted origin match</a><span>, in § 2.2.6</span>
   <li><a href="#check-for-trusted-origin-match-on-a-string">check for trusted origin match on a string</a><span>, in § 2.2.6</span>
   <li><a href="#check-if-addmodule-is-allowed-and-update-state">check if addModule is allowed and update state</a><span>, in § 2</span>
   <li><a href="#check-if-string-like">check if string-like</a><span>, in § 9.4</span>
   <li><a href="#check-if-user-preference-setting-allows-access-to-shared-storage">check if user preference setting allows access to shared storage</a><span>, in § 2</span>
   <li><a href="#check-whether-a-bit-debit-is-expired">check whether a bit debit is expired</a><span>, in § 2.5.1</span>
   <li><a href="#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished">check whether addModule is finished</a><span>, in § 2.3.2</span>
   <li><a href="#dom-sharedstorage-clear">clear()</a><span>, in § 6.4</span>
   <li><a href="#shared-storage-database-clear-all-entries-in-the-database">clear all entries in the database</a><span>, in § 3.3</span>
   <li><a href="#dom-sharedstorage-clear">clear(options)</a><span>, in § 6.4</span>
   <li><a href="#dom-sharedstorageclearmethod-sharedstorageclearmethod">constructor()</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod">constructor(key)</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod">constructor(key, options)</a><span>, in § 5</span>
   <li>
    constructor(key, value)
    <ul>
     <li><a href="#dom-sharedstorageappendmethod-sharedstorageappendmethod">constructor for SharedStorageAppendMethod</a><span>, in § 5</span>
     <li><a href="#dom-sharedstoragesetmethod-sharedstoragesetmethod">constructor for SharedStorageSetMethod</a><span>, in § 5</span>
    </ul>
   <li>
    constructor(key, value, options)
    <ul>
     <li><a href="#dom-sharedstorageappendmethod-sharedstorageappendmethod">constructor for SharedStorageAppendMethod</a><span>, in § 5</span>
     <li><a href="#dom-sharedstoragesetmethod-sharedstoragesetmethod">constructor for SharedStorageSetMethod</a><span>, in § 5</span>
    </ul>
   <li><a href="#dom-sharedstorageclearmethod-sharedstorageclearmethod">constructor(options)</a><span>, in § 5</span>
   <li><a href="#dom-sharedstorageprivateaggregationconfig-contextid">contextId</a><span>, in § 6</span>
   <li><a href="#shared-storage-database-count-entries-in-the-database">count entries in the database</a><span>, in § 3.3</span>
   <li><a href="#create-a-shared-storage-bucket">create a shared storage bucket</a><span>, in § 3.1</span>
   <li><a href="#create-a-shared-storage-shelf">create a shared storage shelf</a><span>, in § 3.1</span>
   <li><a href="#dom-sharedstorage-createworklet">createWorklet(moduleURL)</a><span>, in § 6.2</span>
   <li><a href="#dom-sharedstorage-createworklet">createWorklet(moduleURL, options)</a><span>, in § 6.2</span>
   <li><a href="#dom-sharedstoragerunoperationmethodoptions-data">data</a><span>, in § 6</span>
   <li>
    data origin
    <ul>
     <li><a href="#sharedstorageworklet-data-origin">dfn for SharedStorageWorklet</a><span>, in § 2</span>
     <li><a href="#saved-query-map-data-origin">dfn for saved query map</a><span>, in § 2.5.2</span>
    </ul>
   <li><a href="#dom-sharedstorageworkletoptions-dataorigin">dataOrigin</a><span>, in § 6</span>
   <li><a href="#sharedstorage-data-partition-origin">data partition origin</a><span>, in § 2.2.4</span>
   <li><a href="#default-entry-lifetime">default entry lifetime</a><span>, in § 3.2</span>
   <li><a href="#default-selecturl-index">default selectURL index</a><span>, in § 2.5</span>
   <li><a href="#shared-storage-database-delete-an-entry-from-the-database">delete an entry from the database</a><span>, in § 3.3</span>
   <li><a href="#dom-sharedstorage-delete">delete(key)</a><span>, in § 6.4</span>
   <li><a href="#dom-sharedstorage-delete">delete(key, options)</a><span>, in § 6.4</span>
   <li><a href="#determine-remaining-navigation-budget">determine remaining navigation budget</a><span>, in § 2.5.1</span>
   <li><a href="#shared-storage-database-determine-whether-an-entry-is-expired">determine whether an entry is expired</a><span>, in § 3.3</span>
   <li><a href="#determine-whether-a-request-can-currently-use-shared-storage">determine whether a request can currently use shared storage</a><span>, in § 9.4</span>
   <li><a href="#determine-whether-shared-storage-is-allowed-by-context">determine whether shared storage is allowed by context</a><span>, in § 2</span>
   <li><a href="#deterministic-operation-timeout-duration">deterministic operation timeout duration</a><span>, in § 2.1</span>
   <li><a href="#shared-storage-database-entry">entry</a><span>, in § 3.2</span>
   <li><a href="#sharedstorageiterator-error">error</a><span>, in § 6.6</span>
   <li><a href="#bit-debit-expired">expired</a><span>, in § 2.5.1</span>
   <li><a href="#dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes">filteringIdMaxBytes</a><span>, in § 6</span>
   <li><a href="#finish-a-batch-update">finish a batch update</a><span>, in § 6.3</span>
   <li><a href="#dom-sharedstorage-get">get(key)</a><span>, in § 6.5</span>
   <li><a href="#get-the-canonical-url-string-if-valid">get the canonical URL string if valid</a><span>, in § 2.4</span>
   <li><a href="#get-the-default-selecturl-index">get the default selectURL index</a><span>, in § 2.5</span>
   <li><a href="#get-the-index-for-a-saved-query">get the index for a saved query</a><span>, in § 2.5.2.3</span>
   <li><a href="#sharedstorageiterator-get-the-next-iteration-result">get the next iteration result</a><span>, in § 6.6</span>
   <li><a href="#get-the-select-url-result-index">get the select-url result index</a><span>, in § 2.1</span>
   <li><a href="#get-the-string-value">get the string value</a><span>, in § 9.4</span>
   <li><a href="#handle-a-shared-storage-write-response">handle a Shared-Storage-Write response</a><span>, in § 9.4</span>
   <li><a href="#handle-callback-within-a-shared-storage-lock">handle callback within a shared storage lock</a><span>, in § 10.6</span>
   <li><a href="#handle-the-result-of-selecting-an-index">handle the result of selecting an index</a><span>, in § 2.1</span>
   <li><a href="#sharedstorageworklet-has-cross-origin-data-origin">has cross-origin data origin</a><span>, in § 2</span>
   <li><a href="#htmlsharedstoragewritableelementutils">HTMLSharedStorageWritableElementUtils</a><span>, in § 8.1</span>
   <li><a href="#sharedstoragesetmethod-ignore-if-present">ignore if present</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragesetmethodoptions-ignoreifpresent">ignoreIfPresent</a><span>, in § 5</span>
   <li><a href="#saved-query-data-index">index</a><span>, in § 2.5.2</span>
   <li><a href="#dom-sharedstorageworkletglobalscope-interestgroups">interestGroups()</a><span>, in § 2.3.2</span>
   <li><a href="#dom-sharedstoragerunoperationmethodoptions-keepalive">keepAlive</a><span>, in § 6</span>
   <li>
    key
    <ul>
     <li><a href="#sharedstorageappendmethod-key">dfn for SharedStorageAppendMethod</a><span>, in § 5</span>
     <li><a href="#sharedstoragedeletemethod-key">dfn for SharedStorageDeleteMethod</a><span>, in § 5</span>
     <li><a href="#sharedstoragesetmethod-key">dfn for SharedStorageSetMethod</a><span>, in § 5</span>
     <li><a href="#entry-key">dfn for entry</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#value-struct-last-updated">last updated</a><span>, in § 3.2</span>
   <li><a href="#dom-sharedstorage-length">length()</a><span>, in § 6.5</span>
   <li><a href="#lock">Lock</a><span>, in § 10.3</span>
   <li><a href="#lockmanager">LockManager</a><span>, in § 10.3</span>
   <li><a href="#dom-sharedstorageprivateaggregationconfig-maxcontributions">maxContributions</a><span>, in § 6</span>
   <li>
    maximum length
    <ul>
     <li><a href="#key-maximum-length">dfn for key</a><span>, in § 3.2</span>
     <li><a href="#value-maximum-length">dfn for value</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#navigation-budget-epoch">navigation budget epoch</a><span>, in § 2.5.1</span>
   <li><a href="#navigation-budget-lifetime">navigation budget lifetime</a><span>, in § 2.5.1</span>
   <li><a href="#navigation-entropy-allowance">navigation entropy allowance</a><span>, in § 2.5.1</span>
   <li><a href="#navigation-entropy-ledger">navigation entropy ledger</a><span>, in § 2.5.1</span>
   <li><a href="#dom-sharedstorageworkletglobalscope-navigator">navigator</a><span>, in § 2.3.2</span>
   <li><a href="#sharedstorageworkletglobalscope-navigator-instance">navigator instance</a><span>, in § 2.3.1</span>
   <li><a href="#obtain-a-boolean-parameter-value">obtain a boolean parameter value</a><span>, in § 9.4</span>
   <li><a href="#obtain-a-callback-to-process-the-saved-index-result">obtain a callback to process the saved index result</a><span>, in § 2.5.2.3</span>
   <li><a href="#obtain-a-shared-storage-bottle-map">obtain a shared storage bottle map</a><span>, in § 3.1</span>
   <li><a href="#obtain-a-shared-storage-shelf">obtain a shared storage shelf</a><span>, in § 3.1</span>
   <li><a href="#obtain-a-string-like-parameter-value">obtain a string-like parameter value</a><span>, in § 9.4</span>
   <li><a href="#obtain-the-aggregation-coordinator">obtain the aggregation coordinator</a><span>, in § 2.1</span>
   <li><a href="#obtain-the-pre-specified-report-parameters">obtain the pre-specified report parameters</a><span>, in § 2.1</span>
   <li><a href="#sharedstorageworkletglobalscope-operation-map">operation map</a><span>, in § 2.3.1</span>
   <li><a href="#saved-query-map-operation-name">operation name</a><span>, in § 2.5.2</span>
   <li><a href="#sharedstorageworkletglobalscope-outside-settings">outside settings</a><span>, in § 2.3.1</span>
   <li><a href="#shared-storage-page-budget-overall-budget">overall budget</a><span>, in § 2.5.2</span>
   <li><a href="#overall-page-entropy-allowance">overall page entropy allowance</a><span>, in § 2.5.2</span>
   <li><a href="#traversable-navigable-page-budget">page budget</a><span>, in § 2.5.2.1</span>
   <li><a href="#sharedstorageiterator-pending-entries">pending entries</a><span>, in § 6.6</span>
   <li><a href="#pending-shared-storage-budget-debit">pending shared storage budget debit</a><span>, in § 2.5.1</span>
   <li><a href="#dom-sharedstorageworkletglobalscope-privateaggregation">privateAggregation</a><span>, in § 2.3.1</span>
   <li><a href="#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig">privateAggregationConfig</a><span>, in § 6</span>
   <li><a href="#purge-expired-bit-debits-from-all-navigation-entropy-ledgers">purge expired bit debits from all navigation entropy ledgers</a><span>, in § 2.5.1</span>
   <li><a href="#shared-storage-database-purge-expired-entries-from-the-database">purge expired entries from the database</a><span>, in § 3.3</span>
   <li><a href="#saved-query-map-query-name">query name</a><span>, in § 2.5.2</span>
   <li><a href="#dom-sharedstorageworkletglobalscope-register">register(name, operationCtor)</a><span>, in § 2.3.2</span>
   <li><a href="#register-reporting-metadata">register reporting metadata</a><span>, in § 2.4</span>
   <li><a href="#dom-sharedstorage-remainingbudget">remainingBudget()</a><span>, in § 6.5</span>
   <li><a href="#site-remaining-navigation-budget">remaining navigation budget</a><span>, in § 2.5.1</span>
   <li><a href="#dom-sharedstorageurlwithmetadata-reportingmetadata">reportingMetadata</a><span>, in § 2.4</span>
   <li><a href="#dom-sharedstoragerunoperationmethodoptions-resolvetoconfig">resolveToConfig</a><span>, in § 6</span>
   <li><a href="#shared-storage-database-retrieve-all-entries-from-the-database">retrieve all entries from the database</a><span>, in § 3.3</span>
   <li><a href="#shared-storage-database-retrieve-an-entry-from-the-database">retrieve an entry from the database</a><span>, in § 3.3</span>
   <li><a href="#callbackdef-runfunctionforsharedstorageselecturloperation">RunFunctionForSharedStorageSelectURLOperation</a><span>, in § 2.3.1</span>
   <li>
    run(name)
    <ul>
     <li><a href="#dom-sharedstorage-run">method for SharedStorage</a><span>, in § 6.1</span>
     <li><a href="#dom-sharedstorageworklet-run">method for SharedStorageWorklet</a><span>, in § 2.1</span>
    </ul>
   <li>
    run(name, options)
    <ul>
     <li><a href="#dom-sharedstorage-run">method for SharedStorage</a><span>, in § 6.1</span>
     <li><a href="#dom-sharedstorageworklet-run">method for SharedStorageWorklet</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#dom-sharedstoragerunoperationmethodoptions-savedquery">savedQuery</a><span>, in § 6</span>
   <li><a href="#shared-storage-page-budget-saved-query-data">saved query data</a><span>, in § 2.5.2</span>
   <li><a href="#shared-storage-page-budget-saved-query-map">saved query map</a><span>, in § 2.5.2</span>
   <li><a href="#http-headerdef-sec-shared-storage-data-origin">Sec-Shared-Storage-Data-Origin</a><span>, in § 9.3.1</span>
   <li><a href="#http-headerdef-sec-shared-storage-writable">Sec-Shared-Storage-Writable</a><span>, in § 9.3.3</span>
   <li>
    selectURL(name, urls)
    <ul>
     <li><a href="#dom-sharedstorage-selecturl">method for SharedStorage</a><span>, in § 6.1</span>
     <li><a href="#dom-sharedstorageworklet-selecturl">method for SharedStorageWorklet</a><span>, in § 2.1</span>
    </ul>
   <li>
    selectURL(name, urls, options)
    <ul>
     <li><a href="#dom-sharedstorage-selecturl">method for SharedStorage</a><span>, in § 6.1</span>
     <li><a href="#dom-sharedstorageworklet-selecturl">method for SharedStorageWorklet</a><span>, in § 2.1</span>
    </ul>
   <li><a href="#dom-sharedstorage-set">set(key, value)</a><span>, in § 6.4</span>
   <li><a href="#dom-sharedstorage-set">set(key, value, options)</a><span>, in § 6.4</span>
   <li><a href="#set-up-the-private-aggregation-scopes">set up the Private Aggregation scopes</a><span>, in § 2.1</span>
   <li><a href="#shared-storage">shared storage</a><span>, in § 3.1</span>
   <li><a href="#permissionspolicy-shared-storage">shared-storage</a><span>, in § 11</span>
   <li><a href="#sharedstorage">SharedStorage</a><span>, in § 6</span>
   <li>
    sharedStorage
    <ul>
     <li><a href="#dom-sharedstorageworkletglobalscope-sharedstorage">attribute for SharedStorageWorkletGlobalScope</a><span>, in § 2.3.2</span>
     <li><a href="#dom-window-sharedstorage">attribute for Window</a><span>, in § 4</span>
    </ul>
   <li><a href="#sharedstorageappendmethod">SharedStorageAppendMethod</a><span>, in § 5</span>
   <li><a href="#dom-sharedstorageappendmethod-sharedstorageappendmethod">SharedStorageAppendMethod(key, value)</a><span>, in § 5</span>
   <li><a href="#dom-sharedstorageappendmethod-sharedstorageappendmethod">SharedStorageAppendMethod(key, value, options)</a><span>, in § 5</span>
   <li><a href="#shared-storage-bucket">shared storage bucket</a><span>, in § 3.1</span>
   <li><a href="#sharedstorageclearmethod">SharedStorageClearMethod</a><span>, in § 5</span>
   <li><a href="#dom-sharedstorageclearmethod-sharedstorageclearmethod">SharedStorageClearMethod()</a><span>, in § 5</span>
   <li><a href="#dom-sharedstorageclearmethod-sharedstorageclearmethod">SharedStorageClearMethod(options)</a><span>, in § 5</span>
   <li><a href="#http-headerdef-shared-storage-cross-origin-worklet-allowed">Shared-Storage-Cross-Origin-Worklet-Allowed</a><span>, in § 9.3.2</span>
   <li><a href="#shared-storage-database">shared storage database</a><span>, in § 3.2</span>
   <li><a href="#shared-storage-database-shared-storage-database-queue">shared storage database queue</a><span>, in § 3.2</span>
   <li><a href="#sharedstoragedeletemethod">SharedStorageDeleteMethod</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod">SharedStorageDeleteMethod(key)</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod">SharedStorageDeleteMethod(key, options)</a><span>, in § 5</span>
   <li><a href="#window-sharedstorage-getter">sharedStorage getter</a><span>, in § 4</span>
   <li><a href="#sharedstorageworkletglobalscope-shared-storage-instance">shared storage instance</a><span>, in § 2.3.1</span>
   <li><a href="#shared-storage-lock-managers-map">shared storage lock managers map</a><span>, in § 10.1</span>
   <li><a href="#sharedstoragemodifiermethod">SharedStorageModifierMethod</a><span>, in § 5</span>
   <li><a href="#dictdef-sharedstoragemodifiermethodoptions">SharedStorageModifierMethodOptions</a><span>, in § 5</span>
   <li><a href="#shared-storage-navigation-budget-table">shared storage navigation budget table</a><span>, in § 2.5.1</span>
   <li><a href="#traversable-navigable-shared-storage-page-budget">shared storage page budget</a><span>, in § 2.5.2</span>
   <li><a href="#dictdef-sharedstorageprivateaggregationconfig">SharedStoragePrivateAggregationConfig</a><span>, in § 6</span>
   <li><a href="#typedefdef-sharedstorageresponse">SharedStorageResponse</a><span>, in § 2</span>
   <li><a href="#dictdef-sharedstoragerunoperationmethodoptions">SharedStorageRunOperationMethodOptions</a><span>, in § 6</span>
   <li><a href="#permissionspolicy-shared-storage-select-url">shared-storage-select-url</a><span>, in § 11</span>
   <li><a href="#sharedstoragesetmethod">SharedStorageSetMethod</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragesetmethod-sharedstoragesetmethod">SharedStorageSetMethod(key, value)</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragesetmethod-sharedstoragesetmethod">SharedStorageSetMethod(key, value, options)</a><span>, in § 5</span>
   <li><a href="#dictdef-sharedstoragesetmethodoptions">SharedStorageSetMethodOptions</a><span>, in § 5</span>
   <li><a href="#shared-storage-shed">shared storage shed</a><span>, in § 3.1</span>
   <li><a href="#dictdef-sharedstorageurlwithmetadata">SharedStorageUrlWithMetadata</a><span>, in § 2.4</span>
   <li><a href="#sharedstorageworklet">SharedStorageWorklet</a><span>, in § 2</span>
   <li><a href="#sharedstorageworkletglobalscope">SharedStorageWorkletGlobalScope</a><span>, in § 2.3.1</span>
   <li><a href="#sharedstorageworkletnavigator">SharedStorageWorkletNavigator</a><span>, in § 10.2</span>
   <li><a href="#dictdef-sharedstorageworkletoptions">SharedStorageWorkletOptions</a><span>, in § 6</span>
   <li><a href="#request-shared-storage-writable">shared storage writable</a><span>, in § 9.1</span>
   <li>
    sharedStorageWritable
    <ul>
     <li><a href="#dom-htmlsharedstoragewritableelementutils-sharedstoragewritable">attribute for HTMLSharedStorageWritableElementUtils</a><span>, in § 8.1</span>
     <li><a href="#dom-requestinit-sharedstoragewritable">dict-member for RequestInit</a><span>, in § 9.1</span>
    </ul>
   <li>
    sharedstoragewritable
    <ul>
     <li><a href="#element-attrdef-iframe-sharedstoragewritable">element-attr for iframe</a><span>, in § 8.1</span>
     <li><a href="#element-attrdef-img-sharedstoragewritable">element-attr for img</a><span>, in § 8.1</span>
    </ul>
   <li><a href="#http-headerdef-shared-storage-write">Shared-Storage-Write</a><span>, in § 9.3.4</span>
   <li><a href="#shared-storage-page-budget-site-budget-map">site budget map</a><span>, in § 2.5.2</span>
   <li><a href="#site-page-entropy-allowance">site page entropy allowance</a><span>, in § 2.5.2</span>
   <li><a href="#shared-storage-database-store-an-entry-in-the-database">store an entry in the database</a><span>, in § 3.3</span>
   <li><a href="#store-the-index-for-a-saved-query">store the index for a saved query</a><span>, in § 2.5.2.3</span>
   <li><a href="#bit-debit-timestamp">timestamp</a><span>, in § 2.5.1</span>
   <li><a href="#trusted-origin-type">trusted origin type</a><span>, in § 2.2.6</span>
   <li><a href="#dom-sharedstorageurlwithmetadata-url">url</a><span>, in § 2.4</span>
   <li><a href="#validate-reporting-metadata">validate reporting metadata</a><span>, in § 2.4</span>
   <li>
    value
    <ul>
     <li><a href="#sharedstorageappendmethod-value">dfn for SharedStorageAppendMethod</a><span>, in § 5</span>
     <li><a href="#sharedstoragesetmethod-value">dfn for SharedStorageSetMethod</a><span>, in § 5</span>
     <li><a href="#value-struct-value">dfn for value struct</a><span>, in § 3.2</span>
    </ul>
   <li><a href="#entry-value-struct">value struct</a><span>, in § 3.2</span>
   <li><a href="#sharedstoragemodifiermethod-with-lock">with lock</a><span>, in § 5</span>
   <li><a href="#dom-sharedstoragemodifiermethodoptions-withlock">withLock</a><span>, in § 5</span>
   <li><a href="#dom-sharedstorage-worklet">worklet</a><span>, in § 6</span>
   <li><a href="#saved-query-map-worklet-script-url">worklet script URL</a><span>, in § 2.5.2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="ae6f41f1">urn uuid</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ATTESTATION]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c55932e1">enrolled</span>
    </ul>
   <li>
    <a data-link-type="biblio">[BEACON]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2efaa6ee">beacon</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="5216e1a0">node document</span>
     <li><span class="dfn-paneled" id="c62cd7cf">origin</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="3aec4bbc">current realm</span>
     <li><span class="dfn-paneled" id="192e00bf">Get</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMA262]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="26e4aa12">agent</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ECMASCRIPT]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="dc07163b">IsCallable</span>
     <li><span class="dfn-paneled" id="704924d7">function objects</span>
    </ul>
   <li>
    <a data-link-type="biblio">[ENCODING]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b0fcb8d7">UTF-8 decode</span>
     <li><span class="dfn-paneled" id="0303e8e5">UTF-8 encode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[Fenced-Frame]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="8edb2f5a">FenceEvent</span>
     <li><span class="dfn-paneled" id="24f2f8da">FencedFrameConfig</span>
     <li><span class="dfn-paneled" id="69ac8948">destination</span>
     <li><span class="dfn-paneled" id="f09e6fca">eventData</span>
     <li><span class="dfn-paneled" id="adcea05f">eventType</span>
     <li><span class="dfn-paneled" id="f8240630">fenced frame</span>
     <li><span class="dfn-paneled" id="b8914171">fenced frame config</span>
     <li><span class="dfn-paneled" id="cf17e487">fenced frame config instance</span>
     <li><span class="dfn-paneled" id="06799577">fenced frame config mapping</span>
     <li><span class="dfn-paneled" id="16ebb1f5">fenced frame reporter</span>
     <li><span class="dfn-paneled" id="e5128568">finalize a pending config</span>
     <li><span class="dfn-paneled" id="e231e88f">mapped url</span>
     <li><span class="dfn-paneled" id="65de84a0">reportEvent()</span>
     <li><span class="dfn-paneled" id="c5b31ce5">store a pending config</span>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0dcd4ad9">RequestInit</span>
     <li><span class="dfn-paneled" id="a6a8ec88">append</span>
     <li><span class="dfn-paneled" id="857d5516">client</span>
     <li><span class="dfn-paneled" id="3f2ca4de">current URL</span>
     <li><span class="dfn-paneled" id="ee95ecc7">delete</span>
     <li><span class="dfn-paneled" id="3ae34c95">destination</span>
     <li><span class="dfn-paneled" id="36a75887">extracting a MIME type</span>
     <li><span class="dfn-paneled" id="a33db89a">fetch</span>
     <li><span class="dfn-paneled" id="d47d0690">get</span>
     <li><span class="dfn-paneled" id="5c66de35">get a structured field value</span>
     <li><span class="dfn-paneled" id="c9e7c11a">header</span>
     <li><span class="dfn-paneled" id="6ee0eab1">header list <small>(for request)</small></span>
     <li><span class="dfn-paneled" id="f7b00a8b">header list <small>(for response)</small></span>
     <li><span class="dfn-paneled" id="2aaa2f42">HTTP fetch</span>
     <li><span class="dfn-paneled" id="2c2acc57">http network or cache fetch</span>
     <li><span class="dfn-paneled" id="7b0b4fa0">initiator type</span>
     <li><span class="dfn-paneled" id="cb98f71f">mode</span>
     <li><span class="dfn-paneled" id="eb1b1af3">network error</span>
     <li><span class="dfn-paneled" id="a27468c5">ok status</span>
     <li><span class="dfn-paneled" id="f78d5b5c">origin</span>
     <li><span class="dfn-paneled" id="d83f8790">priority</span>
     <li><span class="dfn-paneled" id="08b51e40">processResponseConsumeBody</span>
     <li><span class="dfn-paneled" id="64b62ea0">redirect mode</span>
     <li><span class="dfn-paneled" id="a8b25997">redirect status</span>
     <li><span class="dfn-paneled" id="358f1dbd">referrer</span>
     <li><span class="dfn-paneled" id="55213b5b">request</span>
     <li><span class="dfn-paneled" id="162d2b51">request <small>(for Request)</small></span>
     <li><span class="dfn-paneled" id="c07c4a8c">request-constructor</span>
     <li><span class="dfn-paneled" id="ee7bba09">response</span>
     <li><span class="dfn-paneled" id="35b98f13">set a structured field value</span>
     <li><span class="dfn-paneled" id="a1d47575">status</span>
     <li><span class="dfn-paneled" id="dc1cd39b">URL</span>
     <li><span class="dfn-paneled" id="8a608b90">value</span>
     <li><span class="dfn-paneled" id="1ab127d6">window</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HR-TIME-3]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="0e9f636b">DOMHighResTimeStamp</span>
     <li><span class="dfn-paneled" id="a09bfce2">current wall time</span>
     <li><span class="dfn-paneled" id="f16ee824">current wall time <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="4b2c8c72">duration</span>
     <li><span class="dfn-paneled" id="be5dbc8c">unix epoch</span>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="402ed79d">CEReactions</span>
     <li><span class="dfn-paneled" id="10e25f42">HTMLIFrameElement</span>
     <li><span class="dfn-paneled" id="c5891539">HTMLImageElement</span>
     <li><span class="dfn-paneled" id="5d7209e9">Window</span>
     <li><span class="dfn-paneled" id="2879c404">Worklet</span>
     <li><span class="dfn-paneled" id="0c9b0d3c">WorkletGlobalScope</span>
     <li><span class="dfn-paneled" id="47a5f7a3">WorkletOptions</span>
     <li><span class="dfn-paneled" id="35972864">active document</span>
     <li><span class="dfn-paneled" id="101c721c">active window</span>
     <li><span class="dfn-paneled" id="eec46e27">addModule(moduleURL, options)</span>
     <li><span class="dfn-paneled" id="0c444cb5">added modules list</span>
     <li><span class="dfn-paneled" id="3610bd67">allowed to use</span>
     <li><span class="dfn-paneled" id="3349d69f">associated Document</span>
     <li><span class="dfn-paneled" id="772cb7dd">beginning navigation</span>
     <li><span class="dfn-paneled" id="b0b31697">boolean attributes</span>
     <li><span class="dfn-paneled" id="0d0390b4">browsing context</span>
     <li><span class="dfn-paneled" id="3b2ff63e">browsing context <small>(for Document)</small></span>
     <li><span class="dfn-paneled" id="6d88ab2e">browsing context <small>(for Window)</small></span>
     <li><span class="dfn-paneled" id="762210c0">container</span>
     <li><span class="dfn-paneled" id="68675e70">content attributes</span>
     <li><span class="dfn-paneled" id="e4ffa115">create a worklet global scope</span>
     <li><span class="dfn-paneled" id="07ad3048">create navigation params by fetching</span>
     <li><span class="dfn-paneled" id="12b8dfc0">current settings object</span>
     <li><span class="dfn-paneled" id="e10e7eb7">DOM manipulation task source</span>
     <li><span class="dfn-paneled" id="7dbefaad">ending navigation</span>
     <li><span class="dfn-paneled" id="102df61f">enqueue the following steps</span>
     <li><span class="dfn-paneled" id="24cf98a1">environment</span>
     <li><span class="dfn-paneled" id="3e12e042">environment settings object</span>
     <li><span class="dfn-paneled" id="3018e13f">fetch a worklet script graph</span>
     <li><span class="dfn-paneled" id="0e3ba9f8">fully active</span>
     <li><span class="dfn-paneled" id="289407ea">get the top-level traversable</span>
     <li><span class="dfn-paneled" id="8a30477b">global object <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="168f1b6e">global object <small>(for realm)</small></span>
     <li><span class="dfn-paneled" id="6f738b30">global scopes</span>
     <li><span class="dfn-paneled" id="73a186aa">id</span>
     <li><span class="dfn-paneled" id="87fcd40c">iframe</span>
     <li><span class="dfn-paneled" id="f0811ff8">img</span>
     <li><span class="dfn-paneled" id="a72449dd">in parallel</span>
     <li><span class="dfn-paneled" id="2fa84525">initialize the navigable</span>
     <li><span class="dfn-paneled" id="9b3743cd">module map</span>
     <li><span class="dfn-paneled" id="a1005ed9">module script</span>
     <li><span class="dfn-paneled" id="9c19b7fc">navigable</span>
     <li><span class="dfn-paneled" id="2594e562">navigate</span>
     <li><span class="dfn-paneled" id="b6ae4501">networking task source</span>
     <li><span class="dfn-paneled" id="13dd6cae">node navigable</span>
     <li><span class="dfn-paneled" id="602b1a68">obtain a site</span>
     <li><span class="dfn-paneled" id="f5fd709f">obtaining a worklet agent</span>
     <li><span class="dfn-paneled" id="b01b1359">opaque origin</span>
     <li><span class="dfn-paneled" id="086e3aff">origin</span>
     <li><span class="dfn-paneled" id="43ac8374">origin <small>(for environment settings object)</small></span>
     <li><span class="dfn-paneled" id="1bba3db7">parent</span>
     <li><span class="dfn-paneled" id="48438eb3">queue a global task</span>
     <li><span class="dfn-paneled" id="9a517a7d">queue a task</span>
     <li><span class="dfn-paneled" id="b75a7d23">realm</span>
     <li><span class="dfn-paneled" id="5ab7b520">reflect</span>
     <li><span class="dfn-paneled" id="e99bd18e">relevant global object</span>
     <li><span class="dfn-paneled" id="5991ccfb">relevant realm</span>
     <li><span class="dfn-paneled" id="9c4c1e66">relevant settings object</span>
     <li><span class="dfn-paneled" id="7393da89">same origin</span>
     <li><span class="dfn-paneled" id="65181da8">secure context</span>
     <li><span class="dfn-paneled" id="1014b9fc">serialization</span>
     <li><span class="dfn-paneled" id="1cc25024">set up a worklet environment settings object</span>
     <li><span class="dfn-paneled" id="7deb6835">settings object</span>
     <li><span class="dfn-paneled" id="fb9bb722">site</span>
     <li><span class="dfn-paneled" id="9c9ab424">start a new parallel queue</span>
     <li><span class="dfn-paneled" id="085ddd0a">target browsing context</span>
     <li><span class="dfn-paneled" id="e270bd2a">task</span>
     <li><span class="dfn-paneled" id="d2f99df9">terminate a worklet global scope</span>
     <li><span class="dfn-paneled" id="30717154">top-level traversable</span>
     <li><span class="dfn-paneled" id="17582406">traversable navigable</span>
     <li><span class="dfn-paneled" id="b402424d">update the image data</span>
     <li><span class="dfn-paneled" id="b79e50d6">user activation</span>
     <li><span class="dfn-paneled" id="93252241">worklet destination type</span>
     <li><span class="dfn-paneled" id="a5b959f9">worklet event loop</span>
     <li><span class="dfn-paneled" id="3b8ce5a6">worklet global scope type</span>
     <li><span class="dfn-paneled" id="3e6a4683">worklets</span>
    </ul>
   <li>
    <a data-link-type="biblio">[I18N-GLOSSARY]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="94719b0c">unicode</span>
    </ul>
   <li>
    <a data-link-type="biblio">[INFRA]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="53275e46">append <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a3b18719">append <small>(for set)</small></span>
     <li><span class="dfn-paneled" id="f0c4369e">ASCII</span>
     <li><span class="dfn-paneled" id="2d5a2765">ASCII string</span>
     <li><span class="dfn-paneled" id="77b4c09a">assert</span>
     <li><span class="dfn-paneled" id="36858240">boolean</span>
     <li><span class="dfn-paneled" id="3de9e659">byte sequence</span>
     <li><span class="dfn-paneled" id="bc7b9068">clear</span>
     <li><span class="dfn-paneled" id="027e3e49">clone</span>
     <li><span class="dfn-paneled" id="4a3bf5fb">concatenate</span>
     <li><span class="dfn-paneled" id="ae8def21">contain <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="a326add7">contain <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="f937b7b6">continue</span>
     <li><span class="dfn-paneled" id="9a9b558b">dequeue</span>
     <li><span class="dfn-paneled" id="03afaf9c">empty <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="cc867b80">empty <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="06a6db54">enqueue</span>
     <li><span class="dfn-paneled" id="8958b003">entry</span>
     <li><span class="dfn-paneled" id="1243a891">exist</span>
     <li><span class="dfn-paneled" id="527b10aa">get</span>
     <li><span class="dfn-paneled" id="4e92bc80">get the keys</span>
     <li><span class="dfn-paneled" id="d5890b17">getting the values</span>
     <li><span class="dfn-paneled" id="860300d4">implementation-defined</span>
     <li><span class="dfn-paneled" id="5afbefcd">item <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="c88f3887">item <small>(for struct)</small></span>
     <li><span class="dfn-paneled" id="efe8653e">iterate</span>
     <li><span class="dfn-paneled" id="d14a6f26">key</span>
     <li><span class="dfn-paneled" id="31db57e6">keys</span>
     <li><span class="dfn-paneled" id="0fa357c3">length</span>
     <li><span class="dfn-paneled" id="649608b9">list</span>
     <li><span class="dfn-paneled" id="3fca5a9e">map</span>
     <li><span class="dfn-paneled" id="84b454ff">ordered map</span>
     <li><span class="dfn-paneled" id="5ff3a316">parse a JSON string to an Infra value</span>
     <li><span class="dfn-paneled" id="47dfca75">queue</span>
     <li><span class="dfn-paneled" id="99c988d6">remove <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="7d4424b2">remove <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="0e6b2056">set</span>
     <li><span class="dfn-paneled" id="0204d188">size <small>(for list)</small></span>
     <li><span class="dfn-paneled" id="653d0848">size <small>(for map)</small></span>
     <li><span class="dfn-paneled" id="0698d556">string</span>
     <li><span class="dfn-paneled" id="984221ca">struct</span>
     <li><span class="dfn-paneled" id="cf6542b2">the exclusive range</span>
     <li><span class="dfn-paneled" id="0e8de730">tuple</span>
     <li><span class="dfn-paneled" id="6d19ac93">user agent</span>
     <li><span class="dfn-paneled" id="12d6b9a8">values</span>
     <li><span class="dfn-paneled" id="cbdc89b4">while</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MEDIA-SOURCE-2]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2c8f3d9c">sequence</span>
    </ul>
   <li>
    <a data-link-type="biblio">[MIMESNIFF]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="b1981b98">JSON MIME type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS-POLICY-1]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="47a2271a">Is feature enabled in document for origin?</span>
     <li><span class="dfn-paneled" id="cc890cc1">policy-controlled feature</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PRIVATE-AGGREGATION-API]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a05e642a">PrivateAggregation</span>
     <li><span class="dfn-paneled" id="e6c86b55">aggregation coordinator</span>
     <li><span class="dfn-paneled" id="c371fb46">allowed to use</span>
     <li><span class="dfn-paneled" id="bd748f4d">batching scope</span>
     <li><span class="dfn-paneled" id="b2e61ba5">context ID</span>
     <li><span class="dfn-paneled" id="d90669f5">debug scope</span>
     <li><span class="dfn-paneled" id="80042e43">default filtering id max bytes</span>
     <li><span class="dfn-paneled" id="b77e2b3f">determine if a report should be sent deterministically</span>
     <li><span class="dfn-paneled" id="1c3d02e8">filtering ID max bytes</span>
     <li><span class="dfn-paneled" id="0faaf773">get batching scope steps</span>
     <li><span class="dfn-paneled" id="563b7f6f">get debug scope steps</span>
     <li><span class="dfn-paneled" id="3d27c731">get the privateAggregation</span>
     <li><span class="dfn-paneled" id="c5e13c9d">mark a debug scope complete</span>
     <li><span class="dfn-paneled" id="e19cc19e">max contributions</span>
     <li><span class="dfn-paneled" id="f74a35ec">obtain the Private Aggregation coordinator</span>
     <li><span class="dfn-paneled" id="373e0775">pre-specified report parameters</span>
     <li><span class="dfn-paneled" id="2f9091c7">Private Aggregation</span>
     <li><span class="dfn-paneled" id="409d0c03">private-aggregation</span>
     <li><span class="dfn-paneled" id="48e003db">process contributions for a batching scope</span>
     <li><span class="dfn-paneled" id="5b40d7b3">scoping details</span>
     <li><span class="dfn-paneled" id="26e17e58">scoping details <small>(for PrivateAggregation)</small></span>
     <li><span class="dfn-paneled" id="00629322">set the aggregation coordinator for a batching scope</span>
     <li><span class="dfn-paneled" id="9046ba8f">set the pre-specified report parameters for a batching scope</span>
     <li><span class="dfn-paneled" id="bd562432">valid filtering id max bytes range</span>
    </ul>
   <li>
    <a data-link-type="biblio">[PROTECTED-AUDIENCE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c258bbe3">StorageInterestGroup</span>
     <li><span class="dfn-paneled" id="ce5e39d9">get storage interest groups for owner</span>
    </ul>
   <li>
    <a data-link-type="biblio">[RFC8941]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="2c680d8a">bare item</span>
     <li><span class="dfn-paneled" id="d56eba29">boolean</span>
     <li><span class="dfn-paneled" id="375247ce">byte sequence</span>
     <li><span class="dfn-paneled" id="77e5cafe">inner list</span>
     <li><span class="dfn-paneled" id="2d1d761a">list</span>
     <li><span class="dfn-paneled" id="4a7ca2e3">parameters</span>
     <li><span class="dfn-paneled" id="cb1e75b1">string</span>
     <li><span class="dfn-paneled" id="e075de1c">structured header</span>
     <li><span class="dfn-paneled" id="04dc11d2">token</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SERVICE-WORKERS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7d16decb">storage key</span>
    </ul>
   <li>
    <a data-link-type="biblio">[SHARED-STORAGE-EXPLAINER]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="bf8231d0">legitimate use cases</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7f8002fa">backing map</span>
     <li><span class="dfn-paneled" id="d7f1116b">bottle map</span>
     <li><span class="dfn-paneled" id="7db4a4b7">bucket map</span>
     <li><span class="dfn-paneled" id="0ad0fd9b">proxy map reference set</span>
     <li><span class="dfn-paneled" id="73fdd654">quota <small>(for storage bottle)</small></span>
     <li><span class="dfn-paneled" id="896f4663">quota <small>(for storage endpoint)</small></span>
     <li><span class="dfn-paneled" id="a5eb2e99">register</span>
     <li><span class="dfn-paneled" id="67130339">storage bottle</span>
     <li><span class="dfn-paneled" id="6148dd37">storage bucket</span>
     <li><span class="dfn-paneled" id="98c6a112">storage endpoint</span>
     <li><span class="dfn-paneled" id="5701f5c0">storage identifier</span>
     <li><span class="dfn-paneled" id="07260e9d">storage model</span>
     <li><span class="dfn-paneled" id="07d4a5a2">storage proxy map</span>
     <li><span class="dfn-paneled" id="660191f0">storage shed</span>
     <li><span class="dfn-paneled" id="daed3f4b">storage shelf</span>
     <li><span class="dfn-paneled" id="2eb97c74">storage type</span>
    </ul>
   <li>
    <a data-link-type="biblio">[STORAGE-PARTITIONING]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="4c2ffaa9">client-side storage partitioning</span>
    </ul>
   <li>
    <a data-link-type="biblio">[URL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="959ad97b">origin</span>
     <li><span class="dfn-paneled" id="c0868016">path</span>
     <li><span class="dfn-paneled" id="dcffbccd">URL</span>
     <li><span class="dfn-paneled" id="ca3ca4ae">URL parser</span>
     <li><span class="dfn-paneled" id="5442ea33">URL serializer</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEB-LOCKS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="a2bbd43b">LockOptions</span>
     <li><span class="dfn-paneled" id="30298a68">NavigatorLocks</span>
     <li><span class="dfn-paneled" id="66905219">ifAvailable</span>
     <li><span class="dfn-paneled" id="bb14e765">lock manager</span>
     <li><span class="dfn-paneled" id="42c69559">mode</span>
     <li><span class="dfn-paneled" id="5dcb719c">obtain a lock manager</span>
     <li><span class="dfn-paneled" id="4d27703d">request a lock</span>
     <li><span class="dfn-paneled" id="d192e211">signal</span>
     <li><span class="dfn-paneled" id="f2e84267">steal</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBIDL]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="dca2de17">DOMException</span>
     <li><span class="dfn-paneled" id="8855a9aa">DOMString</span>
     <li><span class="dfn-paneled" id="c01cbda0">EnforceRange</span>
     <li><span class="dfn-paneled" id="889e932f">Exposed</span>
     <li><span class="dfn-paneled" id="ae46556f">Function</span>
     <li><span class="dfn-paneled" id="7fb6fbc6">Global</span>
     <li><span class="dfn-paneled" id="bdbd19d1">Promise</span>
     <li><span class="dfn-paneled" id="b75bb3bd">SecureContext</span>
     <li><span class="dfn-paneled" id="82ca3efc">TypeError</span>
     <li><span class="dfn-paneled" id="b0d7f3c3">USVString</span>
     <li><span class="dfn-paneled" id="dacde8b5">a new promise</span>
     <li><span class="dfn-paneled" id="d0b4a948">a promise rejected with</span>
     <li><span class="dfn-paneled" id="cc61f510">an exception was thrown</span>
     <li><span class="dfn-paneled" id="6c6b1005">any</span>
     <li><span class="dfn-paneled" id="3e180d35">associated realm</span>
     <li><span class="dfn-paneled" id="11f367b8">async iterator</span>
     <li><span class="dfn-paneled" id="9a7f3f6f">asynchronous iterator initialization steps</span>
     <li><span class="dfn-paneled" id="5372cca8">boolean</span>
     <li><span class="dfn-paneled" id="1fc2b625">construct</span>
     <li><span class="dfn-paneled" id="cadf5fe9">converted to an IDL value</span>
     <li><span class="dfn-paneled" id="bec98d30">dictionary</span>
     <li><span class="dfn-paneled" id="8c800cdf">double</span>
     <li><span class="dfn-paneled" id="e7652812">get the next iteration result</span>
     <li><span class="dfn-paneled" id="833154f2">getter steps</span>
     <li><span class="dfn-paneled" id="1422ec4e">interface</span>
     <li><span class="dfn-paneled" id="d08c79a9">interface mixin</span>
     <li><span class="dfn-paneled" id="10ce5f6f">invoke</span>
     <li><span class="dfn-paneled" id="f8de33a3">long</span>
     <li><span class="dfn-paneled" id="efd1ec5d">object</span>
     <li><span class="dfn-paneled" id="4bf1cac4">promise</span>
     <li><span class="dfn-paneled" id="cc608da4">promise rejected</span>
     <li><span class="dfn-paneled" id="750a2f08">react</span>
     <li><span class="dfn-paneled" id="b262501e">reject</span>
     <li><span class="dfn-paneled" id="3b90bdcd">resolve</span>
     <li><span class="dfn-paneled" id="9cce47fd">sequence</span>
     <li><span class="dfn-paneled" id="4013a022">this</span>
     <li><span class="dfn-paneled" id="5f90bbfb">undefined</span>
     <li><span class="dfn-paneled" id="e97a9688">unsigned long</span>
     <li><span class="dfn-paneled" id="f14b47b8">unsigned long long</span>
     <li><span class="dfn-paneled" id="24bd7d25">upon fulfillment</span>
     <li><span class="dfn-paneled" id="f14ed351">upon rejection</span>
     <li><span class="dfn-paneled" id="375981d1">Web IDL Standard</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WIKIPEDIA-ENTROPY]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="7a101e5c">bits of entropy</span>
     <li><span class="dfn-paneled" id="9d801570">entropy bits</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-beacon">[BEACON]
   <dd>Ilya Grigorik; Alois Reitbauer. <a href="https://w3c.github.io/beacon/"><cite>Beacon</cite></a>. URL: <a href="https://w3c.github.io/beacon/">https://w3c.github.io/beacon/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-ecmascript">[ECMASCRIPT]
   <dd><a href="https://tc39.es/ecma262/multipage/"><cite>ECMAScript Language Specification</cite></a>. URL: <a href="https://tc39.es/ecma262/multipage/">https://tc39.es/ecma262/multipage/</a>
   <dt id="biblio-encoding">[ENCODING]
   <dd>Anne van Kesteren. <a href="https://encoding.spec.whatwg.org/"><cite>Encoding Standard</cite></a>. Living Standard. URL: <a href="https://encoding.spec.whatwg.org/">https://encoding.spec.whatwg.org/</a>
   <dt id="biblio-fenced-frame">[Fenced-Frame]
   <dd><a href="https://wicg.github.io/fenced-frame/"><cite>Fenced Frame</cite></a>. Draft Community Group Report. URL: <a href="https://wicg.github.io/fenced-frame/">https://wicg.github.io/fenced-frame/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/"><cite>Fetch Standard</cite></a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-hr-time-3">[HR-TIME-3]
   <dd>Yoav Weiss. <a href="https://w3c.github.io/hr-time/"><cite>High Resolution Time</cite></a>. URL: <a href="https://w3c.github.io/hr-time/">https://w3c.github.io/hr-time/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-i18n-glossary">[I18N-GLOSSARY]
   <dd>Richard Ishida; Addison Phillips. <a href="https://w3c.github.io/i18n-glossary/"><cite>Internationalization Glossary</cite></a>. URL: <a href="https://w3c.github.io/i18n-glossary/">https://w3c.github.io/i18n-glossary/</a>
   <dt id="biblio-infra">[INFRA]
   <dd>Anne van Kesteren; Domenic Denicola. <a href="https://infra.spec.whatwg.org/"><cite>Infra Standard</cite></a>. Living Standard. URL: <a href="https://infra.spec.whatwg.org/">https://infra.spec.whatwg.org/</a>
   <dt id="biblio-media-source-2">[MEDIA-SOURCE-2]
   <dd>Jean-Yves Avenard; Mark Watson. <a href="https://w3c.github.io/media-source/"><cite>Media Source Extensions™</cite></a>. URL: <a href="https://w3c.github.io/media-source/">https://w3c.github.io/media-source/</a>
   <dt id="biblio-mimesniff">[MIMESNIFF]
   <dd>Gordon P. Hemsley. <a href="https://mimesniff.spec.whatwg.org/"><cite>MIME Sniffing Standard</cite></a>. Living Standard. URL: <a href="https://mimesniff.spec.whatwg.org/">https://mimesniff.spec.whatwg.org/</a>
   <dt id="biblio-permissions-policy-1">[PERMISSIONS-POLICY-1]
   <dd>Ian Clelland. <a href="https://w3c.github.io/webappsec-permissions-policy/"><cite>Permissions Policy</cite></a>. URL: <a href="https://w3c.github.io/webappsec-permissions-policy/">https://w3c.github.io/webappsec-permissions-policy/</a>
   <dt id="biblio-private-aggregation-api">[PRIVATE-AGGREGATION-API]
   <dd><a href="https://patcg-individual-drafts.github.io/private-aggregation-api/"><cite>Private Aggregation API</cite></a>. Unofficial Proposal Draft. URL: <a href="https://patcg-individual-drafts.github.io/private-aggregation-api/">https://patcg-individual-drafts.github.io/private-aggregation-api/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-rfc8941">[RFC8941]
   <dd>M. Nottingham; P-H. Kamp. <a href="https://httpwg.org/specs/rfc8941.html"><cite>Structured Field Values for HTTP</cite></a>. February 2021. Proposed Standard. URL: <a href="https://httpwg.org/specs/rfc8941.html">https://httpwg.org/specs/rfc8941.html</a>
   <dt id="biblio-storage">[STORAGE]
   <dd>Anne van Kesteren. <a href="https://storage.spec.whatwg.org/"><cite>Storage Standard</cite></a>. Living Standard. URL: <a href="https://storage.spec.whatwg.org/">https://storage.spec.whatwg.org/</a>
   <dt id="biblio-url">[URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-web-locks">[WEB-LOCKS]
   <dd>Joshua Bell; Kagami Rosylight. <a href="https://w3c.github.io/web-locks/"><cite>Web Locks API</cite></a>. URL: <a href="https://w3c.github.io/web-locks/">https://w3c.github.io/web-locks/</a>
   <dt id="biblio-webidl">[WEBIDL]
   <dd>Edgar Chen; Timothy Gu. <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-service-workers">[SERVICE-WORKERS]
   <dd>Jake Archibald; Marijn Kruisselbrink. <a href="https://w3c.github.io/ServiceWorker/"><cite>Service Workers</cite></a>. URL: <a href="https://w3c.github.io/ServiceWorker/">https://w3c.github.io/ServiceWorker/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl highlight def"><c- b>typedef</c-> (<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <c- b>or</c-> <a data-link-type="idl-name" href="https://wicg.github.io/fenced-frame/#fencedframeconfig"><c- n>FencedFrameConfig</c-></a>) <a href="#typedefdef-sharedstorageresponse"><code><c- g>SharedStorageResponse</c-></code></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->)]
<c- b>interface</c-> <a href="#sharedstorageworklet"><code><c- g>SharedStorageWorklet</c-></code></a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#worklet"><c- n>Worklet</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sharedstorageresponse"><c- n>SharedStorageResponse</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworklet-selecturl"><c- g>selectURL</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorageworklet-selecturl-name-urls-options-name"><code><c- g>name</c-></code></a>,
                               <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-sharedstorageurlwithmetadata"><c- n>SharedStorageUrlWithMetadata</c-></a>> <a href="#dom-sharedstorageworklet-selecturl-name-urls-options-urls"><code><c- g>urls</c-></code></a>,
                               <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <a href="#dom-sharedstorageworklet-selecturl-name-urls-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworklet-run"><c- g>run</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorageworklet-run-name-options-name"><code><c- g>name</c-></code></a>,
                   <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <a href="#dom-sharedstorageworklet-run-name-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>callback</c-> <a href="#callbackdef-runfunctionforsharedstorageselecturloperation"><code><c- g>RunFunctionForSharedStorageSelectURLOperation</c-></code></a> = <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a>>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a>> <a href="#dom-runfunctionforsharedstorageselecturloperation-urls"><code><c- g>urls</c-></code></a>, <c- b>optional</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a> <a href="#dom-runfunctionforsharedstorageselecturloperation-data"><code><c- g>data</c-></code></a>);

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Global"><c- g>Global</c-></a>=<a data-link-type="idl-name" href="#sharedstorageworklet"><c- n>SharedStorageWorklet</c-></a>]
<c- b>interface</c-> <a href="#sharedstorageworkletglobalscope"><code><c- g>SharedStorageWorkletGlobalScope</c-></code></a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope"><c- n>WorkletGlobalScope</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined"><c- b>undefined</c-></a> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworkletglobalscope-register"><c- g>register</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorageworkletglobalscope-register-name-operationctor-name"><code><c- g>name</c-></code></a>,
                     <a data-link-type="idl-name" href="https://webidl.spec.whatwg.org/#Function"><c- n>Function</c-></a> <a href="#dom-sharedstorageworkletglobalscope-register-name-operationctor-operationctor"><code><c- g>operationCtor</c-></code></a>);

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorage"><c- n>SharedStorage</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="SharedStorage" href="#dom-sharedstorageworkletglobalscope-sharedstorage"><c- g>sharedStorage</c-></a>;
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation"><c- n>PrivateAggregation</c-></a> <a data-readonly data-type="PrivateAggregation" href="#dom-sharedstorageworkletglobalscope-privateaggregation"><code><c- g>privateAggregation</c-></code></a>;

  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="https://wicg.github.io/turtledove/#dictdef-storageinterestgroup"><c- n>StorageInterestGroup</c-></a>>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorageworkletglobalscope-interestgroups"><c- g>interestGroups</c-></a>();

  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorageworkletnavigator"><c- n>SharedStorageWorkletNavigator</c-></a> <a class="idl-code" data-link-type="attribute" data-readonly data-type="SharedStorageWorkletNavigator" href="#dom-sharedstorageworkletglobalscope-navigator"><c- g>navigator</c-></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-sharedstorageurlwithmetadata"><code><c- g>SharedStorageUrlWithMetadata</c-></code></a> {
  <c- b>required</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-sharedstorageurlwithmetadata-url"><code><c- g>url</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a> <a data-type="object" href="#dom-sharedstorageurlwithmetadata-reportingmetadata"><code><c- g>reportingMetadata</c-></code></a>;
};

<c- b>partial</c-> <c- b>interface</c-> <a class="idl-code" data-link-type="interface" href="https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"><c- g>Window</c-></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>] <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorage"><c- n>SharedStorage</c-></a>? <a data-readonly data-type="SharedStorage?" href="#dom-window-sharedstorage"><code><c- g>sharedStorage</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#sharedstoragemodifiermethod"><code><c- g>SharedStorageModifierMethod</c-></code></a> {};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#sharedstoragesetmethod"><code><c- g>SharedStorageSetMethod</c-></code></a> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstoragesetmethod-sharedstoragesetmethod"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-key"><code><c- g>key</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-value"><code><c- g>value</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragesetmethodoptions"><c- n>SharedStorageSetMethodOptions</c-></a> <a href="#dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-options"><code><c- g>options</c-></code></a> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#sharedstorageappendmethod"><code><c- g>SharedStorageAppendMethod</c-></code></a> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstorageappendmethod-sharedstorageappendmethod"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-key"><code><c- g>key</c-></code></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-value"><code><c- g>value</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <a href="#dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-options"><code><c- g>options</c-></code></a> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#sharedstoragedeletemethod"><code><c- g>SharedStorageDeleteMethod</c-></code></a> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod"><c- g>constructor</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-key"><code><c- g>key</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <a href="#dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-options"><code><c- g>options</c-></code></a> = {});
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->, <c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#sharedstorageclearmethod"><code><c- g>SharedStorageClearMethod</c-></code></a> : <a data-link-type="idl-name" href="#sharedstoragemodifiermethod"><c- n>SharedStorageModifierMethod</c-></a> {
  <a class="idl-code" data-link-type="constructor" href="#dom-sharedstorageclearmethod-sharedstorageclearmethod"><c- g>constructor</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <a href="#dom-sharedstorageclearmethod-sharedstorageclearmethod-options-options"><code><c- g>options</c-></code></a> = {});
};

<c- b>dictionary</c-> <a href="#dictdef-sharedstoragemodifiermethodoptions"><code><c- g>SharedStorageModifierMethodOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-sharedstoragemodifiermethodoptions-withlock"><code><c- g>withLock</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-sharedstoragesetmethodoptions"><code><c- g>SharedStorageSetMethodOptions</c-></code></a> : <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-sharedstoragesetmethodoptions-ignoreifpresent"><code><c- g>ignoreIfPresent</c-></code></a>;
};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#sharedstorage"><code><c- g>SharedStorage</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-set"><c- g>set</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-set-key-value-options-key"><code><c- g>key</c-></code></a>,
                   <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-set-key-value-options-value"><code><c- g>value</c-></code></a>,
                   <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragesetmethodoptions"><c- n>SharedStorageSetMethodOptions</c-></a> <a href="#dom-sharedstorage-set-key-value-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-append"><c- g>append</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-append-key-value-options-key"><code><c- g>key</c-></code></a>,
                      <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-append-key-value-options-value"><code><c- g>value</c-></code></a>,
                      <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <a href="#dom-sharedstorage-append-key-value-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-delete"><c- g>delete</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-delete-key-options-key"><code><c- g>key</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <a href="#dom-sharedstorage-delete-key-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-clear"><c- g>clear</c-></a>(<c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <a href="#dom-sharedstorage-clear-options-options"><code><c- g>options</c-></code></a> = {});
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-batchupdate"><c- g>batchUpdate</c-></a>(<a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#sharedstoragemodifiermethod"><c- n>SharedStorageModifierMethod</c-></a>> <a href="#dom-sharedstorage-batchupdate-methods-options-methods"><code><c- g>methods</c-></code></a>,
                           <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragemodifiermethodoptions"><c- n>SharedStorageModifierMethodOptions</c-></a> <a href="#dom-sharedstorage-batchupdate-methods-options-options"><code><c- g>options</c-></code></a> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#typedefdef-sharedstorageresponse"><c- n>SharedStorageResponse</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-selecturl"><c- g>selectURL</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-selecturl-name-urls-options-name"><code><c- g>name</c-></code></a>,
                               <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#idl-sequence"><c- b>sequence</c-></a>&lt;<a data-link-type="idl-name" href="#dictdef-sharedstorageurlwithmetadata"><c- n>SharedStorageUrlWithMetadata</c-></a>> <a href="#dom-sharedstorage-selecturl-name-urls-options-urls"><code><c- g>urls</c-></code></a>,
                               <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <a href="#dom-sharedstorage-selecturl-name-urls-options-options"><code><c- g>options</c-></code></a> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-any"><c- b>any</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-run"><c- g>run</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-run-name-options-name"><code><c- g>name</c-></code></a>,
                   <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstoragerunoperationmethodoptions"><c- n>SharedStorageRunOperationMethodOptions</c-></a> <a href="#dom-sharedstorage-run-name-options-options"><code><c- g>options</c-></code></a> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a data-link-type="idl-name" href="#sharedstorageworklet"><c- n>SharedStorageWorklet</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-createworklet"><c- g>createWorklet</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a href="#dom-sharedstorage-createworklet-moduleurl-options-moduleurl"><code><c- g>moduleURL</c-></code></a>, <c- b>optional</c-> <a data-link-type="idl-name" href="#dictdef-sharedstorageworkletoptions"><c- n>SharedStorageWorkletOptions</c-></a> <a href="#dom-sharedstorage-createworklet-moduleurl-options-options"><code><c- g>options</c-></code></a> = {});

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>Window</c->]
  <c- b>readonly</c-> <c- b>attribute</c-> <a data-link-type="idl-name" href="#sharedstorageworklet"><c- n>SharedStorageWorklet</c-></a> <a data-readonly data-type="SharedStorageWorklet" href="#dom-sharedstorage-worklet"><code><c- g>worklet</c-></code></a>;

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-get"><c- g>get</c-></a>(<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a href="#dom-sharedstorage-get-key-key"><code><c- g>key</c-></code></a>);

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long"><c- b>unsigned</c-> <c- b>long</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-length"><c- g>length</c-></a>();

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><c- b>Promise</c-></a>&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-double"><c- b>double</c-></a>> <a class="idl-code" data-link-type="method" href="#dom-sharedstorage-remainingbudget"><c- g>remainingBudget</c-></a>();

  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->]
  <c- b>async</c-> <c- b>iterable</c->&lt;<a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>, <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a>>;
};

<c- b>dictionary</c-> <a href="#dictdef-sharedstorageprivateaggregationconfig"><code><c- g>SharedStoragePrivateAggregationConfig</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin"><code><c- g>aggregationCoordinatorOrigin</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-type="USVString" href="#dom-sharedstorageprivateaggregationconfig-contextid"><code><c- g>contextId</c-></code></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a data-type="unsigned long long" href="#dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes"><code><c- g>filteringIdMaxBytes</c-></code></a>;
  [<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#EnforceRange"><c- g>EnforceRange</c-></a>] <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-unsigned-long-long"><c- b>unsigned</c-> <c- b>long</c-> <c- b>long</c-></a> <a data-type="unsigned long long" href="#dom-sharedstorageprivateaggregationconfig-maxcontributions"><code><c- g>maxContributions</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-sharedstoragerunoperationmethodoptions"><code><c- g>SharedStorageRunOperationMethodOptions</c-></code></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-object"><c- b>object</c-></a> <a data-type="object" href="#dom-sharedstoragerunoperationmethodoptions-data"><code><c- g>data</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-sharedstoragerunoperationmethodoptions-resolvetoconfig"><code><c- g>resolveToConfig</c-></code></a> = <c- b>false</c->;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-default="false" data-type="boolean" href="#dom-sharedstoragerunoperationmethodoptions-keepalive"><code><c- g>keepAlive</c-></code></a> = <c- b>false</c->;
  <a data-link-type="idl-name" href="#dictdef-sharedstorageprivateaggregationconfig"><c- n>SharedStoragePrivateAggregationConfig</c-></a> <a data-type="SharedStoragePrivateAggregationConfig" href="#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig"><code><c- g>privateAggregationConfig</c-></code></a>;
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-DOMString"><c- b>DOMString</c-></a> <a data-type="DOMString" href="#dom-sharedstoragerunoperationmethodoptions-savedquery"><code><c- g>savedQuery</c-></code></a>;
};

<c- b>dictionary</c-> <a href="#dictdef-sharedstorageworkletoptions"><code><c- g>SharedStorageWorkletOptions</c-></code></a> : <a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/worklets.html#workletoptions"><c- n>WorkletOptions</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-USVString"><c- b>USVString</c-></a> <a data-default="&quot;context-origin&quot;" data-type="USVString" href="#dom-sharedstorageworkletoptions-dataorigin"><code><c- g>dataOrigin</c-></code></a> = "context-origin";
};

<c- b>interface</c-> <c- b>mixin</c-> <a href="#htmlsharedstoragewritableelementutils"><code><c- g>HTMLSharedStorageWritableElementUtils</c-></code></a> {
  [<a class="idl-code" data-link-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"><c- g>CEReactions</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>] <c- b>attribute</c-> <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-htmlsharedstoragewritableelementutils-sharedstoragewritable"><code><c- g>sharedStorageWritable</c-></code></a>;
};

<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"><c- n>HTMLIFrameElement</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#htmlsharedstoragewritableelementutils"><c- n>HTMLSharedStorageWritableElementUtils</c-></a>;
<a data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement"><c- n>HTMLImageElement</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="#htmlsharedstoragewritableelementutils"><c- n>HTMLSharedStorageWritableElementUtils</c-></a>;

<c- b>partial</c-> <c- b>dictionary</c-> <a class="idl-code" data-link-type="dictionary" href="https://fetch.spec.whatwg.org/#requestinit"><c- g>RequestInit</c-></a> {
  <a class="idl-code" data-link-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean"><c- b>boolean</c-></a> <a data-type="boolean" href="#dom-requestinit-sharedstoragewritable"><code><c- g>sharedStorageWritable</c-></code></a>;
};

[
  <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=<c- n>SharedStorageWorklet</c->
] <c- b>interface</c-> <a href="#sharedstorageworkletnavigator"><code><c- g>SharedStorageWorkletNavigator</c-></code></a> {};

<a data-link-type="idl-name" href="#sharedstorageworkletnavigator"><c- n>SharedStorageWorkletNavigator</c-></a> <c- b>includes</c-> <a data-link-type="idl-name" href="https://w3c.github.io/web-locks/#navigatorlocks"><c- n>NavigatorLocks</c-></a>;

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#lockmanager"><code><c- g>LockManager</c-></code></a> {};

[<a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SecureContext"><c- g>SecureContext</c-></a>, <a class="idl-code" data-link-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed"><c- g>Exposed</c-></a>=(<c- n>Window</c->,<c- n>Worker</c->,<c- n>SharedStorageWorklet</c->)]
<c- b>interface</c-> <a href="#lock"><code><c- g>Lock</c-></code></a> {};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Consider adding an early return here if the permissions
    policy check is made first. <a class="issue-return" href="#issue-f3323737" title="Jump to section">↵</a></div>
   <div class="issue"> The "name" and "operationCtor" cannot be missing here given WebIDL. Should just check for default/empty values. <a href="https://github.com/WICG/shared-storage/issues/151">[Issue #151]</a> <a class="issue-return" href="#issue-ec8d9fc9" title="Jump to section">↵</a></div>
   <div class="issue"> <code class="idl"><a data-link-type="idl" href="#dom-sharedstorageurlwithmetadata-reportingmetadata">reportingMetadata</a></code> should be a <a data-link-type="dfn" href="https://webidl.spec.whatwg.org/#dfn-dictionary">dictionary</a>. <a href="https://github.com/WICG/shared-storage/issues/141">[Issue #141]</a> <a class="issue-return" href="#issue-3af1d5c1" title="Jump to section">↵</a></div>
   <div class="issue"> Store <var>reportingUrlMap</var> inside a <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#fencedframetype-fenced-frame-reporter">fenced frame reporter</a> class associated with <var>fencedFrameConfigStruct</var>. Both of these still need to be added to the draft <a data-link-type="biblio" href="#biblio-fenced-frame" title="Fenced Frame">[Fenced-Frame]</a>. <a href="https://github.com/WICG/shared-storage/issues/144">[Issue #144]</a> <a class="issue-return" href="#issue-451ee8b5" title="Jump to section">↵</a></div>
   <div class="issue"> Move the definition of <a data-link-type="dfn" href="#pending-shared-storage-budget-debit">pending shared storage budget debit</a> to <a data-link-type="dfn" href="https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance">fenced frame config instance</a> in the draft <a data-link-type="biblio" href="#biblio-fenced-frame" title="Fenced Frame">[Fenced-Frame]</a> specification. <a href="https://github.com/WICG/shared-storage/issues/148">[Issue #148]</a> <a class="issue-return" href="#issue-e3244203" title="Jump to section">↵</a></div>
   <div class="issue"> Need to find a better way to specify timing of the navigation budget charging. <a href="https://github.com/WICG/shared-storage/issues/138">[Issue #138]</a> <a class="issue-return" href="#issue-2c9003c1" title="Jump to section">↵</a></div>
   <div class="issue"> The <a data-link-type="dfn" href="#determine-whether-a-request-can-currently-use-shared-storage">determine whether a request can currently use shared storage</a> algorithm needs to take into account "opt-in features", as articulated in <a href="https://github.com/w3c/webappsec-permissions-policy/pull/499">https://github.com/w3c/webappsec-permissions-policy/pull/499</a>. <a class="issue-return" href="#issue-9d2a534a" title="Jump to section">↵</a></div>
  </div>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"00629322": {"dfnID":"00629322","dfnText":"set the aggregation coordinator for a batching scope","external":true,"refSections":[{"refs":[{"id":"ref-for-set-the-aggregation-coordinator-for-a-batching-scope"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-aggregation-coordinator-for-a-batching-scope"},
"0204d188": {"dfnID":"0204d188","dfnText":"size (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-size"},{"id":"ref-for-list-size\u2460"},{"id":"ref-for-list-size\u2461"},{"id":"ref-for-list-size\u2462"},{"id":"ref-for-list-size\u2463"},{"id":"ref-for-list-size\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-list-size\u2465"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-list-size\u2466"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-list-size\u2467"}],"title":"2.5. Entropy Budgets"},{"refs":[{"id":"ref-for-list-size\u2468"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-list-size\u2460\u24ea"}],"title":"6.3. BatchUpdate Method"}],"url":"https://infra.spec.whatwg.org/#list-size"},
"027e3e49": {"dfnID":"027e3e49","dfnText":"clone","external":true,"refSections":[{"refs":[{"id":"ref-for-list-clone"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"}],"url":"https://infra.spec.whatwg.org/#list-clone"},
"0303e8e5": {"dfnID":"0303e8e5","dfnText":"UTF-8 encode","external":true,"refSections":[{"refs":[{"id":"ref-for-utf-8-encode"},{"id":"ref-for-utf-8-encode\u2460"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"https://encoding.spec.whatwg.org/#utf-8-encode"},
"03afaf9c": {"dfnID":"03afaf9c","dfnText":"empty (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-empty"},{"id":"ref-for-list-empty\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-list-empty\u2461"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-list-empty\u2462"},{"id":"ref-for-list-empty\u2463"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-list-empty\u2464"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#list-empty"},
"04dc11d2": {"dfnID":"04dc11d2","dfnText":"token","external":true,"refSections":[{"refs":[{"id":"ref-for-token"},{"id":"ref-for-token\u2460"},{"id":"ref-for-token\u2461"},{"id":"ref-for-token\u2462"},{"id":"ref-for-token\u2463"},{"id":"ref-for-token\u2464"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-token\u2465"},{"id":"ref-for-token\u2466"},{"id":"ref-for-token\u2467"},{"id":"ref-for-token\u2468"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://httpwg.org/specs/rfc8941.html#token"},
"06799577": {"dfnID":"06799577","dfnText":"fenced frame config mapping","external":true,"refSections":[{"refs":[{"id":"ref-for-traversable-navigable-fenced-frame-config-mapping"},{"id":"ref-for-traversable-navigable-fenced-frame-config-mapping\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://wicg.github.io/fenced-frame/#traversable-navigable-fenced-frame-config-mapping"},
"0698d556": {"dfnID":"0698d556","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string"},{"id":"ref-for-string\u2460"},{"id":"ref-for-string\u2461"},{"id":"ref-for-string\u2462"},{"id":"ref-for-string\u2463"},{"id":"ref-for-string\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-string\u2465"},{"id":"ref-for-string\u2466"},{"id":"ref-for-string\u2467"},{"id":"ref-for-string\u2468"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-string\u2460\u24ea"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-string\u2460\u2460"},{"id":"ref-for-string\u2460\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-string\u2460\u2462"},{"id":"ref-for-string\u2460\u2463"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-string\u2460\u2464"},{"id":"ref-for-string\u2460\u2465"},{"id":"ref-for-string\u2460\u2466"},{"id":"ref-for-string\u2460\u2467"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-string\u2460\u2468"},{"id":"ref-for-string\u2461\u24ea"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-string\u2461\u2460"},{"id":"ref-for-string\u2461\u2461"},{"id":"ref-for-string\u2461\u2462"},{"id":"ref-for-string\u2461\u2463"},{"id":"ref-for-string\u2461\u2464"},{"id":"ref-for-string\u2461\u2465"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-string\u2461\u2466"}],"title":"9.3.1. `Sec-Shared-Storage-Data-Origin` Request Header"},{"refs":[{"id":"ref-for-string\u2462\u2465"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://infra.spec.whatwg.org/#string"},
"06a6db54": {"dfnID":"06a6db54","dfnText":"enqueue","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-enqueue"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-queue-enqueue\u2460"}],"title":"6.6. Iteration"}],"url":"https://infra.spec.whatwg.org/#queue-enqueue"},
"07260e9d": {"dfnID":"07260e9d","dfnText":"storage model","external":true,"refSections":[{"refs":[{"id":"ref-for-model"}],"title":"3. Shared Storage\u2019s Backend"},{"refs":[{"id":"ref-for-model\u2460"},{"id":"ref-for-model\u2461"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#model"},
"07ad3048": {"dfnID":"07ad3048","dfnText":"create navigation params by fetching","external":true,"refSections":[{"refs":[{"id":"ref-for-create-navigation-params-by-fetching"},{"id":"ref-for-create-navigation-params-by-fetching\u2460"}],"title":"8.2.2. Modification to Create navigation params by fetching Algorithm"}],"url":"https://html.spec.whatwg.org/multipage/browsing-the-web.html#create-navigation-params-by-fetching"},
"07d4a5a2": {"dfnID":"07d4a5a2","dfnText":"storage proxy map","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-proxy-map"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-storage-proxy-map\u2460"},{"id":"ref-for-storage-proxy-map\u2461"},{"id":"ref-for-storage-proxy-map\u2462"},{"id":"ref-for-storage-proxy-map\u2463"},{"id":"ref-for-storage-proxy-map\u2464"},{"id":"ref-for-storage-proxy-map\u2465"},{"id":"ref-for-storage-proxy-map\u2466"},{"id":"ref-for-storage-proxy-map\u2467"},{"id":"ref-for-storage-proxy-map\u2468"},{"id":"ref-for-storage-proxy-map\u2460\u24ea"},{"id":"ref-for-storage-proxy-map\u2460\u2460"},{"id":"ref-for-storage-proxy-map\u2460\u2461"},{"id":"ref-for-storage-proxy-map\u2460\u2462"}],"title":"3.3. The Database Algorithms"}],"url":"https://storage.spec.whatwg.org/#storage-proxy-map"},
"085ddd0a": {"dfnID":"085ddd0a","dfnText":"target browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-environment-target-browsing-context"},{"id":"ref-for-concept-environment-target-browsing-context\u2460"},{"id":"ref-for-concept-environment-target-browsing-context\u2461"},{"id":"ref-for-concept-environment-target-browsing-context\u2462"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-concept-environment-target-browsing-context\u2463"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-concept-environment-target-browsing-context\u2464"},{"id":"ref-for-concept-environment-target-browsing-context\u2465"},{"id":"ref-for-concept-environment-target-browsing-context\u2466"},{"id":"ref-for-concept-environment-target-browsing-context\u2467"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-concept-environment-target-browsing-context\u2468"},{"id":"ref-for-concept-environment-target-browsing-context\u2460\u24ea"},{"id":"ref-for-concept-environment-target-browsing-context\u2460\u2460"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-concept-environment-target-browsing-context\u2460\u2461"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context"},
"086e3aff": {"dfnID":"086e3aff","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-origin"},{"id":"ref-for-concept-origin\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-origin\u2461"},{"id":"ref-for-concept-origin\u2462"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-concept-origin\u2463"},{"id":"ref-for-concept-origin\u2464"},{"id":"ref-for-concept-origin\u2465"},{"id":"ref-for-concept-origin\u2466"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-concept-origin\u2467"},{"id":"ref-for-concept-origin\u2468"},{"id":"ref-for-concept-origin\u2460\u24ea"},{"id":"ref-for-concept-origin\u2460\u2460"},{"id":"ref-for-concept-origin\u2460\u2461"},{"id":"ref-for-concept-origin\u2460\u2462"},{"id":"ref-for-concept-origin\u2460\u2463"},{"id":"ref-for-concept-origin\u2460\u2464"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-concept-origin\u2460\u2465"}],"title":"10.1. User Agent Associated State"},{"refs":[{"id":"ref-for-concept-origin\u2460\u2466"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"},
"08b51e40": {"dfnID":"08b51e40","dfnText":"processResponseConsumeBody","external":true,"refSections":[{"refs":[{"id":"ref-for-process-response-end-of-body"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#process-response-end-of-body"},
"0ad0fd9b": {"dfnID":"0ad0fd9b","dfnText":"proxy map reference set","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-bottle-proxy-map-reference-set"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-bottle-proxy-map-reference-set"},
"0c444cb5": {"dfnID":"0c444cb5","dfnText":"added modules list","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-worklet-added-modules-list"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-added-modules-list"},
"0c9b0d3c": {"dfnID":"0c9b0d3c","dfnText":"WorkletGlobalScope","external":true,"refSections":[{"refs":[{"id":"ref-for-workletglobalscope"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope"},
"0d0390b4": {"dfnID":"0d0390b4","dfnText":"browsing context","external":true,"refSections":[{"refs":[{"id":"ref-for-browsing-context"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-browsing-context\u2460"},{"id":"ref-for-browsing-context\u2461"}],"title":"3.2. The Shared Storage Database"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context"},
"0dcd4ad9": {"dfnID":"0dcd4ad9","dfnText":"RequestInit","external":true,"refSections":[{"refs":[{"id":"ref-for-requestinit"},{"id":"ref-for-requestinit\u2460"}],"title":"9.1. sharedStorageWritable Key"}],"url":"https://fetch.spec.whatwg.org/#requestinit"},
"0e3ba9f8": {"dfnID":"0e3ba9f8","dfnText":"fully active","external":true,"refSections":[{"refs":[{"id":"ref-for-fully-active"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-fully-active\u2460"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-fully-active\u2461"}],"title":"4. Extension to the Window interface"},{"refs":[{"id":"ref-for-fully-active\u2462"},{"id":"ref-for-fully-active\u2463"},{"id":"ref-for-fully-active\u2464"},{"id":"ref-for-fully-active\u2465"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-fully-active\u2466"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-fully-active\u2467"},{"id":"ref-for-fully-active\u2468"},{"id":"ref-for-fully-active\u2460\u24ea"},{"id":"ref-for-fully-active\u2460\u2460"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-fully-active\u2460\u2461"},{"id":"ref-for-fully-active\u2460\u2462"},{"id":"ref-for-fully-active\u2460\u2463"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-fully-active\u2460\u2464"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"0e6b2056": {"dfnID":"0e6b2056","dfnText":"set","external":true,"refSections":[{"refs":[{"id":"ref-for-map-set"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-map-set\u2460"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-map-set\u2461"},{"id":"ref-for-map-set\u2462"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-map-set\u2463"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-map-set\u2464"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-map-set\u2465"},{"id":"ref-for-map-set\u2466"},{"id":"ref-for-map-set\u2467"},{"id":"ref-for-map-set\u2468"},{"id":"ref-for-map-set\u2460\u24ea"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-set"},
"0e8de730": {"dfnID":"0e8de730","dfnText":"tuple","external":true,"refSections":[{"refs":[{"id":"ref-for-tuple"},{"id":"ref-for-tuple\u2460"},{"id":"ref-for-tuple\u2461"},{"id":"ref-for-tuple\u2462"},{"id":"ref-for-tuple\u2463"},{"id":"ref-for-tuple\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-tuple\u2465"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"}],"url":"https://infra.spec.whatwg.org/#tuple"},
"0e9f636b": {"dfnID":"0e9f636b","dfnText":"DOMHighResTimeStamp","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-domhighrestimestamp"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-dom-domhighrestimestamp\u2460"}],"title":"3.2. The Shared Storage Database"}],"url":"https://w3c.github.io/hr-time/#dom-domhighrestimestamp"},
"0fa357c3": {"dfnID":"0fa357c3","dfnText":"length","external":true,"refSections":[{"refs":[{"id":"ref-for-string-length"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-string-length\u2460"},{"id":"ref-for-string-length\u2461"},{"id":"ref-for-string-length\u2462"},{"id":"ref-for-string-length\u2463"},{"id":"ref-for-string-length\u2464"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-string-length\u2465"},{"id":"ref-for-string-length\u2466"},{"id":"ref-for-string-length\u2467"},{"id":"ref-for-string-length\u2468"},{"id":"ref-for-string-length\u2460\u24ea"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-string-length\u2460\u2460"}],"title":"6.5. Getter Methods"}],"url":"https://infra.spec.whatwg.org/#string-length"},
"0faaf773": {"dfnID":"0faaf773","dfnText":"get batching scope steps","external":true,"refSections":[{"refs":[{"id":"ref-for-get-batching-scope-steps"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-batching-scope-steps"},
"1014b9fc": {"dfnID":"1014b9fc","dfnText":"serialization","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-serialisation-of-an-origin"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin"},
"101c721c": {"dfnID":"101c721c","dfnText":"active window","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-window"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-nav-window\u2460"},{"id":"ref-for-nav-window\u2461"},{"id":"ref-for-nav-window\u2462"},{"id":"ref-for-nav-window\u2463"},{"id":"ref-for-nav-window\u2464"},{"id":"ref-for-nav-window\u2465"},{"id":"ref-for-nav-window\u2466"},{"id":"ref-for-nav-window\u2467"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-nav-window\u2468"},{"id":"ref-for-nav-window\u2460\u24ea"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-nav-window\u2460\u2460"},{"id":"ref-for-nav-window\u2460\u2461"},{"id":"ref-for-nav-window\u2460\u2462"},{"id":"ref-for-nav-window\u2460\u2463"},{"id":"ref-for-nav-window\u2460\u2464"},{"id":"ref-for-nav-window\u2460\u2465"},{"id":"ref-for-nav-window\u2460\u2466"},{"id":"ref-for-nav-window\u2460\u2467"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-nav-window\u2460\u2468"},{"id":"ref-for-nav-window\u2461\u24ea"},{"id":"ref-for-nav-window\u2461\u2460"},{"id":"ref-for-nav-window\u2461\u2461"},{"id":"ref-for-nav-window\u2461\u2462"},{"id":"ref-for-nav-window\u2461\u2463"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-nav-window\u2461\u2464"},{"id":"ref-for-nav-window\u2461\u2465"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window"},
"102df61f": {"dfnID":"102df61f","dfnText":"enqueue the following steps","external":true,"refSections":[{"refs":[{"id":"ref-for-enqueue-the-following-steps"},{"id":"ref-for-enqueue-the-following-steps\u2460"},{"id":"ref-for-enqueue-the-following-steps\u2461"},{"id":"ref-for-enqueue-the-following-steps\u2462"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-enqueue-the-following-steps\u2463"},{"id":"ref-for-enqueue-the-following-steps\u2464"},{"id":"ref-for-enqueue-the-following-steps\u2465"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-enqueue-the-following-steps\u2466"},{"id":"ref-for-enqueue-the-following-steps\u2467"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"},
"10ce5f6f": {"dfnID":"10ce5f6f","dfnText":"invoke","external":true,"refSections":[{"refs":[{"id":"ref-for-invoke-a-callback-function"},{"id":"ref-for-invoke-a-callback-function\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://webidl.spec.whatwg.org/#invoke-a-callback-function"},
"10e25f42": {"dfnID":"10e25f42","dfnText":"HTMLIFrameElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmliframeelement"},{"id":"ref-for-htmliframeelement\u2460"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"},
"11f367b8": {"dfnID":"11f367b8","dfnText":"async iterator","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-async-iterable"},{"id":"ref-for-idl-async-iterable\u2460"},{"id":"ref-for-idl-async-iterable\u2461"},{"id":"ref-for-idl-async-iterable\u2462"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org#idl-async-iterable"},
"1243a891": {"dfnID":"1243a891","dfnText":"exist","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"},{"id":"ref-for-map-exists\u2460"},{"id":"ref-for-map-exists\u2461"},{"id":"ref-for-map-exists\u2462"},{"id":"ref-for-map-exists\u2463"},{"id":"ref-for-map-exists\u2464"},{"id":"ref-for-map-exists\u2465"},{"id":"ref-for-map-exists\u2466"},{"id":"ref-for-map-exists\u2467"},{"id":"ref-for-map-exists\u2468"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-map-exists\u2460\u24ea"},{"id":"ref-for-map-exists\u2460\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-map-exists\u2460\u2461"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-map-exists\u2460\u2462"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-map-exists\u2460\u2463"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-map-exists\u2460\u2464"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-map-exists\u2460\u2465"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-map-exists\u2460\u2466"},{"id":"ref-for-map-exists\u2460\u2467"},{"id":"ref-for-map-exists\u2460\u2468"},{"id":"ref-for-map-exists\u2461\u24ea"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-map-exists\u2461\u2460"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-map-exists\u2461\u2461"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-map-exists\u2461\u2462"},{"id":"ref-for-map-exists\u2461\u2463"},{"id":"ref-for-map-exists\u2461\u2464"},{"id":"ref-for-map-exists\u2461\u2465"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-map-exists\u2461\u2466"}],"title":"9.2.1. Modification to the Request Constructor Algorithm"},{"refs":[{"id":"ref-for-map-exists\u2461\u2467"},{"id":"ref-for-map-exists\u2461\u2468"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"12b8dfc0": {"dfnID":"12b8dfc0","dfnText":"current settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-current-settings-object"},{"id":"ref-for-current-settings-object\u2460"},{"id":"ref-for-current-settings-object\u2461"},{"id":"ref-for-current-settings-object\u2462"}],"title":"2. The SharedStorageWorklet Interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object"},
"12d6b9a8": {"dfnID":"12d6b9a8","dfnText":"values","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-values"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-map-getting-the-values\u2460"}],"title":"3.3. The Database Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-values"},
"13dd6cae": {"dfnID":"13dd6cae","dfnText":"node navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-node-navigable"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-node-navigable\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"},
"1422ec4e": {"dfnID":"1422ec4e","dfnText":"interface","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-interface"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://webidl.spec.whatwg.org/#dfn-interface"},
"162d2b51": {"dfnID":"162d2b51","dfnText":"request (for Request)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-request"}],"title":"8.2.2. Modification to Create navigation params by fetching Algorithm"},{"refs":[{"id":"ref-for-concept-request-request\u2460"}],"title":"9.2.1. Modification to the Request Constructor Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-request-request"},
"168f1b6e": {"dfnID":"168f1b6e","dfnText":"global object (for realm)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-realm-global"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-realm-global\u2460"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-concept-realm-global\u2461"},{"id":"ref-for-concept-realm-global\u2462"},{"id":"ref-for-concept-realm-global\u2463"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-concept-realm-global\u2464"},{"id":"ref-for-concept-realm-global\u2465"},{"id":"ref-for-concept-realm-global\u2466"},{"id":"ref-for-concept-realm-global\u2467"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-concept-realm-global\u2468"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-concept-realm-global\u2460\u24ea"},{"id":"ref-for-concept-realm-global\u2460\u2460"},{"id":"ref-for-concept-realm-global\u2460\u2461"},{"id":"ref-for-concept-realm-global\u2460\u2462"},{"id":"ref-for-concept-realm-global\u2460\u2463"},{"id":"ref-for-concept-realm-global\u2460\u2464"},{"id":"ref-for-concept-realm-global\u2460\u2465"},{"id":"ref-for-concept-realm-global\u2460\u2466"},{"id":"ref-for-concept-realm-global\u2460\u2467"},{"id":"ref-for-concept-realm-global\u2460\u2468"},{"id":"ref-for-concept-realm-global\u2461\u24ea"},{"id":"ref-for-concept-realm-global\u2461\u2460"},{"id":"ref-for-concept-realm-global\u2461\u2461"},{"id":"ref-for-concept-realm-global\u2461\u2462"},{"id":"ref-for-concept-realm-global\u2461\u2463"},{"id":"ref-for-concept-realm-global\u2461\u2464"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-concept-realm-global\u2461\u2465"},{"id":"ref-for-concept-realm-global\u2461\u2466"},{"id":"ref-for-concept-realm-global\u2461\u2467"},{"id":"ref-for-concept-realm-global\u2461\u2468"},{"id":"ref-for-concept-realm-global\u2462\u24ea"},{"id":"ref-for-concept-realm-global\u2462\u2460"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-concept-realm-global\u2462\u2461"},{"id":"ref-for-concept-realm-global\u2462\u2462"},{"id":"ref-for-concept-realm-global\u2462\u2463"},{"id":"ref-for-concept-realm-global\u2462\u2464"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-concept-realm-global\u2462\u2465"},{"id":"ref-for-concept-realm-global\u2462\u2466"},{"id":"ref-for-concept-realm-global\u2462\u2467"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"},{"refs":[{"id":"ref-for-concept-realm-global\u2462\u2468"}],"title":"10.5. Monkey Patch for the \"obtain a lock manager\" algorithm"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global"},
"16ebb1f5": {"dfnID":"16ebb1f5","dfnText":"fenced frame reporter","external":true,"refSections":[{"refs":[{"id":"ref-for-fencedframetype-fenced-frame-reporter"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://wicg.github.io/fenced-frame/#fencedframetype-fenced-frame-reporter"},
"17582406": {"dfnID":"17582406","dfnText":"traversable navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-traversable"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-nav-traversable\u2460"},{"id":"ref-for-nav-traversable\u2461"}],"title":"2.5.2.1. Monkey patch for Traversable Navigables"},{"refs":[{"id":"ref-for-nav-traversable\u2462"}],"title":"2.5.2.2. Monkey patch for Navigables"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-traversable"},
"192e00bf": {"dfnID":"192e00bf","dfnText":"Get","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-get-o-p"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://tc39.es/ecma262/#sec-get-o-p"},
"1ab127d6": {"dfnID":"1ab127d6","dfnText":"window","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-window"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-request-window\u2460"},{"id":"ref-for-concept-request-window\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-request-window"},
"1bba3db7": {"dfnID":"1bba3db7","dfnText":"parent","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-parent"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent"},
"1c3d02e8": {"dfnID":"1c3d02e8","dfnText":"filtering ID max bytes","external":true,"refSections":[{"refs":[{"id":"ref-for-filtering-id-max-bytes"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#filtering-id-max-bytes"},
"1cc25024": {"dfnID":"1cc25024","dfnText":"set up a worklet environment settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-set-up-a-worklet-environment-settings-object"},{"id":"ref-for-set-up-a-worklet-environment-settings-object\u2460"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-set-up-a-worklet-environment-settings-object\u2461"}],"title":"2.2.2. Monkey Patch for create a worklet global scope"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object"},
"1fc2b625": {"dfnID":"1fc2b625","dfnText":"construct","external":true,"refSections":[{"refs":[{"id":"ref-for-construct-a-callback-function"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://webidl.spec.whatwg.org/#construct-a-callback-function"},
"24bd7d25": {"dfnID":"24bd7d25","dfnText":"upon fulfillment","external":true,"refSections":[{"refs":[{"id":"ref-for-upon-fulfillment"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-upon-fulfillment\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-upon-fulfillment\u2461"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-upon-fulfillment\u2462"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-upon-fulfillment\u2463"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org/#upon-fulfillment"},
"24cf98a1": {"dfnID":"24cf98a1","dfnText":"environment","external":true,"refSections":[{"refs":[{"id":"ref-for-environment"}],"title":"6. The SharedStorage Interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment"},
"24f2f8da": {"dfnID":"24f2f8da","dfnText":"FencedFrameConfig","external":true,"refSections":[{"refs":[{"id":"ref-for-fencedframeconfig"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-fencedframeconfig\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://wicg.github.io/fenced-frame/#fencedframeconfig"},
"2594e562": {"dfnID":"2594e562","dfnText":"navigate","external":true,"refSections":[{"refs":[{"id":"ref-for-navigate"},{"id":"ref-for-navigate\u2460"},{"id":"ref-for-navigate\u2461"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-navigate\u2462"}],"title":"13. Privacy Considerations"}],"url":"https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate"},
"26e17e58": {"dfnID":"26e17e58","dfnText":"scoping details (for PrivateAggregation)","external":true,"refSections":[{"refs":[{"id":"ref-for-privateaggregation-scoping-details"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation-scoping-details"},
"26e4aa12": {"dfnID":"26e4aa12","dfnText":"agent","external":true,"refSections":[{"refs":[{"id":"ref-for-agent"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://tc39.github.io/ecma262/#agent"},
"2879c404": {"dfnID":"2879c404","dfnText":"Worklet","external":true,"refSections":[{"refs":[{"id":"ref-for-worklet"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-worklet\u2460"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-worklet\u2461"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#worklet"},
"289407ea": {"dfnID":"289407ea","dfnText":"get the top-level traversable","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-top\u2460\u24ea"},{"id":"ref-for-nav-top\u2460\u2460"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-nav-top\u2460\u2462"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#nav-top"},
"2aaa2f42": {"dfnID":"2aaa2f42","dfnText":"HTTP fetch","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-http-fetch"},{"id":"ref-for-concept-http-fetch\u2460"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-concept-http-fetch\u2461"},{"id":"ref-for-concept-http-fetch\u2462"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-http-fetch"},
"2c2acc57": {"dfnID":"2c2acc57","dfnText":"http network or cache fetch","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-http-network-or-cache-fetch"},{"id":"ref-for-concept-http-network-or-cache-fetch\u2460"}],"title":"9.2.2. Modification to HTTP network or cache fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch"},
"2c680d8a": {"dfnID":"2c680d8a","dfnText":"bare item","external":true,"refSections":[{"refs":[{"id":"ref-for-item"},{"id":"ref-for-item\u2460"},{"id":"ref-for-item\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://httpwg.org/specs/rfc8941.html#item"},
"2c8f3d9c": {"dfnID":"2c8f3d9c","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-appendmode-sequence"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dom-appendmode-sequence\u2460"},{"id":"ref-for-dom-appendmode-sequence\u2461"}],"title":"2.5. Entropy Budgets"}],"url":"https://w3c.github.io/media-source/#dom-appendmode-sequence"},
"2d1d761a": {"dfnID":"2d1d761a","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list\u2460\u24ea"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"https://httpwg.org/specs/rfc8941.html#list"},
"2d5a2765": {"dfnID":"2d5a2765","dfnText":"ASCII string","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-string"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#ascii-string"},
"2eb97c74": {"dfnID":"2eb97c74","dfnText":"storage type","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-type"},{"id":"ref-for-storage-type\u2460"},{"id":"ref-for-storage-type\u2461"},{"id":"ref-for-storage-type\u2462"},{"id":"ref-for-storage-type\u2463"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-type"},
"2efaa6ee": {"dfnID":"2efaa6ee","dfnText":"beacon","external":true,"refSections":[{"refs":[{"id":"ref-for-beacon"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://w3c.github.io/beacon/#beacon"},
"2f9091c7": {"dfnID":"2f9091c7","dfnText":"Private Aggregation","external":true,"refSections":[{"refs":[{"id":"ref-for-something"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-something\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-something\u2461"}],"title":"13. Privacy Considerations"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#"},
"2fa84525": {"dfnID":"2fa84525","dfnText":"initialize the navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-initialize-the-navigable"}],"title":"2.5.2.2. Monkey patch for Navigables"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#initialize-the-navigable"},
"3018e13f": {"dfnID":"3018e13f","dfnText":"fetch a worklet script graph","external":true,"refSections":[{"refs":[{"id":"ref-for-fetch-a-worklet-script-graph"},{"id":"ref-for-fetch-a-worklet-script-graph\u2460"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#fetch-a-worklet-script-graph"},
"30298a68": {"dfnID":"30298a68","dfnText":"NavigatorLocks","external":true,"refSections":[{"refs":[{"id":"ref-for-navigatorlocks"},{"id":"ref-for-navigatorlocks\u2460"}],"title":"10.3. Web Locks IDLs Monkey Patches"}],"url":"https://w3c.github.io/web-locks/#navigatorlocks"},
"30717154": {"dfnID":"30717154","dfnText":"top-level traversable","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-top"},{"id":"ref-for-nav-top\u2460"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-nav-top\u2461"},{"id":"ref-for-nav-top\u2462"},{"id":"ref-for-nav-top\u2463"},{"id":"ref-for-nav-top\u2464"},{"id":"ref-for-nav-top\u2465"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-nav-top\u2466"},{"id":"ref-for-nav-top\u2467"},{"id":"ref-for-nav-top\u2468"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-nav-top\u2460\u2461"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-nav-top\u2460\u2463"}],"title":"13. Privacy Considerations"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"},
"31db57e6": {"dfnID":"31db57e6","dfnText":"keys","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-keys"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-map-getting-the-keys\u2460"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-keys"},
"3349d69f": {"dfnID":"3349d69f","dfnText":"associated Document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-window"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-document-window\u2460"},{"id":"ref-for-concept-document-window\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-concept-document-window\u2462"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-document-window\u2463"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-concept-document-window\u2464"},{"id":"ref-for-concept-document-window\u2465"},{"id":"ref-for-concept-document-window\u2466"},{"id":"ref-for-concept-document-window\u2467"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-concept-document-window\u2468"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-concept-document-window\u2460\u24ea"},{"id":"ref-for-concept-document-window\u2460\u2460"},{"id":"ref-for-concept-document-window\u2460\u2461"},{"id":"ref-for-concept-document-window\u2460\u2462"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-concept-document-window\u2460\u2463"},{"id":"ref-for-concept-document-window\u2460\u2464"},{"id":"ref-for-concept-document-window\u2460\u2465"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-concept-document-window\u2460\u2466"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"358f1dbd": {"dfnID":"358f1dbd","dfnText":"referrer","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-referrer"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#concept-request-referrer"},
"35972864": {"dfnID":"35972864","dfnText":"active document","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-document"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-nav-document\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"35b98f13": {"dfnID":"35b98f13","dfnText":"set a structured field value","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-list-set-structured-header"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-header-list-set-structured-header"},
"3610bd67": {"dfnID":"3610bd67","dfnText":"allowed to use","external":true,"refSections":[{"refs":[{"id":"ref-for-allowed-to-use\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"},
"36858240": {"dfnID":"36858240","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-boolean"},{"id":"ref-for-boolean\u2460"},{"id":"ref-for-boolean\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-boolean\u2462"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-boolean\u2463"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-boolean\u2464"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-boolean\u2465"}],"title":"9.1. sharedStorageWritable Key"}],"url":"https://infra.spec.whatwg.org/#boolean"},
"36a75887": {"dfnID":"36a75887","dfnText":"extracting a MIME type","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-extract-mime-type"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#concept-header-extract-mime-type"},
"373e0775": {"dfnID":"373e0775","dfnText":"pre-specified report parameters","external":true,"refSections":[{"refs":[{"id":"ref-for-pre-specified-report-parameters"},{"id":"ref-for-pre-specified-report-parameters\u2460"},{"id":"ref-for-pre-specified-report-parameters\u2461"},{"id":"ref-for-pre-specified-report-parameters\u2462"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#pre-specified-report-parameters"},
"375247ce": {"dfnID":"375247ce","dfnText":"byte sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-binary"},{"id":"ref-for-binary\u2460"},{"id":"ref-for-binary\u2461"},{"id":"ref-for-binary\u2462"},{"id":"ref-for-binary\u2463"},{"id":"ref-for-binary\u2464"},{"id":"ref-for-binary\u2465"},{"id":"ref-for-binary\u2466"},{"id":"ref-for-binary\u2467"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-binary\u2468"},{"id":"ref-for-binary\u2460\u24ea"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://httpwg.org/specs/rfc8941.html#binary"},
"375981d1": {"dfnID":"375981d1","dfnText":"Web IDL Standard","external":true,"refSections":[{"refs":[{"id":"ref-for-introduction"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org#introduction"},
"3ae34c95": {"dfnID":"3ae34c95","dfnText":"destination","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-destination"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-request-destination\u2460"},{"id":"ref-for-concept-request-destination\u2461"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-concept-request-destination\u2462"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-request-destination"},
"3aec4bbc": {"dfnID":"3aec4bbc","dfnText":"current realm","external":true,"refSections":[{"refs":[{"id":"ref-for-current-realm"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-current-realm\u2460"},{"id":"ref-for-current-realm\u2461"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-current-realm\u2462"},{"id":"ref-for-current-realm\u2463"},{"id":"ref-for-current-realm\u2464"},{"id":"ref-for-current-realm\u2465"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-current-realm\u2466"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-current-realm\u2467"},{"id":"ref-for-current-realm\u2468"},{"id":"ref-for-current-realm\u2460\u24ea"},{"id":"ref-for-current-realm\u2460\u2460"},{"id":"ref-for-current-realm\u2460\u2461"},{"id":"ref-for-current-realm\u2460\u2462"},{"id":"ref-for-current-realm\u2460\u2463"},{"id":"ref-for-current-realm\u2460\u2464"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-current-realm\u2460\u2465"},{"id":"ref-for-current-realm\u2460\u2466"},{"id":"ref-for-current-realm\u2460\u2467"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-current-realm\u2460\u2468"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-current-realm\u2461\u24ea"}],"title":"10.5. Monkey Patch for the \"obtain a lock manager\" algorithm"}],"url":"https://tc39.es/ecma262/#current-realm"},
"3b2ff63e": {"dfnID":"3b2ff63e","dfnText":"browsing context (for Document)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-bc"},{"id":"ref-for-concept-document-bc\u2460"},{"id":"ref-for-concept-document-bc\u2461"},{"id":"ref-for-concept-document-bc\u2462"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc"},
"3b8ce5a6": {"dfnID":"3b8ce5a6","dfnText":"worklet global scope type","external":true,"refSections":[{"refs":[{"id":"ref-for-worklet-global-scope-type"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-worklet-global-scope-type\u2460"}],"title":"2.3. The SharedStorageWorkletGlobalScope"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type"},
"3b90bdcd": {"dfnID":"3b90bdcd","dfnText":"resolve","external":true,"refSections":[{"refs":[{"id":"ref-for-resolve"},{"id":"ref-for-resolve\u2460"},{"id":"ref-for-resolve\u2461"},{"id":"ref-for-resolve\u2462"},{"id":"ref-for-resolve\u2463"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-resolve\u2464"},{"id":"ref-for-resolve\u2465"},{"id":"ref-for-resolve\u2466"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-resolve\u2467"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-resolve\u2468"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-resolve\u2460\u24ea"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-resolve\u2460\u2460"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-resolve\u2460\u2461"},{"id":"ref-for-resolve\u2460\u2462"},{"id":"ref-for-resolve\u2460\u2463"},{"id":"ref-for-resolve\u2460\u2464"},{"id":"ref-for-resolve\u2460\u2465"},{"id":"ref-for-resolve\u2460\u2466"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-resolve\u2460\u2467"},{"id":"ref-for-resolve\u2460\u2468"},{"id":"ref-for-resolve\u2461\u24ea"},{"id":"ref-for-resolve\u2461\u2460"},{"id":"ref-for-resolve\u2461\u2461"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-resolve\u2461\u2462"},{"id":"ref-for-resolve\u2461\u2463"},{"id":"ref-for-resolve\u2461\u2464"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org/#resolve"},
"3d27c731": {"dfnID":"3d27c731","dfnText":"get the privateAggregation","external":true,"refSections":[{"refs":[{"id":"ref-for-get-the-privateaggregation"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-the-privateaggregation"},
"3de9e659": {"dfnID":"3de9e659","dfnText":"byte sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-byte-sequence"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://infra.spec.whatwg.org/#byte-sequence"},
"3e12e042": {"dfnID":"3e12e042","dfnText":"environment settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-environment-settings-object"},{"id":"ref-for-environment-settings-object\u2460"},{"id":"ref-for-environment-settings-object\u2461"},{"id":"ref-for-environment-settings-object\u2462"},{"id":"ref-for-environment-settings-object\u2463"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-environment-settings-object\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-environment-settings-object\u2465"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-environment-settings-object\u2466"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-environment-settings-object\u2467"},{"id":"ref-for-environment-settings-object\u2468"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-environment-settings-object\u2460\u24ea"},{"id":"ref-for-environment-settings-object\u2460\u2460"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-environment-settings-object\u2460\u2461"},{"id":"ref-for-environment-settings-object\u2460\u2462"},{"id":"ref-for-environment-settings-object\u2460\u2463"},{"id":"ref-for-environment-settings-object\u2460\u2464"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-environment-settings-object\u2460\u2465"},{"id":"ref-for-environment-settings-object\u2460\u2466"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"},
"3e180d35": {"dfnID":"3e180d35","dfnText":"associated realm","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-associated-realm"},{"id":"ref-for-dfn-associated-realm\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://webidl.spec.whatwg.org/#dfn-associated-realm"},
"3e6a4683": {"dfnID":"3e6a4683","dfnText":"worklets","external":true,"refSections":[{"refs":[{"id":"ref-for-worklets"},{"id":"ref-for-worklets\u2460"}],"title":"2.2. Monkey Patch for Worklets"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#worklets"},
"3f2ca4de": {"dfnID":"3f2ca4de","dfnText":"current URL","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-current-url"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-request-current-url\u2460"},{"id":"ref-for-concept-request-current-url\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-request-current-url"},
"3fca5a9e": {"dfnID":"3fca5a9e","dfnText":"map","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-map"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-ordered-map\u2460"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-ordered-map\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-ordered-map\u2462"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-ordered-map\u2463"},{"id":"ref-for-ordered-map\u2464"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-ordered-map\u2465"},{"id":"ref-for-ordered-map\u2466"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-ordered-map\u2467"}],"title":"10.1. User Agent Associated State"}],"url":"https://infra.spec.whatwg.org/#ordered-map"},
"4013a022": {"dfnID":"4013a022","dfnText":"this","external":true,"refSections":[{"refs":[{"id":"ref-for-this"},{"id":"ref-for-this\u2460"},{"id":"ref-for-this\u2461"},{"id":"ref-for-this\u2462"},{"id":"ref-for-this\u2463"},{"id":"ref-for-this\u2464"},{"id":"ref-for-this\u2465"},{"id":"ref-for-this\u2466"},{"id":"ref-for-this\u2467"},{"id":"ref-for-this\u2468"},{"id":"ref-for-this\u2460\u24ea"},{"id":"ref-for-this\u2460\u2460"},{"id":"ref-for-this\u2460\u2461"},{"id":"ref-for-this\u2460\u2462"},{"id":"ref-for-this\u2460\u2463"},{"id":"ref-for-this\u2460\u2464"},{"id":"ref-for-this\u2460\u2465"},{"id":"ref-for-this\u2460\u2466"},{"id":"ref-for-this\u2460\u2467"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-this\u2460\u2468"},{"id":"ref-for-this\u2461\u24ea"},{"id":"ref-for-this\u2461\u2460"},{"id":"ref-for-this\u2461\u2461"},{"id":"ref-for-this\u2461\u2462"},{"id":"ref-for-this\u2461\u2463"},{"id":"ref-for-this\u2461\u2464"},{"id":"ref-for-this\u2461\u2465"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-this\u2461\u2466"},{"id":"ref-for-this\u2461\u2467"},{"id":"ref-for-this\u2461\u2468"},{"id":"ref-for-this\u2462\u24ea"},{"id":"ref-for-this\u2462\u2460"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-this\u2462\u2461"},{"id":"ref-for-this\u2462\u2462"}],"title":"4. Extension to the Window interface"},{"refs":[{"id":"ref-for-this\u2462\u2463"},{"id":"ref-for-this\u2462\u2464"},{"id":"ref-for-this\u2462\u2465"},{"id":"ref-for-this\u2462\u2466"},{"id":"ref-for-this\u2462\u2467"},{"id":"ref-for-this\u2462\u2468"},{"id":"ref-for-this\u2463\u24ea"},{"id":"ref-for-this\u2463\u2460"},{"id":"ref-for-this\u2463\u2461"},{"id":"ref-for-this\u2463\u2462"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-this\u2463\u2463"},{"id":"ref-for-this\u2463\u2464"}],"title":"6.1. Run Operation Methods on SharedStorage"},{"refs":[{"id":"ref-for-this\u2463\u2465"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://webidl.spec.whatwg.org/#this"},
"402ed79d": {"dfnID":"402ed79d","dfnText":"CEReactions","external":true,"refSections":[{"refs":[{"id":"ref-for-cereactions"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"409d0c03": {"dfnID":"409d0c03","dfnText":"private-aggregation","external":true,"refSections":[{"refs":[{"id":"ref-for-private-aggregation"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#private-aggregation"},
"42c69559": {"dfnID":"42c69559","dfnText":"mode","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-lockoptions-mode"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://w3c.github.io/web-locks/#dom-lockoptions-mode"},
"43ac8374": {"dfnID":"43ac8374","dfnText":"origin (for environment settings object)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-settings-object-origin"},{"id":"ref-for-concept-settings-object-origin\u2460"},{"id":"ref-for-concept-settings-object-origin\u2461"},{"id":"ref-for-concept-settings-object-origin\u2462"},{"id":"ref-for-concept-settings-object-origin\u2463"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2464"},{"id":"ref-for-concept-settings-object-origin\u2465"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2466"},{"id":"ref-for-concept-settings-object-origin\u2467"},{"id":"ref-for-concept-settings-object-origin\u2468"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2460\u24ea"},{"id":"ref-for-concept-settings-object-origin\u2460\u2460"},{"id":"ref-for-concept-settings-object-origin\u2460\u2461"},{"id":"ref-for-concept-settings-object-origin\u2460\u2462"},{"id":"ref-for-concept-settings-object-origin\u2460\u2463"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2460\u2464"}],"title":"2.2.4. The `Shared-Storage-Cross-Origin-Worklet-Allowed` HTTP response header"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2460\u2465"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2460\u2466"},{"id":"ref-for-concept-settings-object-origin\u2460\u2467"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2460\u2468"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2461\u24ea"},{"id":"ref-for-concept-settings-object-origin\u2461\u2460"},{"id":"ref-for-concept-settings-object-origin\u2461\u2461"},{"id":"ref-for-concept-settings-object-origin\u2461\u2462"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2461\u2463"},{"id":"ref-for-concept-settings-object-origin\u2461\u2464"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2461\u2465"},{"id":"ref-for-concept-settings-object-origin\u2461\u2466"},{"id":"ref-for-concept-settings-object-origin\u2461\u2467"},{"id":"ref-for-concept-settings-object-origin\u2461\u2468"},{"id":"ref-for-concept-settings-object-origin\u2462\u24ea"},{"id":"ref-for-concept-settings-object-origin\u2462\u2460"},{"id":"ref-for-concept-settings-object-origin\u2462\u2461"},{"id":"ref-for-concept-settings-object-origin\u2462\u2462"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2462\u2463"},{"id":"ref-for-concept-settings-object-origin\u2462\u2464"},{"id":"ref-for-concept-settings-object-origin\u2462\u2465"},{"id":"ref-for-concept-settings-object-origin\u2462\u2466"},{"id":"ref-for-concept-settings-object-origin\u2462\u2467"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2462\u2468"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-concept-settings-object-origin\u2463\u24ea"}],"title":"10.5. Monkey Patch for the \"obtain a lock manager\" algorithm"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin"},
"47a2271a": {"dfnID":"47a2271a","dfnText":"Is feature enabled in document for origin?","external":true,"refSections":[{"refs":[{"id":"ref-for-algo-is-feature-enabled"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-algo-is-feature-enabled\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://www.w3.org/TR/permissions-policy/#algo-is-feature-enabled"},
"47a5f7a3": {"dfnID":"47a5f7a3","dfnText":"WorkletOptions","external":true,"refSections":[{"refs":[{"id":"ref-for-workletoptions"}],"title":"6. The SharedStorage Interface"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#workletoptions"},
"47dfca75": {"dfnID":"47dfca75","dfnText":"queue","external":true,"refSections":[{"refs":[{"id":"ref-for-queue"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-queue\u2460"}],"title":"6.6. Iteration"}],"url":"https://infra.spec.whatwg.org/#queue"},
"48438eb3": {"dfnID":"48438eb3","dfnText":"queue a global task","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-global-task"},{"id":"ref-for-queue-a-global-task\u2460"},{"id":"ref-for-queue-a-global-task\u2461"},{"id":"ref-for-queue-a-global-task\u2462"},{"id":"ref-for-queue-a-global-task\u2463"},{"id":"ref-for-queue-a-global-task\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-queue-a-global-task\u2465"},{"id":"ref-for-queue-a-global-task\u2466"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-queue-a-global-task\u2467"},{"id":"ref-for-queue-a-global-task\u2468"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-queue-a-global-task\u2460\u24ea"},{"id":"ref-for-queue-a-global-task\u2460\u2460"},{"id":"ref-for-queue-a-global-task\u2460\u2461"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-queue-a-global-task\u2460\u2462"},{"id":"ref-for-queue-a-global-task\u2460\u2463"},{"id":"ref-for-queue-a-global-task\u2460\u2464"},{"id":"ref-for-queue-a-global-task\u2460\u2465"},{"id":"ref-for-queue-a-global-task\u2460\u2466"},{"id":"ref-for-queue-a-global-task\u2460\u2467"},{"id":"ref-for-queue-a-global-task\u2460\u2468"},{"id":"ref-for-queue-a-global-task\u2461\u24ea"},{"id":"ref-for-queue-a-global-task\u2461\u2460"},{"id":"ref-for-queue-a-global-task\u2461\u2461"},{"id":"ref-for-queue-a-global-task\u2461\u2462"},{"id":"ref-for-queue-a-global-task\u2461\u2463"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-queue-a-global-task\u2461\u2464"},{"id":"ref-for-queue-a-global-task\u2461\u2465"},{"id":"ref-for-queue-a-global-task\u2461\u2466"},{"id":"ref-for-queue-a-global-task\u2461\u2467"},{"id":"ref-for-queue-a-global-task\u2461\u2468"},{"id":"ref-for-queue-a-global-task\u2462\u24ea"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-queue-a-global-task\u2462\u2460"},{"id":"ref-for-queue-a-global-task\u2462\u2461"},{"id":"ref-for-queue-a-global-task\u2462\u2462"},{"id":"ref-for-queue-a-global-task\u2462\u2463"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"48e003db": {"dfnID":"48e003db","dfnText":"process contributions for a batching scope","external":true,"refSections":[{"refs":[{"id":"ref-for-process-contributions-for-a-batching-scope"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-process-contributions-for-a-batching-scope\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#process-contributions-for-a-batching-scope"},
"4a3bf5fb": {"dfnID":"4a3bf5fb","dfnText":"concatenate","external":true,"refSections":[{"refs":[{"id":"ref-for-string-concatenate"}],"title":"6.4. Setter/Deleter Methods"}],"url":"https://infra.spec.whatwg.org/#string-concatenate"},
"4a7ca2e3": {"dfnID":"4a7ca2e3","dfnText":"parameters","external":true,"refSections":[{"refs":[{"id":"ref-for-param"},{"id":"ref-for-param\u2460"},{"id":"ref-for-param\u2461"},{"id":"ref-for-param\u2462"},{"id":"ref-for-param\u2463"},{"id":"ref-for-param\u2464"},{"id":"ref-for-param\u2465"},{"id":"ref-for-param\u2466"},{"id":"ref-for-param\u2467"},{"id":"ref-for-param\u2468"},{"id":"ref-for-param\u2460\u24ea"},{"id":"ref-for-param\u2460\u2460"},{"id":"ref-for-param\u2460\u2461"},{"id":"ref-for-param\u2460\u2462"},{"id":"ref-for-param\u2460\u2463"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-param\u2460\u2464"},{"id":"ref-for-param\u2460\u2465"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://httpwg.org/specs/rfc8941.html#param"},
"4b2c8c72": {"dfnID":"4b2c8c72","dfnText":"duration","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-duration"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dfn-duration\u2460"},{"id":"ref-for-dfn-duration\u2461"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-dfn-duration\u2462"}],"title":"3.2. The Shared Storage Database"}],"url":"https://w3c.github.io/hr-time/#dfn-duration"},
"4bf1cac4": {"dfnID":"4bf1cac4","dfnText":"promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise\u2461"},{"id":"ref-for-idl-promise\u2462"},{"id":"ref-for-idl-promise\u2463"},{"id":"ref-for-idl-promise\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-idl-promise\u2467"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-idl-promise\u2468"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-idl-promise\u2461\u2460"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-idl-promise\u2461\u2461"},{"id":"ref-for-idl-promise\u2461\u2462"},{"id":"ref-for-idl-promise\u2461\u2463"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-idl-promise\u2461\u2464"},{"id":"ref-for-idl-promise\u2461\u2465"},{"id":"ref-for-idl-promise\u2461\u2466"},{"id":"ref-for-idl-promise\u2461\u2467"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-idl-promise\u2461\u2468"},{"id":"ref-for-idl-promise\u2462\u24ea"},{"id":"ref-for-idl-promise\u2462\u2460"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-idl-promise\u2462\u2461"},{"id":"ref-for-idl-promise\u2462\u2462"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org#idl-promise"},
"4c2ffaa9": {"dfnID":"4c2ffaa9","dfnText":"client-side storage partitioning","external":true,"refSections":[{"refs":[{"id":"ref-for-client-side-storage-partitioning"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-client-side-storage-partitioning\u2460"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://privacycg.github.io/storage-partitioning/#client-side-storage-partitioning"},
"4d27703d": {"dfnID":"4d27703d","dfnText":"request a lock","external":true,"refSections":[{"refs":[{"id":"ref-for-request-a-lock"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://w3c.github.io/web-locks/#request-a-lock"},
"4e92bc80": {"dfnID":"4e92bc80","dfnText":"get the keys","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-keys"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-map-getting-the-keys\u2460"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-keys"},
"5216e1a0": {"dfnID":"5216e1a0","dfnText":"node document","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-node-document"},{"id":"ref-for-concept-node-document\u2460"},{"id":"ref-for-concept-node-document\u2461"},{"id":"ref-for-concept-node-document\u2462"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://dom.spec.whatwg.org/#concept-node-document"},
"527b10aa": {"dfnID":"527b10aa","dfnText":"get","external":true,"refSections":[{"refs":[{"id":"ref-for-map-get"},{"id":"ref-for-map-get\u2460"}],"title":"3.3. The Database Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-get"},
"53275e46": {"dfnID":"53275e46","dfnText":"append (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-append"},{"id":"ref-for-list-append\u2460"},{"id":"ref-for-list-append\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-list-append\u2462"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-list-append\u2463"},{"id":"ref-for-list-append\u2464"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-list-append\u2465"},{"id":"ref-for-list-append\u2466"},{"id":"ref-for-list-append\u2467"},{"id":"ref-for-list-append\u2468"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#list-append"},
"5372cca8": {"dfnID":"5372cca8","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-boolean"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-idl-boolean\u2460"},{"id":"ref-for-idl-boolean\u2461"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-idl-boolean\u2462"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-idl-boolean\u2463"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"},{"refs":[{"id":"ref-for-idl-boolean\u2464"}],"title":"9.1. sharedStorageWritable Key"}],"url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"5442ea33": {"dfnID":"5442ea33","dfnText":"URL serializer","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-serializer"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://url.spec.whatwg.org/#concept-url-serializer"},
"55213b5b": {"dfnID":"55213b5b","dfnText":"request","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-request\u2460"}],"title":"9.1. sharedStorageWritable Key"},{"refs":[{"id":"ref-for-concept-request\u2461"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-concept-request\u2462"},{"id":"ref-for-concept-request\u2463"}],"title":"9.3.1. `Sec-Shared-Storage-Data-Origin` Request Header"},{"refs":[{"id":"ref-for-concept-request\u2464"},{"id":"ref-for-concept-request\u2465"},{"id":"ref-for-concept-request\u2466"}],"title":"9.3.3. `Sec-Shared-Storage-Writable` Request Header"},{"refs":[{"id":"ref-for-concept-request\u2467"},{"id":"ref-for-concept-request\u2468"},{"id":"ref-for-concept-request\u2460\u24ea"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-request"},
"563b7f6f": {"dfnID":"563b7f6f","dfnText":"get debug scope steps","external":true,"refSections":[{"refs":[{"id":"ref-for-get-debug-scope-steps"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-debug-scope-steps"},
"5701f5c0": {"dfnID":"5701f5c0","dfnText":"storage identifier","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-identifier"},{"id":"ref-for-storage-identifier\u2460"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-identifier"},
"5991ccfb": {"dfnID":"5991ccfb","dfnText":"relevant realm","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-realm"},{"id":"ref-for-concept-relevant-realm\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"5ab7b520": {"dfnID":"5ab7b520","dfnText":"reflect","external":true,"refSections":[{"refs":[{"id":"ref-for-reflect"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect"},
"5afbefcd": {"dfnID":"5afbefcd","dfnText":"item (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-item"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://infra.spec.whatwg.org/#list-item"},
"5b40d7b3": {"dfnID":"5b40d7b3","dfnText":"scoping details","external":true,"refSections":[{"refs":[{"id":"ref-for-scoping-details"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#scoping-details"},
"5c66de35": {"dfnID":"5c66de35","dfnText":"get a structured field value","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-list-get-structured-header"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-concept-header-list-get-structured-header\u2460"},{"id":"ref-for-concept-header-list-get-structured-header\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header"},
"5d7209e9": {"dfnID":"5d7209e9","dfnText":"Window","external":true,"refSections":[{"refs":[{"id":"ref-for-window"},{"id":"ref-for-window\u2460"},{"id":"ref-for-window\u2461"},{"id":"ref-for-window\u2462"},{"id":"ref-for-window\u2463"},{"id":"ref-for-window\u2464"},{"id":"ref-for-window\u2465"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-window\u2466"},{"id":"ref-for-window\u2467"},{"id":"ref-for-window\u2468"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-window\u2460\u24ea"},{"id":"ref-for-window\u2460\u2460"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-window\u2460\u2461"},{"id":"ref-for-window\u2460\u2462"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-window\u2460\u2463"},{"id":"ref-for-window\u2460\u2464"},{"id":"ref-for-window\u2460\u2465"},{"id":"ref-for-window\u2460\u2466"}],"title":"4. Extension to the Window interface"},{"refs":[{"id":"ref-for-window\u2460\u2467"},{"id":"ref-for-window\u2460\u2468"},{"id":"ref-for-window\u2461\u24ea"},{"id":"ref-for-window\u2461\u2460"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-window\u2461\u2461"},{"id":"ref-for-window\u2461\u2462"},{"id":"ref-for-window\u2461\u2463"},{"id":"ref-for-window\u2461\u2464"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-window\u2461\u2465"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-window\u2461\u2466"},{"id":"ref-for-window\u2461\u2467"},{"id":"ref-for-window\u2461\u2468"},{"id":"ref-for-window\u2462\u24ea"},{"id":"ref-for-window\u2462\u2460"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-window\u2462\u2461"}],"title":"7. Triggering Operations Via HTTP Response Header"},{"refs":[{"id":"ref-for-window\u2462\u2462"},{"id":"ref-for-window\u2462\u2463"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"5dcb719c": {"dfnID":"5dcb719c","dfnText":"obtain a lock manager","external":true,"refSections":[{"refs":[{"id":"ref-for-obtain-a-lock-manager"}],"title":"10.5. Monkey Patch for the \"obtain a lock manager\" algorithm"}],"url":"https://w3c.github.io/web-locks/#obtain-a-lock-manager"},
"5f90bbfb": {"dfnID":"5f90bbfb","dfnText":"undefined","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-undefined"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"5ff3a316": {"dfnID":"5ff3a316","dfnText":"parse a JSON string to an Infra value","external":true,"refSections":[{"refs":[{"id":"ref-for-parse-a-json-string-to-an-infra-value"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value"},
"602b1a68": {"dfnID":"602b1a68","dfnText":"obtain a site","external":true,"refSections":[{"refs":[{"id":"ref-for-obtain-a-site"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-obtain-a-site\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-obtain-a-site\u2461"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-obtain-a-site\u2462"}],"title":"6.5. Getter Methods"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site"},
"6148dd37": {"dfnID":"6148dd37","dfnText":"storage bucket","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-bucket"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-bucket"},
"649608b9": {"dfnID":"649608b9","dfnText":"list","external":true,"refSections":[{"refs":[{"id":"ref-for-list"},{"id":"ref-for-list\u2460"},{"id":"ref-for-list\u2461"},{"id":"ref-for-list\u2462"},{"id":"ref-for-list\u2463"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-list\u2464"},{"id":"ref-for-list\u2465"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-list\u2466"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-list\u2467"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-list\u2468"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-list\u2460\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#list"},
"64b62ea0": {"dfnID":"64b62ea0","dfnText":"redirect mode","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-redirect-mode"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"}],"url":"https://fetch.spec.whatwg.org/#concept-request-redirect-mode"},
"65181da8": {"dfnID":"65181da8","dfnText":"secure context","external":true,"refSections":[{"refs":[{"id":"ref-for-secure-context"}],"title":"2. The SharedStorageWorklet Interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"},
"653d0848": {"dfnID":"653d0848","dfnText":"size (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-size"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-map-size\u2460"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-map-size\u2461"}],"title":"3.3. The Database Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-size"},
"65de84a0": {"dfnID":"65de84a0","dfnText":"reportEvent()","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-fence-reportevent"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-dom-fence-reportevent\u2460"}],"title":"13. Privacy Considerations"}],"url":"https://wicg.github.io/fenced-frame/#dom-fence-reportevent"},
"660191f0": {"dfnID":"660191f0","dfnText":"storage shed","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-shed"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-shed"},
"66905219": {"dfnID":"66905219","dfnText":"ifAvailable","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-lockoptions-ifavailable"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://w3c.github.io/web-locks/#dom-lockoptions-ifavailable"},
"67130339": {"dfnID":"67130339","dfnText":"storage bottle","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-bottle"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-bottle"},
"68675e70": {"dfnID":"68675e70","dfnText":"content attributes","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-element-attributes"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"},{"refs":[{"id":"ref-for-concept-element-attributes\u2460"}],"title":"8.2.2. Modification to Create navigation params by fetching Algorithm"}],"url":"https://html.spec.whatwg.org/multipage/dom.html#concept-element-attributes"},
"69ac8948": {"dfnID":"69ac8948","dfnText":"destination","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-fenceevent-destination"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://wicg.github.io/fenced-frame/#dom-fenceevent-destination"},
"6c6b1005": {"dfnID":"6c6b1005","dfnText":"any","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-any"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-idl-any\u2460"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-idl-any\u2461"},{"id":"ref-for-idl-any\u2462"},{"id":"ref-for-idl-any\u2463"},{"id":"ref-for-idl-any\u2464"},{"id":"ref-for-idl-any\u2465"},{"id":"ref-for-idl-any\u2466"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-any"},
"6d19ac93": {"dfnID":"6d19ac93","dfnText":"user agent","external":true,"refSections":[{"refs":[{"id":"ref-for-user-agent"}],"title":"2.5. Entropy Budgets"},{"refs":[{"id":"ref-for-user-agent\u2460"},{"id":"ref-for-user-agent\u2461"},{"id":"ref-for-user-agent\u2462"},{"id":"ref-for-user-agent\u2463"},{"id":"ref-for-user-agent\u2464"},{"id":"ref-for-user-agent\u2465"},{"id":"ref-for-user-agent\u2466"},{"id":"ref-for-user-agent\u2467"},{"id":"ref-for-user-agent\u2468"},{"id":"ref-for-user-agent\u2460\u24ea"},{"id":"ref-for-user-agent\u2460\u2460"},{"id":"ref-for-user-agent\u2460\u2461"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-user-agent\u2460\u2462"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-user-agent\u2460\u2463"},{"id":"ref-for-user-agent\u2460\u2464"},{"id":"ref-for-user-agent\u2460\u2465"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-user-agent\u2460\u2466"},{"id":"ref-for-user-agent\u2460\u2467"},{"id":"ref-for-user-agent\u2460\u2468"},{"id":"ref-for-user-agent\u2461\u24ea"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-user-agent\u2461\u2460"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-user-agent\u2461\u2461"}],"title":"10.1. User Agent Associated State"}],"url":"https://infra.spec.whatwg.org/#user-agent"},
"6d88ab2e": {"dfnID":"6d88ab2e","dfnText":"browsing context (for Window)","external":true,"refSections":[{"refs":[{"id":"ref-for-window-bc"},{"id":"ref-for-window-bc\u2460"},{"id":"ref-for-window-bc\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-window-bc\u2462"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-window-bc\u2463"},{"id":"ref-for-window-bc\u2464"},{"id":"ref-for-window-bc\u2465"},{"id":"ref-for-window-bc\u2466"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-window-bc\u2467"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-window-bc\u2468"},{"id":"ref-for-window-bc\u2460\u24ea"},{"id":"ref-for-window-bc\u2460\u2460"},{"id":"ref-for-window-bc\u2460\u2461"}],"title":"6.4. Setter/Deleter Methods"}],"url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc"},
"6ee0eab1": {"dfnID":"6ee0eab1","dfnText":"header list (for request)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-header-list"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-concept-request-header-list\u2460"}],"title":"9.2.2. Modification to HTTP network or cache fetch Algorithm"},{"refs":[{"id":"ref-for-concept-request-header-list\u2461"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-concept-request-header-list\u2462"},{"id":"ref-for-concept-request-header-list\u2463"},{"id":"ref-for-concept-request-header-list\u2464"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-request-header-list"},
"6f738b30": {"dfnID":"6f738b30","dfnText":"global scopes","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-worklet-global-scopes"},{"id":"ref-for-concept-worklet-global-scopes\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-worklet-global-scopes\u2461"},{"id":"ref-for-concept-worklet-global-scopes\u2462"},{"id":"ref-for-concept-worklet-global-scopes\u2463"},{"id":"ref-for-concept-worklet-global-scopes\u2464"},{"id":"ref-for-concept-worklet-global-scopes\u2465"},{"id":"ref-for-concept-worklet-global-scopes\u2466"},{"id":"ref-for-concept-worklet-global-scopes\u2467"},{"id":"ref-for-concept-worklet-global-scopes\u2468"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-concept-worklet-global-scopes\u2460\u24ea"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes"},
"704924d7": {"dfnID":"704924d7","dfnText":"function objects","external":true,"refSections":[{"refs":[{"id":"ref-for-function-object"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#function-object"},
"7393da89": {"dfnID":"7393da89","dfnText":"same origin","external":true,"refSections":[{"refs":[{"id":"ref-for-same-origin"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-same-origin\u2460"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-same-origin\u2461"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-same-origin\u2462"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-same-origin\u2463"},{"id":"ref-for-same-origin\u2464"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"73a186aa": {"dfnID":"73a186aa","dfnText":"id","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-environment-id"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-id"},
"73fdd654": {"dfnID":"73fdd654","dfnText":"quota (for storage bottle)","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-bottle-quota"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-bottle-quota"},
"750a2f08": {"dfnID":"750a2f08","dfnText":"react","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-perform-steps-once-promise-is-settled"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"},
"762210c0": {"dfnID":"762210c0","dfnText":"container","external":true,"refSections":[{"refs":[{"id":"ref-for-nav-container"}],"title":"8.2.2. Modification to Create navigation params by fetching Algorithm"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container"},
"772cb7dd": {"dfnID":"772cb7dd","dfnText":"beginning navigation","external":true,"refSections":[{"refs":[{"id":"ref-for-beginning-navigation"},{"id":"ref-for-beginning-navigation\u2460"},{"id":"ref-for-beginning-navigation\u2461"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#beginning-navigation"},
"77b4c09a": {"dfnID":"77b4c09a","dfnText":"assert","external":true,"refSections":[{"refs":[{"id":"ref-for-assert"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-assert\u2460"},{"id":"ref-for-assert\u2461"},{"id":"ref-for-assert\u2462"},{"id":"ref-for-assert\u2463"},{"id":"ref-for-assert\u2464"},{"id":"ref-for-assert\u2465"},{"id":"ref-for-assert\u2466"},{"id":"ref-for-assert\u2467"},{"id":"ref-for-assert\u2468"},{"id":"ref-for-assert\u2460\u24ea"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-assert\u2460\u2460"},{"id":"ref-for-assert\u2460\u2461"},{"id":"ref-for-assert\u2460\u2462"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-assert\u2460\u2463"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-assert\u2460\u2464"},{"id":"ref-for-assert\u2460\u2465"},{"id":"ref-for-assert\u2460\u2466"},{"id":"ref-for-assert\u2460\u2467"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-assert\u2460\u2468"},{"id":"ref-for-assert\u2461\u24ea"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-assert\u2461\u2460"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-assert\u2461\u2461"},{"id":"ref-for-assert\u2461\u2462"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-assert\u2461\u2463"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-assert\u2461\u2464"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-assert\u2461\u2465"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-assert\u2461\u2466"},{"id":"ref-for-assert\u2461\u2467"},{"id":"ref-for-assert\u2461\u2468"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-assert\u2462\u24ea"},{"id":"ref-for-assert\u2462\u2460"},{"id":"ref-for-assert\u2462\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#assert"},
"77e5cafe": {"dfnID":"77e5cafe","dfnText":"inner list","external":true,"refSections":[{"refs":[{"id":"ref-for-inner-list"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://httpwg.org/specs/rfc8941.html#inner-list"},
"7a101e5c": {"dfnID":"7a101e5c","dfnText":"bits of entropy","external":true,"refSections":[{"refs":[{"id":"ref-for-bits-of-entropy"}],"title":"2.5. Entropy Budgets"}],"url":"https://en.wikipedia.org/wiki/Entropy_(information_theory)#bits-of-entropy"},
"7b0b4fa0": {"dfnID":"7b0b4fa0","dfnText":"initiator type","external":true,"refSections":[{"refs":[{"id":"ref-for-request-initiator-type"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#request-initiator-type"},
"7d16decb": {"dfnID":"7d16decb","dfnText":"storage key","external":true,"refSections":[{"refs":[{"id":"ref-for-service-worker-registration-storage-key"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://w3c.github.io/ServiceWorker/#service-worker-registration-storage-key"},
"7d4424b2": {"dfnID":"7d4424b2","dfnText":"remove (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-remove"},{"id":"ref-for-map-remove\u2460"}],"title":"3.3. The Database Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-remove"},
"7db4a4b7": {"dfnID":"7db4a4b7","dfnText":"bucket map","external":true,"refSections":[{"refs":[{"id":"ref-for-bucket-map"},{"id":"ref-for-bucket-map\u2460"},{"id":"ref-for-bucket-map\u2461"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#bucket-map"},
"7dbefaad": {"dfnID":"7dbefaad","dfnText":"ending navigation","external":true,"refSections":[{"refs":[{"id":"ref-for-ending-navigation"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#ending-navigation"},
"7deb6835": {"dfnID":"7deb6835","dfnText":"settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-realm-settings-object"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-realm-settings-object\u2460"},{"id":"ref-for-concept-realm-settings-object\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-concept-realm-settings-object\u2462"},{"id":"ref-for-concept-realm-settings-object\u2463"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-concept-realm-settings-object\u2464"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-concept-realm-settings-object\u2465"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-concept-realm-settings-object\u2466"},{"id":"ref-for-concept-realm-settings-object\u2467"},{"id":"ref-for-concept-realm-settings-object\u2468"},{"id":"ref-for-concept-realm-settings-object\u2460\u24ea"},{"id":"ref-for-concept-realm-settings-object\u2460\u2460"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-concept-realm-settings-object\u2460\u2461"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object"},
"7f8002fa": {"dfnID":"7f8002fa","dfnText":"backing map","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-proxy-map-backing-map"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-proxy-map-backing-map"},
"7fb6fbc6": {"dfnID":"7fb6fbc6","dfnText":"Global","external":true,"refSections":[{"refs":[{"id":"ref-for-Global"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"https://webidl.spec.whatwg.org/#Global"},
"80042e43": {"dfnID":"80042e43","dfnText":"default filtering id max bytes","external":true,"refSections":[{"refs":[{"id":"ref-for-default-filtering-id-max-bytes"},{"id":"ref-for-default-filtering-id-max-bytes\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#default-filtering-id-max-bytes"},
"82ca3efc": {"dfnID":"82ca3efc","dfnText":"TypeError","external":true,"refSections":[{"refs":[{"id":"ref-for-exceptiondef-typeerror"},{"id":"ref-for-exceptiondef-typeerror\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2461\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2461\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2461\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2461\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2461\u2463"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2461\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2461\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2461\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2461\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2461\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2462\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2462\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2462\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2462\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2462\u2463"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2462\u2464"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2462\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2462\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2462\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2462\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2463\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2463\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2464\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2464\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2465\u24ea"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2465\u2460"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2465\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2465\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2465\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2465\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2465\u2465"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2465\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2465\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2465\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2466\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2466\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2467\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2467\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2468\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2466"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2468\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2468\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2462"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2460\u24ea\u2468"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u24ea"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2460"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2461"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2462"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2463"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2464"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2465"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2466"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2467"},{"id":"ref-for-exceptiondef-typeerror\u2460\u2460\u2468"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"833154f2": {"dfnID":"833154f2","dfnText":"getter steps","external":true,"refSections":[{"refs":[{"id":"ref-for-getter-steps"},{"id":"ref-for-getter-steps\u2460"},{"id":"ref-for-getter-steps\u2461"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://webidl.spec.whatwg.org/#getter-steps"},
"84b454ff": {"dfnID":"84b454ff","dfnText":"ordered map","external":true,"refSections":[{"refs":[{"id":"ref-for-ordered-map"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-ordered-map\u2460"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-ordered-map\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-ordered-map\u2462"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-ordered-map\u2463"},{"id":"ref-for-ordered-map\u2464"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-ordered-map\u2465"},{"id":"ref-for-ordered-map\u2466"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-ordered-map\u2467"}],"title":"10.1. User Agent Associated State"}],"url":"https://infra.spec.whatwg.org/#ordered-map"},
"85394472": {"dfnID":"85394472","dfnText":"Document","external":true,"refSections":[{"refs":[{"id":"ref-for-document"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-document\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://dom.spec.whatwg.org/#document"},
"857d5516": {"dfnID":"857d5516","dfnText":"client","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-client"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#concept-request-client"},
"860300d4": {"dfnID":"860300d4","dfnText":"implementation-defined","external":true,"refSections":[{"refs":[{"id":"ref-for-implementation-defined"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-implementation-defined\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://infra.spec.whatwg.org/#implementation-defined"},
"87fcd40c": {"dfnID":"87fcd40c","dfnText":"iframe","external":true,"refSections":[{"refs":[{"id":"ref-for-the-iframe-element"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"},{"refs":[{"id":"ref-for-the-iframe-element\u2460"}],"title":"8.2.2. Modification to Create navigation params by fetching Algorithm"}],"url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"8855a9aa": {"dfnID":"8855a9aa","dfnText":"DOMString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMString"},{"id":"ref-for-idl-DOMString\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-idl-DOMString\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-idl-DOMString\u2462"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-idl-DOMString\u2463"},{"id":"ref-for-idl-DOMString\u2464"},{"id":"ref-for-idl-DOMString\u2465"},{"id":"ref-for-idl-DOMString\u2466"},{"id":"ref-for-idl-DOMString\u2467"},{"id":"ref-for-idl-DOMString\u2468"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-idl-DOMString\u2460\u24ea"},{"id":"ref-for-idl-DOMString\u2460\u2460"},{"id":"ref-for-idl-DOMString\u2460\u2461"},{"id":"ref-for-idl-DOMString\u2460\u2462"},{"id":"ref-for-idl-DOMString\u2460\u2463"},{"id":"ref-for-idl-DOMString\u2460\u2464"},{"id":"ref-for-idl-DOMString\u2460\u2465"},{"id":"ref-for-idl-DOMString\u2460\u2466"},{"id":"ref-for-idl-DOMString\u2460\u2467"},{"id":"ref-for-idl-DOMString\u2460\u2468"},{"id":"ref-for-idl-DOMString\u2461\u24ea"},{"id":"ref-for-idl-DOMString\u2461\u2460"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"889e932f": {"dfnID":"889e932f","dfnText":"Exposed","external":true,"refSections":[{"refs":[{"id":"ref-for-Exposed"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-Exposed\u2460"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-Exposed\u2461"},{"id":"ref-for-Exposed\u2462"},{"id":"ref-for-Exposed\u2463"},{"id":"ref-for-Exposed\u2464"},{"id":"ref-for-Exposed\u2465"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-Exposed\u2466"},{"id":"ref-for-Exposed\u2467"},{"id":"ref-for-Exposed\u2468"},{"id":"ref-for-Exposed\u2460\u24ea"},{"id":"ref-for-Exposed\u2460\u2460"},{"id":"ref-for-Exposed\u2460\u2461"},{"id":"ref-for-Exposed\u2460\u2462"},{"id":"ref-for-Exposed\u2460\u2463"},{"id":"ref-for-Exposed\u2460\u2464"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-Exposed\u2460\u2465"}],"title":"10.2. SharedStorageWorkletNavigator interface"},{"refs":[{"id":"ref-for-Exposed\u2460\u2466"},{"id":"ref-for-Exposed\u2460\u2467"}],"title":"10.3. Web Locks IDLs Monkey Patches"}],"url":"https://webidl.spec.whatwg.org/#Exposed"},
"8958b003": {"dfnID":"8958b003","dfnText":"entry","external":true,"refSections":[{"refs":[{"id":"ref-for-map-entry"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://infra.spec.whatwg.org/#map-entry"},
"896f4663": {"dfnID":"896f4663","dfnText":"quota (for storage endpoint)","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-endpoint-quota"},{"id":"ref-for-storage-endpoint-quota\u2460"},{"id":"ref-for-storage-endpoint-quota\u2461"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-endpoint-quota"},
"8a30477b": {"dfnID":"8a30477b","dfnText":"global object (for environment settings object)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-settings-object-global"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global"},
"8a608b90": {"dfnID":"8a608b90","dfnText":"value","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-value"},{"id":"ref-for-concept-header-value\u2460"}],"title":"9.3.1. `Sec-Shared-Storage-Data-Origin` Request Header"}],"url":"https://fetch.spec.whatwg.org/#concept-header-value"},
"8c800cdf": {"dfnID":"8c800cdf","dfnText":"double","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-double"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-idl-double\u2460"},{"id":"ref-for-idl-double\u2461"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-idl-double\u2462"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-double"},
"8edb2f5a": {"dfnID":"8edb2f5a","dfnText":"FenceEvent","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-fenceevent"},{"id":"ref-for-dictdef-fenceevent\u2460"},{"id":"ref-for-dictdef-fenceevent\u2461"},{"id":"ref-for-dictdef-fenceevent\u2462"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://wicg.github.io/fenced-frame/#dictdef-fenceevent"},
"9046ba8f": {"dfnID":"9046ba8f","dfnText":"set the pre-specified report parameters for a batching scope","external":true,"refSections":[{"refs":[{"id":"ref-for-set-the-pre-specified-report-parameters-for-a-batching-scope"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-pre-specified-report-parameters-for-a-batching-scope"},
"93252241": {"dfnID":"93252241","dfnText":"worklet destination type","external":true,"refSections":[{"refs":[{"id":"ref-for-worklet-destination-type"}],"title":"2.3. The SharedStorageWorkletGlobalScope"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type"},
"94719b0c": {"dfnID":"94719b0c","dfnText":"unicode","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-unicode"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"https://w3c.github.io/i18n-glossary/#dfn-unicode"},
"959ad97b": {"dfnID":"959ad97b","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-origin"},{"id":"ref-for-concept-url-origin\u2460"},{"id":"ref-for-concept-url-origin\u2461"},{"id":"ref-for-concept-url-origin\u2462"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-url-origin\u2463"},{"id":"ref-for-concept-url-origin\u2464"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-concept-url-origin\u2465"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-concept-url-origin\u2466"},{"id":"ref-for-concept-url-origin\u2467"},{"id":"ref-for-concept-url-origin\u2468"}],"title":"2.2.4. The `Shared-Storage-Cross-Origin-Worklet-Allowed` HTTP response header"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u24ea"},{"id":"ref-for-concept-url-origin\u2460\u2460"},{"id":"ref-for-concept-url-origin\u2460\u2461"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u2462"},{"id":"ref-for-concept-url-origin\u2460\u2463"},{"id":"ref-for-concept-url-origin\u2460\u2464"},{"id":"ref-for-concept-url-origin\u2460\u2465"},{"id":"ref-for-concept-url-origin\u2460\u2466"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u2467"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-concept-url-origin\u2460\u2468"},{"id":"ref-for-concept-url-origin\u2461\u24ea"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-concept-url-origin\u2461\u2460"},{"id":"ref-for-concept-url-origin\u2461\u2461"},{"id":"ref-for-concept-url-origin\u2461\u2462"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-concept-url-origin\u2461\u2463"}],"title":"9.3.1. `Sec-Shared-Storage-Data-Origin` Request Header"},{"refs":[{"id":"ref-for-concept-url-origin\u2461\u2464"}],"title":"9.3.2. `Shared-Storage-Cross-Origin-Worklet-Allowed` Response Header"},{"refs":[{"id":"ref-for-concept-url-origin\u2461\u2465"},{"id":"ref-for-concept-url-origin\u2461\u2466"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://url.spec.whatwg.org/#concept-url-origin"},
"984221ca": {"dfnID":"984221ca","dfnText":"struct","external":true,"refSections":[{"refs":[{"id":"ref-for-struct"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-struct\u2460"},{"id":"ref-for-struct\u2461"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-struct\u2462"}],"title":"3.2. The Shared Storage Database"}],"url":"https://infra.spec.whatwg.org/#struct"},
"98c6a112": {"dfnID":"98c6a112","dfnText":"storage endpoint","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-endpoint"}],"title":"3. Shared Storage\u2019s Backend"},{"refs":[{"id":"ref-for-storage-endpoint\u2460"},{"id":"ref-for-storage-endpoint\u2461"},{"id":"ref-for-storage-endpoint\u2462"},{"id":"ref-for-storage-endpoint\u2463"},{"id":"ref-for-storage-endpoint\u2464"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-endpoint"},
"99c988d6": {"dfnID":"99c988d6","dfnText":"remove (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-remove"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://infra.spec.whatwg.org/#list-remove"},
"9a517a7d": {"dfnID":"9a517a7d","dfnText":"queue a task","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-a-task"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-queue-a-task\u2460"},{"id":"ref-for-queue-a-task\u2461"}],"title":"2.5.2.3. Saved queries"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"},
"9a7f3f6f": {"dfnID":"9a7f3f6f","dfnText":"asynchronous iterator initialization steps","external":true,"refSections":[{"refs":[{"id":"ref-for-asynchronous-iterator-initialization-steps"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps"},
"9a9b558b": {"dfnID":"9a9b558b","dfnText":"dequeue","external":true,"refSections":[{"refs":[{"id":"ref-for-queue-dequeue"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-queue-dequeue\u2460"}],"title":"6.6. Iteration"}],"url":"https://infra.spec.whatwg.org/#queue-dequeue"},
"9b3743cd": {"dfnID":"9b3743cd","dfnText":"module map","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-workerglobalscope-module-map"},{"id":"ref-for-concept-workerglobalscope-module-map\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://html.spec.whatwg.org/multipage/workers.html#concept-workerglobalscope-module-map"},
"9c19b7fc": {"dfnID":"9c19b7fc","dfnText":"navigable","external":true,"refSections":[{"refs":[{"id":"ref-for-navigable"},{"id":"ref-for-navigable\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-navigable\u2461"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-navigable\u2462"}],"title":"2.5.2.1. Monkey patch for Traversable Navigables"},{"refs":[{"id":"ref-for-navigable\u2463"}],"title":"2.5.2.2. Monkey patch for Navigables"},{"refs":[{"id":"ref-for-navigable\u2464"},{"id":"ref-for-navigable\u2465"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-navigable\u2466"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"}],"url":"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable"},
"9c4c1e66": {"dfnID":"9c4c1e66","dfnText":"relevant settings object","external":true,"refSections":[{"refs":[{"id":"ref-for-relevant-settings-object"},{"id":"ref-for-relevant-settings-object\u2460"},{"id":"ref-for-relevant-settings-object\u2461"},{"id":"ref-for-relevant-settings-object\u2462"},{"id":"ref-for-relevant-settings-object\u2463"},{"id":"ref-for-relevant-settings-object\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-relevant-settings-object\u2465"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-relevant-settings-object\u2466"},{"id":"ref-for-relevant-settings-object\u2467"},{"id":"ref-for-relevant-settings-object\u2468"},{"id":"ref-for-relevant-settings-object\u2460\u24ea"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-relevant-settings-object\u2460\u2460"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-relevant-settings-object\u2460\u2461"},{"id":"ref-for-relevant-settings-object\u2460\u2462"},{"id":"ref-for-relevant-settings-object\u2460\u2463"},{"id":"ref-for-relevant-settings-object\u2460\u2464"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-relevant-settings-object\u2460\u2465"},{"id":"ref-for-relevant-settings-object\u2460\u2466"},{"id":"ref-for-relevant-settings-object\u2460\u2467"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-relevant-settings-object\u2460\u2468"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-relevant-settings-object\u2461\u24ea"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"9c9ab424": {"dfnID":"9c9ab424","dfnText":"start a new parallel queue","external":true,"refSections":[{"refs":[{"id":"ref-for-starting-a-new-parallel-queue"}],"title":"3.2. The Shared Storage Database"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue"},
"9cce47fd": {"dfnID":"9cce47fd","dfnText":"sequence","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-sequence"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-idl-sequence\u2460"},{"id":"ref-for-idl-sequence\u2461"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-idl-sequence\u2462"},{"id":"ref-for-idl-sequence\u2463"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"9d801570": {"dfnID":"9d801570","dfnText":"entropy bits","external":true,"refSections":[{"refs":[{"id":"ref-for-entropy-bits"},{"id":"ref-for-entropy-bits\u2460"},{"id":"ref-for-entropy-bits\u2461"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://en.wikipedia.org/wiki/Entropy_(information_theory)#entropy-bits"},
"a05e642a": {"dfnID":"a05e642a","dfnText":"PrivateAggregation","external":true,"refSections":[{"refs":[{"id":"ref-for-privateaggregation"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation"},
"a09bfce2": {"dfnID":"a09bfce2","dfnText":"current wall time","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-current-wall-time"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dfn-current-wall-time\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://w3c.github.io/hr-time/#dfn-current-wall-time"},
"a1005ed9": {"dfnID":"a1005ed9","dfnText":"module script","external":true,"refSections":[{"refs":[{"id":"ref-for-module-script"},{"id":"ref-for-module-script\u2460"},{"id":"ref-for-module-script\u2461"}],"title":"2. The SharedStorageWorklet Interface"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#module-script"},
"a1d47575": {"dfnID":"a1d47575","dfnText":"status","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-status"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-response-status\u2460"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-response-status"},
"a27468c5": {"dfnID":"a27468c5","dfnText":"ok status","external":true,"refSections":[{"refs":[{"id":"ref-for-ok-status"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#ok-status"},
"a2bbd43b": {"dfnID":"a2bbd43b","dfnText":"LockOptions","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-lockoptions"},{"id":"ref-for-dictdef-lockoptions\u2460"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://w3c.github.io/web-locks/#dictdef-lockoptions"},
"a326add7": {"dfnID":"a326add7","dfnText":"contain (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-exists"},{"id":"ref-for-map-exists\u2460"},{"id":"ref-for-map-exists\u2461"},{"id":"ref-for-map-exists\u2462"},{"id":"ref-for-map-exists\u2463"},{"id":"ref-for-map-exists\u2464"},{"id":"ref-for-map-exists\u2465"},{"id":"ref-for-map-exists\u2466"},{"id":"ref-for-map-exists\u2467"},{"id":"ref-for-map-exists\u2468"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-map-exists\u2460\u24ea"},{"id":"ref-for-map-exists\u2460\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-map-exists\u2460\u2461"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-map-exists\u2460\u2462"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-map-exists\u2460\u2463"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-map-exists\u2460\u2464"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-map-exists\u2460\u2465"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-map-exists\u2460\u2466"},{"id":"ref-for-map-exists\u2460\u2467"},{"id":"ref-for-map-exists\u2460\u2468"},{"id":"ref-for-map-exists\u2461\u24ea"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-map-exists\u2461\u2460"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-map-exists\u2461\u2461"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-map-exists\u2461\u2462"},{"id":"ref-for-map-exists\u2461\u2463"},{"id":"ref-for-map-exists\u2461\u2464"},{"id":"ref-for-map-exists\u2461\u2465"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-map-exists\u2461\u2466"}],"title":"9.2.1. Modification to the Request Constructor Algorithm"},{"refs":[{"id":"ref-for-map-exists\u2461\u2467"},{"id":"ref-for-map-exists\u2461\u2468"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-exists"},
"a33db89a": {"dfnID":"a33db89a","dfnText":"fetch","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-fetch"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-concept-fetch\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#concept-fetch"},
"a3b18719": {"dfnID":"a3b18719","dfnText":"append (for set)","external":true,"refSections":[{"refs":[{"id":"ref-for-set-append"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://infra.spec.whatwg.org/#set-append"},
"a5b959f9": {"dfnID":"a5b959f9","dfnText":"worklet event loop","external":true,"refSections":[{"refs":[{"id":"ref-for-worklet-event-loop"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-worklet-event-loop\u2460"},{"id":"ref-for-worklet-event-loop\u2461"}],"title":"2.5.2.3. Saved queries"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#worklet-event-loop"},
"a5eb2e99": {"dfnID":"a5eb2e99","dfnText":"register","external":true,"refSections":[{"refs":[{"id":"ref-for-registered-storage-endpoints"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-registered-storage-endpoints\u2460"}],"title":"3. Shared Storage\u2019s Backend"},{"refs":[{"id":"ref-for-registered-storage-endpoints\u2461"},{"id":"ref-for-registered-storage-endpoints\u2462"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#registered-storage-endpoints"},
"a6a8ec88": {"dfnID":"a6a8ec88","dfnText":"append","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-list-append"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"}],"url":"https://fetch.spec.whatwg.org/#concept-header-list-append"},
"a72449dd": {"dfnID":"a72449dd","dfnText":"in parallel","external":true,"refSections":[{"refs":[{"id":"ref-for-in-parallel"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-in-parallel\u2460"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"a8b25997": {"dfnID":"a8b25997","dfnText":"redirect status","external":true,"refSections":[{"refs":[{"id":"ref-for-redirect-status"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#redirect-status"},
"adcea05f": {"dfnID":"adcea05f","dfnText":"eventType","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-fenceevent-eventtype"},{"id":"ref-for-dom-fenceevent-eventtype\u2460"},{"id":"ref-for-dom-fenceevent-eventtype\u2461"},{"id":"ref-for-dom-fenceevent-eventtype\u2462"},{"id":"ref-for-dom-fenceevent-eventtype\u2463"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype"},
"ae46556f": {"dfnID":"ae46556f","dfnText":"Function","external":true,"refSections":[{"refs":[{"id":"ref-for-Function"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-Function\u2460"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"https://webidl.spec.whatwg.org/#Function"},
"ae6f41f1": {"dfnID":"ae6f41f1","dfnText":"urn uuid","external":true,"refSections":[{"refs":[{"id":"ref-for-urn-uuid"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-urn-uuid\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://www.ietf.org/rfc/rfc4122.txt#urn-uuid"},
"ae8def21": {"dfnID":"ae8def21","dfnText":"contain (for list)","external":true,"refSections":[{"refs":[{"id":"ref-for-list-contain"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-list-contain\u2460"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://infra.spec.whatwg.org/#list-contain"},
"append-or-modify-a-sec-shared-storage-writable-request-header": {"dfnID":"append-or-modify-a-sec-shared-storage-writable-request-header","dfnText":"append or modify a Sec-Shared-Storage-Writable request header","external":false,"refSections":[{"refs":[{"id":"ref-for-append-or-modify-a-sec-shared-storage-writable-request-header"}],"title":"9.2.2. Modification to HTTP network or cache fetch Algorithm"}],"url":"#append-or-modify-a-sec-shared-storage-writable-request-header"},
"b01b1359": {"dfnID":"b01b1359","dfnText":"opaque origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-origin-opaque"},{"id":"ref-for-concept-origin-opaque\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-origin-opaque\u2461"},{"id":"ref-for-concept-origin-opaque\u2462"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-concept-origin-opaque\u2463"}],"title":"6.5. Getter Methods"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque"},
"b0b31697": {"dfnID":"b0b31697","dfnText":"boolean attributes","external":true,"refSections":[{"refs":[{"id":"ref-for-boolean-attributes"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes"},
"b0d7f3c3": {"dfnID":"b0d7f3c3","dfnText":"USVString","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-USVString"},{"id":"ref-for-idl-USVString\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-idl-USVString\u2461"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-idl-USVString\u2462"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-idl-USVString\u2463"},{"id":"ref-for-idl-USVString\u2464"}],"title":"2.5. Entropy Budgets"},{"refs":[{"id":"ref-for-idl-USVString\u2465"},{"id":"ref-for-idl-USVString\u2466"},{"id":"ref-for-idl-USVString\u2467"},{"id":"ref-for-idl-USVString\u2468"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"b0fcb8d7": {"dfnID":"b0fcb8d7","dfnText":"UTF-8 decode","external":true,"refSections":[{"refs":[{"id":"ref-for-utf-8-decode"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-utf-8-decode\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://encoding.spec.whatwg.org/#utf-8-decode"},
"b1981b98": {"dfnID":"b1981b98","dfnText":"JSON MIME type","external":true,"refSections":[{"refs":[{"id":"ref-for-json-mime-type"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://mimesniff.spec.whatwg.org/#json-mime-type"},
"b262501e": {"dfnID":"b262501e","dfnText":"reject","external":true,"refSections":[{"refs":[{"id":"ref-for-reject"},{"id":"ref-for-reject\u2460"},{"id":"ref-for-reject\u2461"},{"id":"ref-for-reject\u2462"},{"id":"ref-for-reject\u2463"},{"id":"ref-for-reject\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-reject\u2465"},{"id":"ref-for-reject\u2466"},{"id":"ref-for-reject\u2467"},{"id":"ref-for-reject\u2468"},{"id":"ref-for-reject\u2460\u24ea"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-reject\u2460\u2460"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-reject\u2460\u2461"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-reject\u2460\u2462"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-reject\u2460\u2463"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-reject\u2460\u2464"},{"id":"ref-for-reject\u2460\u2465"},{"id":"ref-for-reject\u2460\u2466"},{"id":"ref-for-reject\u2460\u2467"},{"id":"ref-for-reject\u2460\u2468"},{"id":"ref-for-reject\u2461\u24ea"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-reject\u2461\u2460"},{"id":"ref-for-reject\u2461\u2461"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-reject\u2461\u2462"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org/#reject"},
"b2e61ba5": {"dfnID":"b2e61ba5","dfnText":"context ID","external":true,"refSections":[{"refs":[{"id":"ref-for-context-id"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#context-id"},
"b402424d": {"dfnID":"b402424d","dfnText":"update the image data","external":true,"refSections":[{"refs":[{"id":"ref-for-update-the-image-data"},{"id":"ref-for-update-the-image-data\u2460"}],"title":"8.2.1. Modification to Update the image data Algorithm"}],"url":"https://html.spec.whatwg.org/multipage/images.html#update-the-image-data"},
"b6ae4501": {"dfnID":"b6ae4501","dfnText":"networking task source","external":true,"refSections":[{"refs":[{"id":"ref-for-networking-task-source"},{"id":"ref-for-networking-task-source\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source"},
"b75a7d23": {"dfnID":"b75a7d23","dfnText":"realm","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-global-object-realm"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-global-object-realm\u2460"},{"id":"ref-for-concept-global-object-realm\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-concept-global-object-realm\u2462"}],"title":"2.2.5. Monkey Patch for HTTP fetch"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm"},
"b75bb3bd": {"dfnID":"b75bb3bd","dfnText":"SecureContext","external":true,"refSections":[{"refs":[{"id":"ref-for-SecureContext"}],"title":"4. Extension to the Window interface"},{"refs":[{"id":"ref-for-SecureContext\u2460"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"},{"refs":[{"id":"ref-for-SecureContext\u2461"},{"id":"ref-for-SecureContext\u2462"}],"title":"10.3. Web Locks IDLs Monkey Patches"}],"url":"https://webidl.spec.whatwg.org/#SecureContext"},
"b77e2b3f": {"dfnID":"b77e2b3f","dfnText":"determine if a report should be sent deterministically","external":true,"refSections":[{"refs":[{"id":"ref-for-determine-if-a-report-should-be-sent-deterministically"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#determine-if-a-report-should-be-sent-deterministically"},
"b79e50d6": {"dfnID":"b79e50d6","dfnText":"user activation","external":true,"refSections":[{"refs":[{"id":"ref-for-tracking-user-activation"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://html.spec.whatwg.org/multipage/interaction.html#tracking-user-activation"},
"b8914171": {"dfnID":"b8914171","dfnText":"fenced frame config","external":true,"refSections":[{"refs":[{"id":"ref-for-fenced-frame-config"},{"id":"ref-for-fenced-frame-config\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-fenced-frame-config\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://wicg.github.io/fenced-frame/#fenced-frame-config"},
"bb14e765": {"dfnID":"bb14e765","dfnText":"lock manager","external":true,"refSections":[{"refs":[{"id":"ref-for-lock-manager"}],"title":"10.1. User Agent Associated State"},{"refs":[{"id":"ref-for-lock-manager\u2460"}],"title":"10.4. Monkey Patch for lock manager\u2019s description"}],"url":"https://w3c.github.io/web-locks/#lock-manager"},
"bc7b9068": {"dfnID":"bc7b9068","dfnText":"clear","external":true,"refSections":[{"refs":[{"id":"ref-for-map-clear"}],"title":"3.3. The Database Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-clear"},
"bd562432": {"dfnID":"bd562432","dfnText":"valid filtering id max bytes range","external":true,"refSections":[{"refs":[{"id":"ref-for-valid-filtering-id-max-bytes-range"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#valid-filtering-id-max-bytes-range"},
"bd748f4d": {"dfnID":"bd748f4d","dfnText":"batching scope","external":true,"refSections":[{"refs":[{"id":"ref-for-batching-scope"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-batching-scope\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#batching-scope"},
"bdbd19d1": {"dfnID":"bdbd19d1","dfnText":"Promise","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-promise"},{"id":"ref-for-idl-promise\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-idl-promise\u2465"},{"id":"ref-for-idl-promise\u2466"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-idl-promise\u2460\u24ea"},{"id":"ref-for-idl-promise\u2460\u2460"},{"id":"ref-for-idl-promise\u2460\u2461"},{"id":"ref-for-idl-promise\u2460\u2462"},{"id":"ref-for-idl-promise\u2460\u2463"},{"id":"ref-for-idl-promise\u2460\u2464"},{"id":"ref-for-idl-promise\u2460\u2465"},{"id":"ref-for-idl-promise\u2460\u2466"},{"id":"ref-for-idl-promise\u2460\u2467"},{"id":"ref-for-idl-promise\u2460\u2468"},{"id":"ref-for-idl-promise\u2461\u24ea"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-promise"},
"be5dbc8c": {"dfnID":"be5dbc8c","dfnText":"unix epoch","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-unix-epoch"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-dfn-unix-epoch\u2460"}],"title":"3.2. The Shared Storage Database"}],"url":"https://w3c.github.io/hr-time/#dfn-unix-epoch"},
"bec98d30": {"dfnID":"bec98d30","dfnText":"dictionary","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-dictionary"},{"id":"ref-for-dfn-dictionary\u2460"},{"id":"ref-for-dfn-dictionary\u2461"},{"id":"ref-for-dfn-dictionary\u2462"},{"id":"ref-for-dfn-dictionary\u2463"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://webidl.spec.whatwg.org/#dfn-dictionary"},
"bf8231d0": {"dfnID":"bf8231d0","dfnText":"legitimate use cases","external":true,"refSections":[{"refs":[{"id":"ref-for-example-scenarios"}],"title":"1. Introduction"}],"url":"https://github.com/WICG/shared-storage#example-scenarios"},
"bit-debit": {"dfnID":"bit-debit","dfnText":"bit debit","external":false,"refSections":[{"refs":[{"id":"ref-for-bit-debit"},{"id":"ref-for-bit-debit\u2460"},{"id":"ref-for-bit-debit\u2461"},{"id":"ref-for-bit-debit\u2462"},{"id":"ref-for-bit-debit\u2463"},{"id":"ref-for-bit-debit\u2464"},{"id":"ref-for-bit-debit\u2465"},{"id":"ref-for-bit-debit\u2466"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#bit-debit"},
"bit-debit-bits": {"dfnID":"bit-debit-bits","dfnText":"bits","external":false,"refSections":[{"refs":[{"id":"ref-for-bit-debit-bits"},{"id":"ref-for-bit-debit-bits\u2460"},{"id":"ref-for-bit-debit-bits\u2461"},{"id":"ref-for-bit-debit-bits\u2462"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#bit-debit-bits"},
"bit-debit-expired": {"dfnID":"bit-debit-expired","dfnText":"expired","external":false,"refSections":[{"refs":[{"id":"ref-for-bit-debit-expired"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#bit-debit-expired"},
"bit-debit-timestamp": {"dfnID":"bit-debit-timestamp","dfnText":"timestamp","external":false,"refSections":[{"refs":[{"id":"ref-for-bit-debit-timestamp"},{"id":"ref-for-bit-debit-timestamp\u2460"},{"id":"ref-for-bit-debit-timestamp\u2461"},{"id":"ref-for-bit-debit-timestamp\u2462"},{"id":"ref-for-bit-debit-timestamp\u2463"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#bit-debit-timestamp"},
"c01cbda0": {"dfnID":"c01cbda0","dfnText":"EnforceRange","external":true,"refSections":[{"refs":[{"id":"ref-for-EnforceRange"},{"id":"ref-for-EnforceRange\u2460"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#EnforceRange"},
"c07c4a8c": {"dfnID":"c07c4a8c","dfnText":"request-constructor","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-request"},{"id":"ref-for-dom-request\u2460"}],"title":"9.2.1. Modification to the Request Constructor Algorithm"}],"url":"https://fetch.spec.whatwg.org/#dom-request"},
"c0868016": {"dfnID":"c0868016","dfnText":"path","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-path"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://url.spec.whatwg.org/#concept-url-path"},
"c258bbe3": {"dfnID":"c258bbe3","dfnText":"StorageInterestGroup","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-storageinterestgroup"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"https://wicg.github.io/turtledove/#dictdef-storageinterestgroup"},
"c371fb46": {"dfnID":"c371fb46","dfnText":"allowed to use","external":true,"refSections":[{"refs":[{"id":"ref-for-allowed-to-use"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#allowed-to-use"},
"c55932e1": {"dfnID":"c55932e1","dfnText":"enrolled","external":true,"refSections":[{"refs":[{"id":"ref-for-enrolled"}],"title":"2. The SharedStorageWorklet Interface"}],"url":"https://github.com/privacysandbox/attestation#enrolled"},
"c5891539": {"dfnID":"c5891539","dfnText":"HTMLImageElement","external":true,"refSections":[{"refs":[{"id":"ref-for-htmlimageelement"},{"id":"ref-for-htmlimageelement\u2460"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement"},
"c5b31ce5": {"dfnID":"c5b31ce5","dfnText":"store a pending config","external":true,"refSections":[{"refs":[{"id":"ref-for-fenced-frame-config-mapping-store-a-pending-config"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-store-a-pending-config"},
"c5e13c9d": {"dfnID":"c5e13c9d","dfnText":"mark a debug scope complete","external":true,"refSections":[{"refs":[{"id":"ref-for-mark-a-debug-scope-complete"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-mark-a-debug-scope-complete\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#mark-a-debug-scope-complete"},
"c62cd7cf": {"dfnID":"c62cd7cf","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-document-origin"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-concept-document-origin\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"c88f3887": {"dfnID":"c88f3887","dfnText":"item (for struct)","external":true,"refSections":[{"refs":[{"id":"ref-for-struct-item"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-struct-item\u2460"},{"id":"ref-for-struct-item\u2461"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"}],"url":"https://infra.spec.whatwg.org/#struct-item"},
"c9e7c11a": {"dfnID":"c9e7c11a","dfnText":"header","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-concept-header\u2460"}],"title":"7. Triggering Operations Via HTTP Response Header"},{"refs":[{"id":"ref-for-concept-header\u2461"},{"id":"ref-for-concept-header\u2462"}],"title":"9.3.1. `Sec-Shared-Storage-Data-Origin` Request Header"},{"refs":[{"id":"ref-for-concept-header\u2463"},{"id":"ref-for-concept-header\u2464"}],"title":"9.3.2. `Shared-Storage-Cross-Origin-Worklet-Allowed` Response Header"},{"refs":[{"id":"ref-for-concept-header\u2465"},{"id":"ref-for-concept-header\u2466"}],"title":"9.3.3. `Sec-Shared-Storage-Writable` Request Header"},{"refs":[{"id":"ref-for-concept-header\u2467"},{"id":"ref-for-concept-header\u2468"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"https://fetch.spec.whatwg.org/#concept-header"},
"ca3ca4ae": {"dfnID":"ca3ca4ae","dfnText":"URL parser","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url-parser"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-url-parser\u2460"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-concept-url-parser\u2461"},{"id":"ref-for-concept-url-parser\u2462"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-url-parser\u2463"},{"id":"ref-for-concept-url-parser\u2464"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-concept-url-parser\u2465"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://url.spec.whatwg.org/#concept-url-parser"},
"cadf5fe9": {"dfnID":"cadf5fe9","dfnText":"converted to an IDL value","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-convert-ecmascript-to-idl-value"},{"id":"ref-for-dfn-convert-ecmascript-to-idl-value\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value"},
"callbackdef-runfunctionforsharedstorageselecturloperation": {"dfnID":"callbackdef-runfunctionforsharedstorageselecturloperation","dfnText":"RunFunctionForSharedStorageSelectURLOperation","external":false,"refSections":[{"refs":[{"id":"ref-for-callbackdef-runfunctionforsharedstorageselecturloperation"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#callbackdef-runfunctionforsharedstorageselecturloperation"},
"cb1e75b1": {"dfnID":"cb1e75b1","dfnText":"string","external":true,"refSections":[{"refs":[{"id":"ref-for-string\u2461\u2467"},{"id":"ref-for-string\u2461\u2468"},{"id":"ref-for-string\u2462\u24ea"},{"id":"ref-for-string\u2462\u2460"},{"id":"ref-for-string\u2462\u2461"},{"id":"ref-for-string\u2462\u2462"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-string\u2462\u2463"},{"id":"ref-for-string\u2462\u2464"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://httpwg.org/specs/rfc8941.html#string"},
"cb98f71f": {"dfnID":"cb98f71f","dfnText":"mode","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-mode"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://fetch.spec.whatwg.org/#concept-request-mode"},
"cbdc89b4": {"dfnID":"cbdc89b4","dfnText":"while","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-while"}],"title":"2.5.2.3. Saved queries"}],"url":"https://infra.spec.whatwg.org/#iteration-while"},
"cc608da4": {"dfnID":"cc608da4","dfnText":"promise rejected","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-rejected-with"},{"id":"ref-for-a-promise-rejected-with\u2460"},{"id":"ref-for-a-promise-rejected-with\u2461"},{"id":"ref-for-a-promise-rejected-with\u2462"},{"id":"ref-for-a-promise-rejected-with\u2465"},{"id":"ref-for-a-promise-rejected-with\u2466"},{"id":"ref-for-a-promise-rejected-with\u2467"},{"id":"ref-for-a-promise-rejected-with\u2468"},{"id":"ref-for-a-promise-rejected-with\u2460\u24ea"},{"id":"ref-for-a-promise-rejected-with\u2460\u2460"},{"id":"ref-for-a-promise-rejected-with\u2460\u2461"},{"id":"ref-for-a-promise-rejected-with\u2460\u2462"},{"id":"ref-for-a-promise-rejected-with\u2460\u2463"},{"id":"ref-for-a-promise-rejected-with\u2460\u2464"},{"id":"ref-for-a-promise-rejected-with\u2460\u2468"},{"id":"ref-for-a-promise-rejected-with\u2461\u24ea"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2461\u2462"},{"id":"ref-for-a-promise-rejected-with\u2461\u2463"},{"id":"ref-for-a-promise-rejected-with\u2461\u2464"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2461\u2465"},{"id":"ref-for-a-promise-rejected-with\u2461\u2466"},{"id":"ref-for-a-promise-rejected-with\u2461\u2467"},{"id":"ref-for-a-promise-rejected-with\u2461\u2468"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2462\u24ea"},{"id":"ref-for-a-promise-rejected-with\u2462\u2460"},{"id":"ref-for-a-promise-rejected-with\u2462\u2461"},{"id":"ref-for-a-promise-rejected-with\u2462\u2462"},{"id":"ref-for-a-promise-rejected-with\u2462\u2463"},{"id":"ref-for-a-promise-rejected-with\u2462\u2464"},{"id":"ref-for-a-promise-rejected-with\u2462\u2465"},{"id":"ref-for-a-promise-rejected-with\u2462\u2466"},{"id":"ref-for-a-promise-rejected-with\u2462\u2467"},{"id":"ref-for-a-promise-rejected-with\u2462\u2468"},{"id":"ref-for-a-promise-rejected-with\u2463\u24ea"},{"id":"ref-for-a-promise-rejected-with\u2463\u2460"},{"id":"ref-for-a-promise-rejected-with\u2463\u2461"},{"id":"ref-for-a-promise-rejected-with\u2463\u2462"},{"id":"ref-for-a-promise-rejected-with\u2463\u2463"},{"id":"ref-for-a-promise-rejected-with\u2463\u2464"},{"id":"ref-for-a-promise-rejected-with\u2463\u2465"},{"id":"ref-for-a-promise-rejected-with\u2463\u2466"},{"id":"ref-for-a-promise-rejected-with\u2463\u2467"},{"id":"ref-for-a-promise-rejected-with\u2463\u2468"},{"id":"ref-for-a-promise-rejected-with\u2464\u24ea"},{"id":"ref-for-a-promise-rejected-with\u2464\u2460"},{"id":"ref-for-a-promise-rejected-with\u2464\u2461"},{"id":"ref-for-a-promise-rejected-with\u2464\u2462"},{"id":"ref-for-a-promise-rejected-with\u2464\u2463"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2464\u2464"},{"id":"ref-for-a-promise-rejected-with\u2464\u2465"},{"id":"ref-for-a-promise-rejected-with\u2464\u2466"},{"id":"ref-for-a-promise-rejected-with\u2464\u2467"},{"id":"ref-for-a-promise-rejected-with\u2464\u2468"},{"id":"ref-for-a-promise-rejected-with\u2465\u24ea"},{"id":"ref-for-a-promise-rejected-with\u2465\u2460"},{"id":"ref-for-a-promise-rejected-with\u2465\u2461"},{"id":"ref-for-a-promise-rejected-with\u2465\u2462"},{"id":"ref-for-a-promise-rejected-with\u2465\u2463"},{"id":"ref-for-a-promise-rejected-with\u2465\u2464"},{"id":"ref-for-a-promise-rejected-with\u2465\u2465"},{"id":"ref-for-a-promise-rejected-with\u2465\u2466"},{"id":"ref-for-a-promise-rejected-with\u2465\u2467"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2465\u2468"},{"id":"ref-for-a-promise-rejected-with\u2466\u24ea"},{"id":"ref-for-a-promise-rejected-with\u2466\u2460"},{"id":"ref-for-a-promise-rejected-with\u2466\u2461"},{"id":"ref-for-a-promise-rejected-with\u2466\u2462"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org#a-promise-rejected-with"},
"cc61f510": {"dfnID":"cc61f510","dfnText":"an exception was thrown","external":true,"refSections":[{"refs":[{"id":"ref-for-an-exception-was-thrown"},{"id":"ref-for-an-exception-was-thrown\u2460"},{"id":"ref-for-an-exception-was-thrown\u2461"},{"id":"ref-for-an-exception-was-thrown\u2462"},{"id":"ref-for-an-exception-was-thrown\u2463"},{"id":"ref-for-an-exception-was-thrown\u2464"},{"id":"ref-for-an-exception-was-thrown\u2465"},{"id":"ref-for-an-exception-was-thrown\u2466"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-an-exception-was-thrown\u2467"},{"id":"ref-for-an-exception-was-thrown\u2468"},{"id":"ref-for-an-exception-was-thrown\u2460\u24ea"},{"id":"ref-for-an-exception-was-thrown\u2460\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://webidl.spec.whatwg.org/#an-exception-was-thrown"},
"cc867b80": {"dfnID":"cc867b80","dfnText":"empty (for map)","external":true,"refSections":[{"refs":[{"id":"ref-for-map-is-empty"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-map-is-empty\u2460"},{"id":"ref-for-map-is-empty\u2461"},{"id":"ref-for-map-is-empty\u2462"},{"id":"ref-for-map-is-empty\u2463"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://infra.spec.whatwg.org#map-is-empty"},
"cc890cc1": {"dfnID":"cc890cc1","dfnText":"policy-controlled feature","external":true,"refSections":[{"refs":[{"id":"ref-for-policy-controlled-feature"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-policy-controlled-feature\u2460"},{"id":"ref-for-policy-controlled-feature\u2461"}],"title":"11. Permissions Policy Integration"}],"url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"},
"ce5e39d9": {"dfnID":"ce5e39d9","dfnText":"get storage interest groups for owner","external":true,"refSections":[{"refs":[{"id":"ref-for-get-storage-interest-groups-for-owner"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://wicg.github.io/turtledove/#get-storage-interest-groups-for-owner"},
"cf17e487": {"dfnID":"cf17e487","dfnText":"fenced frame config instance","external":true,"refSections":[{"refs":[{"id":"ref-for-browsing-context-fenced-frame-config-instance"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-browsing-context-fenced-frame-config-instance\u2460"},{"id":"ref-for-browsing-context-fenced-frame-config-instance\u2461"},{"id":"ref-for-browsing-context-fenced-frame-config-instance\u2462"},{"id":"ref-for-browsing-context-fenced-frame-config-instance\u2463"},{"id":"ref-for-browsing-context-fenced-frame-config-instance\u2464"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance"},
"cf6542b2": {"dfnID":"cf6542b2","dfnText":"the exclusive range","external":true,"refSections":[{"refs":[{"id":"ref-for-the-exclusive-range"}],"title":"2.5. Entropy Budgets"}],"url":"https://infra.spec.whatwg.org/#the-exclusive-range"},
"charge-shared-storage-navigation-budget": {"dfnID":"charge-shared-storage-navigation-budget","dfnText":"charge shared storage navigation budget","external":false,"refSections":[{"refs":[{"id":"ref-for-charge-shared-storage-navigation-budget"},{"id":"ref-for-charge-shared-storage-navigation-budget\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#charge-shared-storage-navigation-budget"},
"charge-shared-storage-top-level-traversable-budgets": {"dfnID":"charge-shared-storage-top-level-traversable-budgets","dfnText":"charge shared storage top-level traversable budgets","external":false,"refSections":[{"refs":[{"id":"ref-for-charge-shared-storage-top-level-traversable-budgets"},{"id":"ref-for-charge-shared-storage-top-level-traversable-budgets\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#charge-shared-storage-top-level-traversable-budgets"},
"check-for-script-and-context-origin-match": {"dfnID":"check-for-script-and-context-origin-match","dfnText":"check for script and context origin match","external":false,"refSections":[{"refs":[{"id":"ref-for-check-for-script-and-context-origin-match"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"#check-for-script-and-context-origin-match"},
"check-for-trusted-origin-match": {"dfnID":"check-for-trusted-origin-match","dfnText":"check for trusted origin match","external":false,"refSections":[{"refs":[{"id":"ref-for-check-for-trusted-origin-match"},{"id":"ref-for-check-for-trusted-origin-match\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"#check-for-trusted-origin-match"},
"check-for-trusted-origin-match-on-a-string": {"dfnID":"check-for-trusted-origin-match-on-a-string","dfnText":"check for trusted origin match on a string","external":false,"refSections":[{"refs":[{"id":"ref-for-check-for-trusted-origin-match-on-a-string"},{"id":"ref-for-check-for-trusted-origin-match-on-a-string\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"#check-for-trusted-origin-match-on-a-string"},
"check-if-addmodule-is-allowed-and-update-state": {"dfnID":"check-if-addmodule-is-allowed-and-update-state","dfnText":"check if addModule is allowed and update state","external":false,"refSections":[{"refs":[{"id":"ref-for-check-if-addmodule-is-allowed-and-update-state"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-check-if-addmodule-is-allowed-and-update-state\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"#check-if-addmodule-is-allowed-and-update-state"},
"check-if-string-like": {"dfnID":"check-if-string-like","dfnText":"check if string-like","external":false,"refSections":[{"refs":[{"id":"ref-for-check-if-string-like"},{"id":"ref-for-check-if-string-like\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#check-if-string-like"},
"check-if-user-preference-setting-allows-access-to-shared-storage": {"dfnID":"check-if-user-preference-setting-allows-access-to-shared-storage","dfnText":"check if user preference setting allows access to shared storage","external":false,"refSections":[{"refs":[{"id":"ref-for-check-if-user-preference-setting-allows-access-to-shared-storage"},{"id":"ref-for-check-if-user-preference-setting-allows-access-to-shared-storage\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-check-if-user-preference-setting-allows-access-to-shared-storage\u2461"},{"id":"ref-for-check-if-user-preference-setting-allows-access-to-shared-storage\u2462"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-check-if-user-preference-setting-allows-access-to-shared-storage\u2463"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-check-if-user-preference-setting-allows-access-to-shared-storage\u2464"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-check-if-user-preference-setting-allows-access-to-shared-storage\u2465"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#check-if-user-preference-setting-allows-access-to-shared-storage"},
"check-whether-a-bit-debit-is-expired": {"dfnID":"check-whether-a-bit-debit-is-expired","dfnText":"check whether a bit debit is expired","external":false,"refSections":[{"refs":[{"id":"ref-for-check-whether-a-bit-debit-is-expired"},{"id":"ref-for-check-whether-a-bit-debit-is-expired\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#check-whether-a-bit-debit-is-expired"},
"create-a-shared-storage-bucket": {"dfnID":"create-a-shared-storage-bucket","dfnText":"create a shared storage bucket","external":false,"refSections":[{"refs":[{"id":"ref-for-create-a-shared-storage-bucket"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"#create-a-shared-storage-bucket"},
"create-a-shared-storage-shelf": {"dfnID":"create-a-shared-storage-shelf","dfnText":"create a shared storage shelf","external":false,"refSections":[{"refs":[{"id":"ref-for-create-a-shared-storage-shelf"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"#create-a-shared-storage-shelf"},
"d08c79a9": {"dfnID":"d08c79a9","dfnText":"interface mixin","external":true,"refSections":[{"refs":[{"id":"ref-for-interface-mixin"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://webidl.spec.whatwg.org/#interface-mixin"},
"d0b4a948": {"dfnID":"d0b4a948","dfnText":"a promise rejected with","external":true,"refSections":[{"refs":[{"id":"ref-for-a-promise-rejected-with\u2463"},{"id":"ref-for-a-promise-rejected-with\u2464"},{"id":"ref-for-a-promise-rejected-with\u2460\u2465"},{"id":"ref-for-a-promise-rejected-with\u2460\u2466"},{"id":"ref-for-a-promise-rejected-with\u2460\u2467"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-a-promise-rejected-with\u2461\u2460"},{"id":"ref-for-a-promise-rejected-with\u2461\u2461"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"d14a6f26": {"dfnID":"d14a6f26","dfnText":"key","external":true,"refSections":[{"refs":[{"id":"ref-for-map-key"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://infra.spec.whatwg.org/#map-key"},
"d192e211": {"dfnID":"d192e211","dfnText":"signal","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-lockoptions-signal"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://w3c.github.io/web-locks/#dom-lockoptions-signal"},
"d2f99df9": {"dfnID":"d2f99df9","dfnText":"terminate a worklet global scope","external":true,"refSections":[{"refs":[{"id":"ref-for-terminate-a-worklet-global-scope"},{"id":"ref-for-terminate-a-worklet-global-scope\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#terminate-a-worklet-global-scope"},
"d47d0690": {"dfnID":"d47d0690","dfnText":"get","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-list-get"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-header-list-get"},
"d56eba29": {"dfnID":"d56eba29","dfnText":"boolean","external":true,"refSections":[{"refs":[{"id":"ref-for-boolean\u2466"}],"title":"9.3.2. `Shared-Storage-Cross-Origin-Worklet-Allowed` Response Header"},{"refs":[{"id":"ref-for-boolean\u2467"}],"title":"9.3.3. `Sec-Shared-Storage-Writable` Request Header"},{"refs":[{"id":"ref-for-boolean\u2468"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-boolean\u2460\u24ea"},{"id":"ref-for-boolean\u2460\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://httpwg.org/specs/rfc8941.html#boolean"},
"d5890b17": {"dfnID":"d5890b17","dfnText":"getting the values","external":true,"refSections":[{"refs":[{"id":"ref-for-map-getting-the-values"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-map-getting-the-values\u2460"}],"title":"3.3. The Database Algorithms"}],"url":"https://infra.spec.whatwg.org/#map-getting-the-values"},
"d7f1116b": {"dfnID":"d7f1116b","dfnText":"bottle map","external":true,"refSections":[{"refs":[{"id":"ref-for-bottle-map"},{"id":"ref-for-bottle-map\u2460"},{"id":"ref-for-bottle-map\u2461"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#bottle-map"},
"d83f8790": {"dfnID":"d83f8790","dfnText":"priority","external":true,"refSections":[{"refs":[{"id":"ref-for-request-priority"}],"title":"8.2.1. Modification to Update the image data Algorithm"}],"url":"https://fetch.spec.whatwg.org/#request-priority"},
"d90669f5": {"dfnID":"d90669f5","dfnText":"debug scope","external":true,"refSections":[{"refs":[{"id":"ref-for-debug-scope"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-debug-scope\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#debug-scope"},
"dacde8b5": {"dfnID":"dacde8b5","dfnText":"a new promise","external":true,"refSections":[{"refs":[{"id":"ref-for-a-new-promise"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"daed3f4b": {"dfnID":"daed3f4b","dfnText":"storage shelf","external":true,"refSections":[{"refs":[{"id":"ref-for-storage-shelf"},{"id":"ref-for-storage-shelf\u2460"},{"id":"ref-for-storage-shelf\u2461"},{"id":"ref-for-storage-shelf\u2462"},{"id":"ref-for-storage-shelf\u2463"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"https://storage.spec.whatwg.org/#storage-shelf"},
"dc07163b": {"dfnID":"dc07163b","dfnText":"IsCallable","external":true,"refSections":[{"refs":[{"id":"ref-for-sec-iscallable"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iscallable"},
"dc1cd39b": {"dfnID":"dc1cd39b","dfnText":"URL","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-url"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-concept-request-url\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-request-url\u2461"},{"id":"ref-for-concept-request-url\u2462"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-request-url"},
"dca2de17": {"dfnID":"dca2de17","dfnText":"DOMException","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-DOMException"},{"id":"ref-for-idl-DOMException\u2460"},{"id":"ref-for-idl-DOMException\u2461"},{"id":"ref-for-idl-DOMException\u2462"},{"id":"ref-for-idl-DOMException\u2463"},{"id":"ref-for-idl-DOMException\u2464"},{"id":"ref-for-idl-DOMException\u2465"},{"id":"ref-for-idl-DOMException\u2466"},{"id":"ref-for-idl-DOMException\u2467"},{"id":"ref-for-idl-DOMException\u2468"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://webidl.spec.whatwg.org/#idl-DOMException"},
"dcffbccd": {"dfnID":"dcffbccd","dfnText":"URL","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-url"},{"id":"ref-for-concept-url\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-concept-url\u2461"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-concept-url\u2462"},{"id":"ref-for-concept-url\u2463"}],"title":"2.2.4. The `Shared-Storage-Cross-Origin-Worklet-Allowed` HTTP response header"},{"refs":[{"id":"ref-for-concept-url\u2464"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-concept-url\u2465"},{"id":"ref-for-concept-url\u2466"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-url\u2467"},{"id":"ref-for-concept-url\u2468"},{"id":"ref-for-concept-url\u2460\u24ea"},{"id":"ref-for-concept-url\u2460\u2460"},{"id":"ref-for-concept-url\u2460\u2461"},{"id":"ref-for-concept-url\u2460\u2462"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-concept-url\u2460\u2463"},{"id":"ref-for-concept-url\u2460\u2464"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-concept-url\u2460\u2465"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-concept-url\u2460\u2466"},{"id":"ref-for-concept-url\u2460\u2467"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-concept-url\u2460\u2468"},{"id":"ref-for-concept-url\u2461\u24ea"},{"id":"ref-for-concept-url\u2461\u2460"}],"title":"13. Privacy Considerations"}],"url":"https://url.spec.whatwg.org/#concept-url"},
"default-entry-lifetime": {"dfnID":"default-entry-lifetime","dfnText":"default entry lifetime","external":false,"refSections":[{"refs":[{"id":"ref-for-default-entry-lifetime"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-default-entry-lifetime\u2460"}],"title":"3.3. The Database Algorithms"}],"url":"#default-entry-lifetime"},
"default-selecturl-index": {"dfnID":"default-selecturl-index","dfnText":"default selectURL index","external":false,"refSections":[{"refs":[{"id":"ref-for-default-selecturl-index"},{"id":"ref-for-default-selecturl-index\u2460"},{"id":"ref-for-default-selecturl-index\u2461"},{"id":"ref-for-default-selecturl-index\u2462"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-default-selecturl-index\u2463"}],"title":"2.5. Entropy Budgets"},{"refs":[{"id":"ref-for-default-selecturl-index\u2464"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#default-selecturl-index"},
"determine-remaining-navigation-budget": {"dfnID":"determine-remaining-navigation-budget","dfnText":"determine remaining navigation budget","external":false,"refSections":[{"refs":[{"id":"ref-for-determine-remaining-navigation-budget"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-determine-remaining-navigation-budget\u2460"}],"title":"6.5. Getter Methods"}],"url":"#determine-remaining-navigation-budget"},
"determine-whether-a-request-can-currently-use-shared-storage": {"dfnID":"determine-whether-a-request-can-currently-use-shared-storage","dfnText":"determine whether a request can currently use shared storage","external":false,"refSections":[{"refs":[{"id":"ref-for-determine-whether-a-request-can-currently-use-shared-storage"},{"id":"ref-for-determine-whether-a-request-can-currently-use-shared-storage\u2460"},{"id":"ref-for-determine-whether-a-request-can-currently-use-shared-storage\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#determine-whether-a-request-can-currently-use-shared-storage"},
"determine-whether-shared-storage-is-allowed-by-context": {"dfnID":"determine-whether-shared-storage-is-allowed-by-context","dfnText":"determine whether shared storage is allowed by context","external":false,"refSections":[{"refs":[{"id":"ref-for-determine-whether-shared-storage-is-allowed-by-context"},{"id":"ref-for-determine-whether-shared-storage-is-allowed-by-context\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-determine-whether-shared-storage-is-allowed-by-context\u2461"},{"id":"ref-for-determine-whether-shared-storage-is-allowed-by-context\u2462"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-determine-whether-shared-storage-is-allowed-by-context\u2463"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-determine-whether-shared-storage-is-allowed-by-context\u2464"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-determine-whether-shared-storage-is-allowed-by-context\u2465"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#determine-whether-shared-storage-is-allowed-by-context"},
"deterministic-operation-timeout-duration": {"dfnID":"deterministic-operation-timeout-duration","dfnText":"deterministic operation timeout duration","external":false,"refSections":[{"refs":[{"id":"ref-for-deterministic-operation-timeout-duration"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#deterministic-operation-timeout-duration"},
"dictdef-sharedstoragemodifiermethodoptions": {"dfnID":"dictdef-sharedstoragemodifiermethodoptions","dfnText":"SharedStorageModifierMethodOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2460"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2461"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2462"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2463"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2464"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2465"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2466"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2467"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2468"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2460\u24ea"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2460\u2460"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2460\u2461"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2460\u2462"},{"id":"ref-for-dictdef-sharedstoragemodifiermethodoptions\u2460\u2463"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dictdef-sharedstoragemodifiermethodoptions"},
"dictdef-sharedstorageprivateaggregationconfig": {"dfnID":"dictdef-sharedstorageprivateaggregationconfig","dfnText":"SharedStoragePrivateAggregationConfig","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sharedstorageprivateaggregationconfig"}],"title":"6. The SharedStorage Interface"}],"url":"#dictdef-sharedstorageprivateaggregationconfig"},
"dictdef-sharedstoragerunoperationmethodoptions": {"dfnID":"dictdef-sharedstoragerunoperationmethodoptions","dfnText":"SharedStorageRunOperationMethodOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions"},{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions\u2461"},{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions\u2462"},{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions\u2463"},{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions\u2465"},{"id":"ref-for-dictdef-sharedstoragerunoperationmethodoptions\u2466"}],"title":"6. The SharedStorage Interface"}],"url":"#dictdef-sharedstoragerunoperationmethodoptions"},
"dictdef-sharedstoragesetmethodoptions": {"dfnID":"dictdef-sharedstoragesetmethodoptions","dfnText":"SharedStorageSetMethodOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sharedstoragesetmethodoptions"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dictdef-sharedstoragesetmethodoptions\u2460"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dictdef-sharedstoragesetmethodoptions\u2461"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dictdef-sharedstoragesetmethodoptions\u2462"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dictdef-sharedstoragesetmethodoptions"},
"dictdef-sharedstorageurlwithmetadata": {"dfnID":"dictdef-sharedstorageurlwithmetadata","dfnText":"SharedStorageUrlWithMetadata","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sharedstorageurlwithmetadata"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-dictdef-sharedstorageurlwithmetadata\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dictdef-sharedstorageurlwithmetadata\u2461"},{"id":"ref-for-dictdef-sharedstorageurlwithmetadata\u2462"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-dictdef-sharedstorageurlwithmetadata\u2463"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-dictdef-sharedstorageurlwithmetadata\u2464"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-dictdef-sharedstorageurlwithmetadata\u2465"}],"title":"6. The SharedStorage Interface"}],"url":"#dictdef-sharedstorageurlwithmetadata"},
"dictdef-sharedstorageworkletoptions": {"dfnID":"dictdef-sharedstorageworkletoptions","dfnText":"SharedStorageWorkletOptions","external":false,"refSections":[{"refs":[{"id":"ref-for-dictdef-sharedstorageworkletoptions"}],"title":"6. The SharedStorage Interface"}],"url":"#dictdef-sharedstorageworkletoptions"},
"dom-htmlsharedstoragewritableelementutils-sharedstoragewritable": {"dfnID":"dom-htmlsharedstoragewritableelementutils-sharedstoragewritable","dfnText":"sharedStorageWritable","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-htmlsharedstoragewritableelementutils-sharedstoragewritable"},{"id":"ref-for-dom-htmlsharedstoragewritableelementutils-sharedstoragewritable\u2460"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"#dom-htmlsharedstoragewritableelementutils-sharedstoragewritable"},
"dom-requestinit-sharedstoragewritable": {"dfnID":"dom-requestinit-sharedstoragewritable","dfnText":"sharedStorageWritable","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-requestinit-sharedstoragewritable"},{"id":"ref-for-dom-requestinit-sharedstoragewritable\u2460"}],"title":"9.1. sharedStorageWritable Key"},{"refs":[{"id":"ref-for-dom-requestinit-sharedstoragewritable\u2461"}],"title":"9.2.1. Modification to the Request Constructor Algorithm"}],"url":"#dom-requestinit-sharedstoragewritable"},
"dom-runfunctionforsharedstorageselecturloperation-data": {"dfnID":"dom-runfunctionforsharedstorageselecturloperation-data","dfnText":"data","external":false,"refSections":[],"url":"#dom-runfunctionforsharedstorageselecturloperation-data"},
"dom-runfunctionforsharedstorageselecturloperation-urls": {"dfnID":"dom-runfunctionforsharedstorageselecturloperation-urls","dfnText":"urls","external":false,"refSections":[],"url":"#dom-runfunctionforsharedstorageselecturloperation-urls"},
"dom-sharedstorage-append": {"dfnID":"dom-sharedstorage-append","dfnText":"append(key, value, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-append"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstorage-append\u2460"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorage-append\u2461"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dom-sharedstorage-append\u2462"}],"title":"7. Triggering Operations Via HTTP Response Header"}],"url":"#dom-sharedstorage-append"},
"dom-sharedstorage-append-key-value-options-key": {"dfnID":"dom-sharedstorage-append-key-value-options-key","dfnText":"key","external":false,"refSections":[],"url":"#dom-sharedstorage-append-key-value-options-key"},
"dom-sharedstorage-append-key-value-options-options": {"dfnID":"dom-sharedstorage-append-key-value-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-append-key-value-options-options"},
"dom-sharedstorage-append-key-value-options-value": {"dfnID":"dom-sharedstorage-append-key-value-options-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-sharedstorage-append-key-value-options-value"},
"dom-sharedstorage-batchupdate": {"dfnID":"dom-sharedstorage-batchupdate","dfnText":"batchUpdate(methods, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-batchupdate"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorage-batchupdate\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-sharedstorage-batchupdate"},
"dom-sharedstorage-batchupdate-methods-options-methods": {"dfnID":"dom-sharedstorage-batchupdate-methods-options-methods","dfnText":"methods","external":false,"refSections":[],"url":"#dom-sharedstorage-batchupdate-methods-options-methods"},
"dom-sharedstorage-batchupdate-methods-options-options": {"dfnID":"dom-sharedstorage-batchupdate-methods-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-batchupdate-methods-options-options"},
"dom-sharedstorage-clear": {"dfnID":"dom-sharedstorage-clear","dfnText":"clear(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-clear"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstorage-clear\u2460"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorage-clear\u2461"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dom-sharedstorage-clear\u2462"}],"title":"7. Triggering Operations Via HTTP Response Header"}],"url":"#dom-sharedstorage-clear"},
"dom-sharedstorage-clear-options-options": {"dfnID":"dom-sharedstorage-clear-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-clear-options-options"},
"dom-sharedstorage-createworklet": {"dfnID":"dom-sharedstorage-createworklet","dfnText":"createWorklet(moduleURL, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-createworklet"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-dom-sharedstorage-createworklet\u2460"}],"title":"6. The SharedStorage Interface"}],"url":"#dom-sharedstorage-createworklet"},
"dom-sharedstorage-createworklet-moduleurl-options-moduleurl": {"dfnID":"dom-sharedstorage-createworklet-moduleurl-options-moduleurl","dfnText":"moduleURL","external":false,"refSections":[],"url":"#dom-sharedstorage-createworklet-moduleurl-options-moduleurl"},
"dom-sharedstorage-createworklet-moduleurl-options-options": {"dfnID":"dom-sharedstorage-createworklet-moduleurl-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-createworklet-moduleurl-options-options"},
"dom-sharedstorage-delete": {"dfnID":"dom-sharedstorage-delete","dfnText":"delete(key, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-delete"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstorage-delete\u2460"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorage-delete\u2461"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dom-sharedstorage-delete\u2462"}],"title":"7. Triggering Operations Via HTTP Response Header"}],"url":"#dom-sharedstorage-delete"},
"dom-sharedstorage-delete-key-options-key": {"dfnID":"dom-sharedstorage-delete-key-options-key","dfnText":"key","external":false,"refSections":[],"url":"#dom-sharedstorage-delete-key-options-key"},
"dom-sharedstorage-delete-key-options-options": {"dfnID":"dom-sharedstorage-delete-key-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-delete-key-options-options"},
"dom-sharedstorage-get": {"dfnID":"dom-sharedstorage-get","dfnText":"get(key)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-get"}],"title":"6. The SharedStorage Interface"}],"url":"#dom-sharedstorage-get"},
"dom-sharedstorage-get-key-key": {"dfnID":"dom-sharedstorage-get-key-key","dfnText":"key","external":false,"refSections":[],"url":"#dom-sharedstorage-get-key-key"},
"dom-sharedstorage-length": {"dfnID":"dom-sharedstorage-length","dfnText":"length()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-length"}],"title":"6. The SharedStorage Interface"}],"url":"#dom-sharedstorage-length"},
"dom-sharedstorage-remainingbudget": {"dfnID":"dom-sharedstorage-remainingbudget","dfnText":"remainingBudget()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-remainingbudget"}],"title":"6. The SharedStorage Interface"}],"url":"#dom-sharedstorage-remainingbudget"},
"dom-sharedstorage-run": {"dfnID":"dom-sharedstorage-run","dfnText":"run(name, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-run"}],"title":"6. The SharedStorage Interface"}],"url":"#dom-sharedstorage-run"},
"dom-sharedstorage-run-name-options-name": {"dfnID":"dom-sharedstorage-run-name-options-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-sharedstorage-run-name-options-name"},
"dom-sharedstorage-run-name-options-options": {"dfnID":"dom-sharedstorage-run-name-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-run-name-options-options"},
"dom-sharedstorage-selecturl": {"dfnID":"dom-sharedstorage-selecturl","dfnText":"selectURL(name, urls, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-selecturl"}],"title":"6. The SharedStorage Interface"}],"url":"#dom-sharedstorage-selecturl"},
"dom-sharedstorage-selecturl-name-urls-options-name": {"dfnID":"dom-sharedstorage-selecturl-name-urls-options-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-sharedstorage-selecturl-name-urls-options-name"},
"dom-sharedstorage-selecturl-name-urls-options-options": {"dfnID":"dom-sharedstorage-selecturl-name-urls-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-selecturl-name-urls-options-options"},
"dom-sharedstorage-selecturl-name-urls-options-urls": {"dfnID":"dom-sharedstorage-selecturl-name-urls-options-urls","dfnText":"urls","external":false,"refSections":[],"url":"#dom-sharedstorage-selecturl-name-urls-options-urls"},
"dom-sharedstorage-set": {"dfnID":"dom-sharedstorage-set","dfnText":"set(key, value, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-set"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstorage-set\u2460"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorage-set\u2461"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dom-sharedstorage-set\u2462"}],"title":"7. Triggering Operations Via HTTP Response Header"}],"url":"#dom-sharedstorage-set"},
"dom-sharedstorage-set-key-value-options-key": {"dfnID":"dom-sharedstorage-set-key-value-options-key","dfnText":"key","external":false,"refSections":[],"url":"#dom-sharedstorage-set-key-value-options-key"},
"dom-sharedstorage-set-key-value-options-options": {"dfnID":"dom-sharedstorage-set-key-value-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorage-set-key-value-options-options"},
"dom-sharedstorage-set-key-value-options-value": {"dfnID":"dom-sharedstorage-set-key-value-options-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-sharedstorage-set-key-value-options-value"},
"dom-sharedstorage-worklet": {"dfnID":"dom-sharedstorage-worklet","dfnText":"worklet","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorage-worklet"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorage-worklet\u2460"},{"id":"ref-for-dom-sharedstorage-worklet\u2461"}],"title":"6.1. Run Operation Methods on SharedStorage"}],"url":"#dom-sharedstorage-worklet"},
"dom-sharedstorageappendmethod-sharedstorageappendmethod": {"dfnID":"dom-sharedstorageappendmethod-sharedstorageappendmethod","dfnText":"new SharedStorageAppendMethod(key, value, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageappendmethod-sharedstorageappendmethod"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstorageappendmethod-sharedstorageappendmethod\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-sharedstorageappendmethod-sharedstorageappendmethod"},
"dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-key": {"dfnID":"dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-key","dfnText":"key","external":false,"refSections":[],"url":"#dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-key"},
"dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-options": {"dfnID":"dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-options"},
"dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-value": {"dfnID":"dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-sharedstorageappendmethod-sharedstorageappendmethod-key-value-options-value"},
"dom-sharedstorageclearmethod-sharedstorageclearmethod": {"dfnID":"dom-sharedstorageclearmethod-sharedstorageclearmethod","dfnText":"new SharedStorageClearMethod(options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageclearmethod-sharedstorageclearmethod"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstorageclearmethod-sharedstorageclearmethod\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-sharedstorageclearmethod-sharedstorageclearmethod"},
"dom-sharedstorageclearmethod-sharedstorageclearmethod-options-options": {"dfnID":"dom-sharedstorageclearmethod-sharedstorageclearmethod-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorageclearmethod-sharedstorageclearmethod-options-options"},
"dom-sharedstoragedeletemethod-sharedstoragedeletemethod": {"dfnID":"dom-sharedstoragedeletemethod-sharedstoragedeletemethod","dfnText":"new SharedStorageAppendMethod(key, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstoragedeletemethod-sharedstoragedeletemethod"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstoragedeletemethod-sharedstoragedeletemethod\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-sharedstoragedeletemethod-sharedstoragedeletemethod"},
"dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-key": {"dfnID":"dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-key","dfnText":"key","external":false,"refSections":[],"url":"#dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-key"},
"dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-options": {"dfnID":"dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstoragedeletemethod-sharedstoragedeletemethod-key-options-options"},
"dom-sharedstoragemodifiermethodoptions-withlock": {"dfnID":"dom-sharedstoragemodifiermethodoptions-withlock","dfnText":"withLock","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2462"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2463"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2464"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2465"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2466"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2467"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2468"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u24ea"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2460"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2461"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2462"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2463"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2464"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2465"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2466"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2467"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2460\u2468"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u24ea"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2460"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2461"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2462"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2463"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2464"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2465"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2466"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2467"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2461\u2468"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2462\u24ea"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2462\u2460"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2462\u2461"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2462\u2462"},{"id":"ref-for-dom-sharedstoragemodifiermethodoptions-withlock\u2462\u2463"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-sharedstoragemodifiermethodoptions-withlock"},
"dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin": {"dfnID":"dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin","dfnText":"aggregationCoordinatorOrigin","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin"},{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin"},
"dom-sharedstorageprivateaggregationconfig-contextid": {"dfnID":"dom-sharedstorageprivateaggregationconfig-contextid","dfnText":"contextId","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-contextid"},{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-contextid\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#dom-sharedstorageprivateaggregationconfig-contextid"},
"dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes": {"dfnID":"dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes","dfnText":"filteringIdMaxBytes","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes"},{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes"},
"dom-sharedstorageprivateaggregationconfig-maxcontributions": {"dfnID":"dom-sharedstorageprivateaggregationconfig-maxcontributions","dfnText":"maxContributions","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-maxcontributions"},{"id":"ref-for-dom-sharedstorageprivateaggregationconfig-maxcontributions\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#dom-sharedstorageprivateaggregationconfig-maxcontributions"},
"dom-sharedstoragerunoperationmethodoptions-data": {"dfnID":"dom-sharedstoragerunoperationmethodoptions-data","dfnText":"data","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstoragerunoperationmethodoptions-data"},{"id":"ref-for-dom-sharedstoragerunoperationmethodoptions-data\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#dom-sharedstoragerunoperationmethodoptions-data"},
"dom-sharedstoragerunoperationmethodoptions-keepalive": {"dfnID":"dom-sharedstoragerunoperationmethodoptions-keepalive","dfnText":"keepAlive","external":false,"refSections":[],"url":"#dom-sharedstoragerunoperationmethodoptions-keepalive"},
"dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig": {"dfnID":"dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig","dfnText":"privateAggregationConfig","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig"},{"id":"ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig\u2460"},{"id":"ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig\u2461"},{"id":"ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig\u2462"},{"id":"ref-for-dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig\u2463"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig"},
"dom-sharedstoragerunoperationmethodoptions-resolvetoconfig": {"dfnID":"dom-sharedstoragerunoperationmethodoptions-resolvetoconfig","dfnText":"resolveToConfig","external":false,"refSections":[],"url":"#dom-sharedstoragerunoperationmethodoptions-resolvetoconfig"},
"dom-sharedstoragerunoperationmethodoptions-savedquery": {"dfnID":"dom-sharedstoragerunoperationmethodoptions-savedquery","dfnText":"savedQuery","external":false,"refSections":[],"url":"#dom-sharedstoragerunoperationmethodoptions-savedquery"},
"dom-sharedstoragesetmethod-sharedstoragesetmethod": {"dfnID":"dom-sharedstoragesetmethod-sharedstoragesetmethod","dfnText":"new SharedStorageSetMethod(key, value, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstoragesetmethod-sharedstoragesetmethod"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstoragesetmethod-sharedstoragesetmethod\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-sharedstoragesetmethod-sharedstoragesetmethod"},
"dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-key": {"dfnID":"dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-key","dfnText":"key","external":false,"refSections":[],"url":"#dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-key"},
"dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-options": {"dfnID":"dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-options"},
"dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-value": {"dfnID":"dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-value","dfnText":"value","external":false,"refSections":[],"url":"#dom-sharedstoragesetmethod-sharedstoragesetmethod-key-value-options-value"},
"dom-sharedstoragesetmethodoptions-ignoreifpresent": {"dfnID":"dom-sharedstoragesetmethodoptions-ignoreifpresent","dfnText":"ignoreIfPresent","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstoragesetmethodoptions-ignoreifpresent"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-dom-sharedstoragesetmethodoptions-ignoreifpresent\u2460"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-dom-sharedstoragesetmethodoptions-ignoreifpresent\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-sharedstoragesetmethodoptions-ignoreifpresent"},
"dom-sharedstorageurlwithmetadata-reportingmetadata": {"dfnID":"dom-sharedstorageurlwithmetadata-reportingmetadata","dfnText":"reportingMetadata","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageurlwithmetadata-reportingmetadata"},{"id":"ref-for-dom-sharedstorageurlwithmetadata-reportingmetadata\u2460"},{"id":"ref-for-dom-sharedstorageurlwithmetadata-reportingmetadata\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"#dom-sharedstorageurlwithmetadata-reportingmetadata"},
"dom-sharedstorageurlwithmetadata-url": {"dfnID":"dom-sharedstorageurlwithmetadata-url","dfnText":"url","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageurlwithmetadata-url"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#dom-sharedstorageurlwithmetadata-url"},
"dom-sharedstorageworklet-run": {"dfnID":"dom-sharedstorageworklet-run","dfnText":"run(name, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworklet-run"},{"id":"ref-for-dom-sharedstorageworklet-run\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-run\u2461"},{"id":"ref-for-dom-sharedstorageworklet-run\u2462"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-run\u2463"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-run\u2464"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-run\u2465"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-run\u2466"}],"title":"6.1. Run Operation Methods on SharedStorage"}],"url":"#dom-sharedstorageworklet-run"},
"dom-sharedstorageworklet-run-name-options-name": {"dfnID":"dom-sharedstorageworklet-run-name-options-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-sharedstorageworklet-run-name-options-name"},
"dom-sharedstorageworklet-run-name-options-options": {"dfnID":"dom-sharedstorageworklet-run-name-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorageworklet-run-name-options-options"},
"dom-sharedstorageworklet-selecturl": {"dfnID":"dom-sharedstorageworklet-selecturl","dfnText":"selectURL(name, urls, options)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2461"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2462"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2463"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2464"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2465"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2466"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2467"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2468"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u24ea"}],"title":"2.5. Entropy Budgets"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2460"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2461"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2462"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2463"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2464"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2465"},{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2466"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2467"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2460\u2468"}],"title":"6.1. Run Operation Methods on SharedStorage"},{"refs":[{"id":"ref-for-dom-sharedstorageworklet-selecturl\u2461\u24ea"}],"title":"11. Permissions Policy Integration"}],"url":"#dom-sharedstorageworklet-selecturl"},
"dom-sharedstorageworklet-selecturl-name-urls-options-name": {"dfnID":"dom-sharedstorageworklet-selecturl-name-urls-options-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-sharedstorageworklet-selecturl-name-urls-options-name"},
"dom-sharedstorageworklet-selecturl-name-urls-options-options": {"dfnID":"dom-sharedstorageworklet-selecturl-name-urls-options-options","dfnText":"options","external":false,"refSections":[],"url":"#dom-sharedstorageworklet-selecturl-name-urls-options-options"},
"dom-sharedstorageworklet-selecturl-name-urls-options-urls": {"dfnID":"dom-sharedstorageworklet-selecturl-name-urls-options-urls","dfnText":"urls","external":false,"refSections":[],"url":"#dom-sharedstorageworklet-selecturl-name-urls-options-urls"},
"dom-sharedstorageworkletglobalscope-interestgroups": {"dfnID":"dom-sharedstorageworkletglobalscope-interestgroups","dfnText":"interestGroups()","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworkletglobalscope-interestgroups"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"#dom-sharedstorageworkletglobalscope-interestgroups"},
"dom-sharedstorageworkletglobalscope-navigator": {"dfnID":"dom-sharedstorageworkletglobalscope-navigator","dfnText":"navigator","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworkletglobalscope-navigator"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"#dom-sharedstorageworkletglobalscope-navigator"},
"dom-sharedstorageworkletglobalscope-privateaggregation": {"dfnID":"dom-sharedstorageworkletglobalscope-privateaggregation","dfnText":"privateAggregation","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworkletglobalscope-privateaggregation"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-dom-sharedstorageworkletglobalscope-privateaggregation\u2460"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"#dom-sharedstorageworkletglobalscope-privateaggregation"},
"dom-sharedstorageworkletglobalscope-register": {"dfnID":"dom-sharedstorageworkletglobalscope-register","dfnText":"register(name, operationCtor)","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworkletglobalscope-register"},{"id":"ref-for-dom-sharedstorageworkletglobalscope-register\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dom-sharedstorageworkletglobalscope-register\u2461"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"#dom-sharedstorageworkletglobalscope-register"},
"dom-sharedstorageworkletglobalscope-register-name-operationctor-name": {"dfnID":"dom-sharedstorageworkletglobalscope-register-name-operationctor-name","dfnText":"name","external":false,"refSections":[],"url":"#dom-sharedstorageworkletglobalscope-register-name-operationctor-name"},
"dom-sharedstorageworkletglobalscope-register-name-operationctor-operationctor": {"dfnID":"dom-sharedstorageworkletglobalscope-register-name-operationctor-operationctor","dfnText":"operationCtor","external":false,"refSections":[],"url":"#dom-sharedstorageworkletglobalscope-register-name-operationctor-operationctor"},
"dom-sharedstorageworkletglobalscope-sharedstorage": {"dfnID":"dom-sharedstorageworkletglobalscope-sharedstorage","dfnText":"sharedStorage","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworkletglobalscope-sharedstorage"}],"title":"2.3.1. Monkey Patch for request destination"}],"url":"#dom-sharedstorageworkletglobalscope-sharedstorage"},
"dom-sharedstorageworkletoptions-dataorigin": {"dfnID":"dom-sharedstorageworkletoptions-dataorigin","dfnText":"dataOrigin","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-sharedstorageworkletoptions-dataorigin"},{"id":"ref-for-dom-sharedstorageworkletoptions-dataorigin\u2460"}],"title":"6.2. Create a new worklet via SharedStorage"}],"url":"#dom-sharedstorageworkletoptions-dataorigin"},
"dom-window-sharedstorage": {"dfnID":"dom-window-sharedstorage","dfnText":"sharedStorage","external":false,"refSections":[{"refs":[{"id":"ref-for-dom-window-sharedstorage"},{"id":"ref-for-dom-window-sharedstorage\u2460"},{"id":"ref-for-dom-window-sharedstorage\u2461"}],"title":"4. Extension to the Window interface"},{"refs":[{"id":"ref-for-dom-window-sharedstorage\u2462"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#dom-window-sharedstorage"},
"e075de1c": {"dfnID":"e075de1c","dfnText":"structured header","external":true,"refSections":[{"refs":[{"id":"ref-for-specify"}],"title":"9.3.2. `Shared-Storage-Cross-Origin-Worklet-Allowed` Response Header"},{"refs":[{"id":"ref-for-specify\u2460"}],"title":"9.3.3. `Sec-Shared-Storage-Writable` Request Header"},{"refs":[{"id":"ref-for-specify\u2461"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"https://httpwg.org/specs/rfc8941.html#specify"},
"e10e7eb7": {"dfnID":"e10e7eb7","dfnText":"DOM manipulation task source","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-manipulation-task-source"},{"id":"ref-for-dom-manipulation-task-source\u2460"},{"id":"ref-for-dom-manipulation-task-source\u2461"},{"id":"ref-for-dom-manipulation-task-source\u2462"},{"id":"ref-for-dom-manipulation-task-source\u2463"},{"id":"ref-for-dom-manipulation-task-source\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dom-manipulation-task-source\u2465"},{"id":"ref-for-dom-manipulation-task-source\u2466"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-dom-manipulation-task-source\u2467"},{"id":"ref-for-dom-manipulation-task-source\u2468"},{"id":"ref-for-dom-manipulation-task-source\u2460\u24ea"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-dom-manipulation-task-source\u2460\u2460"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2461"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2462"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2463"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2464"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2465"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2466"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2467"},{"id":"ref-for-dom-manipulation-task-source\u2460\u2468"},{"id":"ref-for-dom-manipulation-task-source\u2461\u24ea"},{"id":"ref-for-dom-manipulation-task-source\u2461\u2460"},{"id":"ref-for-dom-manipulation-task-source\u2461\u2461"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-dom-manipulation-task-source\u2461\u2462"},{"id":"ref-for-dom-manipulation-task-source\u2461\u2463"},{"id":"ref-for-dom-manipulation-task-source\u2461\u2464"},{"id":"ref-for-dom-manipulation-task-source\u2461\u2465"},{"id":"ref-for-dom-manipulation-task-source\u2461\u2466"},{"id":"ref-for-dom-manipulation-task-source\u2461\u2467"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-dom-manipulation-task-source\u2461\u2468"},{"id":"ref-for-dom-manipulation-task-source\u2462\u24ea"},{"id":"ref-for-dom-manipulation-task-source\u2462\u2460"},{"id":"ref-for-dom-manipulation-task-source\u2462\u2461"}],"title":"6.6. Iteration"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"},
"e19cc19e": {"dfnID":"e19cc19e","dfnText":"max contributions","external":true,"refSections":[{"refs":[{"id":"ref-for-max-contributions"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#max-contributions"},
"e231e88f": {"dfnID":"e231e88f","dfnText":"mapped url","external":true,"refSections":[{"refs":[{"id":"ref-for-fenced-frame-config-mapped-url"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapped-url"},
"e270bd2a": {"dfnID":"e270bd2a","dfnText":"task","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-task"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-concept-task\u2460"},{"id":"ref-for-concept-task\u2461"},{"id":"ref-for-concept-task\u2462"},{"id":"ref-for-concept-task\u2463"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-concept-task\u2464"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"},
"e4ffa115": {"dfnID":"e4ffa115","dfnText":"create a worklet global scope","external":true,"refSections":[{"refs":[{"id":"ref-for-create-a-worklet-global-scope"},{"id":"ref-for-create-a-worklet-global-scope\u2460"}],"title":"2.2.2. Monkey Patch for create a worklet global scope"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope"},
"e5128568": {"dfnID":"e5128568","dfnText":"finalize a pending config","external":true,"refSections":[{"refs":[{"id":"ref-for-fenced-frame-config-mapping-finalize-a-pending-config"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-finalize-a-pending-config"},
"e6c86b55": {"dfnID":"e6c86b55","dfnText":"aggregation coordinator","external":true,"refSections":[{"refs":[{"id":"ref-for-aggregation-coordinator"},{"id":"ref-for-aggregation-coordinator\u2460"},{"id":"ref-for-aggregation-coordinator\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#aggregation-coordinator"},
"e7652812": {"dfnID":"e7652812","dfnText":"get the next iteration result","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-get-the-next-iteration-result"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result"},
"e97a9688": {"dfnID":"e97a9688","dfnText":"unsigned long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-unsigned-long"},{"id":"ref-for-idl-unsigned-long\u2460"},{"id":"ref-for-idl-unsigned-long\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-idl-unsigned-long\u2462"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-idl-unsigned-long\u2463"}],"title":"2.5. Entropy Budgets"},{"refs":[{"id":"ref-for-idl-unsigned-long\u2464"},{"id":"ref-for-idl-unsigned-long\u2465"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-idl-unsigned-long\u2466"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-unsigned-long"},
"e99bd18e": {"dfnID":"e99bd18e","dfnText":"relevant global object","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-relevant-global"},{"id":"ref-for-concept-relevant-global\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"eb1b1af3": {"dfnID":"eb1b1af3","dfnText":"network error","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-network-error"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-network-error"},
"ee7bba09": {"dfnID":"ee7bba09","dfnText":"response","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-response\u2460"}],"title":"7. Triggering Operations Via HTTP Response Header"},{"refs":[{"id":"ref-for-concept-response\u2461"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-concept-response\u2462"},{"id":"ref-for-concept-response\u2463"},{"id":"ref-for-concept-response\u2464"}],"title":"9.3.2. `Shared-Storage-Cross-Origin-Worklet-Allowed` Response Header"},{"refs":[{"id":"ref-for-concept-response\u2465"}],"title":"9.3.3. `Sec-Shared-Storage-Writable` Request Header"},{"refs":[{"id":"ref-for-concept-response\u2466"},{"id":"ref-for-concept-response\u2467"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-concept-response\u2468"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-response"},
"ee95ecc7": {"dfnID":"ee95ecc7","dfnText":"delete","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-header-list-delete"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-header-list-delete"},
"eec46e27": {"dfnID":"eec46e27","dfnText":"addModule(moduleURL, options)","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-worklet-addmodule"},{"id":"ref-for-dom-worklet-addmodule\u2460"},{"id":"ref-for-dom-worklet-addmodule\u2461"},{"id":"ref-for-dom-worklet-addmodule\u2462"},{"id":"ref-for-dom-worklet-addmodule\u2463"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-dom-worklet-addmodule\u2464"},{"id":"ref-for-dom-worklet-addmodule\u2465"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-dom-worklet-addmodule\u2466"},{"id":"ref-for-dom-worklet-addmodule\u2467"},{"id":"ref-for-dom-worklet-addmodule\u2468"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-dom-worklet-addmodule\u2460\u24ea"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-dom-worklet-addmodule\u2460\u2460"}],"title":"6.2. Create a new worklet via SharedStorage"}],"url":"https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule"},
"efd1ec5d": {"dfnID":"efd1ec5d","dfnText":"object","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-object"},{"id":"ref-for-idl-object\u2460"},{"id":"ref-for-idl-object\u2461"},{"id":"ref-for-idl-object\u2462"},{"id":"ref-for-idl-object\u2463"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-idl-object\u2464"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-object"},
"efe8653e": {"dfnID":"efe8653e","dfnText":"iterate","external":true,"refSections":[{"refs":[{"id":"ref-for-map-iterate"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-map-iterate\u2460"},{"id":"ref-for-map-iterate\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-map-iterate\u2462"},{"id":"ref-for-map-iterate\u2463"},{"id":"ref-for-map-iterate\u2464"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-map-iterate\u2465"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-map-iterate\u2466"}],"title":"6.6. Iteration"}],"url":"https://infra.spec.whatwg.org/#map-iterate"},
"element-attrdef-iframe-sharedstoragewritable": {"dfnID":"element-attrdef-iframe-sharedstoragewritable","dfnText":"sharedstoragewritable","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-iframe-sharedstoragewritable"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"},{"refs":[{"id":"ref-for-element-attrdef-iframe-sharedstoragewritable\u2460"}],"title":"8.2.2. Modification to Create navigation params by fetching Algorithm"}],"url":"#element-attrdef-iframe-sharedstoragewritable"},
"element-attrdef-img-sharedstoragewritable": {"dfnID":"element-attrdef-img-sharedstoragewritable","dfnText":"sharedstoragewritable","external":false,"refSections":[{"refs":[{"id":"ref-for-element-attrdef-img-sharedstoragewritable"}],"title":"8.2.1. Modification to Update the image data Algorithm"}],"url":"#element-attrdef-img-sharedstoragewritable"},
"entry-key": {"dfnID":"entry-key","dfnText":"key","external":false,"refSections":[{"refs":[{"id":"ref-for-entry-key"},{"id":"ref-for-entry-key\u2460"},{"id":"ref-for-entry-key\u2461"},{"id":"ref-for-entry-key\u2462"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-entry-key\u2463"},{"id":"ref-for-entry-key\u2464"},{"id":"ref-for-entry-key\u2465"},{"id":"ref-for-entry-key\u2466"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-entry-key\u2467"},{"id":"ref-for-entry-key\u2468"},{"id":"ref-for-entry-key\u2460\u24ea"},{"id":"ref-for-entry-key\u2460\u2460"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"#entry-key"},
"entry-value-struct": {"dfnID":"entry-value-struct","dfnText":"value struct","external":false,"refSections":[{"refs":[{"id":"ref-for-entry-value-struct"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-entry-value-struct\u2460"},{"id":"ref-for-entry-value-struct\u2461"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-entry-value-struct\u2462"},{"id":"ref-for-entry-value-struct\u2463"},{"id":"ref-for-entry-value-struct\u2464"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"#entry-value-struct"},
"f0811ff8": {"dfnID":"f0811ff8","dfnText":"img","external":true,"refSections":[{"refs":[{"id":"ref-for-the-img-element"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element"},
"f09e6fca": {"dfnID":"f09e6fca","dfnText":"eventData","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-fenceevent-eventdata"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"https://wicg.github.io/fenced-frame/#dom-fenceevent-eventdata"},
"f0c4369e": {"dfnID":"f0c4369e","dfnText":"ASCII","external":true,"refSections":[{"refs":[{"id":"ref-for-ascii-code-point"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"https://infra.spec.whatwg.org#ascii-code-point"},
"f14b47b8": {"dfnID":"f14b47b8","dfnText":"unsigned long long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-unsigned-long-long"},{"id":"ref-for-idl-unsigned-long-long\u2460"}],"title":"6. The SharedStorage Interface"}],"url":"https://webidl.spec.whatwg.org/#idl-unsigned-long-long"},
"f14ed351": {"dfnID":"f14ed351","dfnText":"upon rejection","external":true,"refSections":[{"refs":[{"id":"ref-for-upon-rejection"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-upon-rejection\u2460"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-upon-rejection\u2461"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-upon-rejection\u2462"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-upon-rejection\u2463"}],"title":"6.6. Iteration"}],"url":"https://webidl.spec.whatwg.org/#upon-rejection"},
"f16ee824": {"dfnID":"f16ee824","dfnText":"current wall time (for environment settings object)","external":true,"refSections":[{"refs":[{"id":"ref-for-dfn-eso-current-wall-time"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-dfn-eso-current-wall-time\u2460"},{"id":"ref-for-dfn-eso-current-wall-time\u2461"}],"title":"3.3. The Database Algorithms"}],"url":"https://w3c.github.io/hr-time/#dfn-eso-current-wall-time"},
"f2e84267": {"dfnID":"f2e84267","dfnText":"steal","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-lockoptions-steal"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"https://w3c.github.io/web-locks/#dom-lockoptions-steal"},
"f5fd709f": {"dfnID":"f5fd709f","dfnText":"obtaining a worklet agent","external":true,"refSections":[{"refs":[{"id":"ref-for-obtain-a-worklet-agent"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://html.spec.whatwg.org/multipage/webappapis.html#obtain-a-worklet-agent"},
"f74a35ec": {"dfnID":"f74a35ec","dfnText":"obtain the Private Aggregation coordinator","external":true,"refSections":[{"refs":[{"id":"ref-for-obtain-the-private-aggregation-coordinator"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#obtain-the-private-aggregation-coordinator"},
"f78d5b5c": {"dfnID":"f78d5b5c","dfnText":"origin","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-request-origin"},{"id":"ref-for-concept-request-origin\u2460"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"https://fetch.spec.whatwg.org/#concept-request-origin"},
"f7b00a8b": {"dfnID":"f7b00a8b","dfnText":"header list (for response)","external":true,"refSections":[{"refs":[{"id":"ref-for-concept-response-header-list"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-concept-response-header-list\u2460"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-concept-response-header-list\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"https://fetch.spec.whatwg.org/#concept-response-header-list"},
"f8240630": {"dfnID":"f8240630","dfnText":"fenced frame","external":true,"refSections":[{"refs":[{"id":"ref-for-the-fencedframe-element"}],"title":"1. Introduction"},{"refs":[{"id":"ref-for-the-fencedframe-element\u2460"},{"id":"ref-for-the-fencedframe-element\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-the-fencedframe-element\u2462"},{"id":"ref-for-the-fencedframe-element\u2463"},{"id":"ref-for-the-fencedframe-element\u2464"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-the-fencedframe-element\u2465"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-the-fencedframe-element\u2466"},{"id":"ref-for-the-fencedframe-element\u2467"},{"id":"ref-for-the-fencedframe-element\u2468"}],"title":"13. Privacy Considerations"}],"url":"https://wicg.github.io/fenced-frame/#the-fencedframe-element"},
"f8de33a3": {"dfnID":"f8de33a3","dfnText":"long","external":true,"refSections":[{"refs":[{"id":"ref-for-idl-long"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"}],"url":"https://webidl.spec.whatwg.org/#idl-long"},
"f937b7b6": {"dfnID":"f937b7b6","dfnText":"continue","external":true,"refSections":[{"refs":[{"id":"ref-for-iteration-continue"},{"id":"ref-for-iteration-continue\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"https://infra.spec.whatwg.org/#iteration-continue"},
"fb9bb722": {"dfnID":"fb9bb722","dfnText":"site","external":true,"refSections":[{"refs":[{"id":"ref-for-site"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-site\u2460"},{"id":"ref-for-site\u2461"},{"id":"ref-for-site\u2462"},{"id":"ref-for-site\u2463"},{"id":"ref-for-site\u2464"},{"id":"ref-for-site\u2465"},{"id":"ref-for-site\u2466"},{"id":"ref-for-site\u2467"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-site\u2468"},{"id":"ref-for-site\u2460\u24ea"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-site\u2460\u2460"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"}],"url":"https://html.spec.whatwg.org/multipage/browsers.html#site"},
"finish-a-batch-update": {"dfnID":"finish-a-batch-update","dfnText":"finish a batch update","external":false,"refSections":[{"refs":[{"id":"ref-for-finish-a-batch-update"},{"id":"ref-for-finish-a-batch-update\u2460"},{"id":"ref-for-finish-a-batch-update\u2461"}],"title":"6.3. BatchUpdate Method"}],"url":"#finish-a-batch-update"},
"get-the-canonical-url-string-if-valid": {"dfnID":"get-the-canonical-url-string-if-valid","dfnText":"get the canonical URL string if valid","external":false,"refSections":[{"refs":[{"id":"ref-for-get-the-canonical-url-string-if-valid"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-get-the-canonical-url-string-if-valid\u2460"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"#get-the-canonical-url-string-if-valid"},
"get-the-default-selecturl-index": {"dfnID":"get-the-default-selecturl-index","dfnText":"get the default selectURL index","external":false,"refSections":[{"refs":[{"id":"ref-for-get-the-default-selecturl-index"}],"title":"2.5. Entropy Budgets"}],"url":"#get-the-default-selecturl-index"},
"get-the-index-for-a-saved-query": {"dfnID":"get-the-index-for-a-saved-query","dfnText":"get the index for a saved query","external":false,"refSections":[{"refs":[{"id":"ref-for-get-the-index-for-a-saved-query"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-get-the-index-for-a-saved-query\u2460"},{"id":"ref-for-get-the-index-for-a-saved-query\u2461"}],"title":"2.5.2.3. Saved queries"}],"url":"#get-the-index-for-a-saved-query"},
"get-the-select-url-result-index": {"dfnID":"get-the-select-url-result-index","dfnText":"get the select-url result index","external":false,"refSections":[{"refs":[{"id":"ref-for-get-the-select-url-result-index"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#get-the-select-url-result-index"},
"get-the-string-value": {"dfnID":"get-the-string-value","dfnText":"get the string value","external":false,"refSections":[{"refs":[{"id":"ref-for-get-the-string-value"},{"id":"ref-for-get-the-string-value\u2460"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#get-the-string-value"},
"handle-a-shared-storage-write-response": {"dfnID":"handle-a-shared-storage-write-response","dfnText":"handle a Shared-Storage-Write response","external":false,"refSections":[{"refs":[{"id":"ref-for-handle-a-shared-storage-write-response"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"}],"url":"#handle-a-shared-storage-write-response"},
"handle-callback-within-a-shared-storage-lock": {"dfnID":"handle-callback-within-a-shared-storage-lock","dfnText":"handle callback within a shared storage lock","external":false,"refSections":[{"refs":[{"id":"ref-for-handle-callback-within-a-shared-storage-lock"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-handle-callback-within-a-shared-storage-lock\u2460"},{"id":"ref-for-handle-callback-within-a-shared-storage-lock\u2461"},{"id":"ref-for-handle-callback-within-a-shared-storage-lock\u2462"},{"id":"ref-for-handle-callback-within-a-shared-storage-lock\u2463"}],"title":"6.4. Setter/Deleter Methods"}],"url":"#handle-callback-within-a-shared-storage-lock"},
"handle-the-result-of-selecting-an-index": {"dfnID":"handle-the-result-of-selecting-an-index","dfnText":"handle the result of selecting an index","external":false,"refSections":[{"refs":[{"id":"ref-for-handle-the-result-of-selecting-an-index"},{"id":"ref-for-handle-the-result-of-selecting-an-index\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#handle-the-result-of-selecting-an-index"},
"htmlsharedstoragewritableelementutils": {"dfnID":"htmlsharedstoragewritableelementutils","dfnText":"HTMLSharedStorageWritableElementUtils","external":false,"refSections":[{"refs":[{"id":"ref-for-htmlsharedstoragewritableelementutils"},{"id":"ref-for-htmlsharedstoragewritableelementutils\u2460"}],"title":"8.1. sharedStorageWritable & sharedstoragewritable Attributes"}],"url":"#htmlsharedstoragewritableelementutils"},
"http-headerdef-sec-shared-storage-data-origin": {"dfnID":"http-headerdef-sec-shared-storage-data-origin","dfnText":"Sec-Shared-Storage-Data-Origin","external":false,"refSections":[{"refs":[{"id":"ref-for-http-headerdef-sec-shared-storage-data-origin"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-http-headerdef-sec-shared-storage-data-origin\u2460"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-http-headerdef-sec-shared-storage-data-origin\u2461"},{"id":"ref-for-http-headerdef-sec-shared-storage-data-origin\u2462"},{"id":"ref-for-http-headerdef-sec-shared-storage-data-origin\u2463"}],"title":"9.3.1. `Sec-Shared-Storage-Data-Origin` Request Header"}],"url":"#http-headerdef-sec-shared-storage-data-origin"},
"http-headerdef-sec-shared-storage-writable": {"dfnID":"http-headerdef-sec-shared-storage-writable","dfnText":"Sec-Shared-Storage-Writable","external":false,"refSections":[{"refs":[{"id":"ref-for-http-headerdef-sec-shared-storage-writable"},{"id":"ref-for-http-headerdef-sec-shared-storage-writable\u2460"},{"id":"ref-for-http-headerdef-sec-shared-storage-writable\u2461"}],"title":"9.3.3. `Sec-Shared-Storage-Writable` Request Header"},{"refs":[{"id":"ref-for-http-headerdef-sec-shared-storage-writable\u2462"},{"id":"ref-for-http-headerdef-sec-shared-storage-writable\u2463"},{"id":"ref-for-http-headerdef-sec-shared-storage-writable\u2464"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#http-headerdef-sec-shared-storage-writable"},
"http-headerdef-shared-storage-cross-origin-worklet-allowed": {"dfnID":"http-headerdef-shared-storage-cross-origin-worklet-allowed","dfnText":"Shared-Storage-Cross-Origin-Worklet-Allowed","external":false,"refSections":[{"refs":[{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed"},{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed\u2460"},{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed\u2461"}],"title":"2.2.4. The `Shared-Storage-Cross-Origin-Worklet-Allowed` HTTP response header"},{"refs":[{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed\u2462"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed\u2463"}],"title":"9.2.3. Modification to HTTP fetch Algorithm"},{"refs":[{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed\u2464"},{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed\u2465"},{"id":"ref-for-http-headerdef-shared-storage-cross-origin-worklet-allowed\u2466"}],"title":"9.3.2. `Shared-Storage-Cross-Origin-Worklet-Allowed` Response Header"}],"url":"#http-headerdef-shared-storage-cross-origin-worklet-allowed"},
"http-headerdef-shared-storage-write": {"dfnID":"http-headerdef-shared-storage-write","dfnText":"Shared-Storage-Write","external":false,"refSections":[{"refs":[{"id":"ref-for-http-headerdef-shared-storage-write"},{"id":"ref-for-http-headerdef-shared-storage-write\u2460"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"},{"refs":[{"id":"ref-for-http-headerdef-shared-storage-write\u2461"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#http-headerdef-shared-storage-write"},
"key-maximum-length": {"dfnID":"key-maximum-length","dfnText":"maximum length","external":false,"refSections":[{"refs":[{"id":"ref-for-key-maximum-length"},{"id":"ref-for-key-maximum-length\u2460"},{"id":"ref-for-key-maximum-length\u2461"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-key-maximum-length\u2462"},{"id":"ref-for-key-maximum-length\u2463"},{"id":"ref-for-key-maximum-length\u2464"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-key-maximum-length\u2465"}],"title":"6.5. Getter Methods"}],"url":"#key-maximum-length"},
"lock": {"dfnID":"lock","dfnText":"Lock","external":false,"refSections":[{"refs":[{"id":"ref-for-lock"}],"title":"10.3. Web Locks IDLs Monkey Patches"}],"url":"#lock"},
"lockmanager": {"dfnID":"lockmanager","dfnText":"LockManager","external":false,"refSections":[{"refs":[{"id":"ref-for-lockmanager"},{"id":"ref-for-lockmanager\u2460"}],"title":"10.3. Web Locks IDLs Monkey Patches"}],"url":"#lockmanager"},
"navigation-budget-epoch": {"dfnID":"navigation-budget-epoch","dfnText":"navigation budget epoch","external":false,"refSections":[{"refs":[{"id":"ref-for-navigation-budget-epoch"},{"id":"ref-for-navigation-budget-epoch\u2460"},{"id":"ref-for-navigation-budget-epoch\u2461"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#navigation-budget-epoch"},
"navigation-budget-lifetime": {"dfnID":"navigation-budget-lifetime","dfnText":"navigation budget lifetime","external":false,"refSections":[{"refs":[{"id":"ref-for-navigation-budget-lifetime"},{"id":"ref-for-navigation-budget-lifetime\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#navigation-budget-lifetime"},
"navigation-entropy-allowance": {"dfnID":"navigation-entropy-allowance","dfnText":"navigation entropy allowance","external":false,"refSections":[{"refs":[{"id":"ref-for-navigation-entropy-allowance"},{"id":"ref-for-navigation-entropy-allowance\u2460"},{"id":"ref-for-navigation-entropy-allowance\u2461"},{"id":"ref-for-navigation-entropy-allowance\u2462"},{"id":"ref-for-navigation-entropy-allowance\u2463"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#navigation-entropy-allowance"},
"navigation-entropy-ledger": {"dfnID":"navigation-entropy-ledger","dfnText":"navigation entropy ledger","external":false,"refSections":[{"refs":[{"id":"ref-for-navigation-entropy-ledger"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#navigation-entropy-ledger"},
"obtain-a-boolean-parameter-value": {"dfnID":"obtain-a-boolean-parameter-value","dfnText":"obtain a boolean parameter value","external":false,"refSections":[{"refs":[{"id":"ref-for-obtain-a-boolean-parameter-value"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#obtain-a-boolean-parameter-value"},
"obtain-a-callback-to-process-the-saved-index-result": {"dfnID":"obtain-a-callback-to-process-the-saved-index-result","dfnText":"obtain a callback to process the saved index result","external":false,"refSections":[{"refs":[{"id":"ref-for-obtain-a-callback-to-process-the-saved-index-result"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#obtain-a-callback-to-process-the-saved-index-result"},
"obtain-a-shared-storage-bottle-map": {"dfnID":"obtain-a-shared-storage-bottle-map","dfnText":"obtain a shared storage bottle map","external":false,"refSections":[{"refs":[{"id":"ref-for-obtain-a-shared-storage-bottle-map"}],"title":"2.2.4. The `Shared-Storage-Cross-Origin-Worklet-Allowed` HTTP response header"},{"refs":[{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2460"},{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2461"},{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2462"},{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2463"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2464"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2465"},{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2466"},{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2467"},{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2468"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2460\u24ea"},{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2460\u2460"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-obtain-a-shared-storage-bottle-map\u2460\u2461"}],"title":"6.6. Iteration"}],"url":"#obtain-a-shared-storage-bottle-map"},
"obtain-a-shared-storage-shelf": {"dfnID":"obtain-a-shared-storage-shelf","dfnText":"obtain a shared storage shelf","external":false,"refSections":[{"refs":[{"id":"ref-for-obtain-a-shared-storage-shelf"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"#obtain-a-shared-storage-shelf"},
"obtain-a-string-like-parameter-value": {"dfnID":"obtain-a-string-like-parameter-value","dfnText":"obtain a string-like parameter value","external":false,"refSections":[{"refs":[{"id":"ref-for-obtain-a-string-like-parameter-value"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2460"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2461"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2462"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2463"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2464"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2465"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2466"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2467"},{"id":"ref-for-obtain-a-string-like-parameter-value\u2468"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#obtain-a-string-like-parameter-value"},
"obtain-the-aggregation-coordinator": {"dfnID":"obtain-the-aggregation-coordinator","dfnText":"obtain the aggregation coordinator","external":false,"refSections":[{"refs":[{"id":"ref-for-obtain-the-aggregation-coordinator"},{"id":"ref-for-obtain-the-aggregation-coordinator\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#obtain-the-aggregation-coordinator"},
"obtain-the-pre-specified-report-parameters": {"dfnID":"obtain-the-pre-specified-report-parameters","dfnText":"obtain the pre-specified report parameters","external":false,"refSections":[{"refs":[{"id":"ref-for-obtain-the-pre-specified-report-parameters"},{"id":"ref-for-obtain-the-pre-specified-report-parameters\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#obtain-the-pre-specified-report-parameters"},
"overall-page-entropy-allowance": {"dfnID":"overall-page-entropy-allowance","dfnText":"overall page entropy allowance","external":false,"refSections":[{"refs":[{"id":"ref-for-overall-page-entropy-allowance"}],"title":"2.5.2.2. Monkey patch for Navigables"}],"url":"#overall-page-entropy-allowance"},
"pending-shared-storage-budget-debit": {"dfnID":"pending-shared-storage-budget-debit","dfnText":"pending shared storage budget debit","external":false,"refSections":[{"refs":[{"id":"ref-for-pending-shared-storage-budget-debit"},{"id":"ref-for-pending-shared-storage-budget-debit\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#pending-shared-storage-budget-debit"},
"permissionspolicy-shared-storage": {"dfnID":"permissionspolicy-shared-storage","dfnText":"shared-storage","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicy-shared-storage"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-permissionspolicy-shared-storage\u2460"}],"title":"11. Permissions Policy Integration"}],"url":"#permissionspolicy-shared-storage"},
"permissionspolicy-shared-storage-select-url": {"dfnID":"permissionspolicy-shared-storage-select-url","dfnText":"shared-storage-select-url","external":false,"refSections":[{"refs":[{"id":"ref-for-permissionspolicy-shared-storage-select-url"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-permissionspolicy-shared-storage-select-url\u2460"}],"title":"11. Permissions Policy Integration"}],"url":"#permissionspolicy-shared-storage-select-url"},
"purge-expired-bit-debits-from-all-navigation-entropy-ledgers": {"dfnID":"purge-expired-bit-debits-from-all-navigation-entropy-ledgers","dfnText":"purge expired bit debits from all navigation entropy ledgers","external":false,"refSections":[{"refs":[{"id":"ref-for-purge-expired-bit-debits-from-all-navigation-entropy-ledgers"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#purge-expired-bit-debits-from-all-navigation-entropy-ledgers"},
"register-reporting-metadata": {"dfnID":"register-reporting-metadata","dfnText":"register reporting metadata","external":false,"refSections":[{"refs":[{"id":"ref-for-register-reporting-metadata"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-register-reporting-metadata\u2460"},{"id":"ref-for-register-reporting-metadata\u2461"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"}],"url":"#register-reporting-metadata"},
"request-shared-storage-writable": {"dfnID":"request-shared-storage-writable","dfnText":"shared storage writable","external":false,"refSections":[{"refs":[{"id":"ref-for-request-shared-storage-writable"}],"title":"8.2.1. Modification to Update the image data Algorithm"},{"refs":[{"id":"ref-for-request-shared-storage-writable\u2460"}],"title":"8.2.2. Modification to Create navigation params by fetching Algorithm"},{"refs":[{"id":"ref-for-request-shared-storage-writable\u2461"}],"title":"9.2.1. Modification to the Request Constructor Algorithm"},{"refs":[{"id":"ref-for-request-shared-storage-writable\u2462"},{"id":"ref-for-request-shared-storage-writable\u2463"}],"title":"9.4. Shared Storage Fetch-Related Algorithms"}],"url":"#request-shared-storage-writable"},
"saved-query-data-callbacks": {"dfnID":"saved-query-data-callbacks","dfnText":"callbacks","external":false,"refSections":[{"refs":[{"id":"ref-for-saved-query-data-callbacks"},{"id":"ref-for-saved-query-data-callbacks\u2460"},{"id":"ref-for-saved-query-data-callbacks\u2461"}],"title":"2.5.2.3. Saved queries"}],"url":"#saved-query-data-callbacks"},
"saved-query-data-index": {"dfnID":"saved-query-data-index","dfnText":"index","external":false,"refSections":[{"refs":[{"id":"ref-for-saved-query-data-index"},{"id":"ref-for-saved-query-data-index\u2460"},{"id":"ref-for-saved-query-data-index\u2461"}],"title":"2.5.2.3. Saved queries"}],"url":"#saved-query-data-index"},
"saved-query-map-data-origin": {"dfnID":"saved-query-map-data-origin","dfnText":"data origin","external":false,"refSections":[],"url":"#saved-query-map-data-origin"},
"saved-query-map-operation-name": {"dfnID":"saved-query-map-operation-name","dfnText":"operation name","external":false,"refSections":[],"url":"#saved-query-map-operation-name"},
"saved-query-map-query-name": {"dfnID":"saved-query-map-query-name","dfnText":"query name","external":false,"refSections":[],"url":"#saved-query-map-query-name"},
"saved-query-map-worklet-script-url": {"dfnID":"saved-query-map-worklet-script-url","dfnText":"worklet script URL","external":false,"refSections":[],"url":"#saved-query-map-worklet-script-url"},
"set-up-the-private-aggregation-scopes": {"dfnID":"set-up-the-private-aggregation-scopes","dfnText":"set up the Private Aggregation scopes","external":false,"refSections":[{"refs":[{"id":"ref-for-set-up-the-private-aggregation-scopes"},{"id":"ref-for-set-up-the-private-aggregation-scopes\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#set-up-the-private-aggregation-scopes"},
"shared-storage": {"dfnID":"shared-storage","dfnText":"shared storage","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage"},{"id":"ref-for-shared-storage\u2460"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-shared-storage\u2461"}],"title":"3.1. Monkey Patch for the Storage Model"},{"refs":[{"id":"ref-for-shared-storage\u2462"}],"title":"4. Extension to the Window interface"},{"refs":[{"id":"ref-for-shared-storage\u2463"}],"title":"9.3.3. `Sec-Shared-Storage-Writable` Request Header"}],"url":"#shared-storage"},
"shared-storage-bucket": {"dfnID":"shared-storage-bucket","dfnText":"shared storage bucket","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-bucket"},{"id":"ref-for-shared-storage-bucket\u2460"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"#shared-storage-bucket"},
"shared-storage-database": {"dfnID":"shared-storage-database","dfnText":"shared storage database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database"},{"id":"ref-for-shared-storage-database\u2460"},{"id":"ref-for-shared-storage-database\u2461"},{"id":"ref-for-shared-storage-database\u2462"},{"id":"ref-for-shared-storage-database\u2463"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-shared-storage-database\u2464"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-shared-storage-database\u2465"},{"id":"ref-for-shared-storage-database\u2466"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-shared-storage-database\u2467"},{"id":"ref-for-shared-storage-database\u2468"},{"id":"ref-for-shared-storage-database\u2460\u24ea"},{"id":"ref-for-shared-storage-database\u2460\u2460"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-shared-storage-database\u2460\u2461"},{"id":"ref-for-shared-storage-database\u2460\u2462"},{"id":"ref-for-shared-storage-database\u2460\u2463"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-shared-storage-database\u2460\u2464"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-shared-storage-database\u2460\u2465"},{"id":"ref-for-shared-storage-database\u2460\u2466"},{"id":"ref-for-shared-storage-database\u2460\u2467"},{"id":"ref-for-shared-storage-database\u2460\u2468"},{"id":"ref-for-shared-storage-database\u2461\u24ea"},{"id":"ref-for-shared-storage-database\u2461\u2460"},{"id":"ref-for-shared-storage-database\u2461\u2461"},{"id":"ref-for-shared-storage-database\u2461\u2462"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"#shared-storage-database"},
"shared-storage-database-clear-all-entries-in-the-database": {"dfnID":"shared-storage-database-clear-all-entries-in-the-database","dfnText":"clear all entries in the database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-clear-all-entries-in-the-database"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-shared-storage-database-clear-all-entries-in-the-database\u2460"}],"title":"6.4. Setter/Deleter Methods"}],"url":"#shared-storage-database-clear-all-entries-in-the-database"},
"shared-storage-database-count-entries-in-the-database": {"dfnID":"shared-storage-database-count-entries-in-the-database","dfnText":"count entries in the database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-count-entries-in-the-database"}],"title":"6.5. Getter Methods"}],"url":"#shared-storage-database-count-entries-in-the-database"},
"shared-storage-database-delete-an-entry-from-the-database": {"dfnID":"shared-storage-database-delete-an-entry-from-the-database","dfnText":"delete an entry from the database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-delete-an-entry-from-the-database"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-shared-storage-database-delete-an-entry-from-the-database\u2460"}],"title":"6.4. Setter/Deleter Methods"}],"url":"#shared-storage-database-delete-an-entry-from-the-database"},
"shared-storage-database-determine-whether-an-entry-is-expired": {"dfnID":"shared-storage-database-determine-whether-an-entry-is-expired","dfnText":"determine whether an entry is expired","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-determine-whether-an-entry-is-expired"},{"id":"ref-for-shared-storage-database-determine-whether-an-entry-is-expired\u2460"}],"title":"3.3. The Database Algorithms"}],"url":"#shared-storage-database-determine-whether-an-entry-is-expired"},
"shared-storage-database-entry": {"dfnID":"shared-storage-database-entry","dfnText":"entry","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-entry"},{"id":"ref-for-shared-storage-database-entry\u2460"},{"id":"ref-for-shared-storage-database-entry\u2461"},{"id":"ref-for-shared-storage-database-entry\u2462"},{"id":"ref-for-shared-storage-database-entry\u2463"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-shared-storage-database-entry\u2464"},{"id":"ref-for-shared-storage-database-entry\u2465"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-shared-storage-database-entry\u2466"},{"id":"ref-for-shared-storage-database-entry\u2467"},{"id":"ref-for-shared-storage-database-entry\u2468"},{"id":"ref-for-shared-storage-database-entry\u2460\u24ea"},{"id":"ref-for-shared-storage-database-entry\u2460\u2460"},{"id":"ref-for-shared-storage-database-entry\u2460\u2461"},{"id":"ref-for-shared-storage-database-entry\u2460\u2462"},{"id":"ref-for-shared-storage-database-entry\u2460\u2463"},{"id":"ref-for-shared-storage-database-entry\u2460\u2464"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"#shared-storage-database-entry"},
"shared-storage-database-purge-expired-entries-from-the-database": {"dfnID":"shared-storage-database-purge-expired-entries-from-the-database","dfnText":"purge expired entries from the database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-purge-expired-entries-from-the-database"},{"id":"ref-for-shared-storage-database-purge-expired-entries-from-the-database\u2460"}],"title":"3.2. The Shared Storage Database"}],"url":"#shared-storage-database-purge-expired-entries-from-the-database"},
"shared-storage-database-retrieve-all-entries-from-the-database": {"dfnID":"shared-storage-database-retrieve-all-entries-from-the-database","dfnText":"retrieve all entries from the database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-retrieve-all-entries-from-the-database"}],"title":"6.6. Iteration"}],"url":"#shared-storage-database-retrieve-all-entries-from-the-database"},
"shared-storage-database-retrieve-an-entry-from-the-database": {"dfnID":"shared-storage-database-retrieve-an-entry-from-the-database","dfnText":"retrieve an entry from the database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-retrieve-an-entry-from-the-database"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-shared-storage-database-retrieve-an-entry-from-the-database\u2460"},{"id":"ref-for-shared-storage-database-retrieve-an-entry-from-the-database\u2461"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-shared-storage-database-retrieve-an-entry-from-the-database\u2462"}],"title":"6.5. Getter Methods"}],"url":"#shared-storage-database-retrieve-an-entry-from-the-database"},
"shared-storage-database-shared-storage-database-queue": {"dfnID":"shared-storage-database-shared-storage-database-queue","dfnText":"shared storage database queue","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-shared-storage-database-queue"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2460"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2461"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2462"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2463"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2464"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2465"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2466"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2467"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2468"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2460\u24ea"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2460\u2460"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2460\u2461"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2460\u2462"},{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2460\u2463"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-shared-storage-database-shared-storage-database-queue\u2460\u2464"}],"title":"6.6. Iteration"}],"url":"#shared-storage-database-shared-storage-database-queue"},
"shared-storage-database-store-an-entry-in-the-database": {"dfnID":"shared-storage-database-store-an-entry-in-the-database","dfnText":"store an entry in the database","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-database-store-an-entry-in-the-database"},{"id":"ref-for-shared-storage-database-store-an-entry-in-the-database\u2460"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-shared-storage-database-store-an-entry-in-the-database\u2461"},{"id":"ref-for-shared-storage-database-store-an-entry-in-the-database\u2462"}],"title":"6.4. Setter/Deleter Methods"}],"url":"#shared-storage-database-store-an-entry-in-the-database"},
"shared-storage-lock-managers-map": {"dfnID":"shared-storage-lock-managers-map","dfnText":"shared storage lock managers map","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-lock-managers-map"}],"title":"10.1. User Agent Associated State"},{"refs":[{"id":"ref-for-shared-storage-lock-managers-map\u2460"}],"title":"10.4. Monkey Patch for lock manager\u2019s description"},{"refs":[{"id":"ref-for-shared-storage-lock-managers-map\u2461"}],"title":"10.5. Monkey Patch for the \"obtain a lock manager\" algorithm"},{"refs":[{"id":"ref-for-shared-storage-lock-managers-map\u2462"}],"title":"10.6. \"Handle callback within a shared storage lock\" algorithm"}],"url":"#shared-storage-lock-managers-map"},
"shared-storage-navigation-budget-table": {"dfnID":"shared-storage-navigation-budget-table","dfnText":"shared storage navigation budget table","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-navigation-budget-table"},{"id":"ref-for-shared-storage-navigation-budget-table\u2460"},{"id":"ref-for-shared-storage-navigation-budget-table\u2461"},{"id":"ref-for-shared-storage-navigation-budget-table\u2462"},{"id":"ref-for-shared-storage-navigation-budget-table\u2463"},{"id":"ref-for-shared-storage-navigation-budget-table\u2464"},{"id":"ref-for-shared-storage-navigation-budget-table\u2465"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#shared-storage-navigation-budget-table"},
"shared-storage-page-budget-overall-budget": {"dfnID":"shared-storage-page-budget-overall-budget","dfnText":"overall budget","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-page-budget-overall-budget"}],"title":"2.5.2.2. Monkey patch for Navigables"},{"refs":[{"id":"ref-for-shared-storage-page-budget-overall-budget\u2460"},{"id":"ref-for-shared-storage-page-budget-overall-budget\u2461"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"}],"url":"#shared-storage-page-budget-overall-budget"},
"shared-storage-page-budget-saved-query-data": {"dfnID":"shared-storage-page-budget-saved-query-data","dfnText":"saved query data","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-page-budget-saved-query-data"}],"title":"2.5.2. Top-Level Traversable Entropy Budgets"},{"refs":[{"id":"ref-for-shared-storage-page-budget-saved-query-data\u2460"}],"title":"2.5.2.3. Saved queries"}],"url":"#shared-storage-page-budget-saved-query-data"},
"shared-storage-page-budget-saved-query-map": {"dfnID":"shared-storage-page-budget-saved-query-map","dfnText":"saved query map","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-page-budget-saved-query-map"},{"id":"ref-for-shared-storage-page-budget-saved-query-map\u2460"},{"id":"ref-for-shared-storage-page-budget-saved-query-map\u2461"},{"id":"ref-for-shared-storage-page-budget-saved-query-map\u2462"}],"title":"2.5.2.3. Saved queries"}],"url":"#shared-storage-page-budget-saved-query-map"},
"shared-storage-page-budget-site-budget-map": {"dfnID":"shared-storage-page-budget-site-budget-map","dfnText":"site budget map","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-page-budget-site-budget-map"}],"title":"2.5.2.2. Monkey patch for Navigables"},{"refs":[{"id":"ref-for-shared-storage-page-budget-site-budget-map\u2460"},{"id":"ref-for-shared-storage-page-budget-site-budget-map\u2461"},{"id":"ref-for-shared-storage-page-budget-site-budget-map\u2462"},{"id":"ref-for-shared-storage-page-budget-site-budget-map\u2463"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"}],"url":"#shared-storage-page-budget-site-budget-map"},
"shared-storage-shed": {"dfnID":"shared-storage-shed","dfnText":"shared storage shed","external":false,"refSections":[{"refs":[{"id":"ref-for-shared-storage-shed"},{"id":"ref-for-shared-storage-shed\u2460"},{"id":"ref-for-shared-storage-shed\u2461"},{"id":"ref-for-shared-storage-shed\u2462"},{"id":"ref-for-shared-storage-shed\u2463"},{"id":"ref-for-shared-storage-shed\u2464"},{"id":"ref-for-shared-storage-shed\u2465"}],"title":"3.1. Monkey Patch for the Storage Model"}],"url":"#shared-storage-shed"},
"sharedstorage": {"dfnID":"sharedstorage","dfnText":"SharedStorage","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorage"}],"title":"2.2.4. The `Shared-Storage-Cross-Origin-Worklet-Allowed` HTTP response header"},{"refs":[{"id":"ref-for-sharedstorage\u2460"},{"id":"ref-for-sharedstorage\u2461"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-sharedstorage\u2462"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-sharedstorage\u2463"},{"id":"ref-for-sharedstorage\u2464"}],"title":"4. Extension to the Window interface"},{"refs":[{"id":"ref-for-sharedstorage\u2465"},{"id":"ref-for-sharedstorage\u2466"},{"id":"ref-for-sharedstorage\u2467"},{"id":"ref-for-sharedstorage\u2468"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorage\u2460\u24ea"},{"id":"ref-for-sharedstorage\u2460\u2460"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-sharedstorage\u2460\u2461"}],"title":"6.1. Run Operation Methods on SharedStorage"},{"refs":[{"id":"ref-for-sharedstorage\u2460\u2462"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-sharedstorage\u2460\u2463"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-sharedstorage\u2460\u2464"},{"id":"ref-for-sharedstorage\u2460\u2465"},{"id":"ref-for-sharedstorage\u2460\u2466"},{"id":"ref-for-sharedstorage\u2460\u2467"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-sharedstorage\u2460\u2468"},{"id":"ref-for-sharedstorage\u2461\u24ea"},{"id":"ref-for-sharedstorage\u2461\u2460"},{"id":"ref-for-sharedstorage\u2461\u2461"},{"id":"ref-for-sharedstorage\u2461\u2462"},{"id":"ref-for-sharedstorage\u2461\u2463"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-sharedstorage\u2461\u2464"},{"id":"ref-for-sharedstorage\u2461\u2465"},{"id":"ref-for-sharedstorage\u2461\u2466"},{"id":"ref-for-sharedstorage\u2461\u2467"},{"id":"ref-for-sharedstorage\u2461\u2468"},{"id":"ref-for-sharedstorage\u2462\u24ea"}],"title":"6.6. Iteration"}],"url":"#sharedstorage"},
"sharedstorage-data-partition-origin": {"dfnID":"sharedstorage-data-partition-origin","dfnText":"data partition origin","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorage-data-partition-origin"}],"title":"2.2.4. The `Shared-Storage-Cross-Origin-Worklet-Allowed` HTTP response header"},{"refs":[{"id":"ref-for-sharedstorage-data-partition-origin\u2460"}],"title":"2.2.5. Monkey Patch for HTTP fetch"}],"url":"#sharedstorage-data-partition-origin"},
"sharedstorageappendmethod": {"dfnID":"sharedstorageappendmethod","dfnText":"SharedStorageAppendMethod","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageappendmethod"},{"id":"ref-for-sharedstorageappendmethod\u2460"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorageappendmethod\u2461"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstorageappendmethod"},
"sharedstorageappendmethod-key": {"dfnID":"sharedstorageappendmethod-key","dfnText":"key","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageappendmethod-key"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorageappendmethod-key\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstorageappendmethod-key"},
"sharedstorageappendmethod-value": {"dfnID":"sharedstorageappendmethod-value","dfnText":"value","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageappendmethod-value"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorageappendmethod-value\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstorageappendmethod-value"},
"sharedstorageclearmethod": {"dfnID":"sharedstorageclearmethod","dfnText":"SharedStorageClearMethod","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageclearmethod"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorageclearmethod\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstorageclearmethod"},
"sharedstoragedeletemethod": {"dfnID":"sharedstoragedeletemethod","dfnText":"SharedStorageDeleteMethod","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragedeletemethod"},{"id":"ref-for-sharedstoragedeletemethod\u2460"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragedeletemethod\u2461"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstoragedeletemethod"},
"sharedstoragedeletemethod-key": {"dfnID":"sharedstoragedeletemethod-key","dfnText":"key","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragedeletemethod-key"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragedeletemethod-key\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstoragedeletemethod-key"},
"sharedstorageiterator-asynchronous-iterator-initialization-steps": {"dfnID":"sharedstorageiterator-asynchronous-iterator-initialization-steps","dfnText":"asynchronous iterator initialization steps","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageiterator-asynchronous-iterator-initialization-steps"}],"title":"6.6. Iteration"}],"url":"#sharedstorageiterator-asynchronous-iterator-initialization-steps"},
"sharedstorageiterator-error": {"dfnID":"sharedstorageiterator-error","dfnText":"error","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageiterator-error"},{"id":"ref-for-sharedstorageiterator-error\u2460"}],"title":"6.6. Iteration"}],"url":"#sharedstorageiterator-error"},
"sharedstorageiterator-get-the-next-iteration-result": {"dfnID":"sharedstorageiterator-get-the-next-iteration-result","dfnText":"get the next iteration result","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageiterator-get-the-next-iteration-result"}],"title":"6.6. Iteration"}],"url":"#sharedstorageiterator-get-the-next-iteration-result"},
"sharedstorageiterator-pending-entries": {"dfnID":"sharedstorageiterator-pending-entries","dfnText":"pending entries","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageiterator-pending-entries"},{"id":"ref-for-sharedstorageiterator-pending-entries\u2460"},{"id":"ref-for-sharedstorageiterator-pending-entries\u2461"}],"title":"6.6. Iteration"}],"url":"#sharedstorageiterator-pending-entries"},
"sharedstoragemodifiermethod": {"dfnID":"sharedstoragemodifiermethod","dfnText":"SharedStorageModifierMethod","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragemodifiermethod"},{"id":"ref-for-sharedstoragemodifiermethod\u2460"},{"id":"ref-for-sharedstoragemodifiermethod\u2461"},{"id":"ref-for-sharedstoragemodifiermethod\u2462"},{"id":"ref-for-sharedstoragemodifiermethod\u2463"},{"id":"ref-for-sharedstoragemodifiermethod\u2464"},{"id":"ref-for-sharedstoragemodifiermethod\u2465"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragemodifiermethod\u2466"}],"title":"6. The SharedStorage Interface"}],"url":"#sharedstoragemodifiermethod"},
"sharedstoragemodifiermethod-with-lock": {"dfnID":"sharedstoragemodifiermethod-with-lock","dfnText":"with lock","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragemodifiermethod-with-lock"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2460"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2461"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2462"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2463"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2464"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2465"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2466"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2467"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2468"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2460\u24ea"},{"id":"ref-for-sharedstoragemodifiermethod-with-lock\u2460\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstoragemodifiermethod-with-lock"},
"sharedstoragesetmethod": {"dfnID":"sharedstoragesetmethod","dfnText":"SharedStorageSetMethod","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragesetmethod"},{"id":"ref-for-sharedstoragesetmethod\u2460"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragesetmethod\u2461"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstoragesetmethod"},
"sharedstoragesetmethod-ignore-if-present": {"dfnID":"sharedstoragesetmethod-ignore-if-present","dfnText":"ignore if present","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragesetmethod-ignore-if-present"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragesetmethod-ignore-if-present\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstoragesetmethod-ignore-if-present"},
"sharedstoragesetmethod-key": {"dfnID":"sharedstoragesetmethod-key","dfnText":"key","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragesetmethod-key"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragesetmethod-key\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstoragesetmethod-key"},
"sharedstoragesetmethod-value": {"dfnID":"sharedstoragesetmethod-value","dfnText":"value","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstoragesetmethod-value"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstoragesetmethod-value\u2460"}],"title":"6.3. BatchUpdate Method"}],"url":"#sharedstoragesetmethod-value"},
"sharedstorageworklet": {"dfnID":"sharedstorageworklet","dfnText":"SharedStorageWorklet","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworklet"},{"id":"ref-for-sharedstorageworklet\u2460"},{"id":"ref-for-sharedstorageworklet\u2461"},{"id":"ref-for-sharedstorageworklet\u2462"},{"id":"ref-for-sharedstorageworklet\u2463"},{"id":"ref-for-sharedstorageworklet\u2464"},{"id":"ref-for-sharedstorageworklet\u2465"},{"id":"ref-for-sharedstorageworklet\u2466"},{"id":"ref-for-sharedstorageworklet\u2467"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2468"},{"id":"ref-for-sharedstorageworklet\u2460\u24ea"},{"id":"ref-for-sharedstorageworklet\u2460\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2460\u2461"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2460\u2462"},{"id":"ref-for-sharedstorageworklet\u2460\u2463"},{"id":"ref-for-sharedstorageworklet\u2460\u2464"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2460\u2465"},{"id":"ref-for-sharedstorageworklet\u2460\u2466"}],"title":"2.3. The SharedStorageWorkletGlobalScope"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2460\u2467"},{"id":"ref-for-sharedstorageworklet\u2460\u2468"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2461\u24ea"},{"id":"ref-for-sharedstorageworklet\u2461\u2460"},{"id":"ref-for-sharedstorageworklet\u2461\u2461"},{"id":"ref-for-sharedstorageworklet\u2461\u2462"},{"id":"ref-for-sharedstorageworklet\u2461\u2463"},{"id":"ref-for-sharedstorageworklet\u2461\u2464"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2461\u2465"}],"title":"6.2. Create a new worklet via SharedStorage"},{"refs":[{"id":"ref-for-sharedstorageworklet\u2461\u2466"},{"id":"ref-for-sharedstorageworklet\u2461\u2467"}],"title":"13. Privacy Considerations"}],"url":"#sharedstorageworklet"},
"sharedstorageworklet-addmodule-initiated": {"dfnID":"sharedstorageworklet-addmodule-initiated","dfnText":"addModule initiated","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworklet-addmodule-initiated"},{"id":"ref-for-sharedstorageworklet-addmodule-initiated\u2460"},{"id":"ref-for-sharedstorageworklet-addmodule-initiated\u2461"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-sharedstorageworklet-addmodule-initiated\u2462"},{"id":"ref-for-sharedstorageworklet-addmodule-initiated\u2463"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#sharedstorageworklet-addmodule-initiated"},
"sharedstorageworklet-data-origin": {"dfnID":"sharedstorageworklet-data-origin","dfnText":"data origin","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworklet-data-origin"},{"id":"ref-for-sharedstorageworklet-data-origin\u2460"},{"id":"ref-for-sharedstorageworklet-data-origin\u2461"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-sharedstorageworklet-data-origin\u2462"},{"id":"ref-for-sharedstorageworklet-data-origin\u2463"},{"id":"ref-for-sharedstorageworklet-data-origin\u2464"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-sharedstorageworklet-data-origin\u2465"},{"id":"ref-for-sharedstorageworklet-data-origin\u2466"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-sharedstorageworklet-data-origin\u2467"}],"title":"6.2. Create a new worklet via SharedStorage"}],"url":"#sharedstorageworklet-data-origin"},
"sharedstorageworklet-has-cross-origin-data-origin": {"dfnID":"sharedstorageworklet-has-cross-origin-data-origin","dfnText":"has cross-origin data origin","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin"},{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2460"},{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2461"},{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2462"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2463"},{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2464"},{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2465"},{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2466"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2467"},{"id":"ref-for-sharedstorageworklet-has-cross-origin-data-origin\u2468"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"#sharedstorageworklet-has-cross-origin-data-origin"},
"sharedstorageworkletglobalscope": {"dfnID":"sharedstorageworkletglobalscope","dfnText":"SharedStorageWorkletGlobalScope","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460"},{"id":"ref-for-sharedstorageworkletglobalscope\u2461"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2462"},{"id":"ref-for-sharedstorageworkletglobalscope\u2463"},{"id":"ref-for-sharedstorageworkletglobalscope\u2464"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2465"}],"title":"2.2.1. Monkey Patch for set up a worklet environment settings object"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2466"},{"id":"ref-for-sharedstorageworkletglobalscope\u2467"}],"title":"2.2.3. Monkey Patch for fetch a worklet script graph"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2468"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u24ea"}],"title":"2.3. The SharedStorageWorkletGlobalScope"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2460"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2461"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2462"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2463"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2464"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2465"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2466"},{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2467"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2460\u2468"},{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u24ea"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2460"},{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2461"},{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2462"},{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2463"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2464"}],"title":"6. The SharedStorage Interface"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2465"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2466"},{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2467"},{"id":"ref-for-sharedstorageworkletglobalscope\u2461\u2468"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u24ea"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2460"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2461"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2462"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2463"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2464"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2465"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2466"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2467"},{"id":"ref-for-sharedstorageworkletglobalscope\u2462\u2468"},{"id":"ref-for-sharedstorageworkletglobalscope\u2463\u24ea"},{"id":"ref-for-sharedstorageworkletglobalscope\u2463\u2460"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2463\u2461"},{"id":"ref-for-sharedstorageworkletglobalscope\u2463\u2462"}],"title":"6.6. Iteration"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2463\u2463"}],"title":"7. Triggering Operations Via HTTP Response Header"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope\u2463\u2464"}],"title":"10.5. Monkey Patch for the \"obtain a lock manager\" algorithm"}],"url":"#sharedstorageworkletglobalscope"},
"sharedstorageworkletglobalscope-addmodule-success": {"dfnID":"sharedstorageworkletglobalscope-addmodule-success","dfnText":"addModule success","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-addmodule-success"},{"id":"ref-for-sharedstorageworkletglobalscope-addmodule-success\u2460"},{"id":"ref-for-sharedstorageworkletglobalscope-addmodule-success\u2461"},{"id":"ref-for-sharedstorageworkletglobalscope-addmodule-success\u2462"}],"title":"2.2.6. Monkey Patch for addModule()"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-addmodule-success\u2463"},{"id":"ref-for-sharedstorageworkletglobalscope-addmodule-success\u2464"},{"id":"ref-for-sharedstorageworkletglobalscope-addmodule-success\u2465"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"#sharedstorageworkletglobalscope-addmodule-success"},
"sharedstorageworkletglobalscope-check-whether-addmodule-is-finished": {"dfnID":"sharedstorageworkletglobalscope-check-whether-addmodule-is-finished","dfnText":"check whether addModule is finished","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2461"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2462"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2463"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2464"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2465"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2466"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2467"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2468"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2460\u24ea"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2460\u2460"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2460\u2461"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2460\u2462"},{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2460\u2463"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-check-whether-addmodule-is-finished\u2460\u2464"}],"title":"6.6. Iteration"}],"url":"#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished"},
"sharedstorageworkletglobalscope-navigator-instance": {"dfnID":"sharedstorageworkletglobalscope-navigator-instance","dfnText":"navigator instance","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-navigator-instance"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"#sharedstorageworkletglobalscope-navigator-instance"},
"sharedstorageworkletglobalscope-operation-map": {"dfnID":"sharedstorageworkletglobalscope-operation-map","dfnText":"operation map","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-operation-map"},{"id":"ref-for-sharedstorageworkletglobalscope-operation-map\u2460"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-operation-map\u2461"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"#sharedstorageworkletglobalscope-operation-map"},
"sharedstorageworkletglobalscope-outside-settings": {"dfnID":"sharedstorageworkletglobalscope-outside-settings","dfnText":"outside settings","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2460"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2461"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2462"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2463"}],"title":"6.3. BatchUpdate Method"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2464"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2465"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2466"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2467"}],"title":"6.4. Setter/Deleter Methods"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2468"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2460\u24ea"},{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2460\u2460"}],"title":"6.5. Getter Methods"},{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-outside-settings\u2460\u2461"}],"title":"6.6. Iteration"}],"url":"#sharedstorageworkletglobalscope-outside-settings"},
"sharedstorageworkletglobalscope-shared-storage-instance": {"dfnID":"sharedstorageworkletglobalscope-shared-storage-instance","dfnText":"shared storage instance","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletglobalscope-shared-storage-instance"}],"title":"2.3.2. SharedStorageWorkletGlobalScope algorithms"}],"url":"#sharedstorageworkletglobalscope-shared-storage-instance"},
"sharedstorageworkletnavigator": {"dfnID":"sharedstorageworkletnavigator","dfnText":"SharedStorageWorkletNavigator","external":false,"refSections":[{"refs":[{"id":"ref-for-sharedstorageworkletnavigator"},{"id":"ref-for-sharedstorageworkletnavigator\u2460"}],"title":"2.3.1. Monkey Patch for request destination"},{"refs":[{"id":"ref-for-sharedstorageworkletnavigator\u2461"}],"title":"10.2. SharedStorageWorkletNavigator interface"},{"refs":[{"id":"ref-for-sharedstorageworkletnavigator\u2462"},{"id":"ref-for-sharedstorageworkletnavigator\u2463"},{"id":"ref-for-sharedstorageworkletnavigator\u2464"}],"title":"10.3. Web Locks IDLs Monkey Patches"}],"url":"#sharedstorageworkletnavigator"},
"site-page-entropy-allowance": {"dfnID":"site-page-entropy-allowance","dfnText":"site page entropy allowance","external":false,"refSections":[{"refs":[{"id":"ref-for-site-page-entropy-allowance"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"}],"url":"#site-page-entropy-allowance"},
"site-remaining-navigation-budget": {"dfnID":"site-remaining-navigation-budget","dfnText":"remaining navigation budget","external":false,"refSections":[{"refs":[{"id":"ref-for-site-remaining-navigation-budget"}],"title":"2.2.5. Monkey Patch for HTTP fetch"},{"refs":[{"id":"ref-for-site-remaining-navigation-budget\u2460"}],"title":"2.5.1. Navigation Entropy Budget"}],"url":"#site-remaining-navigation-budget"},
"store-the-index-for-a-saved-query": {"dfnID":"store-the-index-for-a-saved-query","dfnText":"store the index for a saved query","external":false,"refSections":[{"refs":[{"id":"ref-for-store-the-index-for-a-saved-query"},{"id":"ref-for-store-the-index-for-a-saved-query\u2460"},{"id":"ref-for-store-the-index-for-a-saved-query\u2461"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#store-the-index-for-a-saved-query"},
"traversable-navigable-page-budget": {"dfnID":"traversable-navigable-page-budget","dfnText":"page budget","external":false,"refSections":[{"refs":[{"id":"ref-for-traversable-navigable-page-budget"}],"title":"2.5.2.2. Monkey patch for Navigables"},{"refs":[{"id":"ref-for-traversable-navigable-page-budget\u2460"},{"id":"ref-for-traversable-navigable-page-budget\u2461"},{"id":"ref-for-traversable-navigable-page-budget\u2462"},{"id":"ref-for-traversable-navigable-page-budget\u2463"},{"id":"ref-for-traversable-navigable-page-budget\u2464"},{"id":"ref-for-traversable-navigable-page-budget\u2465"}],"title":"2.5.2.3. Saved queries"},{"refs":[{"id":"ref-for-traversable-navigable-page-budget\u2466"},{"id":"ref-for-traversable-navigable-page-budget\u2467"},{"id":"ref-for-traversable-navigable-page-budget\u2468"},{"id":"ref-for-traversable-navigable-page-budget\u2460\u24ea"},{"id":"ref-for-traversable-navigable-page-budget\u2460\u2460"},{"id":"ref-for-traversable-navigable-page-budget\u2460\u2461"},{"id":"ref-for-traversable-navigable-page-budget\u2460\u2462"}],"title":"2.5.2.4. Charging the Top-Level Traversable Entropy Budgets"}],"url":"#traversable-navigable-page-budget"},
"traversable-navigable-shared-storage-page-budget": {"dfnID":"traversable-navigable-shared-storage-page-budget","dfnText":"shared storage page budget","external":false,"refSections":[{"refs":[{"id":"ref-for-traversable-navigable-shared-storage-page-budget"}],"title":"2.5.2.1. Monkey patch for Traversable Navigables"},{"refs":[{"id":"ref-for-traversable-navigable-shared-storage-page-budget\u2460"}],"title":"2.5.2.2. Monkey patch for Navigables"}],"url":"#traversable-navigable-shared-storage-page-budget"},
"trusted-origin-type": {"dfnID":"trusted-origin-type","dfnText":"trusted origin type","external":false,"refSections":[{"refs":[{"id":"ref-for-trusted-origin-type"},{"id":"ref-for-trusted-origin-type\u2460"},{"id":"ref-for-trusted-origin-type\u2461"}],"title":"2.2.6. Monkey Patch for addModule()"}],"url":"#trusted-origin-type"},
"typedefdef-sharedstorageresponse": {"dfnID":"typedefdef-sharedstorageresponse","dfnText":"SharedStorageResponse","external":false,"refSections":[{"refs":[{"id":"ref-for-typedefdef-sharedstorageresponse"}],"title":"2. The SharedStorageWorklet Interface"},{"refs":[{"id":"ref-for-typedefdef-sharedstorageresponse\u2460"}],"title":"2.4. SharedStorageUrlWithMetadata and Reporting"},{"refs":[{"id":"ref-for-typedefdef-sharedstorageresponse\u2461"}],"title":"2.5.1. Navigation Entropy Budget"},{"refs":[{"id":"ref-for-typedefdef-sharedstorageresponse\u2462"}],"title":"6. The SharedStorage Interface"}],"url":"#typedefdef-sharedstorageresponse"},
"validate-reporting-metadata": {"dfnID":"validate-reporting-metadata","dfnText":"validate reporting metadata","external":false,"refSections":[{"refs":[{"id":"ref-for-validate-reporting-metadata"}],"title":"2.1. Run Operation Methods on SharedStorageWorklet"}],"url":"#validate-reporting-metadata"},
"value-maximum-length": {"dfnID":"value-maximum-length","dfnText":"maximum length","external":false,"refSections":[{"refs":[{"id":"ref-for-value-maximum-length"},{"id":"ref-for-value-maximum-length\u2460"}],"title":"5. The SharedStorageModifierMethod Interface Group"},{"refs":[{"id":"ref-for-value-maximum-length\u2461"},{"id":"ref-for-value-maximum-length\u2462"}],"title":"6.4. Setter/Deleter Methods"}],"url":"#value-maximum-length"},
"value-struct-last-updated": {"dfnID":"value-struct-last-updated","dfnText":"last updated","external":false,"refSections":[{"refs":[{"id":"ref-for-value-struct-last-updated"},{"id":"ref-for-value-struct-last-updated\u2460"}],"title":"3.3. The Database Algorithms"}],"url":"#value-struct-last-updated"},
"value-struct-value": {"dfnID":"value-struct-value","dfnText":"value","external":false,"refSections":[{"refs":[{"id":"ref-for-value-struct-value"}],"title":"3.2. The Shared Storage Database"},{"refs":[{"id":"ref-for-value-struct-value\u2460"},{"id":"ref-for-value-struct-value\u2461"},{"id":"ref-for-value-struct-value\u2462"}],"title":"3.3. The Database Algorithms"},{"refs":[{"id":"ref-for-value-struct-value\u2463"},{"id":"ref-for-value-struct-value\u2464"},{"id":"ref-for-value-struct-value\u2465"}],"title":"9.3.4. `Shared-Storage-Write` Response Header"}],"url":"#value-struct-value"},
"window-sharedstorage-getter": {"dfnID":"window-sharedstorage-getter","dfnText":"sharedStorage getter","external":false,"refSections":[{"refs":[{"id":"ref-for-window-sharedstorage-getter"}],"title":"4. Extension to the Window interface"}],"url":"#window-sharedstorage-getter"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#append-or-modify-a-sec-shared-storage-writable-request-header": {"displayText":"append or modify a sec-shared-storage-writable request header","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"append or modify a sec-shared-storage-writable request header","type":"dfn","url":"#append-or-modify-a-sec-shared-storage-writable-request-header"},
"#bit-debit": {"displayText":"bit debit","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"bit debit","type":"dfn","url":"#bit-debit"},
"#bit-debit-bits": {"displayText":"bits","export":true,"for_":["bit debit"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"bits","type":"dfn","url":"#bit-debit-bits"},
"#bit-debit-expired": {"displayText":"expired","export":true,"for_":["bit debit"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"expired","type":"dfn","url":"#bit-debit-expired"},
"#bit-debit-timestamp": {"displayText":"timestamp","export":true,"for_":["bit debit"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"timestamp","type":"dfn","url":"#bit-debit-timestamp"},
"#callbackdef-runfunctionforsharedstorageselecturloperation": {"displayText":"RunFunctionForSharedStorageSelectURLOperation","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"RunFunctionForSharedStorageSelectURLOperation","type":"callback","url":"#callbackdef-runfunctionforsharedstorageselecturloperation"},
"#charge-shared-storage-navigation-budget": {"displayText":"charge shared storage navigation budget","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"charge shared storage navigation budget","type":"dfn","url":"#charge-shared-storage-navigation-budget"},
"#charge-shared-storage-top-level-traversable-budgets": {"displayText":"charge shared storage top-level traversable budgets","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"charge shared storage top-level traversable budgets","type":"dfn","url":"#charge-shared-storage-top-level-traversable-budgets"},
"#check-for-script-and-context-origin-match": {"displayText":"check for script and context origin match","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check for script and context origin match","type":"dfn","url":"#check-for-script-and-context-origin-match"},
"#check-for-trusted-origin-match": {"displayText":"check for trusted origin match","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check for trusted origin match","type":"dfn","url":"#check-for-trusted-origin-match"},
"#check-for-trusted-origin-match-on-a-string": {"displayText":"check for trusted origin match on a string","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check for trusted origin match on a string","type":"dfn","url":"#check-for-trusted-origin-match-on-a-string"},
"#check-if-addmodule-is-allowed-and-update-state": {"displayText":"check if addmodule is allowed and update state","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check if addmodule is allowed and update state","type":"dfn","url":"#check-if-addmodule-is-allowed-and-update-state"},
"#check-if-string-like": {"displayText":"check if string-like","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check if string-like","type":"dfn","url":"#check-if-string-like"},
"#check-if-user-preference-setting-allows-access-to-shared-storage": {"displayText":"check if user preference setting allows access to shared storage","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check if user preference setting allows access to shared storage","type":"dfn","url":"#check-if-user-preference-setting-allows-access-to-shared-storage"},
"#check-whether-a-bit-debit-is-expired": {"displayText":"check whether a bit debit is expired","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check whether a bit debit is expired","type":"dfn","url":"#check-whether-a-bit-debit-is-expired"},
"#create-a-shared-storage-bucket": {"displayText":"create a shared storage bucket","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"create a shared storage bucket","type":"dfn","url":"#create-a-shared-storage-bucket"},
"#create-a-shared-storage-shelf": {"displayText":"create a shared storage shelf","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"create a shared storage shelf","type":"dfn","url":"#create-a-shared-storage-shelf"},
"#default-entry-lifetime": {"displayText":"default entry lifetime","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"default entry lifetime","type":"dfn","url":"#default-entry-lifetime"},
"#default-selecturl-index": {"displayText":"default selecturl index","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"default selecturl index","type":"dfn","url":"#default-selecturl-index"},
"#determine-remaining-navigation-budget": {"displayText":"determine remaining navigation budget","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"determine remaining navigation budget","type":"dfn","url":"#determine-remaining-navigation-budget"},
"#determine-whether-a-request-can-currently-use-shared-storage": {"displayText":"determine whether a request can currently use shared storage","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"determine whether a request can currently use shared storage","type":"dfn","url":"#determine-whether-a-request-can-currently-use-shared-storage"},
"#determine-whether-shared-storage-is-allowed-by-context": {"displayText":"determine whether shared storage is allowed by context","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"determine whether shared storage is allowed by context","type":"dfn","url":"#determine-whether-shared-storage-is-allowed-by-context"},
"#deterministic-operation-timeout-duration": {"displayText":"deterministic operation timeout duration","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"deterministic operation timeout duration","type":"dfn","url":"#deterministic-operation-timeout-duration"},
"#dictdef-sharedstoragemodifiermethodoptions": {"displayText":"SharedStorageModifierMethodOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageModifierMethodOptions","type":"dictionary","url":"#dictdef-sharedstoragemodifiermethodoptions"},
"#dictdef-sharedstorageprivateaggregationconfig": {"displayText":"SharedStoragePrivateAggregationConfig","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStoragePrivateAggregationConfig","type":"dictionary","url":"#dictdef-sharedstorageprivateaggregationconfig"},
"#dictdef-sharedstoragerunoperationmethodoptions": {"displayText":"SharedStorageRunOperationMethodOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageRunOperationMethodOptions","type":"dictionary","url":"#dictdef-sharedstoragerunoperationmethodoptions"},
"#dictdef-sharedstoragesetmethodoptions": {"displayText":"SharedStorageSetMethodOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageSetMethodOptions","type":"dictionary","url":"#dictdef-sharedstoragesetmethodoptions"},
"#dictdef-sharedstorageurlwithmetadata": {"displayText":"SharedStorageUrlWithMetadata","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageUrlWithMetadata","type":"dictionary","url":"#dictdef-sharedstorageurlwithmetadata"},
"#dictdef-sharedstorageworkletoptions": {"displayText":"SharedStorageWorkletOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageWorkletOptions","type":"dictionary","url":"#dictdef-sharedstorageworkletoptions"},
"#dom-htmlsharedstoragewritableelementutils-sharedstoragewritable": {"displayText":"sharedStorageWritable","export":true,"for_":["HTMLSharedStorageWritableElementUtils"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sharedStorageWritable","type":"attribute","url":"#dom-htmlsharedstoragewritableelementutils-sharedstoragewritable"},
"#dom-requestinit-sharedstoragewritable": {"displayText":"sharedStorageWritable","export":true,"for_":["RequestInit"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sharedStorageWritable","type":"dict-member","url":"#dom-requestinit-sharedstoragewritable"},
"#dom-sharedstorage-append": {"displayText":"append(key, value)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"append(key, value)","type":"method","url":"#dom-sharedstorage-append"},
"#dom-sharedstorage-batchupdate": {"displayText":"batchUpdate(methods, options)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"batchUpdate(methods, options)","type":"method","url":"#dom-sharedstorage-batchupdate"},
"#dom-sharedstorage-clear": {"displayText":"clear()","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"clear()","type":"method","url":"#dom-sharedstorage-clear"},
"#dom-sharedstorage-createworklet": {"displayText":"createWorklet(moduleURL)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"createWorklet(moduleURL)","type":"method","url":"#dom-sharedstorage-createworklet"},
"#dom-sharedstorage-delete": {"displayText":"delete(key)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"delete(key)","type":"method","url":"#dom-sharedstorage-delete"},
"#dom-sharedstorage-get": {"displayText":"get(key)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"get(key)","type":"method","url":"#dom-sharedstorage-get"},
"#dom-sharedstorage-length": {"displayText":"length()","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"length()","type":"method","url":"#dom-sharedstorage-length"},
"#dom-sharedstorage-remainingbudget": {"displayText":"remainingBudget()","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"remainingBudget()","type":"method","url":"#dom-sharedstorage-remainingbudget"},
"#dom-sharedstorage-run": {"displayText":"run(name, options)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"run(name, options)","type":"method","url":"#dom-sharedstorage-run"},
"#dom-sharedstorage-selecturl": {"displayText":"selectURL(name, urls, options)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"selectURL(name, urls, options)","type":"method","url":"#dom-sharedstorage-selecturl"},
"#dom-sharedstorage-set": {"displayText":"set(key, value)","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"set(key, value)","type":"method","url":"#dom-sharedstorage-set"},
"#dom-sharedstorage-worklet": {"displayText":"worklet","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"worklet","type":"attribute","url":"#dom-sharedstorage-worklet"},
"#dom-sharedstorageappendmethod-sharedstorageappendmethod": {"displayText":"SharedStorageAppendMethod(key, value)","export":true,"for_":["SharedStorageAppendMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageAppendMethod(key, value)","type":"constructor","url":"#dom-sharedstorageappendmethod-sharedstorageappendmethod"},
"#dom-sharedstorageclearmethod-sharedstorageclearmethod": {"displayText":"SharedStorageClearMethod()","export":true,"for_":["SharedStorageClearMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageClearMethod()","type":"constructor","url":"#dom-sharedstorageclearmethod-sharedstorageclearmethod"},
"#dom-sharedstoragedeletemethod-sharedstoragedeletemethod": {"displayText":"SharedStorageDeleteMethod(key)","export":true,"for_":["SharedStorageDeleteMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageDeleteMethod(key)","type":"constructor","url":"#dom-sharedstoragedeletemethod-sharedstoragedeletemethod"},
"#dom-sharedstoragemodifiermethodoptions-withlock": {"displayText":"withLock","export":true,"for_":["SharedStorageModifierMethodOptions"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"withLock","type":"dict-member","url":"#dom-sharedstoragemodifiermethodoptions-withlock"},
"#dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin": {"displayText":"aggregationCoordinatorOrigin","export":true,"for_":["SharedStoragePrivateAggregationConfig"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"aggregationCoordinatorOrigin","type":"dict-member","url":"#dom-sharedstorageprivateaggregationconfig-aggregationcoordinatororigin"},
"#dom-sharedstorageprivateaggregationconfig-contextid": {"displayText":"contextId","export":true,"for_":["SharedStoragePrivateAggregationConfig"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"contextId","type":"dict-member","url":"#dom-sharedstorageprivateaggregationconfig-contextid"},
"#dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes": {"displayText":"filteringIdMaxBytes","export":true,"for_":["SharedStoragePrivateAggregationConfig"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"filteringIdMaxBytes","type":"dict-member","url":"#dom-sharedstorageprivateaggregationconfig-filteringidmaxbytes"},
"#dom-sharedstorageprivateaggregationconfig-maxcontributions": {"displayText":"maxContributions","export":true,"for_":["SharedStoragePrivateAggregationConfig"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"maxContributions","type":"dict-member","url":"#dom-sharedstorageprivateaggregationconfig-maxcontributions"},
"#dom-sharedstoragerunoperationmethodoptions-data": {"displayText":"data","export":true,"for_":["SharedStorageRunOperationMethodOptions"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"data","type":"dict-member","url":"#dom-sharedstoragerunoperationmethodoptions-data"},
"#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig": {"displayText":"privateAggregationConfig","export":true,"for_":["SharedStorageRunOperationMethodOptions"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"privateAggregationConfig","type":"dict-member","url":"#dom-sharedstoragerunoperationmethodoptions-privateaggregationconfig"},
"#dom-sharedstoragesetmethod-sharedstoragesetmethod": {"displayText":"SharedStorageSetMethod(key, value, options)","export":true,"for_":["SharedStorageSetMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageSetMethod(key, value, options)","type":"constructor","url":"#dom-sharedstoragesetmethod-sharedstoragesetmethod"},
"#dom-sharedstoragesetmethodoptions-ignoreifpresent": {"displayText":"ignoreIfPresent","export":true,"for_":["SharedStorageSetMethodOptions"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"ignoreIfPresent","type":"dict-member","url":"#dom-sharedstoragesetmethodoptions-ignoreifpresent"},
"#dom-sharedstorageurlwithmetadata-reportingmetadata": {"displayText":"reportingMetadata","export":true,"for_":["SharedStorageUrlWithMetadata"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"reportingMetadata","type":"dict-member","url":"#dom-sharedstorageurlwithmetadata-reportingmetadata"},
"#dom-sharedstorageurlwithmetadata-url": {"displayText":"url","export":true,"for_":["SharedStorageUrlWithMetadata"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"url","type":"dict-member","url":"#dom-sharedstorageurlwithmetadata-url"},
"#dom-sharedstorageworklet-run": {"displayText":"run(name, options)","export":true,"for_":["SharedStorageWorklet"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"run(name, options)","type":"method","url":"#dom-sharedstorageworklet-run"},
"#dom-sharedstorageworklet-selecturl": {"displayText":"selectURL(name, urls)","export":true,"for_":["SharedStorageWorklet"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"selectURL(name, urls)","type":"method","url":"#dom-sharedstorageworklet-selecturl"},
"#dom-sharedstorageworkletglobalscope-interestgroups": {"displayText":"interestGroups()","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"interestGroups()","type":"method","url":"#dom-sharedstorageworkletglobalscope-interestgroups"},
"#dom-sharedstorageworkletglobalscope-navigator": {"displayText":"navigator","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"navigator","type":"attribute","url":"#dom-sharedstorageworkletglobalscope-navigator"},
"#dom-sharedstorageworkletglobalscope-privateaggregation": {"displayText":"privateAggregation","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"privateAggregation","type":"attribute","url":"#dom-sharedstorageworkletglobalscope-privateaggregation"},
"#dom-sharedstorageworkletglobalscope-register": {"displayText":"register(name, operationCtor)","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"register(name, operationCtor)","type":"method","url":"#dom-sharedstorageworkletglobalscope-register"},
"#dom-sharedstorageworkletglobalscope-sharedstorage": {"displayText":"sharedStorage","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sharedStorage","type":"attribute","url":"#dom-sharedstorageworkletglobalscope-sharedstorage"},
"#dom-sharedstorageworkletoptions-dataorigin": {"displayText":"dataOrigin","export":true,"for_":["SharedStorageWorkletOptions"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"dataOrigin","type":"dict-member","url":"#dom-sharedstorageworkletoptions-dataorigin"},
"#dom-window-sharedstorage": {"displayText":"sharedStorage","export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sharedStorage","type":"attribute","url":"#dom-window-sharedstorage"},
"#element-attrdef-iframe-sharedstoragewritable": {"displayText":"sharedstoragewritable","export":true,"for_":["iframe"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sharedstoragewritable","type":"element-attr","url":"#element-attrdef-iframe-sharedstoragewritable"},
"#element-attrdef-img-sharedstoragewritable": {"displayText":"sharedstoragewritable","export":true,"for_":["img"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sharedstoragewritable","type":"element-attr","url":"#element-attrdef-img-sharedstoragewritable"},
"#entry-key": {"displayText":"key","export":true,"for_":["entry"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"key","type":"dfn","url":"#entry-key"},
"#entry-value-struct": {"displayText":"value struct","export":true,"for_":["entry"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"value struct","type":"dfn","url":"#entry-value-struct"},
"#finish-a-batch-update": {"displayText":"finish a batch update","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"finish a batch update","type":"dfn","url":"#finish-a-batch-update"},
"#get-the-canonical-url-string-if-valid": {"displayText":"get the canonical url string if valid","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"get the canonical url string if valid","type":"dfn","url":"#get-the-canonical-url-string-if-valid"},
"#get-the-default-selecturl-index": {"displayText":"get the default selecturl index","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"get the default selecturl index","type":"dfn","url":"#get-the-default-selecturl-index"},
"#get-the-index-for-a-saved-query": {"displayText":"get the index for a saved query","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"get the index for a saved query","type":"dfn","url":"#get-the-index-for-a-saved-query"},
"#get-the-select-url-result-index": {"displayText":"get the select-url result index","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"get the select-url result index","type":"dfn","url":"#get-the-select-url-result-index"},
"#get-the-string-value": {"displayText":"get the string value","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"get the string value","type":"dfn","url":"#get-the-string-value"},
"#handle-a-shared-storage-write-response": {"displayText":"handle a shared-storage-write response","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"handle a shared-storage-write response","type":"dfn","url":"#handle-a-shared-storage-write-response"},
"#handle-callback-within-a-shared-storage-lock": {"displayText":"handle callback within a shared storage lock","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"handle callback within a shared storage lock","type":"dfn","url":"#handle-callback-within-a-shared-storage-lock"},
"#handle-the-result-of-selecting-an-index": {"displayText":"handle the result of selecting an index","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"handle the result of selecting an index","type":"dfn","url":"#handle-the-result-of-selecting-an-index"},
"#htmlsharedstoragewritableelementutils": {"displayText":"HTMLSharedStorageWritableElementUtils","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"HTMLSharedStorageWritableElementUtils","type":"interface","url":"#htmlsharedstoragewritableelementutils"},
"#http-headerdef-sec-shared-storage-data-origin": {"displayText":"sec-shared-storage-data-origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sec-shared-storage-data-origin","type":"http-header","url":"#http-headerdef-sec-shared-storage-data-origin"},
"#http-headerdef-sec-shared-storage-writable": {"displayText":"sec-shared-storage-writable","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sec-shared-storage-writable","type":"http-header","url":"#http-headerdef-sec-shared-storage-writable"},
"#http-headerdef-shared-storage-cross-origin-worklet-allowed": {"displayText":"shared-storage-cross-origin-worklet-allowed","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared-storage-cross-origin-worklet-allowed","type":"http-header","url":"#http-headerdef-shared-storage-cross-origin-worklet-allowed"},
"#http-headerdef-shared-storage-write": {"displayText":"shared-storage-write","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared-storage-write","type":"http-header","url":"#http-headerdef-shared-storage-write"},
"#key-maximum-length": {"displayText":"maximum length","export":true,"for_":["key"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"maximum length","type":"dfn","url":"#key-maximum-length"},
"#lock": {"displayText":"Lock","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"Lock","type":"interface","url":"#lock"},
"#lockmanager": {"displayText":"LockManager","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"LockManager","type":"interface","url":"#lockmanager"},
"#navigation-budget-epoch": {"displayText":"navigation budget epoch","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"navigation budget epoch","type":"dfn","url":"#navigation-budget-epoch"},
"#navigation-budget-lifetime": {"displayText":"navigation budget lifetime","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"navigation budget lifetime","type":"dfn","url":"#navigation-budget-lifetime"},
"#navigation-entropy-allowance": {"displayText":"navigation entropy allowance","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"navigation entropy allowance","type":"dfn","url":"#navigation-entropy-allowance"},
"#navigation-entropy-ledger": {"displayText":"navigation entropy ledger","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"navigation entropy ledger","type":"dfn","url":"#navigation-entropy-ledger"},
"#obtain-a-boolean-parameter-value": {"displayText":"obtain a boolean parameter value","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"obtain a boolean parameter value","type":"dfn","url":"#obtain-a-boolean-parameter-value"},
"#obtain-a-callback-to-process-the-saved-index-result": {"displayText":"obtain a callback to process the saved index result","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"obtain a callback to process the saved index result","type":"dfn","url":"#obtain-a-callback-to-process-the-saved-index-result"},
"#obtain-a-shared-storage-bottle-map": {"displayText":"obtain a shared storage bottle map","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"obtain a shared storage bottle map","type":"dfn","url":"#obtain-a-shared-storage-bottle-map"},
"#obtain-a-shared-storage-shelf": {"displayText":"obtain a shared storage shelf","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"obtain a shared storage shelf","type":"dfn","url":"#obtain-a-shared-storage-shelf"},
"#obtain-a-string-like-parameter-value": {"displayText":"obtain a string-like parameter value","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"obtain a string-like parameter value","type":"dfn","url":"#obtain-a-string-like-parameter-value"},
"#obtain-the-aggregation-coordinator": {"displayText":"obtain the aggregation coordinator","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"obtain the aggregation coordinator","type":"dfn","url":"#obtain-the-aggregation-coordinator"},
"#obtain-the-pre-specified-report-parameters": {"displayText":"obtain the pre-specified report parameters","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"obtain the pre-specified report parameters","type":"dfn","url":"#obtain-the-pre-specified-report-parameters"},
"#overall-page-entropy-allowance": {"displayText":"overall page entropy allowance","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"overall page entropy allowance","type":"dfn","url":"#overall-page-entropy-allowance"},
"#pending-shared-storage-budget-debit": {"displayText":"pending shared storage budget debit","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"pending shared storage budget debit","type":"dfn","url":"#pending-shared-storage-budget-debit"},
"#permissionspolicy-shared-storage": {"displayText":"shared-storage","export":true,"for_":["PermissionsPolicy"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared-storage","type":"dfn","url":"#permissionspolicy-shared-storage"},
"#permissionspolicy-shared-storage-select-url": {"displayText":"shared-storage-select-url","export":true,"for_":["PermissionsPolicy"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared-storage-select-url","type":"dfn","url":"#permissionspolicy-shared-storage-select-url"},
"#purge-expired-bit-debits-from-all-navigation-entropy-ledgers": {"displayText":"purge expired bit debits from all navigation entropy ledgers","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"purge expired bit debits from all navigation entropy ledgers","type":"dfn","url":"#purge-expired-bit-debits-from-all-navigation-entropy-ledgers"},
"#register-reporting-metadata": {"displayText":"register reporting metadata","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"register reporting metadata","type":"dfn","url":"#register-reporting-metadata"},
"#request-shared-storage-writable": {"displayText":"shared storage writable","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage writable","type":"dfn","url":"#request-shared-storage-writable"},
"#saved-query-data-callbacks": {"displayText":"callbacks","export":true,"for_":["saved query data"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"callbacks","type":"dfn","url":"#saved-query-data-callbacks"},
"#saved-query-data-index": {"displayText":"index","export":true,"for_":["saved query data"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"index","type":"dfn","url":"#saved-query-data-index"},
"#set-up-the-private-aggregation-scopes": {"displayText":"set up the private aggregation scopes","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"set up the private aggregation scopes","type":"dfn","url":"#set-up-the-private-aggregation-scopes"},
"#shared-storage": {"displayText":"shared storage","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage","type":"dfn","url":"#shared-storage"},
"#shared-storage-bucket": {"displayText":"shared storage bucket","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage bucket","type":"dfn","url":"#shared-storage-bucket"},
"#shared-storage-database": {"displayText":"shared storage database","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage database","type":"dfn","url":"#shared-storage-database"},
"#shared-storage-database-clear-all-entries-in-the-database": {"displayText":"clear all entries in the database","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"clear all entries in the database","type":"dfn","url":"#shared-storage-database-clear-all-entries-in-the-database"},
"#shared-storage-database-count-entries-in-the-database": {"displayText":"count entries in the database","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"count entries in the database","type":"dfn","url":"#shared-storage-database-count-entries-in-the-database"},
"#shared-storage-database-delete-an-entry-from-the-database": {"displayText":"delete an entry from the database","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"delete an entry from the database","type":"dfn","url":"#shared-storage-database-delete-an-entry-from-the-database"},
"#shared-storage-database-determine-whether-an-entry-is-expired": {"displayText":"determine whether an entry is expired","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"determine whether an entry is expired","type":"dfn","url":"#shared-storage-database-determine-whether-an-entry-is-expired"},
"#shared-storage-database-entry": {"displayText":"entry","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"entry","type":"dfn","url":"#shared-storage-database-entry"},
"#shared-storage-database-purge-expired-entries-from-the-database": {"displayText":"purge expired entries from the database","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"purge expired entries from the database","type":"dfn","url":"#shared-storage-database-purge-expired-entries-from-the-database"},
"#shared-storage-database-retrieve-all-entries-from-the-database": {"displayText":"retrieve all entries from the database","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"retrieve all entries from the database","type":"dfn","url":"#shared-storage-database-retrieve-all-entries-from-the-database"},
"#shared-storage-database-retrieve-an-entry-from-the-database": {"displayText":"retrieve an entry from the database","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"retrieve an entry from the database","type":"dfn","url":"#shared-storage-database-retrieve-an-entry-from-the-database"},
"#shared-storage-database-shared-storage-database-queue": {"displayText":"shared storage database queue","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage database queue","type":"dfn","url":"#shared-storage-database-shared-storage-database-queue"},
"#shared-storage-database-store-an-entry-in-the-database": {"displayText":"store an entry in the database","export":true,"for_":["shared storage database"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"store an entry in the database","type":"dfn","url":"#shared-storage-database-store-an-entry-in-the-database"},
"#shared-storage-lock-managers-map": {"displayText":"shared storage lock managers map","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage lock managers map","type":"dfn","url":"#shared-storage-lock-managers-map"},
"#shared-storage-navigation-budget-table": {"displayText":"shared storage navigation budget table","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage navigation budget table","type":"dfn","url":"#shared-storage-navigation-budget-table"},
"#shared-storage-page-budget-overall-budget": {"displayText":"overall budget","export":true,"for_":["shared storage page budget"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"overall budget","type":"dfn","url":"#shared-storage-page-budget-overall-budget"},
"#shared-storage-page-budget-saved-query-data": {"displayText":"saved query data","export":true,"for_":["shared storage page budget"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"saved query data","type":"dfn","url":"#shared-storage-page-budget-saved-query-data"},
"#shared-storage-page-budget-saved-query-map": {"displayText":"saved query map","export":true,"for_":["shared storage page budget"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"saved query map","type":"dfn","url":"#shared-storage-page-budget-saved-query-map"},
"#shared-storage-page-budget-site-budget-map": {"displayText":"site budget map","export":true,"for_":["shared storage page budget"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"site budget map","type":"dfn","url":"#shared-storage-page-budget-site-budget-map"},
"#shared-storage-shed": {"displayText":"shared storage shed","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage shed","type":"dfn","url":"#shared-storage-shed"},
"#sharedstorage": {"displayText":"SharedStorage","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorage","type":"interface","url":"#sharedstorage"},
"#sharedstorage-data-partition-origin": {"displayText":"data partition origin","export":true,"for_":["SharedStorage"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"data partition origin","type":"dfn","url":"#sharedstorage-data-partition-origin"},
"#sharedstorageappendmethod": {"displayText":"SharedStorageAppendMethod","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageAppendMethod","type":"interface","url":"#sharedstorageappendmethod"},
"#sharedstorageappendmethod-key": {"displayText":"key","export":true,"for_":["SharedStorageAppendMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"key","type":"dfn","url":"#sharedstorageappendmethod-key"},
"#sharedstorageappendmethod-value": {"displayText":"value","export":true,"for_":["SharedStorageAppendMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"value","type":"dfn","url":"#sharedstorageappendmethod-value"},
"#sharedstorageclearmethod": {"displayText":"SharedStorageClearMethod","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageClearMethod","type":"interface","url":"#sharedstorageclearmethod"},
"#sharedstoragedeletemethod": {"displayText":"SharedStorageDeleteMethod","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageDeleteMethod","type":"interface","url":"#sharedstoragedeletemethod"},
"#sharedstoragedeletemethod-key": {"displayText":"key","export":true,"for_":["SharedStorageDeleteMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"key","type":"dfn","url":"#sharedstoragedeletemethod-key"},
"#sharedstorageiterator-asynchronous-iterator-initialization-steps": {"displayText":"asynchronous iterator initialization steps","export":true,"for_":["SharedStorageIterator"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"asynchronous iterator initialization steps","type":"dfn","url":"#sharedstorageiterator-asynchronous-iterator-initialization-steps"},
"#sharedstorageiterator-error": {"displayText":"error","export":true,"for_":["SharedStorageIterator"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"error","type":"dfn","url":"#sharedstorageiterator-error"},
"#sharedstorageiterator-get-the-next-iteration-result": {"displayText":"get the next iteration result","export":true,"for_":["SharedStorageIterator"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"get the next iteration result","type":"dfn","url":"#sharedstorageiterator-get-the-next-iteration-result"},
"#sharedstorageiterator-pending-entries": {"displayText":"pending entries","export":true,"for_":["SharedStorageIterator"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"pending entries","type":"dfn","url":"#sharedstorageiterator-pending-entries"},
"#sharedstoragemodifiermethod": {"displayText":"SharedStorageModifierMethod","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageModifierMethod","type":"interface","url":"#sharedstoragemodifiermethod"},
"#sharedstoragemodifiermethod-with-lock": {"displayText":"with lock","export":true,"for_":["SharedStorageModifierMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"with lock","type":"dfn","url":"#sharedstoragemodifiermethod-with-lock"},
"#sharedstoragesetmethod": {"displayText":"SharedStorageSetMethod","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageSetMethod","type":"interface","url":"#sharedstoragesetmethod"},
"#sharedstoragesetmethod-ignore-if-present": {"displayText":"ignore if present","export":true,"for_":["SharedStorageSetMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"ignore if present","type":"dfn","url":"#sharedstoragesetmethod-ignore-if-present"},
"#sharedstoragesetmethod-key": {"displayText":"key","export":true,"for_":["SharedStorageSetMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"key","type":"dfn","url":"#sharedstoragesetmethod-key"},
"#sharedstoragesetmethod-value": {"displayText":"value","export":true,"for_":["SharedStorageSetMethod"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"value","type":"dfn","url":"#sharedstoragesetmethod-value"},
"#sharedstorageworklet": {"displayText":"SharedStorageWorklet","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageWorklet","type":"interface","url":"#sharedstorageworklet"},
"#sharedstorageworklet-addmodule-initiated": {"displayText":"addmodule initiated","export":true,"for_":["SharedStorageWorklet"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"addmodule initiated","type":"dfn","url":"#sharedstorageworklet-addmodule-initiated"},
"#sharedstorageworklet-data-origin": {"displayText":"data origin","export":true,"for_":["SharedStorageWorklet"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"data origin","type":"dfn","url":"#sharedstorageworklet-data-origin"},
"#sharedstorageworklet-has-cross-origin-data-origin": {"displayText":"has cross-origin data origin","export":true,"for_":["SharedStorageWorklet"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"has cross-origin data origin","type":"dfn","url":"#sharedstorageworklet-has-cross-origin-data-origin"},
"#sharedstorageworkletglobalscope": {"displayText":"SharedStorageWorkletGlobalScope","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageWorkletGlobalScope","type":"interface","url":"#sharedstorageworkletglobalscope"},
"#sharedstorageworkletglobalscope-addmodule-success": {"displayText":"addmodule success","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"addmodule success","type":"dfn","url":"#sharedstorageworkletglobalscope-addmodule-success"},
"#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished": {"displayText":"check whether addmodule is finished","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"check whether addmodule is finished","type":"dfn","url":"#sharedstorageworkletglobalscope-check-whether-addmodule-is-finished"},
"#sharedstorageworkletglobalscope-navigator-instance": {"displayText":"navigator instance","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"navigator instance","type":"dfn","url":"#sharedstorageworkletglobalscope-navigator-instance"},
"#sharedstorageworkletglobalscope-operation-map": {"displayText":"operation map","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"operation map","type":"dfn","url":"#sharedstorageworkletglobalscope-operation-map"},
"#sharedstorageworkletglobalscope-outside-settings": {"displayText":"outside settings","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"outside settings","type":"dfn","url":"#sharedstorageworkletglobalscope-outside-settings"},
"#sharedstorageworkletglobalscope-shared-storage-instance": {"displayText":"shared storage instance","export":true,"for_":["SharedStorageWorkletGlobalScope"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage instance","type":"dfn","url":"#sharedstorageworkletglobalscope-shared-storage-instance"},
"#sharedstorageworkletnavigator": {"displayText":"SharedStorageWorkletNavigator","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageWorkletNavigator","type":"interface","url":"#sharedstorageworkletnavigator"},
"#site-page-entropy-allowance": {"displayText":"site page entropy allowance","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"site page entropy allowance","type":"dfn","url":"#site-page-entropy-allowance"},
"#site-remaining-navigation-budget": {"displayText":"remaining navigation budget","export":true,"for_":["site"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"remaining navigation budget","type":"dfn","url":"#site-remaining-navigation-budget"},
"#store-the-index-for-a-saved-query": {"displayText":"store the index for a saved query","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"store the index for a saved query","type":"dfn","url":"#store-the-index-for-a-saved-query"},
"#traversable-navigable-page-budget": {"displayText":"page budget","export":true,"for_":["traversable navigable"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"page budget","type":"dfn","url":"#traversable-navigable-page-budget"},
"#traversable-navigable-shared-storage-page-budget": {"displayText":"shared storage page budget","export":true,"for_":["traversable navigable"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"shared storage page budget","type":"dfn","url":"#traversable-navigable-shared-storage-page-budget"},
"#trusted-origin-type": {"displayText":"trusted origin type","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"trusted origin type","type":"dfn","url":"#trusted-origin-type"},
"#typedefdef-sharedstorageresponse": {"displayText":"SharedStorageResponse","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"SharedStorageResponse","type":"typedef","url":"#typedefdef-sharedstorageresponse"},
"#validate-reporting-metadata": {"displayText":"validate reporting metadata","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"validate reporting metadata","type":"dfn","url":"#validate-reporting-metadata"},
"#value-maximum-length": {"displayText":"maximum length","export":true,"for_":["value"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"maximum length","type":"dfn","url":"#value-maximum-length"},
"#value-struct-last-updated": {"displayText":"last updated","export":true,"for_":["value struct"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"last updated","type":"dfn","url":"#value-struct-last-updated"},
"#value-struct-value": {"displayText":"value","export":true,"for_":["value struct"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"value","type":"dfn","url":"#value-struct-value"},
"#window-sharedstorage-getter": {"displayText":"sharedstorage getter","export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"sharedstorage","spec":"sharedstorage-1","status":"local","text":"sharedstorage getter","type":"dfn","url":"#window-sharedstorage-getter"},
"https://dom.spec.whatwg.org/#concept-document-origin": {"displayText":"origin","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"origin","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-document-origin"},
"https://dom.spec.whatwg.org/#concept-node-document": {"displayText":"node document","export":true,"for_":["Node"],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"node document","type":"dfn","url":"https://dom.spec.whatwg.org/#concept-node-document"},
"https://dom.spec.whatwg.org/#document": {"displayText":"Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"dom","spec":"dom","status":"current","text":"Document","type":"interface","url":"https://dom.spec.whatwg.org/#document"},
"https://en.wikipedia.org/wiki/Entropy_(information_theory)#bits-of-entropy": {"displayText":"bits of entropy","export":true,"for_":[],"level":"","normative":true,"shortname":"wikipedia-entropy","spec":"wikipedia-entropy","status":"anchor-block","text":"bits of entropy","type":"dfn","url":"https://en.wikipedia.org/wiki/Entropy_(information_theory)#bits-of-entropy"},
"https://en.wikipedia.org/wiki/Entropy_(information_theory)#entropy-bits": {"displayText":"entropy bits","export":true,"for_":[],"level":"","normative":true,"shortname":"wikipedia-entropy","spec":"wikipedia-entropy","status":"anchor-block","text":"entropy bits","type":"dfn","url":"https://en.wikipedia.org/wiki/Entropy_(information_theory)#entropy-bits"},
"https://encoding.spec.whatwg.org/#utf-8-decode": {"displayText":"UTF-8 decode","export":true,"for_":[],"level":"1","normative":true,"shortname":"encoding","spec":"encoding","status":"current","text":"utf-8 decode","type":"dfn","url":"https://encoding.spec.whatwg.org/#utf-8-decode"},
"https://encoding.spec.whatwg.org/#utf-8-encode": {"displayText":"UTF-8 encode","export":true,"for_":[],"level":"1","normative":true,"shortname":"encoding","spec":"encoding","status":"current","text":"utf-8 encode","type":"dfn","url":"https://encoding.spec.whatwg.org/#utf-8-encode"},
"https://fetch.spec.whatwg.org/#concept-fetch": {"displayText":"fetch","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"fetch","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-fetch"},
"https://fetch.spec.whatwg.org/#concept-header": {"displayText":"header","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"header","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header"},
"https://fetch.spec.whatwg.org/#concept-header-extract-mime-type": {"displayText":"extracting a MIME type","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"extracting a mime type","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-extract-mime-type"},
"https://fetch.spec.whatwg.org/#concept-header-list-append": {"displayText":"append","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"append","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-list-append"},
"https://fetch.spec.whatwg.org/#concept-header-list-delete": {"displayText":"delete","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"delete","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-list-delete"},
"https://fetch.spec.whatwg.org/#concept-header-list-get": {"displayText":"get","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"get","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-list-get"},
"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header": {"displayText":"get a structured field value","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"get a structured field value","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-list-get-structured-header"},
"https://fetch.spec.whatwg.org/#concept-header-list-set-structured-header": {"displayText":"set a structured field value","export":true,"for_":["header list"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"set a structured field value","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-list-set-structured-header"},
"https://fetch.spec.whatwg.org/#concept-header-value": {"displayText":"value","export":true,"for_":["header"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"value","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-header-value"},
"https://fetch.spec.whatwg.org/#concept-http-fetch": {"displayText":"HTTP fetch","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"http fetch","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-http-fetch"},
"https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch": {"displayText":"http network or cache fetch","export":true,"for_":[],"level":"","normative":true,"shortname":"fetch","spec":"fetch","status":"anchor-block","text":"http network or cache fetch","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-http-network-or-cache-fetch"},
"https://fetch.spec.whatwg.org/#concept-network-error": {"displayText":"network error","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"network error","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-network-error"},
"https://fetch.spec.whatwg.org/#concept-request": {"displayText":"request","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"request","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request"},
"https://fetch.spec.whatwg.org/#concept-request-client": {"displayText":"client","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"client","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-client"},
"https://fetch.spec.whatwg.org/#concept-request-current-url": {"displayText":"current URL","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"current url","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-current-url"},
"https://fetch.spec.whatwg.org/#concept-request-destination": {"displayText":"destination","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"destination","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-destination"},
"https://fetch.spec.whatwg.org/#concept-request-header-list": {"displayText":"header list","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"header list","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-header-list"},
"https://fetch.spec.whatwg.org/#concept-request-mode": {"displayText":"mode","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"mode","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-mode"},
"https://fetch.spec.whatwg.org/#concept-request-origin": {"displayText":"origin","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"origin","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-origin"},
"https://fetch.spec.whatwg.org/#concept-request-redirect-mode": {"displayText":"redirect mode","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"redirect mode","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-redirect-mode"},
"https://fetch.spec.whatwg.org/#concept-request-referrer": {"displayText":"referrer","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"referrer","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-referrer"},
"https://fetch.spec.whatwg.org/#concept-request-request": {"displayText":"request","export":true,"for_":["Request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"request","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-request"},
"https://fetch.spec.whatwg.org/#concept-request-url": {"displayText":"URL","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"url","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-url"},
"https://fetch.spec.whatwg.org/#concept-request-window": {"displayText":"window","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"window","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-request-window"},
"https://fetch.spec.whatwg.org/#concept-response": {"displayText":"response","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"response","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response"},
"https://fetch.spec.whatwg.org/#concept-response-header-list": {"displayText":"header list","export":true,"for_":["response"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"header list","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-header-list"},
"https://fetch.spec.whatwg.org/#concept-response-status": {"displayText":"status","export":true,"for_":["response"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"status","type":"dfn","url":"https://fetch.spec.whatwg.org/#concept-response-status"},
"https://fetch.spec.whatwg.org/#dom-request": {"displayText":"request-constructor","export":true,"for_":[],"level":"","normative":true,"shortname":"fetch","spec":"fetch","status":"anchor-block","text":"request-constructor","type":"dfn","url":"https://fetch.spec.whatwg.org/#dom-request"},
"https://fetch.spec.whatwg.org/#ok-status": {"displayText":"ok status","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"ok status","type":"dfn","url":"https://fetch.spec.whatwg.org/#ok-status"},
"https://fetch.spec.whatwg.org/#process-response-end-of-body": {"displayText":"processResponseConsumeBody","export":true,"for_":["fetch"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"processresponseconsumebody","type":"dfn","url":"https://fetch.spec.whatwg.org/#process-response-end-of-body"},
"https://fetch.spec.whatwg.org/#redirect-status": {"displayText":"redirect status","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"redirect status","type":"dfn","url":"https://fetch.spec.whatwg.org/#redirect-status"},
"https://fetch.spec.whatwg.org/#request-initiator-type": {"displayText":"initiator type","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"initiator type","type":"dfn","url":"https://fetch.spec.whatwg.org/#request-initiator-type"},
"https://fetch.spec.whatwg.org/#request-priority": {"displayText":"priority","export":true,"for_":["request"],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"priority","type":"dfn","url":"https://fetch.spec.whatwg.org/#request-priority"},
"https://fetch.spec.whatwg.org/#requestinit": {"displayText":"RequestInit","export":true,"for_":[],"level":"1","normative":true,"shortname":"fetch","spec":"fetch","status":"current","text":"RequestInit","type":"dictionary","url":"https://fetch.spec.whatwg.org/#requestinit"},
"https://github.com/WICG/shared-storage#example-scenarios": {"displayText":"legitimate use cases","export":true,"for_":[],"level":"","normative":true,"shortname":"shared-storage-explainer","spec":"shared-storage-explainer","status":"anchor-block","text":"legitimate use cases","type":"dfn","url":"https://github.com/WICG/shared-storage#example-scenarios"},
"https://github.com/privacysandbox/attestation#enrolled": {"displayText":"enrolled","export":true,"for_":[],"level":"","normative":true,"shortname":"attestation","spec":"attestation","status":"anchor-block","text":"enrolled","type":"dfn","url":"https://github.com/privacysandbox/attestation#enrolled"},
"https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin": {"displayText":"serialization","export":true,"for_":["origin"],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"serialization","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#ascii-serialisation-of-an-origin"},
"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin": {"displayText":"origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin"},
"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque": {"displayText":"opaque origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"opaque origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#concept-origin-opaque"},
"https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site": {"displayText":"obtain a site","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"obtain a site","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#obtain-a-site"},
"https://html.spec.whatwg.org/multipage/browsers.html#same-origin": {"displayText":"same origin","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"same origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#same-origin"},
"https://html.spec.whatwg.org/multipage/browsers.html#site": {"displayText":"site","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"site","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsers.html#site"},
"https://html.spec.whatwg.org/multipage/browsing-the-web.html#create-navigation-params-by-fetching": {"displayText":"create navigation params by fetching","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"create navigation params by fetching","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsing-the-web.html#create-navigation-params-by-fetching"},
"https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate": {"displayText":"navigate","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"navigate","type":"dfn","url":"https://html.spec.whatwg.org/multipage/browsing-the-web.html#navigate"},
"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect": {"displayText":"reflect","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"reflect","type":"dfn","url":"https://html.spec.whatwg.org/multipage/common-dom-interfaces.html#reflect"},
"https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes": {"displayText":"boolean attributes","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"boolean attributes","type":"dfn","url":"https://html.spec.whatwg.org/multipage/common-microsyntaxes.html#boolean-attributes"},
"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions": {"displayText":"CEReactions","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"CEReactions","type":"extended-attribute","url":"https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context": {"displayText":"browsing context","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc": {"displayText":"browsing context","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#concept-document-bc"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active": {"displayText":"fully active","export":true,"for_":["Document"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"fully active","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#fully-active"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#initialize-the-navigable": {"displayText":"initialize the navigable","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"initialize the navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#initialize-the-navigable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container": {"displayText":"container","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"container","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-container"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document": {"displayText":"active document","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"active document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-document"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent": {"displayText":"parent","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"parent","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-parent"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top": {"displayText":"top-level traversable","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"top-level traversable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-top"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-traversable": {"displayText":"traversable navigable","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"traversable navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-traversable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window": {"displayText":"active window","export":true,"for_":["navigable"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"active window","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable": {"displayText":"navigable","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#navigable"},
"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable": {"displayText":"node navigable","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"node navigable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/document-sequences.html#node-navigable"},
"https://html.spec.whatwg.org/multipage/dom.html#concept-element-attributes": {"displayText":"content attributes","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"content attributes","type":"dfn","url":"https://html.spec.whatwg.org/multipage/dom.html#concept-element-attributes"},
"https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement": {"displayText":"HTMLImageElement","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLImageElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/embedded-content.html#htmlimageelement"},
"https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element": {"displayText":"img","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"img","type":"element","url":"https://html.spec.whatwg.org/multipage/embedded-content.html#the-img-element"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use": {"displayText":"allowed to use","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"allowed to use","type":"dfn","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#allowed-to-use"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement": {"displayText":"HTMLIFrameElement","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"HTMLIFrameElement","type":"interface","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#htmliframeelement"},
"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element": {"displayText":"iframe","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"iframe","type":"element","url":"https://html.spec.whatwg.org/multipage/iframe-embed-object.html#the-iframe-element"},
"https://html.spec.whatwg.org/multipage/images.html#update-the-image-data": {"displayText":"update the image data","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"update the image data","type":"dfn","url":"https://html.spec.whatwg.org/multipage/images.html#update-the-image-data"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps": {"displayText":"enqueue the following steps","export":true,"for_":["parallel queue"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"enqueue the following steps","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#enqueue-the-following-steps"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel": {"displayText":"in parallel","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"in parallel","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel"},
"https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue": {"displayText":"start a new parallel queue","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"start a new parallel queue","type":"dfn","url":"https://html.spec.whatwg.org/multipage/infrastructure.html#starting-a-new-parallel-queue"},
"https://html.spec.whatwg.org/multipage/interaction.html#tracking-user-activation": {"displayText":"user activation","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"user activation","type":"dfn","url":"https://html.spec.whatwg.org/multipage/interaction.html#tracking-user-activation"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window": {"displayText":"associated Document","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"associated document","type":"dfn","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#concept-document-window"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window": {"displayText":"Window","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Window","type":"interface","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window"},
"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc": {"displayText":"browsing context","export":true,"for_":["Window"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/nav-history-apis.html#window-bc"},
"https://html.spec.whatwg.org/multipage/webappapis.html#beginning-navigation": {"displayText":"beginning navigation","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"beginning navigation","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#beginning-navigation"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-id": {"displayText":"id","export":true,"for_":["environment"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"id","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-id"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context": {"displayText":"target browsing context","export":true,"for_":["environment"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"target browsing context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-environment-target-browsing-context"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm": {"displayText":"realm","export":true,"for_":["global object"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"realm","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-global-object-realm"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global": {"displayText":"global object","export":true,"for_":["realm"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object": {"displayText":"settings object","export":true,"for_":["realm"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-realm-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global": {"displayText":"relevant global object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm": {"displayText":"relevant realm","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant realm","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-relevant-realm"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global": {"displayText":"global object","export":true,"for_":["environment settings object"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-global"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin": {"displayText":"origin","export":true,"for_":["environment settings object"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"origin","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-settings-object-origin"},
"https://html.spec.whatwg.org/multipage/webappapis.html#concept-task": {"displayText":"task","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#concept-task"},
"https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object": {"displayText":"current settings object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"current settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#current-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source": {"displayText":"DOM manipulation task source","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"dom manipulation task source","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#dom-manipulation-task-source"},
"https://html.spec.whatwg.org/multipage/webappapis.html#ending-navigation": {"displayText":"ending navigation","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"ending navigation","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#ending-navigation"},
"https://html.spec.whatwg.org/multipage/webappapis.html#environment": {"displayText":"environment","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"environment","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment"},
"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object": {"displayText":"environment settings object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"environment settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#environment-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#fetch-a-worklet-script-graph": {"displayText":"fetch a worklet script graph","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"fetch a worklet script graph","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#fetch-a-worklet-script-graph"},
"https://html.spec.whatwg.org/multipage/webappapis.html#module-script": {"displayText":"module script","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"module script","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#module-script"},
"https://html.spec.whatwg.org/multipage/webappapis.html#nav-top": {"displayText":"get the top-level traversable","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"get the top-level traversable","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#nav-top"},
"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source": {"displayText":"networking task source","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"networking task source","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#networking-task-source"},
"https://html.spec.whatwg.org/multipage/webappapis.html#obtain-a-worklet-agent": {"displayText":"obtaining a worklet agent","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"obtaining a worklet agent","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#obtain-a-worklet-agent"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task": {"displayText":"queue a global task","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"queue a global task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-global-task"},
"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task": {"displayText":"queue a task","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"queue a task","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task"},
"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object": {"displayText":"relevant settings object","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"relevant settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#relevant-settings-object"},
"https://html.spec.whatwg.org/multipage/webappapis.html#secure-context": {"displayText":"secure context","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"secure context","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#secure-context"},
"https://html.spec.whatwg.org/multipage/webappapis.html#worklet-event-loop": {"displayText":"worklet event loop","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"worklet event loop","type":"dfn","url":"https://html.spec.whatwg.org/multipage/webappapis.html#worklet-event-loop"},
"https://html.spec.whatwg.org/multipage/workers.html#concept-workerglobalscope-module-map": {"displayText":"module map","export":true,"for_":["WorkerGlobalScope"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"module map","type":"dfn","url":"https://html.spec.whatwg.org/multipage/workers.html#concept-workerglobalscope-module-map"},
"https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-added-modules-list": {"displayText":"added modules list","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"added modules list","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-added-modules-list"},
"https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes": {"displayText":"global scopes","export":true,"for_":["Worklet"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"global scopes","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#concept-worklet-global-scopes"},
"https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope": {"displayText":"create a worklet global scope","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"create a worklet global scope","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#create-a-worklet-global-scope"},
"https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule": {"displayText":"addModule(moduleURL, options)","export":true,"for_":["Worklet"],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"addModule(moduleURL, options)","type":"method","url":"https://html.spec.whatwg.org/multipage/worklets.html#dom-worklet-addmodule"},
"https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object": {"displayText":"set up a worklet environment settings object","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"set up a worklet environment settings object","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#set-up-a-worklet-environment-settings-object"},
"https://html.spec.whatwg.org/multipage/worklets.html#terminate-a-worklet-global-scope": {"displayText":"terminate a worklet global scope","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"terminate a worklet global scope","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#terminate-a-worklet-global-scope"},
"https://html.spec.whatwg.org/multipage/worklets.html#worklet": {"displayText":"Worklet","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"Worklet","type":"interface","url":"https://html.spec.whatwg.org/multipage/worklets.html#worklet"},
"https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type": {"displayText":"worklet destination type","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"worklet destination type","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#worklet-destination-type"},
"https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type": {"displayText":"worklet global scope type","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"worklet global scope type","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#worklet-global-scope-type"},
"https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope": {"displayText":"WorkletGlobalScope","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"WorkletGlobalScope","type":"interface","url":"https://html.spec.whatwg.org/multipage/worklets.html#workletglobalscope"},
"https://html.spec.whatwg.org/multipage/worklets.html#workletoptions": {"displayText":"WorkletOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"html","spec":"html","status":"current","text":"WorkletOptions","type":"dictionary","url":"https://html.spec.whatwg.org/multipage/worklets.html#workletoptions"},
"https://html.spec.whatwg.org/multipage/worklets.html#worklets": {"displayText":"worklets","export":true,"for_":[],"level":"","normative":true,"shortname":"html","spec":"html","status":"anchor-block","text":"worklets","type":"dfn","url":"https://html.spec.whatwg.org/multipage/worklets.html#worklets"},
"https://httpwg.org/specs/rfc8941.html#binary": {"displayText":"byte sequence","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"byte sequence","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#binary"},
"https://httpwg.org/specs/rfc8941.html#boolean": {"displayText":"boolean","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"boolean","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#boolean"},
"https://httpwg.org/specs/rfc8941.html#inner-list": {"displayText":"inner list","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"inner list","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#inner-list"},
"https://httpwg.org/specs/rfc8941.html#item": {"displayText":"bare item","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"bare item","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#item"},
"https://httpwg.org/specs/rfc8941.html#list": {"displayText":"list","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"list","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#list"},
"https://httpwg.org/specs/rfc8941.html#param": {"displayText":"parameters","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"parameters","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#param"},
"https://httpwg.org/specs/rfc8941.html#specify": {"displayText":"structured header","export":true,"for_":[],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"structured header","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#specify"},
"https://httpwg.org/specs/rfc8941.html#string": {"displayText":"string","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"string","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#string"},
"https://httpwg.org/specs/rfc8941.html#token": {"displayText":"token","export":true,"for_":["structured header"],"level":"","normative":true,"shortname":"rfc8941","spec":"rfc8941","status":"anchor-block","text":"token","type":"dfn","url":"https://httpwg.org/specs/rfc8941.html#token"},
"https://infra.spec.whatwg.org#ascii-code-point": {"displayText":"ASCII","export":true,"for_":[],"level":"","normative":true,"shortname":"infra","spec":"infra","status":"anchor-block","text":"ascii","type":"dfn","url":"https://infra.spec.whatwg.org#ascii-code-point"},
"https://infra.spec.whatwg.org#map-is-empty": {"displayText":"empty","export":true,"for_":["map"],"level":"","normative":true,"shortname":"infra","spec":"infra","status":"anchor-block","text":"empty","type":"dfn","url":"https://infra.spec.whatwg.org#map-is-empty"},
"https://infra.spec.whatwg.org/#ascii-string": {"displayText":"ASCII string","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ascii string","type":"dfn","url":"https://infra.spec.whatwg.org/#ascii-string"},
"https://infra.spec.whatwg.org/#assert": {"displayText":"assert","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"assert","type":"dfn","url":"https://infra.spec.whatwg.org/#assert"},
"https://infra.spec.whatwg.org/#boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"boolean","type":"dfn","url":"https://infra.spec.whatwg.org/#boolean"},
"https://infra.spec.whatwg.org/#byte-sequence": {"displayText":"byte sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"byte sequence","type":"dfn","url":"https://infra.spec.whatwg.org/#byte-sequence"},
"https://infra.spec.whatwg.org/#implementation-defined": {"displayText":"implementation-defined","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"implementation-defined","type":"dfn","url":"https://infra.spec.whatwg.org/#implementation-defined"},
"https://infra.spec.whatwg.org/#iteration-continue": {"displayText":"continue","export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"continue","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-continue"},
"https://infra.spec.whatwg.org/#iteration-while": {"displayText":"while","export":true,"for_":["iteration"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"while","type":"dfn","url":"https://infra.spec.whatwg.org/#iteration-while"},
"https://infra.spec.whatwg.org/#list": {"displayText":"list","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"list","type":"dfn","url":"https://infra.spec.whatwg.org/#list"},
"https://infra.spec.whatwg.org/#list-append": {"displayText":"append","export":true,"for_":["list"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#list-append"},
"https://infra.spec.whatwg.org/#list-clone": {"displayText":"clone","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"clone","type":"dfn","url":"https://infra.spec.whatwg.org/#list-clone"},
"https://infra.spec.whatwg.org/#list-contain": {"displayText":"contain","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#list-contain"},
"https://infra.spec.whatwg.org/#list-empty": {"displayText":"empty","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"empty","type":"dfn","url":"https://infra.spec.whatwg.org/#list-empty"},
"https://infra.spec.whatwg.org/#list-item": {"displayText":"item","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"item","type":"dfn","url":"https://infra.spec.whatwg.org/#list-item"},
"https://infra.spec.whatwg.org/#list-remove": {"displayText":"remove","export":true,"for_":["list","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#list-remove"},
"https://infra.spec.whatwg.org/#list-size": {"displayText":"size","export":true,"for_":["list","stack","queue","set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"size","type":"dfn","url":"https://infra.spec.whatwg.org/#list-size"},
"https://infra.spec.whatwg.org/#map-clear": {"displayText":"clear","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"clear","type":"dfn","url":"https://infra.spec.whatwg.org/#map-clear"},
"https://infra.spec.whatwg.org/#map-entry": {"displayText":"entry","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"entry","type":"dfn","url":"https://infra.spec.whatwg.org/#map-entry"},
"https://infra.spec.whatwg.org/#map-exists": {"displayText":"contain","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"contain","type":"dfn","url":"https://infra.spec.whatwg.org/#map-exists"},
"https://infra.spec.whatwg.org/#map-get": {"displayText":"get","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"get","type":"dfn","url":"https://infra.spec.whatwg.org/#map-get"},
"https://infra.spec.whatwg.org/#map-getting-the-keys": {"displayText":"get the keys","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"get the keys","type":"dfn","url":"https://infra.spec.whatwg.org/#map-getting-the-keys"},
"https://infra.spec.whatwg.org/#map-getting-the-values": {"displayText":"values","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"values","type":"dfn","url":"https://infra.spec.whatwg.org/#map-getting-the-values"},
"https://infra.spec.whatwg.org/#map-iterate": {"displayText":"iterate","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"iterate","type":"dfn","url":"https://infra.spec.whatwg.org/#map-iterate"},
"https://infra.spec.whatwg.org/#map-key": {"displayText":"key","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"key","type":"dfn","url":"https://infra.spec.whatwg.org/#map-key"},
"https://infra.spec.whatwg.org/#map-remove": {"displayText":"remove","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"remove","type":"dfn","url":"https://infra.spec.whatwg.org/#map-remove"},
"https://infra.spec.whatwg.org/#map-set": {"displayText":"set","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"set","type":"dfn","url":"https://infra.spec.whatwg.org/#map-set"},
"https://infra.spec.whatwg.org/#map-size": {"displayText":"size","export":true,"for_":["map"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"size","type":"dfn","url":"https://infra.spec.whatwg.org/#map-size"},
"https://infra.spec.whatwg.org/#ordered-map": {"displayText":"ordered map","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"ordered map","type":"dfn","url":"https://infra.spec.whatwg.org/#ordered-map"},
"https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value": {"displayText":"parse a JSON string to an Infra value","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"parse a json string to an infra value","type":"dfn","url":"https://infra.spec.whatwg.org/#parse-a-json-string-to-an-infra-value"},
"https://infra.spec.whatwg.org/#queue": {"displayText":"queue","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"queue","type":"dfn","url":"https://infra.spec.whatwg.org/#queue"},
"https://infra.spec.whatwg.org/#queue-dequeue": {"displayText":"dequeue","export":true,"for_":["queue"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"dequeue","type":"dfn","url":"https://infra.spec.whatwg.org/#queue-dequeue"},
"https://infra.spec.whatwg.org/#queue-enqueue": {"displayText":"enqueue","export":true,"for_":["queue"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"enqueue","type":"dfn","url":"https://infra.spec.whatwg.org/#queue-enqueue"},
"https://infra.spec.whatwg.org/#set-append": {"displayText":"append","export":true,"for_":["set"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"append","type":"dfn","url":"https://infra.spec.whatwg.org/#set-append"},
"https://infra.spec.whatwg.org/#string": {"displayText":"string","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"string","type":"dfn","url":"https://infra.spec.whatwg.org/#string"},
"https://infra.spec.whatwg.org/#string-concatenate": {"displayText":"concatenate","export":true,"for_":["string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"concatenate","type":"dfn","url":"https://infra.spec.whatwg.org/#string-concatenate"},
"https://infra.spec.whatwg.org/#string-length": {"displayText":"length","export":true,"for_":["string","JavaScript string","ASCII string","isomorphic string","scalar value string"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"length","type":"dfn","url":"https://infra.spec.whatwg.org/#string-length"},
"https://infra.spec.whatwg.org/#struct": {"displayText":"struct","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"struct","type":"dfn","url":"https://infra.spec.whatwg.org/#struct"},
"https://infra.spec.whatwg.org/#struct-item": {"displayText":"item","export":true,"for_":["struct","tuple"],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"item","type":"dfn","url":"https://infra.spec.whatwg.org/#struct-item"},
"https://infra.spec.whatwg.org/#the-exclusive-range": {"displayText":"the exclusive range","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"the exclusive range","type":"dfn","url":"https://infra.spec.whatwg.org/#the-exclusive-range"},
"https://infra.spec.whatwg.org/#tuple": {"displayText":"tuple","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"tuple","type":"dfn","url":"https://infra.spec.whatwg.org/#tuple"},
"https://infra.spec.whatwg.org/#user-agent": {"displayText":"user agent","export":true,"for_":[],"level":"1","normative":true,"shortname":"infra","spec":"infra","status":"current","text":"user agent","type":"dfn","url":"https://infra.spec.whatwg.org/#user-agent"},
"https://mimesniff.spec.whatwg.org/#json-mime-type": {"displayText":"JSON MIME type","export":true,"for_":[],"level":"1","normative":true,"shortname":"mimesniff","spec":"mimesniff","status":"current","text":"json mime type","type":"dfn","url":"https://mimesniff.spec.whatwg.org/#json-mime-type"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#": {"displayText":"Private Aggregation","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"private aggregation","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#aggregation-coordinator": {"displayText":"aggregation coordinator","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"aggregation coordinator","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#aggregation-coordinator"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#allowed-to-use": {"displayText":"allowed to use","export":true,"for_":["PrivateAggregation"],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"allowed to use","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#allowed-to-use"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#batching-scope": {"displayText":"batching scope","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"batching scope","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#batching-scope"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#context-id": {"displayText":"context ID","export":true,"for_":["pre-specified report parameters"],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"context id","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#context-id"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#debug-scope": {"displayText":"debug scope","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"debug scope","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#debug-scope"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#default-filtering-id-max-bytes": {"displayText":"default filtering id max bytes","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"default filtering id max bytes","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#default-filtering-id-max-bytes"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#determine-if-a-report-should-be-sent-deterministically": {"displayText":"determine if a report should be sent deterministically","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"determine if a report should be sent deterministically","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#determine-if-a-report-should-be-sent-deterministically"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#filtering-id-max-bytes": {"displayText":"filtering ID max bytes","export":true,"for_":["pre-specified report parameters"],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"filtering id max bytes","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#filtering-id-max-bytes"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-batching-scope-steps": {"displayText":"get batching scope steps","export":true,"for_":["scoping details"],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"get batching scope steps","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-batching-scope-steps"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-debug-scope-steps": {"displayText":"get debug scope steps","export":true,"for_":["scoping details"],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"get debug scope steps","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-debug-scope-steps"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-the-privateaggregation": {"displayText":"get the privateAggregation","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"get the privateaggregation","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#get-the-privateaggregation"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#mark-a-debug-scope-complete": {"displayText":"mark a debug scope complete","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"mark a debug scope complete","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#mark-a-debug-scope-complete"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#max-contributions": {"displayText":"max contributions","export":true,"for_":["pre-specified report parameters"],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"max contributions","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#max-contributions"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#obtain-the-private-aggregation-coordinator": {"displayText":"obtain the Private Aggregation coordinator","export":true,"for_":[],"level":"1","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"current","text":"obtain the private aggregation coordinator","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#obtain-the-private-aggregation-coordinator"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#pre-specified-report-parameters": {"displayText":"pre-specified report parameters","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"pre-specified report parameters","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#pre-specified-report-parameters"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#private-aggregation": {"displayText":"private-aggregation","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"private-aggregation","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#private-aggregation"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation": {"displayText":"PrivateAggregation","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"PrivateAggregation","type":"interface","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation-scoping-details": {"displayText":"scoping details","export":true,"for_":["PrivateAggregation"],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"scoping details","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#privateaggregation-scoping-details"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#process-contributions-for-a-batching-scope": {"displayText":"process contributions for a batching scope","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"process contributions for a batching scope","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#process-contributions-for-a-batching-scope"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#scoping-details": {"displayText":"scoping details","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"scoping details","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#scoping-details"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-aggregation-coordinator-for-a-batching-scope": {"displayText":"set the aggregation coordinator for a batching scope","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"set the aggregation coordinator for a batching scope","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-aggregation-coordinator-for-a-batching-scope"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-pre-specified-report-parameters-for-a-batching-scope": {"displayText":"set the pre-specified report parameters for a batching scope","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"set the pre-specified report parameters for a batching scope","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#set-the-pre-specified-report-parameters-for-a-batching-scope"},
"https://patcg-individual-drafts.github.io/private-aggregation-api/#valid-filtering-id-max-bytes-range": {"displayText":"valid filtering id max bytes range","export":true,"for_":[],"level":"","normative":true,"shortname":"private-aggregation-api","spec":"private-aggregation-api","status":"anchor-block","text":"valid filtering id max bytes range","type":"dfn","url":"https://patcg-individual-drafts.github.io/private-aggregation-api/#valid-filtering-id-max-bytes-range"},
"https://privacycg.github.io/storage-partitioning/#client-side-storage-partitioning": {"displayText":"client-side storage partitioning","export":true,"for_":[],"level":"","normative":true,"shortname":"storage-partitioning","spec":"storage-partitioning","status":"anchor-block","text":"client-side storage partitioning","type":"dfn","url":"https://privacycg.github.io/storage-partitioning/#client-side-storage-partitioning"},
"https://storage.spec.whatwg.org/#bottle-map": {"displayText":"bottle map","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"bottle map","type":"dfn","url":"https://storage.spec.whatwg.org/#bottle-map"},
"https://storage.spec.whatwg.org/#bucket-map": {"displayText":"bucket map","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"bucket map","type":"dfn","url":"https://storage.spec.whatwg.org/#bucket-map"},
"https://storage.spec.whatwg.org/#model": {"displayText":"storage model","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage model","type":"dfn","url":"https://storage.spec.whatwg.org/#model"},
"https://storage.spec.whatwg.org/#registered-storage-endpoints": {"displayText":"register","export":true,"for_":["storage endpoint"],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"register","type":"dfn","url":"https://storage.spec.whatwg.org/#registered-storage-endpoints"},
"https://storage.spec.whatwg.org/#storage-bottle": {"displayText":"storage bottle","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage bottle","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-bottle"},
"https://storage.spec.whatwg.org/#storage-bottle-proxy-map-reference-set": {"displayText":"proxy map reference set","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"proxy map reference set","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-bottle-proxy-map-reference-set"},
"https://storage.spec.whatwg.org/#storage-bottle-quota": {"displayText":"quota","export":true,"for_":["storage bottle"],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"quota","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-bottle-quota"},
"https://storage.spec.whatwg.org/#storage-bucket": {"displayText":"storage bucket","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage bucket","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-bucket"},
"https://storage.spec.whatwg.org/#storage-endpoint": {"displayText":"storage endpoint","export":true,"for_":[],"level":"1","normative":true,"shortname":"storage","spec":"storage","status":"current","text":"storage endpoint","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-endpoint"},
"https://storage.spec.whatwg.org/#storage-endpoint-quota": {"displayText":"quota","export":true,"for_":["storage endpoint"],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"quota","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-endpoint-quota"},
"https://storage.spec.whatwg.org/#storage-identifier": {"displayText":"storage identifier","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage identifier","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-identifier"},
"https://storage.spec.whatwg.org/#storage-proxy-map": {"displayText":"storage proxy map","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage proxy map","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-proxy-map"},
"https://storage.spec.whatwg.org/#storage-proxy-map-backing-map": {"displayText":"backing map","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"backing map","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-proxy-map-backing-map"},
"https://storage.spec.whatwg.org/#storage-shed": {"displayText":"storage shed","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage shed","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-shed"},
"https://storage.spec.whatwg.org/#storage-shelf": {"displayText":"storage shelf","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage shelf","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-shelf"},
"https://storage.spec.whatwg.org/#storage-type": {"displayText":"storage type","export":true,"for_":[],"level":"","normative":true,"shortname":"storage","spec":"storage","status":"anchor-block","text":"storage type","type":"dfn","url":"https://storage.spec.whatwg.org/#storage-type"},
"https://tc39.es/ecma262/#current-realm": {"displayText":"current realm","export":true,"for_":[],"level":"","normative":true,"shortname":"ecma","spec":"ecma","status":"anchor-block","text":"current realm","type":"dfn","url":"https://tc39.es/ecma262/#current-realm"},
"https://tc39.es/ecma262/#sec-get-o-p": {"displayText":"Get","export":true,"for_":[],"level":"","normative":true,"shortname":"ecma","spec":"ecma","status":"anchor-block","text":"get","type":"dfn","url":"https://tc39.es/ecma262/#sec-get-o-p"},
"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iscallable": {"displayText":"IsCallable","export":true,"for_":[],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"IsCallable","type":"abstract-op","url":"https://tc39.es/ecma262/multipage/abstract-operations.html#sec-iscallable"},
"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#function-object": {"displayText":"function objects","export":true,"for_":["ECMAScript"],"level":"1","normative":true,"shortname":"ecmascript","spec":"ecmascript","status":"current","text":"function objects","type":"dfn","url":"https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#function-object"},
"https://tc39.github.io/ecma262/#agent": {"displayText":"agent","export":true,"for_":[],"level":"","normative":true,"shortname":"ecma262","spec":"ecma262","status":"anchor-block","text":"agent","type":"dfn","url":"https://tc39.github.io/ecma262/#agent"},
"https://url.spec.whatwg.org/#concept-url": {"displayText":"URL","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url"},
"https://url.spec.whatwg.org/#concept-url-origin": {"displayText":"origin","export":true,"for_":["url"],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"origin","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-origin"},
"https://url.spec.whatwg.org/#concept-url-parser": {"displayText":"URL parser","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url parser","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-parser"},
"https://url.spec.whatwg.org/#concept-url-path": {"displayText":"path","export":true,"for_":["url"],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"path","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-path"},
"https://url.spec.whatwg.org/#concept-url-serializer": {"displayText":"URL serializer","export":true,"for_":[],"level":"1","normative":true,"shortname":"url","spec":"url","status":"current","text":"url serializer","type":"dfn","url":"https://url.spec.whatwg.org/#concept-url-serializer"},
"https://w3c.github.io/ServiceWorker/#service-worker-registration-storage-key": {"displayText":"storage key","export":true,"for_":["service worker registration"],"level":"1","normative":true,"shortname":"service-workers","spec":"service-workers","status":"current","text":"storage key","type":"dfn","url":"https://w3c.github.io/ServiceWorker/#service-worker-registration-storage-key"},
"https://w3c.github.io/beacon/#beacon": {"displayText":"beacon","export":true,"for_":[],"level":"","normative":true,"shortname":"beacon","spec":"beacon","status":"anchor-block","text":"beacon","type":"dfn","url":"https://w3c.github.io/beacon/#beacon"},
"https://w3c.github.io/hr-time/#dfn-current-wall-time": {"displayText":"current wall time","export":true,"for_":[],"level":"","normative":true,"shortname":"hr-time","spec":"hr-time","status":"anchor-block","text":"current wall time","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-current-wall-time"},
"https://w3c.github.io/hr-time/#dfn-duration": {"displayText":"duration","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"duration","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-duration"},
"https://w3c.github.io/hr-time/#dfn-eso-current-wall-time": {"displayText":"current wall time","export":true,"for_":["environment settings object"],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"current wall time","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-eso-current-wall-time"},
"https://w3c.github.io/hr-time/#dfn-unix-epoch": {"displayText":"unix epoch","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"unix epoch","type":"dfn","url":"https://w3c.github.io/hr-time/#dfn-unix-epoch"},
"https://w3c.github.io/hr-time/#dom-domhighrestimestamp": {"displayText":"DOMHighResTimeStamp","export":true,"for_":[],"level":"3","normative":true,"shortname":"hr-time","spec":"hr-time-3","status":"current","text":"DOMHighResTimeStamp","type":"typedef","url":"https://w3c.github.io/hr-time/#dom-domhighrestimestamp"},
"https://w3c.github.io/i18n-glossary/#dfn-unicode": {"displayText":"unicode","export":true,"for_":[],"level":"1","normative":false,"shortname":"i18n-glossary","spec":"i18n-glossary","status":"current","text":"unicode","type":"dfn","url":"https://w3c.github.io/i18n-glossary/#dfn-unicode"},
"https://w3c.github.io/media-source/#dom-appendmode-sequence": {"displayText":"sequence","export":true,"for_":["AppendMode"],"level":"2","normative":true,"shortname":"media-source","spec":"media-source-2","status":"current","text":"sequence","type":"enum-value","url":"https://w3c.github.io/media-source/#dom-appendmode-sequence"},
"https://w3c.github.io/web-locks/#dictdef-lockoptions": {"displayText":"LockOptions","export":true,"for_":[],"level":"1","normative":true,"shortname":"web-locks","spec":"web-locks","status":"current","text":"LockOptions","type":"dictionary","url":"https://w3c.github.io/web-locks/#dictdef-lockoptions"},
"https://w3c.github.io/web-locks/#dom-lockoptions-ifavailable": {"displayText":"ifAvailable","export":true,"for_":["LockOptions"],"level":"1","normative":true,"shortname":"web-locks","spec":"web-locks","status":"current","text":"ifAvailable","type":"dict-member","url":"https://w3c.github.io/web-locks/#dom-lockoptions-ifavailable"},
"https://w3c.github.io/web-locks/#dom-lockoptions-mode": {"displayText":"mode","export":true,"for_":["LockOptions"],"level":"1","normative":true,"shortname":"web-locks","spec":"web-locks","status":"current","text":"mode","type":"dict-member","url":"https://w3c.github.io/web-locks/#dom-lockoptions-mode"},
"https://w3c.github.io/web-locks/#dom-lockoptions-signal": {"displayText":"signal","export":true,"for_":["LockOptions"],"level":"1","normative":true,"shortname":"web-locks","spec":"web-locks","status":"current","text":"signal","type":"dict-member","url":"https://w3c.github.io/web-locks/#dom-lockoptions-signal"},
"https://w3c.github.io/web-locks/#dom-lockoptions-steal": {"displayText":"steal","export":true,"for_":["LockOptions"],"level":"1","normative":true,"shortname":"web-locks","spec":"web-locks","status":"current","text":"steal","type":"dict-member","url":"https://w3c.github.io/web-locks/#dom-lockoptions-steal"},
"https://w3c.github.io/web-locks/#lock-manager": {"displayText":"lock manager","export":true,"for_":[],"level":"","normative":true,"shortname":"web-locks","spec":"web-locks","status":"anchor-block","text":"lock manager","type":"dfn","url":"https://w3c.github.io/web-locks/#lock-manager"},
"https://w3c.github.io/web-locks/#navigatorlocks": {"displayText":"NavigatorLocks","export":true,"for_":[],"level":"1","normative":true,"shortname":"web-locks","spec":"web-locks","status":"current","text":"NavigatorLocks","type":"interface","url":"https://w3c.github.io/web-locks/#navigatorlocks"},
"https://w3c.github.io/web-locks/#obtain-a-lock-manager": {"displayText":"obtain a lock manager","export":true,"for_":[],"level":"","normative":true,"shortname":"web-locks","spec":"web-locks","status":"anchor-block","text":"obtain a lock manager","type":"dfn","url":"https://w3c.github.io/web-locks/#obtain-a-lock-manager"},
"https://w3c.github.io/web-locks/#request-a-lock": {"displayText":"request a lock","export":true,"for_":[],"level":"","normative":true,"shortname":"web-locks","spec":"web-locks","status":"anchor-block","text":"request a lock","type":"dfn","url":"https://w3c.github.io/web-locks/#request-a-lock"},
"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature": {"displayText":"policy-controlled feature","export":true,"for_":[],"level":"1","normative":true,"shortname":"permissions-policy","spec":"permissions-policy-1","status":"current","text":"policy-controlled feature","type":"dfn","url":"https://w3c.github.io/webappsec-permissions-policy/#policy-controlled-feature"},
"https://webidl.spec.whatwg.org#a-promise-rejected-with": {"displayText":"promise rejected","export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"promise rejected","type":"dfn","url":"https://webidl.spec.whatwg.org#a-promise-rejected-with"},
"https://webidl.spec.whatwg.org#idl-async-iterable": {"displayText":"async iterator","export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"async iterator","type":"dfn","url":"https://webidl.spec.whatwg.org#idl-async-iterable"},
"https://webidl.spec.whatwg.org#idl-promise": {"displayText":"promise","export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"promise","type":"dfn","url":"https://webidl.spec.whatwg.org#idl-promise"},
"https://webidl.spec.whatwg.org#introduction": {"displayText":"Web IDL Standard","export":true,"for_":[],"level":"","normative":true,"shortname":"webidl","spec":"webidl","status":"anchor-block","text":"web idl standard","type":"dfn","url":"https://webidl.spec.whatwg.org#introduction"},
"https://webidl.spec.whatwg.org/#EnforceRange": {"displayText":"EnforceRange","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"EnforceRange","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#EnforceRange"},
"https://webidl.spec.whatwg.org/#Exposed": {"displayText":"Exposed","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Exposed","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Exposed"},
"https://webidl.spec.whatwg.org/#Function": {"displayText":"Function","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Function","type":"callback","url":"https://webidl.spec.whatwg.org/#Function"},
"https://webidl.spec.whatwg.org/#Global": {"displayText":"Global","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Global","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#Global"},
"https://webidl.spec.whatwg.org/#SecureContext": {"displayText":"SecureContext","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"SecureContext","type":"extended-attribute","url":"https://webidl.spec.whatwg.org/#SecureContext"},
"https://webidl.spec.whatwg.org/#a-new-promise": {"displayText":"a new promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a new promise","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-new-promise"},
"https://webidl.spec.whatwg.org/#a-promise-rejected-with": {"displayText":"a promise rejected with","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"a promise rejected with","type":"dfn","url":"https://webidl.spec.whatwg.org/#a-promise-rejected-with"},
"https://webidl.spec.whatwg.org/#an-exception-was-thrown": {"displayText":"an exception was thrown","export":false,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"an exception was thrown","type":"dfn","url":"https://webidl.spec.whatwg.org/#an-exception-was-thrown"},
"https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps": {"displayText":"asynchronous iterator initialization steps","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"asynchronous iterator initialization steps","type":"dfn","url":"https://webidl.spec.whatwg.org/#asynchronous-iterator-initialization-steps"},
"https://webidl.spec.whatwg.org/#construct-a-callback-function": {"displayText":"construct","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"construct","type":"dfn","url":"https://webidl.spec.whatwg.org/#construct-a-callback-function"},
"https://webidl.spec.whatwg.org/#dfn-associated-realm": {"displayText":"associated realm","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"associated realm","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-associated-realm"},
"https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value": {"displayText":"converted to an IDL value","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"converted to an idl value","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-convert-ecmascript-to-idl-value"},
"https://webidl.spec.whatwg.org/#dfn-dictionary": {"displayText":"dictionary","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"dictionary","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-dictionary"},
"https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result": {"displayText":"get the next iteration result","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"get the next iteration result","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-get-the-next-iteration-result"},
"https://webidl.spec.whatwg.org/#dfn-interface": {"displayText":"interface","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"interface","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-interface"},
"https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled": {"displayText":"react","export":true,"for_":["promise"],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"react","type":"dfn","url":"https://webidl.spec.whatwg.org/#dfn-perform-steps-once-promise-is-settled"},
"https://webidl.spec.whatwg.org/#exceptiondef-typeerror": {"displayText":"TypeError","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"TypeError","type":"exception","url":"https://webidl.spec.whatwg.org/#exceptiondef-typeerror"},
"https://webidl.spec.whatwg.org/#getter-steps": {"displayText":"getter steps","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"getter steps","type":"dfn","url":"https://webidl.spec.whatwg.org/#getter-steps"},
"https://webidl.spec.whatwg.org/#idl-DOMException": {"displayText":"DOMException","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMException","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMException"},
"https://webidl.spec.whatwg.org/#idl-DOMString": {"displayText":"DOMString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"DOMString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-DOMString"},
"https://webidl.spec.whatwg.org/#idl-USVString": {"displayText":"USVString","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"USVString","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-USVString"},
"https://webidl.spec.whatwg.org/#idl-any": {"displayText":"any","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"any","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-any"},
"https://webidl.spec.whatwg.org/#idl-boolean": {"displayText":"boolean","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"boolean","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-boolean"},
"https://webidl.spec.whatwg.org/#idl-double": {"displayText":"double","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"double","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-double"},
"https://webidl.spec.whatwg.org/#idl-long": {"displayText":"long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-long"},
"https://webidl.spec.whatwg.org/#idl-object": {"displayText":"object","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"object","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-object"},
"https://webidl.spec.whatwg.org/#idl-promise": {"displayText":"Promise","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"Promise","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-promise"},
"https://webidl.spec.whatwg.org/#idl-sequence": {"displayText":"sequence","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"sequence","type":"dfn","url":"https://webidl.spec.whatwg.org/#idl-sequence"},
"https://webidl.spec.whatwg.org/#idl-undefined": {"displayText":"undefined","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"undefined","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-undefined"},
"https://webidl.spec.whatwg.org/#idl-unsigned-long": {"displayText":"unsigned long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"unsigned long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-unsigned-long"},
"https://webidl.spec.whatwg.org/#idl-unsigned-long-long": {"displayText":"unsigned long long","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"unsigned long long","type":"interface","url":"https://webidl.spec.whatwg.org/#idl-unsigned-long-long"},
"https://webidl.spec.whatwg.org/#interface-mixin": {"displayText":"interface mixin","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"interface mixin","type":"dfn","url":"https://webidl.spec.whatwg.org/#interface-mixin"},
"https://webidl.spec.whatwg.org/#invoke-a-callback-function": {"displayText":"invoke","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"invoke","type":"dfn","url":"https://webidl.spec.whatwg.org/#invoke-a-callback-function"},
"https://webidl.spec.whatwg.org/#reject": {"displayText":"reject","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"reject","type":"dfn","url":"https://webidl.spec.whatwg.org/#reject"},
"https://webidl.spec.whatwg.org/#resolve": {"displayText":"resolve","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"resolve","type":"dfn","url":"https://webidl.spec.whatwg.org/#resolve"},
"https://webidl.spec.whatwg.org/#this": {"displayText":"this","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"this","type":"dfn","url":"https://webidl.spec.whatwg.org/#this"},
"https://webidl.spec.whatwg.org/#upon-fulfillment": {"displayText":"upon fulfillment","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"upon fulfillment","type":"dfn","url":"https://webidl.spec.whatwg.org/#upon-fulfillment"},
"https://webidl.spec.whatwg.org/#upon-rejection": {"displayText":"upon rejection","export":true,"for_":[],"level":"1","normative":true,"shortname":"webidl","spec":"webidl","status":"current","text":"upon rejection","type":"dfn","url":"https://webidl.spec.whatwg.org/#upon-rejection"},
"https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance": {"displayText":"fenced frame config instance","export":false,"for_":["browsing context"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"fenced frame config instance","type":"dfn","url":"https://wicg.github.io/fenced-frame/#browsing-context-fenced-frame-config-instance"},
"https://wicg.github.io/fenced-frame/#dictdef-fenceevent": {"displayText":"FenceEvent","export":true,"for_":[],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"FenceEvent","type":"dictionary","url":"https://wicg.github.io/fenced-frame/#dictdef-fenceevent"},
"https://wicg.github.io/fenced-frame/#dom-fence-reportevent": {"displayText":"reportEvent()","export":true,"for_":["Fence"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"reportEvent()","type":"method","url":"https://wicg.github.io/fenced-frame/#dom-fence-reportevent"},
"https://wicg.github.io/fenced-frame/#dom-fenceevent-destination": {"displayText":"destination","export":true,"for_":["FenceEvent"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"destination","type":"dict-member","url":"https://wicg.github.io/fenced-frame/#dom-fenceevent-destination"},
"https://wicg.github.io/fenced-frame/#dom-fenceevent-eventdata": {"displayText":"eventData","export":true,"for_":["FenceEvent"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"eventData","type":"dict-member","url":"https://wicg.github.io/fenced-frame/#dom-fenceevent-eventdata"},
"https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype": {"displayText":"eventType","export":true,"for_":["FenceEvent"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"eventType","type":"dict-member","url":"https://wicg.github.io/fenced-frame/#dom-fenceevent-eventtype"},
"https://wicg.github.io/fenced-frame/#fenced-frame-config": {"displayText":"fenced frame config","export":true,"for_":[],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"fenced frame config","type":"dfn","url":"https://wicg.github.io/fenced-frame/#fenced-frame-config"},
"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapped-url": {"displayText":"mapped url","export":true,"for_":["fenced frame config"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"mapped url","type":"dfn","url":"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapped-url"},
"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-finalize-a-pending-config": {"displayText":"finalize a pending config","export":true,"for_":["fenced frame config mapping"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"finalize a pending config","type":"dfn","url":"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-finalize-a-pending-config"},
"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-store-a-pending-config": {"displayText":"store a pending config","export":true,"for_":["fenced frame config mapping"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"store a pending config","type":"dfn","url":"https://wicg.github.io/fenced-frame/#fenced-frame-config-mapping-store-a-pending-config"},
"https://wicg.github.io/fenced-frame/#fencedframeconfig": {"displayText":"FencedFrameConfig","export":true,"for_":[],"level":"","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"anchor-block","text":"FencedFrameConfig","type":"interface","url":"https://wicg.github.io/fenced-frame/#fencedframeconfig"},
"https://wicg.github.io/fenced-frame/#fencedframetype-fenced-frame-reporter": {"displayText":"fenced frame reporter","export":true,"for_":["fencedframetype"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"fenced frame reporter","type":"dfn","url":"https://wicg.github.io/fenced-frame/#fencedframetype-fenced-frame-reporter"},
"https://wicg.github.io/fenced-frame/#the-fencedframe-element": {"displayText":"fenced frame","export":true,"for_":[],"level":"","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"anchor-block","text":"fenced frame","type":"dfn","url":"https://wicg.github.io/fenced-frame/#the-fencedframe-element"},
"https://wicg.github.io/fenced-frame/#traversable-navigable-fenced-frame-config-mapping": {"displayText":"fenced frame config mapping","export":true,"for_":["traversable navigable"],"level":"1","normative":true,"shortname":"fenced-frame","spec":"fenced-frame","status":"current","text":"fenced frame config mapping","type":"dfn","url":"https://wicg.github.io/fenced-frame/#traversable-navigable-fenced-frame-config-mapping"},
"https://wicg.github.io/turtledove/#dictdef-storageinterestgroup": {"displayText":"StorageInterestGroup","export":true,"for_":[],"level":"","normative":true,"shortname":"protected-audience","spec":"protected-audience","status":"anchor-block","text":"StorageInterestGroup","type":"interface","url":"https://wicg.github.io/turtledove/#dictdef-storageinterestgroup"},
"https://wicg.github.io/turtledove/#get-storage-interest-groups-for-owner": {"displayText":"get storage interest groups for owner","export":true,"for_":[],"level":"","normative":true,"shortname":"protected-audience","spec":"protected-audience","status":"anchor-block","text":"get storage interest groups for owner","type":"dfn","url":"https://wicg.github.io/turtledove/#get-storage-interest-groups-for-owner"},
"https://www.ietf.org/rfc/rfc4122.txt#urn-uuid": {"displayText":"urn uuid","export":true,"for_":[],"level":"1","normative":true,"shortname":"sharedstorage","spec":"","status":"anchor-block","text":"urn uuid","type":"dfn","url":"https://www.ietf.org/rfc/rfc4122.txt#urn-uuid"},
"https://www.w3.org/TR/permissions-policy/#algo-is-feature-enabled": {"displayText":"Is feature enabled in document for origin?","export":true,"for_":[],"level":"","normative":true,"shortname":"permissions-policy","spec":"permissions-policy","status":"anchor-block","text":"is feature enabled in document for origin?","type":"dfn","url":"https://www.w3.org/TR/permissions-policy/#algo-is-feature-enabled"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>
<script>/* Boilerplate: script-var-click-highlighting */
"use strict";
{
/*
Color-choosing design:

* Colors are ordered by goodness.
* On clicking a var, give it the earliest color
    with the lowest usage in the algorithm.
* On re-clicking, re-use the var's most recent color
    if that's not currently being used elsewhere.
*/

const COLOR_COUNT = 7;

document.addEventListener("click", e=>{
    if(e.target.nodeName == "VAR") {
        highlightSameAlgoVars(e.target);
    }
});

function highlightSameAlgoVars(v) {
    // Find the algorithm container.
    let algoContainer = findAlgoContainer(v);

    // Not highlighting document-global vars,
    // too likely to be unrelated.
    if(algoContainer == null) return;

    const varName = nameFromVar(v);
    if(!v.hasAttribute("data-var-color")) {
        const newColor = chooseHighlightColor(algoContainer, v);
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.setAttribute("data-var-color", newColor);
                el.setAttribute("data-var-last-color", newColor);
            }
        }
    } else {
        for(const el of algoContainer.querySelectorAll("var")) {
            if(nameFromVar(el) == varName) {
                el.removeAttribute("data-var-color");
            }
        }
    }
}
function findAlgoContainer(el) {
    while(el != document.body) {
        if(el.hasAttribute("data-algorithm")) return el;
        el = el.parentNode;
    }
    return null;
}
function nameFromVar(el) {
    return el.textContent.replace(/(\s|\xa0)+/g, " ").trim();
}
function colorCountsFromContainer(container) {
    const namesFromColor = Array.from({length:COLOR_COUNT}, x=>new Set());
    for(let v of container.querySelectorAll("var[data-var-color]")) {
        let color = +v.getAttribute("data-var-color");
        namesFromColor[color].add(nameFromVar(v));
    }

    return namesFromColor.map(x=>x.size);
}
function leastUsedColor(colors) {
    // Find the earliest color with the lowest count.
    let minCount = Infinity;
    let minColor = null;
    for(var i = 0; i < colors.length; i++) {
        if(colors[i] < minCount) {
            minColor = i;
            minCount = colors[i];
        }
    }
    return minColor;
}
function chooseHighlightColor(container, v) {
    const colorCounts = colorCountsFromContainer(container);
    if(v.hasAttribute("data-var-last-color")) {
        let color = +v.getAttribute("data-var-last-color");
        if(colorCounts[color] == 0) return color;
    }
    return leastUsedColor(colorCounts);
}
}
</script>